{"mappings":"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,EACjBirE,EAAK1sE,EAAA,GAAAuvB,EAAiBrN,EACxBljB,KAAA+1J,YAAAxlI,SAAA1Q,aAAA,EAEA7f,KAAM+1J,YAAY1B,SAAAx0I,aAAmB,EACnC7f,KAAA+1J,YAAAroF,KAAA7tD,aAAA,C,IAEAq2I,YAAkB,cAAe,CACjC,GACAlC,EAAAkC,YAAA7tG,wBACA2rG,EAAAkC,YAAAjvG,gBACA,GACA,2BACA,uBACA,wBACA,yBACA,4BACA,GACA,2BACA,2BACA,sBACA,yBACA,iCACA,GACA,oBACA,uBACA,2BACA,GACA,qCACA,GACA,6BACA,uBACA,2BACA,kBACA,GACA,IACA,GACA,gBACA,GACA,kDACA,GACA,uCACA,gBACA,GACA,mDACA,sDACA,gDACA,4CACA,GACA,oDACA,2CACA,2CACA,GACA,mCACA,GACA,gBACA,mEACA,wEACA,aACA,qDACA,qDACA,0CACA,GACA,+CACA,8CACA,6EACA,GACA,QACA,GACA,2EACA,mDACA,2BACA,kCACA,oCACA,wCACA,6EACA,QACA,GACA,4CACA,GACA,mCACA,GACA+sG,EAAAkC,YAAA5tG,mBACA0rG,EAAKkC,YAAAlvG,YAAA,iEAEPgtG,EAAMkC,YAAYlvG,WAChB,K,KACA,M,EACAkvG,YAAkB,eAClB,GACAlC,EAAAkC,YAAA/uG,kBACA6sG,EAAAkC,YAAA9tG,0BACA,GACA,yBACA,8BACA,wBACA,6BACA,yBACA,2BACA,4BACA,2BACA,4BACA,2BACA,uBACA,GACA,oBACA,uBACA,2BACA,GACA,gBACA,GACA4rG,EAAAkC,YAAA/tG,qBACA,GACA,uBACA,8DACA,4EACA,qCACA,2BACA,yFACA,QACA,wBACA,qDACA,GAEF6rG,EAAMkC,YAAAhvG,aACJ,K,2BAGqB8sG,EAAQmC,e,YACvB9xH,G,gBAAsBvgC,OAAA4hB,OAAA,GAAAsuI,EAAAoC,YAAAxnH,IAAA,CACtBq6C,UAAK,CAAEhnF,MAAO,GACdiqC,IAAA,CAAUjqC,MAAO,MACjBo0J,OAAA,CAAYp0J,MAAO,GACnBmqC,SAAA,CAAenqC,MAAO,M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","sources":["node_modules/three/build/three.module.js","node_modules/three.meshline/src/THREE.MeshLine.js","src/index.ts","node_modules/three/examples/jsm/controls/OrbitControls.js","node_modules/tweakpane/dist/tweakpane.js","node_modules/@tweakpane/plugin-essentials/dist/tweakpane-plugin-essentials.js","node_modules/tweakpane-plugin-infodump/dist/tweakpane-plugin-infodump.js","src/ObjectPool.ts","src/Gui.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2010-2022 Three.js Authors\n * SPDX-License-Identifier: MIT\n */\nconst REVISION = '148';\nconst MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2, ROTATE: 0, DOLLY: 1, PAN: 2 };\nconst TOUCH = { ROTATE: 0, PAN: 1, DOLLY_PAN: 2, DOLLY_ROTATE: 3 };\nconst CullFaceNone = 0;\nconst CullFaceBack = 1;\nconst CullFaceFront = 2;\nconst CullFaceFrontBack = 3;\nconst BasicShadowMap = 0;\nconst PCFShadowMap = 1;\nconst PCFSoftShadowMap = 2;\nconst VSMShadowMap = 3;\nconst FrontSide = 0;\nconst BackSide = 1;\nconst DoubleSide = 2;\nconst TwoPassDoubleSide = 3;\nconst NoBlending = 0;\nconst NormalBlending = 1;\nconst AdditiveBlending = 2;\nconst SubtractiveBlending = 3;\nconst MultiplyBlending = 4;\nconst CustomBlending = 5;\nconst AddEquation = 100;\nconst SubtractEquation = 101;\nconst ReverseSubtractEquation = 102;\nconst MinEquation = 103;\nconst MaxEquation = 104;\nconst ZeroFactor = 200;\nconst OneFactor = 201;\nconst SrcColorFactor = 202;\nconst OneMinusSrcColorFactor = 203;\nconst SrcAlphaFactor = 204;\nconst OneMinusSrcAlphaFactor = 205;\nconst DstAlphaFactor = 206;\nconst OneMinusDstAlphaFactor = 207;\nconst DstColorFactor = 208;\nconst OneMinusDstColorFactor = 209;\nconst SrcAlphaSaturateFactor = 210;\nconst NeverDepth = 0;\nconst AlwaysDepth = 1;\nconst LessDepth = 2;\nconst LessEqualDepth = 3;\nconst EqualDepth = 4;\nconst GreaterEqualDepth = 5;\nconst GreaterDepth = 6;\nconst NotEqualDepth = 7;\nconst MultiplyOperation = 0;\nconst MixOperation = 1;\nconst AddOperation = 2;\nconst NoToneMapping = 0;\nconst LinearToneMapping = 1;\nconst ReinhardToneMapping = 2;\nconst CineonToneMapping = 3;\nconst ACESFilmicToneMapping = 4;\nconst CustomToneMapping = 5;\n\nconst UVMapping = 300;\nconst CubeReflectionMapping = 301;\nconst CubeRefractionMapping = 302;\nconst EquirectangularReflectionMapping = 303;\nconst EquirectangularRefractionMapping = 304;\nconst CubeUVReflectionMapping = 306;\nconst RepeatWrapping = 1000;\nconst ClampToEdgeWrapping = 1001;\nconst MirroredRepeatWrapping = 1002;\nconst NearestFilter = 1003;\nconst NearestMipmapNearestFilter = 1004;\nconst NearestMipMapNearestFilter = 1004;\nconst NearestMipmapLinearFilter = 1005;\nconst NearestMipMapLinearFilter = 1005;\nconst LinearFilter = 1006;\nconst LinearMipmapNearestFilter = 1007;\nconst LinearMipMapNearestFilter = 1007;\nconst LinearMipmapLinearFilter = 1008;\nconst LinearMipMapLinearFilter = 1008;\nconst UnsignedByteType = 1009;\nconst ByteType = 1010;\nconst ShortType = 1011;\nconst UnsignedShortType = 1012;\nconst IntType = 1013;\nconst UnsignedIntType = 1014;\nconst FloatType = 1015;\nconst HalfFloatType = 1016;\nconst UnsignedShort4444Type = 1017;\nconst UnsignedShort5551Type = 1018;\nconst UnsignedInt248Type = 1020;\nconst AlphaFormat = 1021;\nconst RGBFormat = 1022; // @deprecated since r137\nconst RGBAFormat = 1023;\nconst LuminanceFormat = 1024;\nconst LuminanceAlphaFormat = 1025;\nconst DepthFormat = 1026;\nconst DepthStencilFormat = 1027;\nconst RedFormat = 1028;\nconst RedIntegerFormat = 1029;\nconst RGFormat = 1030;\nconst RGIntegerFormat = 1031;\nconst RGBAIntegerFormat = 1033;\n\nconst RGB_S3TC_DXT1_Format = 33776;\nconst RGBA_S3TC_DXT1_Format = 33777;\nconst RGBA_S3TC_DXT3_Format = 33778;\nconst RGBA_S3TC_DXT5_Format = 33779;\nconst RGB_PVRTC_4BPPV1_Format = 35840;\nconst RGB_PVRTC_2BPPV1_Format = 35841;\nconst RGBA_PVRTC_4BPPV1_Format = 35842;\nconst RGBA_PVRTC_2BPPV1_Format = 35843;\nconst RGB_ETC1_Format = 36196;\nconst RGB_ETC2_Format = 37492;\nconst RGBA_ETC2_EAC_Format = 37496;\nconst RGBA_ASTC_4x4_Format = 37808;\nconst RGBA_ASTC_5x4_Format = 37809;\nconst RGBA_ASTC_5x5_Format = 37810;\nconst RGBA_ASTC_6x5_Format = 37811;\nconst RGBA_ASTC_6x6_Format = 37812;\nconst RGBA_ASTC_8x5_Format = 37813;\nconst RGBA_ASTC_8x6_Format = 37814;\nconst RGBA_ASTC_8x8_Format = 37815;\nconst RGBA_ASTC_10x5_Format = 37816;\nconst RGBA_ASTC_10x6_Format = 37817;\nconst RGBA_ASTC_10x8_Format = 37818;\nconst RGBA_ASTC_10x10_Format = 37819;\nconst RGBA_ASTC_12x10_Format = 37820;\nconst RGBA_ASTC_12x12_Format = 37821;\nconst RGBA_BPTC_Format = 36492;\nconst LoopOnce = 2200;\nconst LoopRepeat = 2201;\nconst LoopPingPong = 2202;\nconst InterpolateDiscrete = 2300;\nconst InterpolateLinear = 2301;\nconst InterpolateSmooth = 2302;\nconst ZeroCurvatureEnding = 2400;\nconst ZeroSlopeEnding = 2401;\nconst WrapAroundEnding = 2402;\nconst NormalAnimationBlendMode = 2500;\nconst AdditiveAnimationBlendMode = 2501;\nconst TrianglesDrawMode = 0;\nconst TriangleStripDrawMode = 1;\nconst TriangleFanDrawMode = 2;\nconst LinearEncoding = 3000;\nconst sRGBEncoding = 3001;\nconst BasicDepthPacking = 3200;\nconst RGBADepthPacking = 3201;\nconst TangentSpaceNormalMap = 0;\nconst ObjectSpaceNormalMap = 1;\n\n// Color space string identifiers, matching CSS Color Module Level 4 and WebGPU names where available.\nconst NoColorSpace = '';\nconst SRGBColorSpace = 'srgb';\nconst LinearSRGBColorSpace = 'srgb-linear';\n\nconst ZeroStencilOp = 0;\nconst KeepStencilOp = 7680;\nconst ReplaceStencilOp = 7681;\nconst IncrementStencilOp = 7682;\nconst DecrementStencilOp = 7683;\nconst IncrementWrapStencilOp = 34055;\nconst DecrementWrapStencilOp = 34056;\nconst InvertStencilOp = 5386;\n\nconst NeverStencilFunc = 512;\nconst LessStencilFunc = 513;\nconst EqualStencilFunc = 514;\nconst LessEqualStencilFunc = 515;\nconst GreaterStencilFunc = 516;\nconst NotEqualStencilFunc = 517;\nconst GreaterEqualStencilFunc = 518;\nconst AlwaysStencilFunc = 519;\n\nconst StaticDrawUsage = 35044;\nconst DynamicDrawUsage = 35048;\nconst StreamDrawUsage = 35040;\nconst StaticReadUsage = 35045;\nconst DynamicReadUsage = 35049;\nconst StreamReadUsage = 35041;\nconst StaticCopyUsage = 35046;\nconst DynamicCopyUsage = 35050;\nconst StreamCopyUsage = 35042;\n\nconst GLSL1 = '100';\nconst GLSL3 = '300 es';\n\nconst _SRGBAFormat = 1035; // fallback for WebGL 1\n\n/**\n * https://github.com/mrdoob/eventdispatcher.js/\n */\n\nclass EventDispatcher {\n\n\taddEventListener( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) this._listeners = {};\n\n\t\tconst listeners = this._listeners;\n\n\t\tif ( listeners[ type ] === undefined ) {\n\n\t\t\tlisteners[ type ] = [];\n\n\t\t}\n\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\n\n\t\t\tlisteners[ type ].push( listener );\n\n\t\t}\n\n\t}\n\n\thasEventListener( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return false;\n\n\t\tconst listeners = this._listeners;\n\n\t\treturn listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1;\n\n\t}\n\n\tremoveEventListener( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tconst listeners = this._listeners;\n\t\tconst listenerArray = listeners[ type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tconst index = listenerArray.indexOf( listener );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\tlistenerArray.splice( index, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tdispatchEvent( event ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tconst listeners = this._listeners;\n\t\tconst listenerArray = listeners[ event.type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tevent.target = this;\n\n\t\t\t// Make a copy, in case listeners are removed while iterating.\n\t\t\tconst array = listenerArray.slice( 0 );\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tarray[ i ].call( this, event );\n\n\t\t\t}\n\n\t\t\tevent.target = null;\n\n\t\t}\n\n\t}\n\n}\n\nconst _lut = [ '00', '01', '02', '03', '04', '05', '06', '07', '08', '09', '0a', '0b', '0c', '0d', '0e', '0f', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '1a', '1b', '1c', '1d', '1e', '1f', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '2a', '2b', '2c', '2d', '2e', '2f', '30', '31', '32', '33', '34', '35', '36', '37', '38', '39', '3a', '3b', '3c', '3d', '3e', '3f', '40', '41', '42', '43', '44', '45', '46', '47', '48', '49', '4a', '4b', '4c', '4d', '4e', '4f', '50', '51', '52', '53', '54', '55', '56', '57', '58', '59', '5a', '5b', '5c', '5d', '5e', '5f', '60', '61', '62', '63', '64', '65', '66', '67', '68', '69', '6a', '6b', '6c', '6d', '6e', '6f', '70', '71', '72', '73', '74', '75', '76', '77', '78', '79', '7a', '7b', '7c', '7d', '7e', '7f', '80', '81', '82', '83', '84', '85', '86', '87', '88', '89', '8a', '8b', '8c', '8d', '8e', '8f', '90', '91', '92', '93', '94', '95', '96', '97', '98', '99', '9a', '9b', '9c', '9d', '9e', '9f', 'a0', 'a1', 'a2', 'a3', 'a4', 'a5', 'a6', 'a7', 'a8', 'a9', 'aa', 'ab', 'ac', 'ad', 'ae', 'af', 'b0', 'b1', 'b2', 'b3', 'b4', 'b5', 'b6', 'b7', 'b8', 'b9', 'ba', 'bb', 'bc', 'bd', 'be', 'bf', 'c0', 'c1', 'c2', 'c3', 'c4', 'c5', 'c6', 'c7', 'c8', 'c9', 'ca', 'cb', 'cc', 'cd', 'ce', 'cf', 'd0', 'd1', 'd2', 'd3', 'd4', 'd5', 'd6', 'd7', 'd8', 'd9', 'da', 'db', 'dc', 'dd', 'de', 'df', 'e0', 'e1', 'e2', 'e3', 'e4', 'e5', 'e6', 'e7', 'e8', 'e9', 'ea', 'eb', 'ec', 'ed', 'ee', 'ef', 'f0', 'f1', 'f2', 'f3', 'f4', 'f5', 'f6', 'f7', 'f8', 'f9', 'fa', 'fb', 'fc', 'fd', 'fe', 'ff' ];\n\nlet _seed = 1234567;\n\n\nconst DEG2RAD = Math.PI / 180;\nconst RAD2DEG = 180 / Math.PI;\n\n// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\nfunction generateUUID() {\n\n\tconst d0 = Math.random() * 0xffffffff | 0;\n\tconst d1 = Math.random() * 0xffffffff | 0;\n\tconst d2 = Math.random() * 0xffffffff | 0;\n\tconst d3 = Math.random() * 0xffffffff | 0;\n\tconst uuid = _lut[ d0 & 0xff ] + _lut[ d0 >> 8 & 0xff ] + _lut[ d0 >> 16 & 0xff ] + _lut[ d0 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d1 & 0xff ] + _lut[ d1 >> 8 & 0xff ] + '-' + _lut[ d1 >> 16 & 0x0f | 0x40 ] + _lut[ d1 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d2 & 0x3f | 0x80 ] + _lut[ d2 >> 8 & 0xff ] + '-' + _lut[ d2 >> 16 & 0xff ] + _lut[ d2 >> 24 & 0xff ] +\n\t\t\t_lut[ d3 & 0xff ] + _lut[ d3 >> 8 & 0xff ] + _lut[ d3 >> 16 & 0xff ] + _lut[ d3 >> 24 & 0xff ];\n\n\t// .toLowerCase() here flattens concatenated strings to save heap memory space.\n\treturn uuid.toLowerCase();\n\n}\n\nfunction clamp( value, min, max ) {\n\n\treturn Math.max( min, Math.min( max, value ) );\n\n}\n\n// compute euclidean modulo of m % n\n// https://en.wikipedia.org/wiki/Modulo_operation\nfunction euclideanModulo( n, m ) {\n\n\treturn ( ( n % m ) + m ) % m;\n\n}\n\n// Linear mapping from range <a1, a2> to range <b1, b2>\nfunction mapLinear( x, a1, a2, b1, b2 ) {\n\n\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n}\n\n// https://www.gamedev.net/tutorials/programming/general-and-gameplay-programming/inverse-lerp-a-super-useful-yet-often-overlooked-function-r5230/\nfunction inverseLerp( x, y, value ) {\n\n\tif ( x !== y ) {\n\n\t\treturn ( value - x ) / ( y - x );\n\n\t} else {\n\n\t\treturn 0;\n\n\t}\n\n}\n\n// https://en.wikipedia.org/wiki/Linear_interpolation\nfunction lerp( x, y, t ) {\n\n\treturn ( 1 - t ) * x + t * y;\n\n}\n\n// http://www.rorydriscoll.com/2016/03/07/frame-rate-independent-damping-using-lerp/\nfunction damp( x, y, lambda, dt ) {\n\n\treturn lerp( x, y, 1 - Math.exp( - lambda * dt ) );\n\n}\n\n// https://www.desmos.com/calculator/vcsjnyz7x4\nfunction pingpong( x, length = 1 ) {\n\n\treturn length - Math.abs( euclideanModulo( x, length * 2 ) - length );\n\n}\n\n// http://en.wikipedia.org/wiki/Smoothstep\nfunction smoothstep( x, min, max ) {\n\n\tif ( x <= min ) return 0;\n\tif ( x >= max ) return 1;\n\n\tx = ( x - min ) / ( max - min );\n\n\treturn x * x * ( 3 - 2 * x );\n\n}\n\nfunction smootherstep( x, min, max ) {\n\n\tif ( x <= min ) return 0;\n\tif ( x >= max ) return 1;\n\n\tx = ( x - min ) / ( max - min );\n\n\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n}\n\n// Random integer from <low, high> interval\nfunction randInt( low, high ) {\n\n\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n}\n\n// Random float from <low, high> interval\nfunction randFloat( low, high ) {\n\n\treturn low + Math.random() * ( high - low );\n\n}\n\n// Random float from <-range/2, range/2> interval\nfunction randFloatSpread( range ) {\n\n\treturn range * ( 0.5 - Math.random() );\n\n}\n\n// Deterministic pseudo-random float in the interval [ 0, 1 ]\nfunction seededRandom( s ) {\n\n\tif ( s !== undefined ) _seed = s;\n\n\t// Mulberry32 generator\n\n\tlet t = _seed += 0x6D2B79F5;\n\n\tt = Math.imul( t ^ t >>> 15, t | 1 );\n\n\tt ^= t + Math.imul( t ^ t >>> 7, t | 61 );\n\n\treturn ( ( t ^ t >>> 14 ) >>> 0 ) / 4294967296;\n\n}\n\nfunction degToRad( degrees ) {\n\n\treturn degrees * DEG2RAD;\n\n}\n\nfunction radToDeg( radians ) {\n\n\treturn radians * RAD2DEG;\n\n}\n\nfunction isPowerOfTwo( value ) {\n\n\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n}\n\nfunction ceilPowerOfTwo( value ) {\n\n\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\n\n}\n\nfunction floorPowerOfTwo( value ) {\n\n\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\n\n}\n\nfunction setQuaternionFromProperEuler( q, a, b, c, order ) {\n\n\t// Intrinsic Proper Euler Angles - see https://en.wikipedia.org/wiki/Euler_angles\n\n\t// rotations are applied to the axes in the order specified by 'order'\n\t// rotation by angle 'a' is applied first, then by angle 'b', then by angle 'c'\n\t// angles are in radians\n\n\tconst cos = Math.cos;\n\tconst sin = Math.sin;\n\n\tconst c2 = cos( b / 2 );\n\tconst s2 = sin( b / 2 );\n\n\tconst c13 = cos( ( a + c ) / 2 );\n\tconst s13 = sin( ( a + c ) / 2 );\n\n\tconst c1_3 = cos( ( a - c ) / 2 );\n\tconst s1_3 = sin( ( a - c ) / 2 );\n\n\tconst c3_1 = cos( ( c - a ) / 2 );\n\tconst s3_1 = sin( ( c - a ) / 2 );\n\n\tswitch ( order ) {\n\n\t\tcase 'XYX':\n\t\t\tq.set( c2 * s13, s2 * c1_3, s2 * s1_3, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'YZY':\n\t\t\tq.set( s2 * s1_3, c2 * s13, s2 * c1_3, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'ZXZ':\n\t\t\tq.set( s2 * c1_3, s2 * s1_3, c2 * s13, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'XZX':\n\t\t\tq.set( c2 * s13, s2 * s3_1, s2 * c3_1, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'YXY':\n\t\t\tq.set( s2 * c3_1, c2 * s13, s2 * s3_1, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'ZYZ':\n\t\t\tq.set( s2 * s3_1, s2 * c3_1, c2 * s13, c2 * c13 );\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: ' + order );\n\n\t}\n\n}\n\nfunction denormalize( value, array ) {\n\n\tswitch ( array.constructor ) {\n\n\t\tcase Float32Array:\n\n\t\t\treturn value;\n\n\t\tcase Uint16Array:\n\n\t\t\treturn value / 65535.0;\n\n\t\tcase Uint8Array:\n\n\t\t\treturn value / 255.0;\n\n\t\tcase Int16Array:\n\n\t\t\treturn Math.max( value / 32767.0, - 1.0 );\n\n\t\tcase Int8Array:\n\n\t\t\treturn Math.max( value / 127.0, - 1.0 );\n\n\t\tdefault:\n\n\t\t\tthrow new Error( 'Invalid component type.' );\n\n\t}\n\n}\n\nfunction normalize( value, array ) {\n\n\tswitch ( array.constructor ) {\n\n\t\tcase Float32Array:\n\n\t\t\treturn value;\n\n\t\tcase Uint16Array:\n\n\t\t\treturn Math.round( value * 65535.0 );\n\n\t\tcase Uint8Array:\n\n\t\t\treturn Math.round( value * 255.0 );\n\n\t\tcase Int16Array:\n\n\t\t\treturn Math.round( value * 32767.0 );\n\n\t\tcase Int8Array:\n\n\t\t\treturn Math.round( value * 127.0 );\n\n\t\tdefault:\n\n\t\t\tthrow new Error( 'Invalid component type.' );\n\n\t}\n\n}\n\nvar MathUtils = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tDEG2RAD: DEG2RAD,\n\tRAD2DEG: RAD2DEG,\n\tgenerateUUID: generateUUID,\n\tclamp: clamp,\n\teuclideanModulo: euclideanModulo,\n\tmapLinear: mapLinear,\n\tinverseLerp: inverseLerp,\n\tlerp: lerp,\n\tdamp: damp,\n\tpingpong: pingpong,\n\tsmoothstep: smoothstep,\n\tsmootherstep: smootherstep,\n\trandInt: randInt,\n\trandFloat: randFloat,\n\trandFloatSpread: randFloatSpread,\n\tseededRandom: seededRandom,\n\tdegToRad: degToRad,\n\tradToDeg: radToDeg,\n\tisPowerOfTwo: isPowerOfTwo,\n\tceilPowerOfTwo: ceilPowerOfTwo,\n\tfloorPowerOfTwo: floorPowerOfTwo,\n\tsetQuaternionFromProperEuler: setQuaternionFromProperEuler,\n\tnormalize: normalize,\n\tdenormalize: denormalize\n});\n\nclass Vector2 {\n\n\tconstructor( x = 0, y = 0 ) {\n\n\t\tVector2.prototype.isVector2 = true;\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t}\n\n\tget width() {\n\n\t\treturn this.x;\n\n\t}\n\n\tset width( value ) {\n\n\t\tthis.x = value;\n\n\t}\n\n\tget height() {\n\n\t\treturn this.y;\n\n\t}\n\n\tset height( value ) {\n\n\t\tthis.y = value;\n\n\t}\n\n\tset( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v ) {\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v ) {\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\n\n\t\treturn this;\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t}\n\n\tcross( v ) {\n\n\t\treturn this.x * v.y - this.y * v.x;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tangle() {\n\n\t\t// computes the angle in radians with respect to the positive x-axis\n\n\t\tconst angle = Math.atan2( - this.y, - this.x ) + Math.PI;\n\n\t\treturn angle;\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\n\t\treturn this;\n\n\t}\n\n\trotateAround( center, angle ) {\n\n\t\tconst c = Math.cos( angle ), s = Math.sin( angle );\n\n\t\tconst x = this.x - center.x;\n\t\tconst y = this.y - center.y;\n\n\t\tthis.x = x * c - y * s + center.x;\n\t\tthis.y = x * s + y * c + center.y;\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\n\t\treturn this;\n\n\t}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this.x;\n\t\tyield this.y;\n\n\t}\n\n}\n\nclass Matrix3 {\n\n\tconstructor() {\n\n\t\tMatrix3.prototype.isMatrix3 = true;\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t];\n\n\t}\n\n\tset( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tcopy( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\n\t\tte[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\n\t\tte[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\textractBasis( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrix3Column( this, 0 );\n\t\tyAxis.setFromMatrix3Column( this, 1 );\n\t\tzAxis.setFromMatrix3Column( this, 2 );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrix4( m ) {\n\n\t\tconst me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 4 ], me[ 8 ],\n\t\t\tme[ 1 ], me[ 5 ], me[ 9 ],\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t}\n\n\tpremultiply( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t}\n\n\tmultiplyMatrices( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\n\t\tte[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\n\t\tte[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\n\t\tte[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\n\t\tte[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\n\t\tte[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\n\t\tte[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\treturn this;\n\n\t}\n\n\tdeterminant() {\n\n\t\tconst te = this.elements;\n\n\t\tconst a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t}\n\n\tinvert() {\n\n\t\tconst te = this.elements,\n\n\t\t\tn11 = te[ 0 ], n21 = te[ 1 ], n31 = te[ 2 ],\n\t\t\tn12 = te[ 3 ], n22 = te[ 4 ], n32 = te[ 5 ],\n\t\t\tn13 = te[ 6 ], n23 = te[ 7 ], n33 = te[ 8 ],\n\n\t\t\tt11 = n33 * n22 - n32 * n23,\n\t\t\tt12 = n32 * n13 - n33 * n12,\n\t\t\tt13 = n23 * n12 - n22 * n13,\n\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\n\n\t\tte[ 3 ] = t12 * detInv;\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\n\n\t\tte[ 6 ] = t13 * detInv;\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\n\n\t\treturn this;\n\n\t}\n\n\ttranspose() {\n\n\t\tlet tmp;\n\t\tconst m = this.elements;\n\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\treturn this;\n\n\t}\n\n\tgetNormalMatrix( matrix4 ) {\n\n\t\treturn this.setFromMatrix4( matrix4 ).invert().transpose();\n\n\t}\n\n\ttransposeIntoArray( r ) {\n\n\t\tconst m = this.elements;\n\n\t\tr[ 0 ] = m[ 0 ];\n\t\tr[ 1 ] = m[ 3 ];\n\t\tr[ 2 ] = m[ 6 ];\n\t\tr[ 3 ] = m[ 1 ];\n\t\tr[ 4 ] = m[ 4 ];\n\t\tr[ 5 ] = m[ 7 ];\n\t\tr[ 6 ] = m[ 2 ];\n\t\tr[ 7 ] = m[ 5 ];\n\t\tr[ 8 ] = m[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetUvTransform( tx, ty, sx, sy, rotation, cx, cy ) {\n\n\t\tconst c = Math.cos( rotation );\n\t\tconst s = Math.sin( rotation );\n\n\t\tthis.set(\n\t\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\n\t\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\n\t\t\t0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\t//\n\n\tscale( sx, sy ) {\n\n\t\tthis.premultiply( _m3.makeScale( sx, sy ) );\n\n\t\treturn this;\n\n\t}\n\n\trotate( theta ) {\n\n\t\tthis.premultiply( _m3.makeRotation( - theta ) );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( tx, ty ) {\n\n\t\tthis.premultiply( _m3.makeTranslation( tx, ty ) );\n\n\t\treturn this;\n\n\t}\n\n\t// for 2D Transforms\n\n\tmakeTranslation( x, y ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, x,\n\t\t\t0, 1, y,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotation( theta ) {\n\n\t\t// counterclockwise\n\n\t\tconst c = Math.cos( theta );\n\t\tconst s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0,\n\t\t\ts, c, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeScale( x, y ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0,\n\t\t\t0, y, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\t//\n\n\tequals( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\n\t\treturn array;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().fromArray( this.elements );\n\n\t}\n\n}\n\nconst _m3 = /*@__PURE__*/ new Matrix3();\n\nfunction arrayNeedsUint32( array ) {\n\n\t// assumes larger values usually on last\n\n\tfor ( let i = array.length - 1; i >= 0; -- i ) {\n\n\t\tif ( array[ i ] >= 65535 ) return true; // account for PRIMITIVE_RESTART_FIXED_INDEX, #24565\n\n\t}\n\n\treturn false;\n\n}\n\nconst TYPED_ARRAYS = {\n\tInt8Array: Int8Array,\n\tUint8Array: Uint8Array,\n\tUint8ClampedArray: Uint8ClampedArray,\n\tInt16Array: Int16Array,\n\tUint16Array: Uint16Array,\n\tInt32Array: Int32Array,\n\tUint32Array: Uint32Array,\n\tFloat32Array: Float32Array,\n\tFloat64Array: Float64Array\n};\n\nfunction getTypedArray( type, buffer ) {\n\n\treturn new TYPED_ARRAYS[ type ]( buffer );\n\n}\n\nfunction createElementNS( name ) {\n\n\treturn document.createElementNS( 'http://www.w3.org/1999/xhtml', name );\n\n}\n\nfunction SRGBToLinear( c ) {\n\n\treturn ( c < 0.04045 ) ? c * 0.0773993808 : Math.pow( c * 0.9478672986 + 0.0521327014, 2.4 );\n\n}\n\nfunction LinearToSRGB( c ) {\n\n\treturn ( c < 0.0031308 ) ? c * 12.92 : 1.055 * ( Math.pow( c, 0.41666 ) ) - 0.055;\n\n}\n\n// JavaScript RGB-to-RGB transforms, defined as\n// FN[InputColorSpace][OutputColorSpace] callback functions.\nconst FN = {\n\t[ SRGBColorSpace ]: { [ LinearSRGBColorSpace ]: SRGBToLinear },\n\t[ LinearSRGBColorSpace ]: { [ SRGBColorSpace ]: LinearToSRGB },\n};\n\nconst ColorManagement = {\n\n\tlegacyMode: true,\n\n\tget workingColorSpace() {\n\n\t\treturn LinearSRGBColorSpace;\n\n\t},\n\n\tset workingColorSpace( colorSpace ) {\n\n\t\tconsole.warn( 'THREE.ColorManagement: .workingColorSpace is readonly.' );\n\n\t},\n\n\tconvert: function ( color, sourceColorSpace, targetColorSpace ) {\n\n\t\tif ( this.legacyMode || sourceColorSpace === targetColorSpace || ! sourceColorSpace || ! targetColorSpace ) {\n\n\t\t\treturn color;\n\n\t\t}\n\n\t\tif ( FN[ sourceColorSpace ] && FN[ sourceColorSpace ][ targetColorSpace ] !== undefined ) {\n\n\t\t\tconst fn = FN[ sourceColorSpace ][ targetColorSpace ];\n\n\t\t\tcolor.r = fn( color.r );\n\t\t\tcolor.g = fn( color.g );\n\t\t\tcolor.b = fn( color.b );\n\n\t\t\treturn color;\n\n\t\t}\n\n\t\tthrow new Error( 'Unsupported color space conversion.' );\n\n\t},\n\n\tfromWorkingColorSpace: function ( color, targetColorSpace ) {\n\n\t\treturn this.convert( color, this.workingColorSpace, targetColorSpace );\n\n\t},\n\n\ttoWorkingColorSpace: function ( color, sourceColorSpace ) {\n\n\t\treturn this.convert( color, sourceColorSpace, this.workingColorSpace );\n\n\t},\n\n};\n\nconst _colorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\n\t'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\n\t'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\n\t'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\n\t'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\n\t'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\n\t'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\n\t'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\n\t'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\n\t'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\n\t'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\n\t'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\n\t'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\n\t'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\n\t'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\n\t'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\n\t'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\n\t'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\n\t'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\n\t'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'rebeccapurple': 0x663399, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\n\t'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\n\t'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\n\t'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\n\t'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\n\nconst _rgb$1 = { r: 0, g: 0, b: 0 };\nconst _hslA = { h: 0, s: 0, l: 0 };\nconst _hslB = { h: 0, s: 0, l: 0 };\n\nfunction hue2rgb( p, q, t ) {\n\n\tif ( t < 0 ) t += 1;\n\tif ( t > 1 ) t -= 1;\n\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\n\tif ( t < 1 / 2 ) return q;\n\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\n\treturn p;\n\n}\n\nfunction toComponents( source, target ) {\n\n\ttarget.r = source.r;\n\ttarget.g = source.g;\n\ttarget.b = source.b;\n\n\treturn target;\n\n}\n\nclass Color {\n\n\tconstructor( r, g, b ) {\n\n\t\tthis.isColor = true;\n\n\t\tthis.r = 1;\n\t\tthis.g = 1;\n\t\tthis.b = 1;\n\n\t\tif ( g === undefined && b === undefined ) {\n\n\t\t\t// r is THREE.Color, hex or string\n\t\t\treturn this.set( r );\n\n\t\t}\n\n\t\treturn this.setRGB( r, g, b );\n\n\t}\n\n\tset( value ) {\n\n\t\tif ( value && value.isColor ) {\n\n\t\t\tthis.copy( value );\n\n\t\t} else if ( typeof value === 'number' ) {\n\n\t\t\tthis.setHex( value );\n\n\t\t} else if ( typeof value === 'string' ) {\n\n\t\t\tthis.setStyle( value );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.r = scalar;\n\t\tthis.g = scalar;\n\t\tthis.b = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetHex( hex, colorSpace = SRGBColorSpace ) {\n\n\t\thex = Math.floor( hex );\n\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\n\t\tthis.b = ( hex & 255 ) / 255;\n\n\t\tColorManagement.toWorkingColorSpace( this, colorSpace );\n\n\t\treturn this;\n\n\t}\n\n\tsetRGB( r, g, b, colorSpace = ColorManagement.workingColorSpace ) {\n\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\n\t\tColorManagement.toWorkingColorSpace( this, colorSpace );\n\n\t\treturn this;\n\n\t}\n\n\tsetHSL( h, s, l, colorSpace = ColorManagement.workingColorSpace ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\t\th = euclideanModulo( h, 1 );\n\t\ts = clamp( s, 0, 1 );\n\t\tl = clamp( l, 0, 1 );\n\n\t\tif ( s === 0 ) {\n\n\t\t\tthis.r = this.g = this.b = l;\n\n\t\t} else {\n\n\t\t\tconst p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\n\t\t\tconst q = ( 2 * l ) - p;\n\n\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\n\t\t\tthis.g = hue2rgb( q, p, h );\n\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\n\n\t\t}\n\n\t\tColorManagement.toWorkingColorSpace( this, colorSpace );\n\n\t\treturn this;\n\n\t}\n\n\tsetStyle( style, colorSpace = SRGBColorSpace ) {\n\n\t\tfunction handleAlpha( string ) {\n\n\t\t\tif ( string === undefined ) return;\n\n\t\t\tif ( parseFloat( string ) < 1 ) {\n\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tlet m;\n\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(([^\\)]*)\\)/.exec( style ) ) {\n\n\t\t\t// rgb / hsl\n\n\t\t\tlet color;\n\t\t\tconst name = m[ 1 ];\n\t\t\tconst components = m[ 2 ];\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'rgb':\n\t\t\t\tcase 'rgba':\n\n\t\t\t\t\tif ( color = /^\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\n\n\t\t\t\t\t\tColorManagement.toWorkingColorSpace( this, colorSpace );\n\n\t\t\t\t\t\thandleAlpha( color[ 4 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( color = /^\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\n\n\t\t\t\t\t\tColorManagement.toWorkingColorSpace( this, colorSpace );\n\n\t\t\t\t\t\thandleAlpha( color[ 4 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'hsl':\n\t\t\t\tcase 'hsla':\n\n\t\t\t\t\tif ( color = /^\\s*(\\d*\\.?\\d+)\\s*,\\s*(\\d*\\.?\\d+)\\%\\s*,\\s*(\\d*\\.?\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n\t\t\t\t\t\tconst h = parseFloat( color[ 1 ] ) / 360;\n\t\t\t\t\t\tconst s = parseFloat( color[ 2 ] ) / 100;\n\t\t\t\t\t\tconst l = parseFloat( color[ 3 ] ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 4 ] );\n\n\t\t\t\t\t\treturn this.setHSL( h, s, l, colorSpace );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t} else if ( m = /^\\#([A-Fa-f\\d]+)$/.exec( style ) ) {\n\n\t\t\t// hex color\n\n\t\t\tconst hex = m[ 1 ];\n\t\t\tconst size = hex.length;\n\n\t\t\tif ( size === 3 ) {\n\n\t\t\t\t// #ff0\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\n\n\t\t\t\tColorManagement.toWorkingColorSpace( this, colorSpace );\n\n\t\t\t\treturn this;\n\n\t\t\t} else if ( size === 6 ) {\n\n\t\t\t\t// #ff0000\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\n\n\t\t\t\tColorManagement.toWorkingColorSpace( this, colorSpace );\n\n\t\t\t\treturn this;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( style && style.length > 0 ) {\n\n\t\t\treturn this.setColorName( style, colorSpace );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetColorName( style, colorSpace = SRGBColorSpace ) {\n\n\t\t// color keywords\n\t\tconst hex = _colorKeywords[ style.toLowerCase() ];\n\n\t\tif ( hex !== undefined ) {\n\n\t\t\t// red\n\t\t\tthis.setHex( hex, colorSpace );\n\n\t\t} else {\n\n\t\t\t// unknown color\n\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.r, this.g, this.b );\n\n\t}\n\n\tcopy( color ) {\n\n\t\tthis.r = color.r;\n\t\tthis.g = color.g;\n\t\tthis.b = color.b;\n\n\t\treturn this;\n\n\t}\n\n\tcopySRGBToLinear( color ) {\n\n\t\tthis.r = SRGBToLinear( color.r );\n\t\tthis.g = SRGBToLinear( color.g );\n\t\tthis.b = SRGBToLinear( color.b );\n\n\t\treturn this;\n\n\t}\n\n\tcopyLinearToSRGB( color ) {\n\n\t\tthis.r = LinearToSRGB( color.r );\n\t\tthis.g = LinearToSRGB( color.g );\n\t\tthis.b = LinearToSRGB( color.b );\n\n\t\treturn this;\n\n\t}\n\n\tconvertSRGBToLinear() {\n\n\t\tthis.copySRGBToLinear( this );\n\n\t\treturn this;\n\n\t}\n\n\tconvertLinearToSRGB() {\n\n\t\tthis.copyLinearToSRGB( this );\n\n\t\treturn this;\n\n\t}\n\n\tgetHex( colorSpace = SRGBColorSpace ) {\n\n\t\tColorManagement.fromWorkingColorSpace( toComponents( this, _rgb$1 ), colorSpace );\n\n\t\treturn clamp( _rgb$1.r * 255, 0, 255 ) << 16 ^ clamp( _rgb$1.g * 255, 0, 255 ) << 8 ^ clamp( _rgb$1.b * 255, 0, 255 ) << 0;\n\n\t}\n\n\tgetHexString( colorSpace = SRGBColorSpace ) {\n\n\t\treturn ( '000000' + this.getHex( colorSpace ).toString( 16 ) ).slice( - 6 );\n\n\t}\n\n\tgetHSL( target, colorSpace = ColorManagement.workingColorSpace ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tColorManagement.fromWorkingColorSpace( toComponents( this, _rgb$1 ), colorSpace );\n\n\t\tconst r = _rgb$1.r, g = _rgb$1.g, b = _rgb$1.b;\n\n\t\tconst max = Math.max( r, g, b );\n\t\tconst min = Math.min( r, g, b );\n\n\t\tlet hue, saturation;\n\t\tconst lightness = ( min + max ) / 2.0;\n\n\t\tif ( min === max ) {\n\n\t\t\thue = 0;\n\t\t\tsaturation = 0;\n\n\t\t} else {\n\n\t\t\tconst delta = max - min;\n\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\n\n\t\t\tswitch ( max ) {\n\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\n\n\t\t\t}\n\n\t\t\thue /= 6;\n\n\t\t}\n\n\t\ttarget.h = hue;\n\t\ttarget.s = saturation;\n\t\ttarget.l = lightness;\n\n\t\treturn target;\n\n\t}\n\n\tgetRGB( target, colorSpace = ColorManagement.workingColorSpace ) {\n\n\t\tColorManagement.fromWorkingColorSpace( toComponents( this, _rgb$1 ), colorSpace );\n\n\t\ttarget.r = _rgb$1.r;\n\t\ttarget.g = _rgb$1.g;\n\t\ttarget.b = _rgb$1.b;\n\n\t\treturn target;\n\n\t}\n\n\tgetStyle( colorSpace = SRGBColorSpace ) {\n\n\t\tColorManagement.fromWorkingColorSpace( toComponents( this, _rgb$1 ), colorSpace );\n\n\t\tif ( colorSpace !== SRGBColorSpace ) {\n\n\t\t\t// Requires CSS Color Module Level 4 (https://www.w3.org/TR/css-color-4/).\n\t\t\treturn `color(${ colorSpace } ${ _rgb$1.r } ${ _rgb$1.g } ${ _rgb$1.b })`;\n\n\t\t}\n\n\t\treturn `rgb(${( _rgb$1.r * 255 ) | 0},${( _rgb$1.g * 255 ) | 0},${( _rgb$1.b * 255 ) | 0})`;\n\n\t}\n\n\toffsetHSL( h, s, l ) {\n\n\t\tthis.getHSL( _hslA );\n\n\t\t_hslA.h += h; _hslA.s += s; _hslA.l += l;\n\n\t\tthis.setHSL( _hslA.h, _hslA.s, _hslA.l );\n\n\t\treturn this;\n\n\t}\n\n\tadd( color ) {\n\n\t\tthis.r += color.r;\n\t\tthis.g += color.g;\n\t\tthis.b += color.b;\n\n\t\treturn this;\n\n\t}\n\n\taddColors( color1, color2 ) {\n\n\t\tthis.r = color1.r + color2.r;\n\t\tthis.g = color1.g + color2.g;\n\t\tthis.b = color1.b + color2.b;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.r += s;\n\t\tthis.g += s;\n\t\tthis.b += s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( color ) {\n\n\t\tthis.r = Math.max( 0, this.r - color.r );\n\t\tthis.g = Math.max( 0, this.g - color.g );\n\t\tthis.b = Math.max( 0, this.b - color.b );\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( color ) {\n\n\t\tthis.r *= color.r;\n\t\tthis.g *= color.g;\n\t\tthis.b *= color.b;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tthis.r *= s;\n\t\tthis.g *= s;\n\t\tthis.b *= s;\n\n\t\treturn this;\n\n\t}\n\n\tlerp( color, alpha ) {\n\n\t\tthis.r += ( color.r - this.r ) * alpha;\n\t\tthis.g += ( color.g - this.g ) * alpha;\n\t\tthis.b += ( color.b - this.b ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpColors( color1, color2, alpha ) {\n\n\t\tthis.r = color1.r + ( color2.r - color1.r ) * alpha;\n\t\tthis.g = color1.g + ( color2.g - color1.g ) * alpha;\n\t\tthis.b = color1.b + ( color2.b - color1.b ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpHSL( color, alpha ) {\n\n\t\tthis.getHSL( _hslA );\n\t\tcolor.getHSL( _hslB );\n\n\t\tconst h = lerp( _hslA.h, _hslB.h, alpha );\n\t\tconst s = lerp( _hslA.s, _hslB.s, alpha );\n\t\tconst l = lerp( _hslA.l, _hslB.l, alpha );\n\n\t\tthis.setHSL( h, s, l );\n\n\t\treturn this;\n\n\t}\n\n\tequals( c ) {\n\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.r = array[ offset ];\n\t\tthis.g = array[ offset + 1 ];\n\t\tthis.b = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.r;\n\t\tarray[ offset + 1 ] = this.g;\n\t\tarray[ offset + 2 ] = this.b;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.r = attribute.getX( index );\n\t\tthis.g = attribute.getY( index );\n\t\tthis.b = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\treturn this.getHex();\n\n\t}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this.r;\n\t\tyield this.g;\n\t\tyield this.b;\n\n\t}\n\n}\n\nColor.NAMES = _colorKeywords;\n\nlet _canvas;\n\nclass ImageUtils {\n\n\tstatic getDataURL( image ) {\n\n\t\tif ( /^data:/i.test( image.src ) ) {\n\n\t\t\treturn image.src;\n\n\t\t}\n\n\t\tif ( typeof HTMLCanvasElement == 'undefined' ) {\n\n\t\t\treturn image.src;\n\n\t\t}\n\n\t\tlet canvas;\n\n\t\tif ( image instanceof HTMLCanvasElement ) {\n\n\t\t\tcanvas = image;\n\n\t\t} else {\n\n\t\t\tif ( _canvas === undefined ) _canvas = createElementNS( 'canvas' );\n\n\t\t\t_canvas.width = image.width;\n\t\t\t_canvas.height = image.height;\n\n\t\t\tconst context = _canvas.getContext( '2d' );\n\n\t\t\tif ( image instanceof ImageData ) {\n\n\t\t\t\tcontext.putImageData( image, 0, 0 );\n\n\t\t\t} else {\n\n\t\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\t}\n\n\t\t\tcanvas = _canvas;\n\n\t\t}\n\n\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\n\n\t\t\tconsole.warn( 'THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons', image );\n\n\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\n\n\t\t} else {\n\n\t\t\treturn canvas.toDataURL( 'image/png' );\n\n\t\t}\n\n\t}\n\n\tstatic sRGBToLinear( image ) {\n\n\t\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t\tconst canvas = createElementNS( 'canvas' );\n\n\t\t\tcanvas.width = image.width;\n\t\t\tcanvas.height = image.height;\n\n\t\t\tconst context = canvas.getContext( '2d' );\n\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\tconst imageData = context.getImageData( 0, 0, image.width, image.height );\n\t\t\tconst data = imageData.data;\n\n\t\t\tfor ( let i = 0; i < data.length; i ++ ) {\n\n\t\t\t\tdata[ i ] = SRGBToLinear( data[ i ] / 255 ) * 255;\n\n\t\t\t}\n\n\t\t\tcontext.putImageData( imageData, 0, 0 );\n\n\t\t\treturn canvas;\n\n\t\t} else if ( image.data ) {\n\n\t\t\tconst data = image.data.slice( 0 );\n\n\t\t\tfor ( let i = 0; i < data.length; i ++ ) {\n\n\t\t\t\tif ( data instanceof Uint8Array || data instanceof Uint8ClampedArray ) {\n\n\t\t\t\t\tdata[ i ] = Math.floor( SRGBToLinear( data[ i ] / 255 ) * 255 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// assuming float\n\n\t\t\t\t\tdata[ i ] = SRGBToLinear( data[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdata: data,\n\t\t\t\twidth: image.width,\n\t\t\t\theight: image.height\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied.' );\n\t\t\treturn image;\n\n\t\t}\n\n\t}\n\n}\n\nclass Source {\n\n\tconstructor( data = null ) {\n\n\t\tthis.isSource = true;\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.data = data;\n\n\t\tthis.version = 0;\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( ! isRootObject && meta.images[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.images[ this.uuid ];\n\n\t\t}\n\n\t\tconst output = {\n\t\t\tuuid: this.uuid,\n\t\t\turl: ''\n\t\t};\n\n\t\tconst data = this.data;\n\n\t\tif ( data !== null ) {\n\n\t\t\tlet url;\n\n\t\t\tif ( Array.isArray( data ) ) {\n\n\t\t\t\t// cube texture\n\n\t\t\t\turl = [];\n\n\t\t\t\tfor ( let i = 0, l = data.length; i < l; i ++ ) {\n\n\t\t\t\t\tif ( data[ i ].isDataTexture ) {\n\n\t\t\t\t\t\turl.push( serializeImage( data[ i ].image ) );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\turl.push( serializeImage( data[ i ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// texture\n\n\t\t\t\turl = serializeImage( data );\n\n\t\t\t}\n\n\t\t\toutput.url = url;\n\n\t\t}\n\n\t\tif ( ! isRootObject ) {\n\n\t\t\tmeta.images[ this.uuid ] = output;\n\n\t\t}\n\n\t\treturn output;\n\n\t}\n\n}\n\nfunction serializeImage( image ) {\n\n\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t// default images\n\n\t\treturn ImageUtils.getDataURL( image );\n\n\t} else {\n\n\t\tif ( image.data ) {\n\n\t\t\t// images of DataTexture\n\n\t\t\treturn {\n\t\t\t\tdata: Array.from( image.data ),\n\t\t\t\twidth: image.width,\n\t\t\t\theight: image.height,\n\t\t\t\ttype: image.data.constructor.name\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Texture: Unable to serialize Texture.' );\n\t\t\treturn {};\n\n\t\t}\n\n\t}\n\n}\n\nlet textureId = 0;\n\nclass Texture extends EventDispatcher {\n\n\tconstructor( image = Texture.DEFAULT_IMAGE, mapping = Texture.DEFAULT_MAPPING, wrapS = ClampToEdgeWrapping, wrapT = ClampToEdgeWrapping, magFilter = LinearFilter, minFilter = LinearMipmapLinearFilter, format = RGBAFormat, type = UnsignedByteType, anisotropy = Texture.DEFAULT_ANISOTROPY, encoding = LinearEncoding ) {\n\n\t\tsuper();\n\n\t\tthis.isTexture = true;\n\n\t\tObject.defineProperty( this, 'id', { value: textureId ++ } );\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.name = '';\n\n\t\tthis.source = new Source( image );\n\t\tthis.mipmaps = [];\n\n\t\tthis.mapping = mapping;\n\n\t\tthis.wrapS = wrapS;\n\t\tthis.wrapT = wrapT;\n\n\t\tthis.magFilter = magFilter;\n\t\tthis.minFilter = minFilter;\n\n\t\tthis.anisotropy = anisotropy;\n\n\t\tthis.format = format;\n\t\tthis.internalFormat = null;\n\t\tthis.type = type;\n\n\t\tthis.offset = new Vector2( 0, 0 );\n\t\tthis.repeat = new Vector2( 1, 1 );\n\t\tthis.center = new Vector2( 0, 0 );\n\t\tthis.rotation = 0;\n\n\t\tthis.matrixAutoUpdate = true;\n\t\tthis.matrix = new Matrix3();\n\n\t\tthis.generateMipmaps = true;\n\t\tthis.premultiplyAlpha = false;\n\t\tthis.flipY = true;\n\t\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n\n\t\t// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\n\t\t//\n\t\t// Also changing the encoding after already used by a Material will not automatically make the Material\n\t\t// update. You need to explicitly call Material.needsUpdate to trigger it to recompile.\n\t\tthis.encoding = encoding;\n\n\t\tthis.userData = {};\n\n\t\tthis.version = 0;\n\t\tthis.onUpdate = null;\n\n\t\tthis.isRenderTargetTexture = false; // indicates whether a texture belongs to a render target or not\n\t\tthis.needsPMREMUpdate = false; // indicates whether this texture should be processed by PMREMGenerator or not (only relevant for render target textures)\n\n\t}\n\n\tget image() {\n\n\t\treturn this.source.data;\n\n\t}\n\n\tset image( value ) {\n\n\t\tthis.source.data = value;\n\n\t}\n\n\tupdateMatrix() {\n\n\t\tthis.matrix.setUvTransform( this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.source = source.source;\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\n\n\t\tthis.mapping = source.mapping;\n\n\t\tthis.wrapS = source.wrapS;\n\t\tthis.wrapT = source.wrapT;\n\n\t\tthis.magFilter = source.magFilter;\n\t\tthis.minFilter = source.minFilter;\n\n\t\tthis.anisotropy = source.anisotropy;\n\n\t\tthis.format = source.format;\n\t\tthis.internalFormat = source.internalFormat;\n\t\tthis.type = source.type;\n\n\t\tthis.offset.copy( source.offset );\n\t\tthis.repeat.copy( source.repeat );\n\t\tthis.center.copy( source.center );\n\t\tthis.rotation = source.rotation;\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrix.copy( source.matrix );\n\n\t\tthis.generateMipmaps = source.generateMipmaps;\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\n\t\tthis.flipY = source.flipY;\n\t\tthis.unpackAlignment = source.unpackAlignment;\n\t\tthis.encoding = source.encoding;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tthis.needsUpdate = true;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( ! isRootObject && meta.textures[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.textures[ this.uuid ];\n\n\t\t}\n\n\t\tconst output = {\n\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Texture',\n\t\t\t\tgenerator: 'Texture.toJSON'\n\t\t\t},\n\n\t\t\tuuid: this.uuid,\n\t\t\tname: this.name,\n\n\t\t\timage: this.source.toJSON( meta ).uuid,\n\n\t\t\tmapping: this.mapping,\n\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\n\t\t\toffset: [ this.offset.x, this.offset.y ],\n\t\t\tcenter: [ this.center.x, this.center.y ],\n\t\t\trotation: this.rotation,\n\n\t\t\twrap: [ this.wrapS, this.wrapT ],\n\n\t\t\tformat: this.format,\n\t\t\ttype: this.type,\n\t\t\tencoding: this.encoding,\n\n\t\t\tminFilter: this.minFilter,\n\t\t\tmagFilter: this.magFilter,\n\t\t\tanisotropy: this.anisotropy,\n\n\t\t\tflipY: this.flipY,\n\n\t\t\tgenerateMipmaps: this.generateMipmaps,\n\t\t\tpremultiplyAlpha: this.premultiplyAlpha,\n\t\t\tunpackAlignment: this.unpackAlignment\n\n\t\t};\n\n\t\tif ( Object.keys( this.userData ).length > 0 ) output.userData = this.userData;\n\n\t\tif ( ! isRootObject ) {\n\n\t\t\tmeta.textures[ this.uuid ] = output;\n\n\t\t}\n\n\t\treturn output;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n\ttransformUv( uv ) {\n\n\t\tif ( this.mapping !== UVMapping ) return uv;\n\n\t\tuv.applyMatrix3( this.matrix );\n\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\n\n\t\t\tswitch ( this.wrapS ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\n\n\t\t\tswitch ( this.wrapT ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.flipY ) {\n\n\t\t\tuv.y = 1 - uv.y;\n\n\t\t}\n\n\t\treturn uv;\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) {\n\n\t\t\tthis.version ++;\n\t\t\tthis.source.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n}\n\nTexture.DEFAULT_IMAGE = null;\nTexture.DEFAULT_MAPPING = UVMapping;\nTexture.DEFAULT_ANISOTROPY = 1;\n\nclass Vector4 {\n\n\tconstructor( x = 0, y = 0, z = 0, w = 1 ) {\n\n\t\tVector4.prototype.isVector4 = true;\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t}\n\n\tget width() {\n\n\t\treturn this.z;\n\n\t}\n\n\tset width( value ) {\n\n\t\tthis.z = value;\n\n\t}\n\n\tget height() {\n\n\t\treturn this.w;\n\n\t}\n\n\tset height( value ) {\n\n\t\tthis.w = value;\n\n\t}\n\n\tset( x, y, z, w ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\t\tthis.w = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetW( w ) {\n\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tcase 3: this.w = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tcase 3: return this.w;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v ) {\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\tthis.w += v.w;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\tthis.w += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\tthis.w = a.w + b.w;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\t\tthis.w += v.w * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v ) {\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\tthis.w -= v.w;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\t\tthis.w -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\tthis.w = a.w - b.w;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\t\tthis.w *= v.w;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\tthis.w *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z, w = this.w;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tsetAxisAngleFromQuaternion( q ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t// q is assumed to be normalized\n\n\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\tconst s = Math.sqrt( 1 - q.w * q.w );\n\n\t\tif ( s < 0.0001 ) {\n\n\t\t\tthis.x = 1;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\n\t\t} else {\n\n\t\t\tthis.x = q.x / s;\n\t\t\tthis.y = q.y / s;\n\t\t\tthis.z = q.z / s;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetAxisAngleFromRotationMatrix( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tlet angle, x, y, z; // variables for result\n\t\tconst epsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\tte = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t// singularity found\n\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t}\n\n\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\tangle = Math.PI;\n\n\t\t\tconst xx = ( m11 + 1 ) / 2;\n\t\t\tconst yy = ( m22 + 1 ) / 2;\n\t\t\tconst zz = ( m33 + 1 ) / 2;\n\t\t\tconst xy = ( m12 + m21 ) / 4;\n\t\t\tconst xz = ( m13 + m31 ) / 4;\n\t\t\tconst yz = ( m23 + m32 ) / 4;\n\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\n\n\t\t\t\t// m11 is the largest diagonal term\n\n\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\ty = xy / x;\n\t\t\t\t\tz = xz / x;\n\n\t\t\t\t}\n\n\t\t\t} else if ( yy > zz ) {\n\n\t\t\t\t// m22 is the largest diagonal term\n\n\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\tx = xy / y;\n\t\t\t\t\tz = yz / y;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// m33 is the largest diagonal term so base result on this\n\n\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\tx = xz / z;\n\t\t\t\t\ty = yz / z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.set( x, y, z, angle );\n\n\t\t\treturn this; // return 180 deg rotation\n\n\t\t}\n\n\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\tlet s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\n\t\t\t( m13 - m31 ) * ( m13 - m31 ) +\n\t\t\t( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\tthis.x = ( m32 - m23 ) / s;\n\t\tthis.y = ( m13 - m31 ) / s;\n\t\tthis.z = ( m21 - m12 ) / s;\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\treturn this;\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\t\tthis.w = Math.min( this.w, v.w );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\t\tthis.w = Math.max( this.w, v.w );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\t\tthis.w = Math.max( minVal, Math.min( maxVal, this.w ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\t\tthis.w = Math.floor( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\t\tthis.w = Math.ceil( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\t\tthis.w = Math.round( this.w );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\tthis.w = - this.w;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\t\tthis.w = v1.w + ( v2.w - v1.w ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\t\tthis.w = array[ offset + 3 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\t\tarray[ offset + 3 ] = this.w;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\t\tthis.w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\t\tthis.w = Math.random();\n\n\t\treturn this;\n\n\t}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this.x;\n\t\tyield this.y;\n\t\tyield this.z;\n\t\tyield this.w;\n\n\t}\n\n}\n\n/*\n In options, we can specify:\n * Texture parameters for an auto-generated target texture\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\n*/\nclass WebGLRenderTarget extends EventDispatcher {\n\n\tconstructor( width = 1, height = 1, options = {} ) {\n\n\t\tsuper();\n\n\t\tthis.isWebGLRenderTarget = true;\n\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.depth = 1;\n\n\t\tthis.scissor = new Vector4( 0, 0, width, height );\n\t\tthis.scissorTest = false;\n\n\t\tthis.viewport = new Vector4( 0, 0, width, height );\n\n\t\tconst image = { width: width, height: height, depth: 1 };\n\n\t\tthis.texture = new Texture( image, options.mapping, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\n\t\tthis.texture.isRenderTargetTexture = true;\n\n\t\tthis.texture.flipY = false;\n\t\tthis.texture.generateMipmaps = options.generateMipmaps !== undefined ? options.generateMipmaps : false;\n\t\tthis.texture.internalFormat = options.internalFormat !== undefined ? options.internalFormat : null;\n\t\tthis.texture.minFilter = options.minFilter !== undefined ? options.minFilter : LinearFilter;\n\n\t\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\n\t\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : false;\n\n\t\tthis.depthTexture = options.depthTexture !== undefined ? options.depthTexture : null;\n\n\t\tthis.samples = options.samples !== undefined ? options.samples : 0;\n\n\t}\n\n\tsetSize( width, height, depth = 1 ) {\n\n\t\tif ( this.width !== width || this.height !== height || this.depth !== depth ) {\n\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\t\t\tthis.depth = depth;\n\n\t\t\tthis.texture.image.width = width;\n\t\t\tthis.texture.image.height = height;\n\t\t\tthis.texture.image.depth = depth;\n\n\t\t\tthis.dispose();\n\n\t\t}\n\n\t\tthis.viewport.set( 0, 0, width, height );\n\t\tthis.scissor.set( 0, 0, width, height );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\t\tthis.depth = source.depth;\n\n\t\tthis.viewport.copy( source.viewport );\n\n\t\tthis.texture = source.texture.clone();\n\t\tthis.texture.isRenderTargetTexture = true;\n\n\t\t// ensure image object is not shared, see #20328\n\n\t\tconst image = Object.assign( {}, source.texture.image );\n\t\tthis.texture.source = new Source( image );\n\n\t\tthis.depthBuffer = source.depthBuffer;\n\t\tthis.stencilBuffer = source.stencilBuffer;\n\n\t\tif ( source.depthTexture !== null ) this.depthTexture = source.depthTexture.clone();\n\n\t\tthis.samples = source.samples;\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n}\n\nclass DataArrayTexture extends Texture {\n\n\tconstructor( data = null, width = 1, height = 1, depth = 1 ) {\n\n\t\tsuper( null );\n\n\t\tthis.isDataArrayTexture = true;\n\n\t\tthis.image = { data, width, height, depth };\n\n\t\tthis.magFilter = NearestFilter;\n\t\tthis.minFilter = NearestFilter;\n\n\t\tthis.wrapR = ClampToEdgeWrapping;\n\n\t\tthis.generateMipmaps = false;\n\t\tthis.flipY = false;\n\t\tthis.unpackAlignment = 1;\n\n\t}\n\n}\n\nclass WebGLArrayRenderTarget extends WebGLRenderTarget {\n\n\tconstructor( width = 1, height = 1, depth = 1 ) {\n\n\t\tsuper( width, height );\n\n\t\tthis.isWebGLArrayRenderTarget = true;\n\n\t\tthis.depth = depth;\n\n\t\tthis.texture = new DataArrayTexture( null, width, height, depth );\n\n\t\tthis.texture.isRenderTargetTexture = true;\n\n\t}\n\n}\n\nclass Data3DTexture extends Texture {\n\n\tconstructor( data = null, width = 1, height = 1, depth = 1 ) {\n\n\t\t// We're going to add .setXXX() methods for setting properties later.\n\t\t// Users can still set in DataTexture3D directly.\n\t\t//\n\t\t//\tconst texture = new THREE.DataTexture3D( data, width, height, depth );\n\t\t// \ttexture.anisotropy = 16;\n\t\t//\n\t\t// See #14839\n\n\t\tsuper( null );\n\n\t\tthis.isData3DTexture = true;\n\n\t\tthis.image = { data, width, height, depth };\n\n\t\tthis.magFilter = NearestFilter;\n\t\tthis.minFilter = NearestFilter;\n\n\t\tthis.wrapR = ClampToEdgeWrapping;\n\n\t\tthis.generateMipmaps = false;\n\t\tthis.flipY = false;\n\t\tthis.unpackAlignment = 1;\n\n\t}\n\n}\n\nclass WebGL3DRenderTarget extends WebGLRenderTarget {\n\n\tconstructor( width = 1, height = 1, depth = 1 ) {\n\n\t\tsuper( width, height );\n\n\t\tthis.isWebGL3DRenderTarget = true;\n\n\t\tthis.depth = depth;\n\n\t\tthis.texture = new Data3DTexture( null, width, height, depth );\n\n\t\tthis.texture.isRenderTargetTexture = true;\n\n\t}\n\n}\n\nclass WebGLMultipleRenderTargets extends WebGLRenderTarget {\n\n\tconstructor( width = 1, height = 1, count = 1, options = {} ) {\n\n\t\tsuper( width, height, options );\n\n\t\tthis.isWebGLMultipleRenderTargets = true;\n\n\t\tconst texture = this.texture;\n\n\t\tthis.texture = [];\n\n\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\tthis.texture[ i ] = texture.clone();\n\t\t\tthis.texture[ i ].isRenderTargetTexture = true;\n\n\t\t}\n\n\t}\n\n\tsetSize( width, height, depth = 1 ) {\n\n\t\tif ( this.width !== width || this.height !== height || this.depth !== depth ) {\n\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\t\t\tthis.depth = depth;\n\n\t\t\tfor ( let i = 0, il = this.texture.length; i < il; i ++ ) {\n\n\t\t\t\tthis.texture[ i ].image.width = width;\n\t\t\t\tthis.texture[ i ].image.height = height;\n\t\t\t\tthis.texture[ i ].image.depth = depth;\n\n\t\t\t}\n\n\t\t\tthis.dispose();\n\n\t\t}\n\n\t\tthis.viewport.set( 0, 0, width, height );\n\t\tthis.scissor.set( 0, 0, width, height );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.dispose();\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\t\tthis.depth = source.depth;\n\n\t\tthis.viewport.set( 0, 0, this.width, this.height );\n\t\tthis.scissor.set( 0, 0, this.width, this.height );\n\n\t\tthis.depthBuffer = source.depthBuffer;\n\t\tthis.stencilBuffer = source.stencilBuffer;\n\n\t\tif ( source.depthTexture !== null ) this.depthTexture = source.depthTexture.clone();\n\n\t\tthis.texture.length = 0;\n\n\t\tfor ( let i = 0, il = source.texture.length; i < il; i ++ ) {\n\n\t\t\tthis.texture[ i ] = source.texture[ i ].clone();\n\t\t\tthis.texture[ i ].isRenderTargetTexture = true;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass Quaternion {\n\n\tconstructor( x = 0, y = 0, z = 0, w = 1 ) {\n\n\t\tthis.isQuaternion = true;\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t}\n\n\tstatic slerpFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\tlet x0 = src0[ srcOffset0 + 0 ],\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\tw0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 + 0 ],\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\tif ( t === 0 ) {\n\n\t\t\tdst[ dstOffset + 0 ] = x0;\n\t\t\tdst[ dstOffset + 1 ] = y0;\n\t\t\tdst[ dstOffset + 2 ] = z0;\n\t\t\tdst[ dstOffset + 3 ] = w0;\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( t === 1 ) {\n\n\t\t\tdst[ dstOffset + 0 ] = x1;\n\t\t\tdst[ dstOffset + 1 ] = y1;\n\t\t\tdst[ dstOffset + 2 ] = z1;\n\t\t\tdst[ dstOffset + 3 ] = w1;\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\tlet s = 1 - t;\n\t\t\tconst cos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\tconst sin = Math.sqrt( sqrSin ),\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t}\n\n\t\t\tconst tDir = t * dir;\n\n\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t// Normalize in case we just did a lerp:\n\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\tconst f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\tx0 *= f;\n\t\t\t\ty0 *= f;\n\t\t\t\tz0 *= f;\n\t\t\t\tw0 *= f;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdst[ dstOffset ] = x0;\n\t\tdst[ dstOffset + 1 ] = y0;\n\t\tdst[ dstOffset + 2 ] = z0;\n\t\tdst[ dstOffset + 3 ] = w0;\n\n\t}\n\n\tstatic multiplyQuaternionsFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1 ) {\n\n\t\tconst x0 = src0[ srcOffset0 ];\n\t\tconst y0 = src0[ srcOffset0 + 1 ];\n\t\tconst z0 = src0[ srcOffset0 + 2 ];\n\t\tconst w0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 ];\n\t\tconst y1 = src1[ srcOffset1 + 1 ];\n\t\tconst z1 = src1[ srcOffset1 + 2 ];\n\t\tconst w1 = src1[ srcOffset1 + 3 ];\n\n\t\tdst[ dstOffset ] = x0 * w1 + w0 * x1 + y0 * z1 - z0 * y1;\n\t\tdst[ dstOffset + 1 ] = y0 * w1 + w0 * y1 + z0 * x1 - x0 * z1;\n\t\tdst[ dstOffset + 2 ] = z0 * w1 + w0 * z1 + x0 * y1 - y0 * x1;\n\t\tdst[ dstOffset + 3 ] = w0 * w1 - x0 * x1 - y0 * y1 - z0 * z1;\n\n\t\treturn dst;\n\n\t}\n\n\tget x() {\n\n\t\treturn this._x;\n\n\t}\n\n\tset x( value ) {\n\n\t\tthis._x = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget y() {\n\n\t\treturn this._y;\n\n\t}\n\n\tset y( value ) {\n\n\t\tthis._y = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget z() {\n\n\t\treturn this._z;\n\n\t}\n\n\tset z( value ) {\n\n\t\tthis._z = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget w() {\n\n\t\treturn this._w;\n\n\t}\n\n\tset w( value ) {\n\n\t\tthis._w = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tset( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t}\n\n\tcopy( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromEuler( euler, update ) {\n\n\t\tconst x = euler._x, y = euler._y, z = euler._z, order = euler._order;\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tconst cos = Math.cos;\n\t\tconst sin = Math.sin;\n\n\t\tconst c1 = cos( x / 2 );\n\t\tconst c2 = cos( y / 2 );\n\t\tconst c3 = cos( z / 2 );\n\n\t\tconst s1 = sin( x / 2 );\n\t\tconst s2 = sin( y / 2 );\n\t\tconst s3 = sin( z / 2 );\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYX':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZX':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.warn( 'THREE.Quaternion: .setFromEuler() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromAxisAngle( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tconst halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromRotationMatrix( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tconst te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\tconst s = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromUnitVectors( vFrom, vTo ) {\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tlet r = vFrom.dot( vTo ) + 1;\n\n\t\tif ( r < Number.EPSILON ) {\n\n\t\t\t// vFrom and vTo point in opposite directions\n\n\t\t\tr = 0;\n\n\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\tthis._x = - vFrom.y;\n\t\t\t\tthis._y = vFrom.x;\n\t\t\t\tthis._z = 0;\n\t\t\t\tthis._w = r;\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = - vFrom.z;\n\t\t\t\tthis._z = vFrom.y;\n\t\t\t\tthis._w = r;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// crossVectors( vFrom, vTo ); // inlined to avoid cyclic dependency on Vector3\n\n\t\t\tthis._x = vFrom.y * vTo.z - vFrom.z * vTo.y;\n\t\t\tthis._y = vFrom.z * vTo.x - vFrom.x * vTo.z;\n\t\t\tthis._z = vFrom.x * vTo.y - vFrom.y * vTo.x;\n\t\t\tthis._w = r;\n\n\t\t}\n\n\t\treturn this.normalize();\n\n\t}\n\n\tangleTo( q ) {\n\n\t\treturn 2 * Math.acos( Math.abs( clamp( this.dot( q ), - 1, 1 ) ) );\n\n\t}\n\n\trotateTowards( q, step ) {\n\n\t\tconst angle = this.angleTo( q );\n\n\t\tif ( angle === 0 ) return this;\n\n\t\tconst t = Math.min( 1, step / angle );\n\n\t\tthis.slerp( q, t );\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\treturn this.set( 0, 0, 0, 1 );\n\n\t}\n\n\tinvert() {\n\n\t\t// quaternion is assumed to have unit length\n\n\t\treturn this.conjugate();\n\n\t}\n\n\tconjugate() {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t}\n\n\tnormalize() {\n\n\t\tlet l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( q ) {\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t}\n\n\tpremultiply( q ) {\n\n\t\treturn this.multiplyQuaternions( q, this );\n\n\t}\n\n\tmultiplyQuaternions( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tconst qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tconst qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tslerp( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tconst x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tlet cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\n\n\t\tif ( sqrSinHalfTheta <= Number.EPSILON ) {\n\n\t\t\tconst s = 1 - t;\n\t\t\tthis._w = s * w + t * this._w;\n\t\t\tthis._x = s * x + t * this._x;\n\t\t\tthis._y = s * y + t * this._y;\n\t\t\tthis._z = s * z + t * this._z;\n\n\t\t\tthis.normalize();\n\t\t\tthis._onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sinHalfTheta = Math.sqrt( sqrSinHalfTheta );\n\t\tconst halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\tconst ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tslerpQuaternions( qa, qb, t ) {\n\n\t\treturn this.copy( qa ).slerp( qb, t );\n\n\t}\n\n\trandom() {\n\n\t\t// Derived from http://planning.cs.uiuc.edu/node198.html\n\t\t// Note, this source uses w, x, y, z ordering,\n\t\t// so we swap the order below.\n\n\t\tconst u1 = Math.random();\n\t\tconst sqrt1u1 = Math.sqrt( 1 - u1 );\n\t\tconst sqrtu1 = Math.sqrt( u1 );\n\n\t\tconst u2 = 2 * Math.PI * Math.random();\n\n\t\tconst u3 = 2 * Math.PI * Math.random();\n\n\t\treturn this.set(\n\t\t\tsqrt1u1 * Math.cos( u2 ),\n\t\t\tsqrtu1 * Math.sin( u3 ),\n\t\t\tsqrtu1 * Math.cos( u3 ),\n\t\t\tsqrt1u1 * Math.sin( u2 ),\n\t\t);\n\n\t}\n\n\tequals( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis._x = attribute.getX( index );\n\t\tthis._y = attribute.getY( index );\n\t\tthis._z = attribute.getZ( index );\n\t\tthis._w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n\t_onChange( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\t_onChangeCallback() {}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this._x;\n\t\tyield this._y;\n\t\tyield this._z;\n\t\tyield this._w;\n\n\t}\n\n}\n\nclass Vector3 {\n\n\tconstructor( x = 0, y = 0, z = 0 ) {\n\n\t\tVector3.prototype.isVector3 = true;\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t}\n\n\tset( x, y, z ) {\n\n\t\tif ( z === undefined ) z = this.z; // sprite.scale.set(x,y)\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v ) {\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v ) {\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyVectors( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyEuler( euler ) {\n\n\t\treturn this.applyQuaternion( _quaternion$4.setFromEuler( euler ) );\n\n\t}\n\n\tapplyAxisAngle( axis, angle ) {\n\n\t\treturn this.applyQuaternion( _quaternion$4.setFromAxisAngle( axis, angle ) );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyNormalMatrix( m ) {\n\n\t\treturn this.applyMatrix3( m ).normalize();\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tconst w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\n\n\t\treturn this;\n\n\t}\n\n\tapplyQuaternion( q ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tconst ix = qw * x + qy * z - qz * y;\n\t\tconst iy = qw * y + qz * x - qx * z;\n\t\tconst iz = qw * z + qx * y - qy * x;\n\t\tconst iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t}\n\n\tproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.matrixWorldInverse ).applyMatrix4( camera.projectionMatrix );\n\n\t}\n\n\tunproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.projectionMatrixInverse ).applyMatrix4( camera.matrixWorld );\n\n\t}\n\n\ttransformDirection( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn this.normalize();\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t}\n\n\t// TODO lengthSquared?\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tcross( v ) {\n\n\t\treturn this.crossVectors( this, v );\n\n\t}\n\n\tcrossVectors( a, b ) {\n\n\t\tconst ax = a.x, ay = a.y, az = a.z;\n\t\tconst bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t}\n\n\tprojectOnVector( v ) {\n\n\t\tconst denominator = v.lengthSq();\n\n\t\tif ( denominator === 0 ) return this.set( 0, 0, 0 );\n\n\t\tconst scalar = v.dot( this ) / denominator;\n\n\t\treturn this.copy( v ).multiplyScalar( scalar );\n\n\t}\n\n\tprojectOnPlane( planeNormal ) {\n\n\t\t_vector$c.copy( this ).projectOnVector( planeNormal );\n\n\t\treturn this.sub( _vector$c );\n\n\t}\n\n\treflect( normal ) {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\treturn this.sub( _vector$c.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t}\n\n\tangleTo( v ) {\n\n\t\tconst denominator = Math.sqrt( this.lengthSq() * v.lengthSq() );\n\n\t\tif ( denominator === 0 ) return Math.PI / 2;\n\n\t\tconst theta = this.dot( v ) / denominator;\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( clamp( theta, - 1, 1 ) );\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\n\n\t}\n\n\tsetFromSpherical( s ) {\n\n\t\treturn this.setFromSphericalCoords( s.radius, s.phi, s.theta );\n\n\t}\n\n\tsetFromSphericalCoords( radius, phi, theta ) {\n\n\t\tconst sinPhiRadius = Math.sin( phi ) * radius;\n\n\t\tthis.x = sinPhiRadius * Math.sin( theta );\n\t\tthis.y = Math.cos( phi ) * radius;\n\t\tthis.z = sinPhiRadius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCylindrical( c ) {\n\n\t\treturn this.setFromCylindricalCoords( c.radius, c.theta, c.y );\n\n\t}\n\n\tsetFromCylindricalCoords( radius, theta, y ) {\n\n\t\tthis.x = radius * Math.sin( theta );\n\t\tthis.y = y;\n\t\tthis.z = radius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixPosition( m ) {\n\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 12 ];\n\t\tthis.y = e[ 13 ];\n\t\tthis.z = e[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixScale( m ) {\n\n\t\tconst sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\tconst sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\tconst sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixColumn( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t}\n\n\tsetFromMatrix3Column( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 3 );\n\n\t}\n\n\tsetFromEuler( e ) {\n\n\t\tthis.x = e._x;\n\t\tthis.y = e._y;\n\t\tthis.z = e._z;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\n\t\treturn this;\n\n\t}\n\n\trandomDirection() {\n\n\t\t// Derived from https://mathworld.wolfram.com/SpherePointPicking.html\n\n\t\tconst u = ( Math.random() - 0.5 ) * 2;\n\t\tconst t = Math.random() * Math.PI * 2;\n\t\tconst f = Math.sqrt( 1 - u ** 2 );\n\n\t\tthis.x = f * Math.cos( t );\n\t\tthis.y = f * Math.sin( t );\n\t\tthis.z = u;\n\n\t\treturn this;\n\n\t}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this.x;\n\t\tyield this.y;\n\t\tyield this.z;\n\n\t}\n\n}\n\nconst _vector$c = /*@__PURE__*/ new Vector3();\nconst _quaternion$4 = /*@__PURE__*/ new Quaternion();\n\nclass Box3 {\n\n\tconstructor( min = new Vector3( + Infinity, + Infinity, + Infinity ), max = new Vector3( - Infinity, - Infinity, - Infinity ) ) {\n\n\t\tthis.isBox3 = true;\n\n\t\tthis.min = min;\n\t\tthis.max = max;\n\n\t}\n\n\tset( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromArray( array ) {\n\n\t\tlet minX = + Infinity;\n\t\tlet minY = + Infinity;\n\t\tlet minZ = + Infinity;\n\n\t\tlet maxX = - Infinity;\n\t\tlet maxY = - Infinity;\n\t\tlet maxZ = - Infinity;\n\n\t\tfor ( let i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\tconst x = array[ i ];\n\t\t\tconst y = array[ i + 1 ];\n\t\t\tconst z = array[ i + 2 ];\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromBufferAttribute( attribute ) {\n\n\t\tlet minX = + Infinity;\n\t\tlet minY = + Infinity;\n\t\tlet minZ = + Infinity;\n\n\t\tlet maxX = - Infinity;\n\t\tlet maxY = - Infinity;\n\t\tlet maxZ = - Infinity;\n\n\t\tfor ( let i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\tconst x = attribute.getX( i );\n\t\t\tconst y = attribute.getY( i );\n\t\t\tconst z = attribute.getZ( i );\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCenterAndSize( center, size ) {\n\n\t\tconst halfSize = _vector$b.copy( size ).multiplyScalar( 0.5 );\n\n\t\tthis.min.copy( center ).sub( halfSize );\n\t\tthis.max.copy( center ).add( halfSize );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromObject( object, precise = false ) {\n\n\t\tthis.makeEmpty();\n\n\t\treturn this.expandByObject( object, precise );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\n\n\t}\n\n\tgetCenter( target ) {\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t}\n\n\tgetSize( target ) {\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.subVectors( this.max, this.min );\n\n\t}\n\n\texpandByPoint( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t}\n\n\texpandByVector( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t}\n\n\texpandByScalar( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t}\n\n\texpandByObject( object, precise = false ) {\n\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\n\t\t// accounting for both the object's, and children's, world transforms\n\n\t\tobject.updateWorldMatrix( false, false );\n\n\t\tconst geometry = object.geometry;\n\n\t\tif ( geometry !== undefined ) {\n\n\t\t\tif ( precise && geometry.attributes != undefined && geometry.attributes.position !== undefined ) {\n\n\t\t\t\tconst position = geometry.attributes.position;\n\t\t\t\tfor ( let i = 0, l = position.count; i < l; i ++ ) {\n\n\t\t\t\t\t_vector$b.fromBufferAttribute( position, i ).applyMatrix4( object.matrixWorld );\n\t\t\t\t\tthis.expandByPoint( _vector$b );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( geometry.boundingBox === null ) {\n\n\t\t\t\t\tgeometry.computeBoundingBox();\n\n\t\t\t\t}\n\n\t\t\t\t_box$3.copy( geometry.boundingBox );\n\t\t\t\t_box$3.applyMatrix4( object.matrixWorld );\n\n\t\t\t\tthis.union( _box$3 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tthis.expandByObject( children[ i ], precise );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ||\n\t\t\tpoint.z < this.min.z || point.z > this.max.z ? false : true;\n\n\t}\n\n\tcontainsBox( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y &&\n\t\t\tthis.min.z <= box.min.z && box.max.z <= this.max.z;\n\n\t}\n\n\tgetParameter( point, target ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\treturn target.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\n\t\t);\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ||\n\t\t\tbox.max.z < this.min.z || box.min.z > this.max.z ? false : true;\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\t// Find the point on the AABB closest to the sphere center.\n\t\tthis.clampPoint( sphere.center, _vector$b );\n\n\t\t// If that point is inside the sphere, the AABB and sphere intersect.\n\t\treturn _vector$b.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\t// We compute the minimum and maximum dot product values. If those values\n\t\t// are on the same side (back or front) of the plane, then there is no intersection.\n\n\t\tlet min, max;\n\n\t\tif ( plane.normal.x > 0 ) {\n\n\t\t\tmin = plane.normal.x * this.min.x;\n\t\t\tmax = plane.normal.x * this.max.x;\n\n\t\t} else {\n\n\t\t\tmin = plane.normal.x * this.max.x;\n\t\t\tmax = plane.normal.x * this.min.x;\n\n\t\t}\n\n\t\tif ( plane.normal.y > 0 ) {\n\n\t\t\tmin += plane.normal.y * this.min.y;\n\t\t\tmax += plane.normal.y * this.max.y;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.y * this.max.y;\n\t\t\tmax += plane.normal.y * this.min.y;\n\n\t\t}\n\n\t\tif ( plane.normal.z > 0 ) {\n\n\t\t\tmin += plane.normal.z * this.min.z;\n\t\t\tmax += plane.normal.z * this.max.z;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.z * this.max.z;\n\t\t\tmax += plane.normal.z * this.min.z;\n\n\t\t}\n\n\t\treturn ( min <= - plane.constant && max >= - plane.constant );\n\n\t}\n\n\tintersectsTriangle( triangle ) {\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// compute box center and extents\n\t\tthis.getCenter( _center );\n\t\t_extents.subVectors( this.max, _center );\n\n\t\t// translate triangle to aabb origin\n\t\t_v0$2.subVectors( triangle.a, _center );\n\t\t_v1$7.subVectors( triangle.b, _center );\n\t\t_v2$4.subVectors( triangle.c, _center );\n\n\t\t// compute edge vectors for triangle\n\t\t_f0.subVectors( _v1$7, _v0$2 );\n\t\t_f1.subVectors( _v2$4, _v1$7 );\n\t\t_f2.subVectors( _v0$2, _v2$4 );\n\n\t\t// test against axes that are given by cross product combinations of the edges of the triangle and the edges of the aabb\n\t\t// make an axis testing of each of the 3 sides of the aabb against each of the 3 sides of the triangle = 9 axis of separation\n\t\t// axis_ij = u_i x f_j (u0, u1, u2 = face normals of aabb = x,y,z axes vectors since aabb is axis aligned)\n\t\tlet axes = [\n\t\t\t0, - _f0.z, _f0.y, 0, - _f1.z, _f1.y, 0, - _f2.z, _f2.y,\n\t\t\t_f0.z, 0, - _f0.x, _f1.z, 0, - _f1.x, _f2.z, 0, - _f2.x,\n\t\t\t- _f0.y, _f0.x, 0, - _f1.y, _f1.x, 0, - _f2.y, _f2.x, 0\n\t\t];\n\t\tif ( ! satForAxes( axes, _v0$2, _v1$7, _v2$4, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// test 3 face normals from the aabb\n\t\taxes = [ 1, 0, 0, 0, 1, 0, 0, 0, 1 ];\n\t\tif ( ! satForAxes( axes, _v0$2, _v1$7, _v2$4, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// finally testing the face normal of the triangle\n\t\t// use already existing triangle edge vectors here\n\t\t_triangleNormal.crossVectors( _f0, _f1 );\n\t\taxes = [ _triangleNormal.x, _triangleNormal.y, _triangleNormal.z ];\n\n\t\treturn satForAxes( axes, _v0$2, _v1$7, _v2$4, _extents );\n\n\t}\n\n\tclampPoint( point, target ) {\n\n\t\treturn target.copy( point ).clamp( this.min, this.max );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\tconst clampedPoint = _vector$b.copy( point ).clamp( this.min, this.max );\n\n\t\treturn clampedPoint.sub( point ).length();\n\n\t}\n\n\tgetBoundingSphere( target ) {\n\n\t\tthis.getCenter( target.center );\n\n\t\ttarget.radius = this.getSize( _vector$b ).length() * 0.5;\n\n\t\treturn target;\n\n\t}\n\n\tintersect( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\t// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\n\t\tif ( this.isEmpty() ) this.makeEmpty();\n\n\t\treturn this;\n\n\t}\n\n\tunion( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\t// transform of empty box is an empty box.\n\t\tif ( this.isEmpty() ) return this;\n\n\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\n\t\t_points[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\n\t\t_points[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\n\t\t_points[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\n\t\t_points[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\n\t\t_points[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\n\t\t_points[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\n\t\t_points[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\n\t\t_points[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 111\n\n\t\tthis.setFromPoints( _points );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t}\n\n\tequals( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n}\n\nconst _points = [\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3()\n];\n\nconst _vector$b = /*@__PURE__*/ new Vector3();\n\nconst _box$3 = /*@__PURE__*/ new Box3();\n\n// triangle centered vertices\n\nconst _v0$2 = /*@__PURE__*/ new Vector3();\nconst _v1$7 = /*@__PURE__*/ new Vector3();\nconst _v2$4 = /*@__PURE__*/ new Vector3();\n\n// triangle edge vectors\n\nconst _f0 = /*@__PURE__*/ new Vector3();\nconst _f1 = /*@__PURE__*/ new Vector3();\nconst _f2 = /*@__PURE__*/ new Vector3();\n\nconst _center = /*@__PURE__*/ new Vector3();\nconst _extents = /*@__PURE__*/ new Vector3();\nconst _triangleNormal = /*@__PURE__*/ new Vector3();\nconst _testAxis = /*@__PURE__*/ new Vector3();\n\nfunction satForAxes( axes, v0, v1, v2, extents ) {\n\n\tfor ( let i = 0, j = axes.length - 3; i <= j; i += 3 ) {\n\n\t\t_testAxis.fromArray( axes, i );\n\t\t// project the aabb onto the separating axis\n\t\tconst r = extents.x * Math.abs( _testAxis.x ) + extents.y * Math.abs( _testAxis.y ) + extents.z * Math.abs( _testAxis.z );\n\t\t// project all 3 vertices of the triangle onto the separating axis\n\t\tconst p0 = v0.dot( _testAxis );\n\t\tconst p1 = v1.dot( _testAxis );\n\t\tconst p2 = v2.dot( _testAxis );\n\t\t// actual test, basically see if either of the most extreme of the triangle points intersects r\n\t\tif ( Math.max( - Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\n\n\t\t\t// points of the projected triangle are outside the projected half-length of the aabb\n\t\t\t// the axis is separating and we can exit\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\treturn true;\n\n}\n\nconst _box$2 = /*@__PURE__*/ new Box3();\nconst _v1$6 = /*@__PURE__*/ new Vector3();\nconst _v2$3 = /*@__PURE__*/ new Vector3();\n\nclass Sphere {\n\n\tconstructor( center = new Vector3(), radius = - 1 ) {\n\n\t\tthis.center = center;\n\t\tthis.radius = radius;\n\n\t}\n\n\tset( center, radius ) {\n\n\t\tthis.center.copy( center );\n\t\tthis.radius = radius;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points, optionalCenter ) {\n\n\t\tconst center = this.center;\n\n\t\tif ( optionalCenter !== undefined ) {\n\n\t\t\tcenter.copy( optionalCenter );\n\n\t\t} else {\n\n\t\t\t_box$2.setFromPoints( points ).getCenter( center );\n\n\t\t}\n\n\t\tlet maxRadiusSq = 0;\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\n\n\t\t}\n\n\t\tthis.radius = Math.sqrt( maxRadiusSq );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( sphere ) {\n\n\t\tthis.center.copy( sphere.center );\n\t\tthis.radius = sphere.radius;\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\treturn ( this.radius < 0 );\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.center.set( 0, 0, 0 );\n\t\tthis.radius = - 1;\n\n\t\treturn this;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\tconst radiusSum = this.radius + sphere.radius;\n\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsSphere( this );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\treturn Math.abs( plane.distanceToPoint( this.center ) ) <= this.radius;\n\n\t}\n\n\tclampPoint( point, target ) {\n\n\t\tconst deltaLengthSq = this.center.distanceToSquared( point );\n\n\t\ttarget.copy( point );\n\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\ttarget.sub( this.center ).normalize();\n\t\t\ttarget.multiplyScalar( this.radius ).add( this.center );\n\n\t\t}\n\n\t\treturn target;\n\n\t}\n\n\tgetBoundingBox( target ) {\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\t// Empty sphere produces empty bounding box\n\t\t\ttarget.makeEmpty();\n\t\t\treturn target;\n\n\t\t}\n\n\t\ttarget.set( this.center, this.center );\n\t\ttarget.expandByScalar( this.radius );\n\n\t\treturn target;\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tthis.center.applyMatrix4( matrix );\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.center.add( offset );\n\n\t\treturn this;\n\n\t}\n\n\texpandByPoint( point ) {\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\tthis.center.copy( point );\n\n\t\t\tthis.radius = 0;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\t_v1$6.subVectors( point, this.center );\n\n\t\tconst lengthSq = _v1$6.lengthSq();\n\n\t\tif ( lengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\t// calculate the minimal sphere\n\n\t\t\tconst length = Math.sqrt( lengthSq );\n\n\t\t\tconst delta = ( length - this.radius ) * 0.5;\n\n\t\t\tthis.center.addScaledVector( _v1$6, delta / length );\n\n\t\t\tthis.radius += delta;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tunion( sphere ) {\n\n\t\tif ( sphere.isEmpty() ) {\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\tthis.copy( sphere );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( this.center.equals( sphere.center ) === true ) {\n\n\t\t\t this.radius = Math.max( this.radius, sphere.radius );\n\n\t\t} else {\n\n\t\t\t_v2$3.subVectors( sphere.center, this.center ).setLength( sphere.radius );\n\n\t\t\tthis.expandByPoint( _v1$6.copy( sphere.center ).add( _v2$3 ) );\n\n\t\t\tthis.expandByPoint( _v1$6.copy( sphere.center ).sub( _v2$3 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tequals( sphere ) {\n\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nconst _vector$a = /*@__PURE__*/ new Vector3();\nconst _segCenter = /*@__PURE__*/ new Vector3();\nconst _segDir = /*@__PURE__*/ new Vector3();\nconst _diff = /*@__PURE__*/ new Vector3();\n\nconst _edge1 = /*@__PURE__*/ new Vector3();\nconst _edge2 = /*@__PURE__*/ new Vector3();\nconst _normal$1 = /*@__PURE__*/ new Vector3();\n\nclass Ray {\n\n\tconstructor( origin = new Vector3(), direction = new Vector3( 0, 0, - 1 ) ) {\n\n\t\tthis.origin = origin;\n\t\tthis.direction = direction;\n\n\t}\n\n\tset( origin, direction ) {\n\n\t\tthis.origin.copy( origin );\n\t\tthis.direction.copy( direction );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( ray ) {\n\n\t\tthis.origin.copy( ray.origin );\n\t\tthis.direction.copy( ray.direction );\n\n\t\treturn this;\n\n\t}\n\n\tat( t, target ) {\n\n\t\treturn target.copy( this.direction ).multiplyScalar( t ).add( this.origin );\n\n\t}\n\n\tlookAt( v ) {\n\n\t\tthis.direction.copy( v ).sub( this.origin ).normalize();\n\n\t\treturn this;\n\n\t}\n\n\trecast( t ) {\n\n\t\tthis.origin.copy( this.at( t, _vector$a ) );\n\n\t\treturn this;\n\n\t}\n\n\tclosestPointToPoint( point, target ) {\n\n\t\ttarget.subVectors( point, this.origin );\n\n\t\tconst directionDistance = target.dot( this.direction );\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn target.copy( this.origin );\n\n\t\t}\n\n\t\treturn target.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\n\n\t}\n\n\tdistanceSqToPoint( point ) {\n\n\t\tconst directionDistance = _vector$a.subVectors( point, this.origin ).dot( this.direction );\n\n\t\t// point behind the ray\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn this.origin.distanceToSquared( point );\n\n\t\t}\n\n\t\t_vector$a.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t\treturn _vector$a.distanceToSquared( point );\n\n\t}\n\n\tdistanceSqToSegment( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\n\n\t\t// from https://github.com/pmjoniak/GeometricTools/blob/master/GTEngine/Include/Mathematics/GteDistRaySegment.h\n\t\t// It returns the min distance between the ray and the segment\n\t\t// defined by v0 and v1\n\t\t// It can also set two optional targets :\n\t\t// - The closest point on the ray\n\t\t// - The closest point on the segment\n\n\t\t_segCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\n\t\t_segDir.copy( v1 ).sub( v0 ).normalize();\n\t\t_diff.copy( this.origin ).sub( _segCenter );\n\n\t\tconst segExtent = v0.distanceTo( v1 ) * 0.5;\n\t\tconst a01 = - this.direction.dot( _segDir );\n\t\tconst b0 = _diff.dot( this.direction );\n\t\tconst b1 = - _diff.dot( _segDir );\n\t\tconst c = _diff.lengthSq();\n\t\tconst det = Math.abs( 1 - a01 * a01 );\n\t\tlet s0, s1, sqrDist, extDet;\n\n\t\tif ( det > 0 ) {\n\n\t\t\t// The ray and segment are not parallel.\n\n\t\t\ts0 = a01 * b1 - b0;\n\t\t\ts1 = a01 * b0 - b1;\n\t\t\textDet = segExtent * det;\n\n\t\t\tif ( s0 >= 0 ) {\n\n\t\t\t\tif ( s1 >= - extDet ) {\n\n\t\t\t\t\tif ( s1 <= extDet ) {\n\n\t\t\t\t\t\t// region 0\n\t\t\t\t\t\t// Minimum at interior points of ray and segment.\n\n\t\t\t\t\t\tconst invDet = 1 / det;\n\t\t\t\t\t\ts0 *= invDet;\n\t\t\t\t\t\ts1 *= invDet;\n\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 1\n\n\t\t\t\t\t\ts1 = segExtent;\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 5\n\n\t\t\t\t\ts1 = - segExtent;\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( s1 <= - extDet ) {\n\n\t\t\t\t\t// region 4\n\n\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else if ( s1 <= extDet ) {\n\n\t\t\t\t\t// region 3\n\n\t\t\t\t\ts0 = 0;\n\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 2\n\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Ray and segment are parallel.\n\n\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\n\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t}\n\n\t\tif ( optionalPointOnRay ) {\n\n\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\n\n\t\t}\n\n\t\tif ( optionalPointOnSegment ) {\n\n\t\t\toptionalPointOnSegment.copy( _segDir ).multiplyScalar( s1 ).add( _segCenter );\n\n\t\t}\n\n\t\treturn sqrDist;\n\n\t}\n\n\tintersectSphere( sphere, target ) {\n\n\t\t_vector$a.subVectors( sphere.center, this.origin );\n\t\tconst tca = _vector$a.dot( this.direction );\n\t\tconst d2 = _vector$a.dot( _vector$a ) - tca * tca;\n\t\tconst radius2 = sphere.radius * sphere.radius;\n\n\t\tif ( d2 > radius2 ) return null;\n\n\t\tconst thc = Math.sqrt( radius2 - d2 );\n\n\t\t// t0 = first intersect point - entrance on front of sphere\n\t\tconst t0 = tca - thc;\n\n\t\t// t1 = second intersect point - exit point on back of sphere\n\t\tconst t1 = tca + thc;\n\n\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\n\t\tif ( t0 < 0 && t1 < 0 ) return null;\n\n\t\t// test to see if t0 is behind the ray:\n\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n\t\t// in order to always return an intersect point that is in front of the ray.\n\t\tif ( t0 < 0 ) return this.at( t1, target );\n\n\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\n\t\treturn this.at( t0, target );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\treturn this.distanceSqToPoint( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t}\n\n\tdistanceToPlane( plane ) {\n\n\t\tconst denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\n\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\n\n\t\t// Return if the ray never intersects the plane\n\n\t\treturn t >= 0 ? t : null;\n\n\t}\n\n\tintersectPlane( plane, target ) {\n\n\t\tconst t = this.distanceToPlane( plane );\n\n\t\tif ( t === null ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\treturn this.at( t, target );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\t// check if the ray lies on the plane first\n\n\t\tconst distToPoint = plane.distanceToPoint( this.origin );\n\n\t\tif ( distToPoint === 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tconst denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator * distToPoint < 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\t// ray origin is behind the plane (and is pointing behind it)\n\n\t\treturn false;\n\n\t}\n\n\tintersectBox( box, target ) {\n\n\t\tlet tmin, tmax, tymin, tymax, tzmin, tzmax;\n\n\t\tconst invdirx = 1 / this.direction.x,\n\t\t\tinvdiry = 1 / this.direction.y,\n\t\t\tinvdirz = 1 / this.direction.z;\n\n\t\tconst origin = this.origin;\n\n\t\tif ( invdirx >= 0 ) {\n\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\n\n\t\t} else {\n\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\n\n\t\t}\n\n\t\tif ( invdiry >= 0 ) {\n\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\n\n\t\t} else {\n\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\n\n\t\t}\n\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\n\n\t\tif ( tymin > tmin || isNaN( tmin ) ) tmin = tymin;\n\n\t\tif ( tymax < tmax || isNaN( tmax ) ) tmax = tymax;\n\n\t\tif ( invdirz >= 0 ) {\n\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\n\n\t\t} else {\n\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\n\n\t\t}\n\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\n\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\n\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\n\n\t\t//return point closest to the ray (positive side)\n\n\t\tif ( tmax < 0 ) return null;\n\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, target );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn this.intersectBox( box, _vector$a ) !== null;\n\n\t}\n\n\tintersectTriangle( a, b, c, backfaceCulling, target ) {\n\n\t\t// Compute the offset origin, edges, and normal.\n\n\t\t// from https://github.com/pmjoniak/GeometricTools/blob/master/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\n\n\t\t_edge1.subVectors( b, a );\n\t\t_edge2.subVectors( c, a );\n\t\t_normal$1.crossVectors( _edge1, _edge2 );\n\n\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n\t\tlet DdN = this.direction.dot( _normal$1 );\n\t\tlet sign;\n\n\t\tif ( DdN > 0 ) {\n\n\t\t\tif ( backfaceCulling ) return null;\n\t\t\tsign = 1;\n\n\t\t} else if ( DdN < 0 ) {\n\n\t\t\tsign = - 1;\n\t\t\tDdN = - DdN;\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t_diff.subVectors( this.origin, a );\n\t\tconst DdQxE2 = sign * this.direction.dot( _edge2.crossVectors( _diff, _edge2 ) );\n\n\t\t// b1 < 0, no intersection\n\t\tif ( DdQxE2 < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst DdE1xQ = sign * this.direction.dot( _edge1.cross( _diff ) );\n\n\t\t// b2 < 0, no intersection\n\t\tif ( DdE1xQ < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// b1+b2 > 1, no intersection\n\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// Line intersects triangle, check if ray does.\n\t\tconst QdN = - sign * _diff.dot( _normal$1 );\n\n\t\t// t < 0, no intersection\n\t\tif ( QdN < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// Ray intersects triangle.\n\t\treturn this.at( QdN / DdN, target );\n\n\t}\n\n\tapplyMatrix4( matrix4 ) {\n\n\t\tthis.origin.applyMatrix4( matrix4 );\n\t\tthis.direction.transformDirection( matrix4 );\n\n\t\treturn this;\n\n\t}\n\n\tequals( ray ) {\n\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nclass Matrix4 {\n\n\tconstructor() {\n\n\t\tMatrix4.prototype.isMatrix4 = true;\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t];\n\n\t}\n\n\tset( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Matrix4().fromArray( this.elements );\n\n\t}\n\n\tcopy( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\n\n\t\treturn this;\n\n\t}\n\n\tcopyPosition( m ) {\n\n\t\tconst te = this.elements, me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrix3( m ) {\n\n\t\tconst me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 3 ], me[ 6 ], 0,\n\t\t\tme[ 1 ], me[ 4 ], me[ 7 ], 0,\n\t\t\tme[ 2 ], me[ 5 ], me[ 8 ], 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\textractBasis( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\treturn this;\n\n\t}\n\n\tmakeBasis( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\textractRotation( m ) {\n\n\t\t// this method does not support reflection matrices\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tconst scaleX = 1 / _v1$5.setFromMatrixColumn( m, 0 ).length();\n\t\tconst scaleY = 1 / _v1$5.setFromMatrixColumn( m, 1 ).length();\n\t\tconst scaleZ = 1 / _v1$5.setFromMatrixColumn( m, 2 ).length();\n\n\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationFromEuler( euler ) {\n\n\t\tconst te = this.elements;\n\n\t\tconst x = euler.x, y = euler.y, z = euler.z;\n\t\tconst a = Math.cos( x ), b = Math.sin( x );\n\t\tconst c = Math.cos( y ), d = Math.sin( y );\n\t\tconst e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// bottom row\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// last column\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationFromQuaternion( q ) {\n\n\t\treturn this.compose( _zero, q, _one );\n\n\t}\n\n\tlookAt( eye, target, up ) {\n\n\t\tconst te = this.elements;\n\n\t\t_z.subVectors( eye, target );\n\n\t\tif ( _z.lengthSq() === 0 ) {\n\n\t\t\t// eye and target are in the same position\n\n\t\t\t_z.z = 1;\n\n\t\t}\n\n\t\t_z.normalize();\n\t\t_x.crossVectors( up, _z );\n\n\t\tif ( _x.lengthSq() === 0 ) {\n\n\t\t\t// up and z are parallel\n\n\t\t\tif ( Math.abs( up.z ) === 1 ) {\n\n\t\t\t\t_z.x += 0.0001;\n\n\t\t\t} else {\n\n\t\t\t\t_z.z += 0.0001;\n\n\t\t\t}\n\n\t\t\t_z.normalize();\n\t\t\t_x.crossVectors( up, _z );\n\n\t\t}\n\n\t\t_x.normalize();\n\t\t_y.crossVectors( _z, _x );\n\n\t\tte[ 0 ] = _x.x; te[ 4 ] = _y.x; te[ 8 ] = _z.x;\n\t\tte[ 1 ] = _x.y; te[ 5 ] = _y.y; te[ 9 ] = _z.y;\n\t\tte[ 2 ] = _x.z; te[ 6 ] = _y.z; te[ 10 ] = _z.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t}\n\n\tpremultiply( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t}\n\n\tmultiplyMatrices( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tconst a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tconst b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t}\n\n\tdeterminant() {\n\n\t\tconst te = this.elements;\n\n\t\tconst n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tconst n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tconst n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tconst n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t}\n\n\ttranspose() {\n\n\t\tconst te = this.elements;\n\t\tlet tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t}\n\n\tsetPosition( x, y, z ) {\n\n\t\tconst te = this.elements;\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\tte[ 12 ] = x.x;\n\t\t\tte[ 13 ] = x.y;\n\t\t\tte[ 14 ] = x.z;\n\n\t\t} else {\n\n\t\t\tte[ 12 ] = x;\n\t\t\tte[ 13 ] = y;\n\t\t\tte[ 14 ] = z;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tinvert() {\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tconst te = this.elements,\n\n\t\t\tn11 = te[ 0 ], n21 = te[ 1 ], n31 = te[ 2 ], n41 = te[ 3 ],\n\t\t\tn12 = te[ 4 ], n22 = te[ 5 ], n32 = te[ 6 ], n42 = te[ 7 ],\n\t\t\tn13 = te[ 8 ], n23 = te[ 9 ], n33 = te[ 10 ], n43 = te[ 11 ],\n\t\t\tn14 = te[ 12 ], n24 = te[ 13 ], n34 = te[ 14 ], n44 = te[ 15 ],\n\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\tconst det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\tte[ 4 ] = t12 * detInv;\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\tte[ 8 ] = t13 * detInv;\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\tte[ 12 ] = t14 * detInv;\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\treturn this;\n\n\t}\n\n\tscale( v ) {\n\n\t\tconst te = this.elements;\n\t\tconst x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t}\n\n\tgetMaxScaleOnAxis() {\n\n\t\tconst te = this.elements;\n\n\t\tconst scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tconst scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tconst scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t}\n\n\tmakeTranslation( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, x,\n\t\t\t0, 1, 0, y,\n\t\t\t0, 0, 1, z,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationX( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s, c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationY( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationZ( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts, c, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationAxis( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tconst c = Math.cos( angle );\n\t\tconst s = Math.sin( angle );\n\t\tconst t = 1 - c;\n\t\tconst x = axis.x, y = axis.y, z = axis.z;\n\t\tconst tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeScale( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeShear( xy, xz, yx, yz, zx, zy ) {\n\n\t\tthis.set(\n\n\t\t\t1, yx, zx, 0,\n\t\t\txy, 1, zy, 0,\n\t\t\txz, yz, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tcompose( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tconst x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\n\t\tconst x2 = x + x,\ty2 = y + y, z2 = z + z;\n\t\tconst xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tconst yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tconst wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tconst sx = scale.x, sy = scale.y, sz = scale.z;\n\n\t\tte[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\n\t\tte[ 1 ] = ( xy + wz ) * sx;\n\t\tte[ 2 ] = ( xz - wy ) * sx;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = ( xy - wz ) * sy;\n\t\tte[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\n\t\tte[ 6 ] = ( yz + wx ) * sy;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = ( xz + wy ) * sz;\n\t\tte[ 9 ] = ( yz - wx ) * sz;\n\t\tte[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = position.x;\n\t\tte[ 13 ] = position.y;\n\t\tte[ 14 ] = position.z;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tdecompose( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tlet sx = _v1$5.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\tconst sy = _v1$5.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\tconst sz = _v1$5.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t// if determine is negative, we need to invert one scale\n\t\tconst det = this.determinant();\n\t\tif ( det < 0 ) sx = - sx;\n\n\t\tposition.x = te[ 12 ];\n\t\tposition.y = te[ 13 ];\n\t\tposition.z = te[ 14 ];\n\n\t\t// scale the rotation part\n\t\t_m1$2.copy( this );\n\n\t\tconst invSX = 1 / sx;\n\t\tconst invSY = 1 / sy;\n\t\tconst invSZ = 1 / sz;\n\n\t\t_m1$2.elements[ 0 ] *= invSX;\n\t\t_m1$2.elements[ 1 ] *= invSX;\n\t\t_m1$2.elements[ 2 ] *= invSX;\n\n\t\t_m1$2.elements[ 4 ] *= invSY;\n\t\t_m1$2.elements[ 5 ] *= invSY;\n\t\t_m1$2.elements[ 6 ] *= invSY;\n\n\t\t_m1$2.elements[ 8 ] *= invSZ;\n\t\t_m1$2.elements[ 9 ] *= invSZ;\n\t\t_m1$2.elements[ 10 ] *= invSZ;\n\n\t\tquaternion.setFromRotationMatrix( _m1$2 );\n\n\t\tscale.x = sx;\n\t\tscale.y = sy;\n\t\tscale.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tmakePerspective( left, right, top, bottom, near, far ) {\n\n\t\tconst te = this.elements;\n\t\tconst x = 2 * near / ( right - left );\n\t\tconst y = 2 * near / ( top - bottom );\n\n\t\tconst a = ( right + left ) / ( right - left );\n\t\tconst b = ( top + bottom ) / ( top - bottom );\n\t\tconst c = - ( far + near ) / ( far - near );\n\t\tconst d = - 2 * far * near / ( far - near );\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t}\n\n\tmakeOrthographic( left, right, top, bottom, near, far ) {\n\n\t\tconst te = this.elements;\n\t\tconst w = 1.0 / ( right - left );\n\t\tconst h = 1.0 / ( top - bottom );\n\t\tconst p = 1.0 / ( far - near );\n\n\t\tconst x = ( right + left ) * w;\n\t\tconst y = ( top + bottom ) * h;\n\t\tconst z = ( far + near ) * p;\n\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tequals( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\t\tarray[ offset + 9 ] = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t}\n\n}\n\nconst _v1$5 = /*@__PURE__*/ new Vector3();\nconst _m1$2 = /*@__PURE__*/ new Matrix4();\nconst _zero = /*@__PURE__*/ new Vector3( 0, 0, 0 );\nconst _one = /*@__PURE__*/ new Vector3( 1, 1, 1 );\nconst _x = /*@__PURE__*/ new Vector3();\nconst _y = /*@__PURE__*/ new Vector3();\nconst _z = /*@__PURE__*/ new Vector3();\n\nconst _matrix$1 = /*@__PURE__*/ new Matrix4();\nconst _quaternion$3 = /*@__PURE__*/ new Quaternion();\n\nclass Euler {\n\n\tconstructor( x = 0, y = 0, z = 0, order = Euler.DefaultOrder ) {\n\n\t\tthis.isEuler = true;\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order;\n\n\t}\n\n\tget x() {\n\n\t\treturn this._x;\n\n\t}\n\n\tset x( value ) {\n\n\t\tthis._x = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget y() {\n\n\t\treturn this._y;\n\n\t}\n\n\tset y( value ) {\n\n\t\tthis._y = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget z() {\n\n\t\treturn this._z;\n\n\t}\n\n\tset z( value ) {\n\n\t\tthis._z = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget order() {\n\n\t\treturn this._order;\n\n\t}\n\n\tset order( value ) {\n\n\t\tthis._order = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tset( x, y, z, order = this._order ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\n\n\t}\n\n\tcopy( euler ) {\n\n\t\tthis._x = euler._x;\n\t\tthis._y = euler._y;\n\t\tthis._z = euler._z;\n\t\tthis._order = euler._order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromRotationMatrix( m, order = this._order, update = true ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tconst te = m.elements;\n\t\tconst m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\n\t\tconst m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\n\t\tconst m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYZ':\n\n\t\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m13 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\t\tthis._z = Math.atan2( - m12, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\t\tthis._z = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXZ':\n\n\t\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m23 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\t\t\t\t\tthis._z = Math.atan2( m21, m22 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\t\t\t\t\tthis._z = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXY':\n\n\t\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m32 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._y = Math.atan2( - m31, m33 );\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._y = 0;\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYX':\n\n\t\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m31 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m33 );\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = 0;\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZX':\n\n\t\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m21 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m22 );\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = 0;\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZY':\n\n\t\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m12 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\t\tthis._y = Math.atan2( m13, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\t\tthis._y = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t\tthis._order = order;\n\n\t\tif ( update === true ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromQuaternion( q, order, update ) {\n\n\t\t_matrix$1.makeRotationFromQuaternion( q );\n\n\t\treturn this.setFromRotationMatrix( _matrix$1, order, update );\n\n\t}\n\n\tsetFromVector3( v, order = this._order ) {\n\n\t\treturn this.set( v.x, v.y, v.z, order );\n\n\t}\n\n\treorder( newOrder ) {\n\n\t\t// WARNING: this discards revolution information -bhouston\n\n\t\t_quaternion$3.setFromEuler( this );\n\n\t\treturn this.setFromQuaternion( _quaternion$3, newOrder );\n\n\t}\n\n\tequals( euler ) {\n\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\n\n\t}\n\n\tfromArray( array ) {\n\n\t\tthis._x = array[ 0 ];\n\t\tthis._y = array[ 1 ];\n\t\tthis._z = array[ 2 ];\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._order;\n\n\t\treturn array;\n\n\t}\n\n\t_onChange( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\t_onChangeCallback() {}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this._x;\n\t\tyield this._y;\n\t\tyield this._z;\n\t\tyield this._order;\n\n\t}\n\n\t// @deprecated since r138, 02cf0df1cb4575d5842fef9c85bb5a89fe020d53\n\n\ttoVector3() {\n\n\t\tconsole.error( 'THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead' );\n\n\t}\n\n}\n\nEuler.DefaultOrder = 'XYZ';\nEuler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\n\nclass Layers {\n\n\tconstructor() {\n\n\t\tthis.mask = 1 | 0;\n\n\t}\n\n\tset( channel ) {\n\n\t\tthis.mask = ( 1 << channel | 0 ) >>> 0;\n\n\t}\n\n\tenable( channel ) {\n\n\t\tthis.mask |= 1 << channel | 0;\n\n\t}\n\n\tenableAll() {\n\n\t\tthis.mask = 0xffffffff | 0;\n\n\t}\n\n\ttoggle( channel ) {\n\n\t\tthis.mask ^= 1 << channel | 0;\n\n\t}\n\n\tdisable( channel ) {\n\n\t\tthis.mask &= ~ ( 1 << channel | 0 );\n\n\t}\n\n\tdisableAll() {\n\n\t\tthis.mask = 0;\n\n\t}\n\n\ttest( layers ) {\n\n\t\treturn ( this.mask & layers.mask ) !== 0;\n\n\t}\n\n\tisEnabled( channel ) {\n\n\t\treturn ( this.mask & ( 1 << channel | 0 ) ) !== 0;\n\n\t}\n\n}\n\nlet _object3DId = 0;\n\nconst _v1$4 = /*@__PURE__*/ new Vector3();\nconst _q1 = /*@__PURE__*/ new Quaternion();\nconst _m1$1 = /*@__PURE__*/ new Matrix4();\nconst _target = /*@__PURE__*/ new Vector3();\n\nconst _position$3 = /*@__PURE__*/ new Vector3();\nconst _scale$2 = /*@__PURE__*/ new Vector3();\nconst _quaternion$2 = /*@__PURE__*/ new Quaternion();\n\nconst _xAxis = /*@__PURE__*/ new Vector3( 1, 0, 0 );\nconst _yAxis = /*@__PURE__*/ new Vector3( 0, 1, 0 );\nconst _zAxis = /*@__PURE__*/ new Vector3( 0, 0, 1 );\n\nconst _addedEvent = { type: 'added' };\nconst _removedEvent = { type: 'removed' };\n\nclass Object3D extends EventDispatcher {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isObject3D = true;\n\n\t\tObject.defineProperty( this, 'id', { value: _object3DId ++ } );\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.name = '';\n\t\tthis.type = 'Object3D';\n\n\t\tthis.parent = null;\n\t\tthis.children = [];\n\n\t\tthis.up = Object3D.DefaultUp.clone();\n\n\t\tconst position = new Vector3();\n\t\tconst rotation = new Euler();\n\t\tconst quaternion = new Quaternion();\n\t\tconst scale = new Vector3( 1, 1, 1 );\n\n\t\tfunction onRotationChange() {\n\n\t\t\tquaternion.setFromEuler( rotation, false );\n\n\t\t}\n\n\t\tfunction onQuaternionChange() {\n\n\t\t\trotation.setFromQuaternion( quaternion, undefined, false );\n\n\t\t}\n\n\t\trotation._onChange( onRotationChange );\n\t\tquaternion._onChange( onQuaternionChange );\n\n\t\tObject.defineProperties( this, {\n\t\t\tposition: {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: position\n\t\t\t},\n\t\t\trotation: {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: rotation\n\t\t\t},\n\t\t\tquaternion: {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: quaternion\n\t\t\t},\n\t\t\tscale: {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: scale\n\t\t\t},\n\t\t\tmodelViewMatrix: {\n\t\t\t\tvalue: new Matrix4()\n\t\t\t},\n\t\t\tnormalMatrix: {\n\t\t\t\tvalue: new Matrix3()\n\t\t\t}\n\t\t} );\n\n\t\tthis.matrix = new Matrix4();\n\t\tthis.matrixWorld = new Matrix4();\n\n\t\tthis.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\n\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\tthis.matrixWorldAutoUpdate = Object3D.DefaultMatrixWorldAutoUpdate; // checked by the renderer\n\n\t\tthis.layers = new Layers();\n\t\tthis.visible = true;\n\n\t\tthis.castShadow = false;\n\t\tthis.receiveShadow = false;\n\n\t\tthis.frustumCulled = true;\n\t\tthis.renderOrder = 0;\n\n\t\tthis.animations = [];\n\n\t\tthis.userData = {};\n\n\t}\n\n\tonBeforeRender( /* renderer, scene, camera, geometry, material, group */ ) {}\n\n\tonAfterRender( /* renderer, scene, camera, geometry, material, group */ ) {}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tthis.matrix.premultiply( matrix );\n\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\n\n\t}\n\n\tapplyQuaternion( q ) {\n\n\t\tthis.quaternion.premultiply( q );\n\n\t\treturn this;\n\n\t}\n\n\tsetRotationFromAxisAngle( axis, angle ) {\n\n\t\t// assumes axis is normalized\n\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\n\n\t}\n\n\tsetRotationFromEuler( euler ) {\n\n\t\tthis.quaternion.setFromEuler( euler, true );\n\n\t}\n\n\tsetRotationFromMatrix( m ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tthis.quaternion.setFromRotationMatrix( m );\n\n\t}\n\n\tsetRotationFromQuaternion( q ) {\n\n\t\t// assumes q is normalized\n\n\t\tthis.quaternion.copy( q );\n\n\t}\n\n\trotateOnAxis( axis, angle ) {\n\n\t\t// rotate object on axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.multiply( _q1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateOnWorldAxis( axis, angle ) {\n\n\t\t// rotate object on axis in world space\n\t\t// axis is assumed to be normalized\n\t\t// method assumes no rotated parent\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.premultiply( _q1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateX( angle ) {\n\n\t\treturn this.rotateOnAxis( _xAxis, angle );\n\n\t}\n\n\trotateY( angle ) {\n\n\t\treturn this.rotateOnAxis( _yAxis, angle );\n\n\t}\n\n\trotateZ( angle ) {\n\n\t\treturn this.rotateOnAxis( _zAxis, angle );\n\n\t}\n\n\ttranslateOnAxis( axis, distance ) {\n\n\t\t// translate object by distance along axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_v1$4.copy( axis ).applyQuaternion( this.quaternion );\n\n\t\tthis.position.add( _v1$4.multiplyScalar( distance ) );\n\n\t\treturn this;\n\n\t}\n\n\ttranslateX( distance ) {\n\n\t\treturn this.translateOnAxis( _xAxis, distance );\n\n\t}\n\n\ttranslateY( distance ) {\n\n\t\treturn this.translateOnAxis( _yAxis, distance );\n\n\t}\n\n\ttranslateZ( distance ) {\n\n\t\treturn this.translateOnAxis( _zAxis, distance );\n\n\t}\n\n\tlocalToWorld( vector ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\treturn vector.applyMatrix4( this.matrixWorld );\n\n\t}\n\n\tworldToLocal( vector ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\treturn vector.applyMatrix4( _m1$1.copy( this.matrixWorld ).invert() );\n\n\t}\n\n\tlookAt( x, y, z ) {\n\n\t\t// This method does not support objects having non-uniformly-scaled parent(s)\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\t_target.copy( x );\n\n\t\t} else {\n\n\t\t\t_target.set( x, y, z );\n\n\t\t}\n\n\t\tconst parent = this.parent;\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_position$3.setFromMatrixPosition( this.matrixWorld );\n\n\t\tif ( this.isCamera || this.isLight ) {\n\n\t\t\t_m1$1.lookAt( _position$3, _target, this.up );\n\n\t\t} else {\n\n\t\t\t_m1$1.lookAt( _target, _position$3, this.up );\n\n\t\t}\n\n\t\tthis.quaternion.setFromRotationMatrix( _m1$1 );\n\n\t\tif ( parent ) {\n\n\t\t\t_m1$1.extractRotation( parent.matrixWorld );\n\t\t\t_q1.setFromRotationMatrix( _m1$1 );\n\t\t\tthis.quaternion.premultiply( _q1.invert() );\n\n\t\t}\n\n\t}\n\n\tadd( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object === this ) {\n\n\t\t\tconsole.error( 'THREE.Object3D.add: object can\\'t be added as a child of itself.', object );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object && object.isObject3D ) {\n\n\t\t\tif ( object.parent !== null ) {\n\n\t\t\t\tobject.parent.remove( object );\n\n\t\t\t}\n\n\t\t\tobject.parent = this;\n\t\t\tthis.children.push( object );\n\n\t\t\tobject.dispatchEvent( _addedEvent );\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.Object3D.add: object not an instance of THREE.Object3D.', object );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tremove( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.remove( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst index = this.children.indexOf( object );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tobject.parent = null;\n\t\t\tthis.children.splice( index, 1 );\n\n\t\t\tobject.dispatchEvent( _removedEvent );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tremoveFromParent() {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tparent.remove( this );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclear() {\n\n\t\tfor ( let i = 0; i < this.children.length; i ++ ) {\n\n\t\t\tconst object = this.children[ i ];\n\n\t\t\tobject.parent = null;\n\n\t\t\tobject.dispatchEvent( _removedEvent );\n\n\t\t}\n\n\t\tthis.children.length = 0;\n\n\t\treturn this;\n\n\n\t}\n\n\tattach( object ) {\n\n\t\t// adds object as a child of this, while maintaining the object's world transform\n\n\t\t// Note: This method does not support scene graphs having non-uniformly-scaled nodes(s)\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_m1$1.copy( this.matrixWorld ).invert();\n\n\t\tif ( object.parent !== null ) {\n\n\t\t\tobject.parent.updateWorldMatrix( true, false );\n\n\t\t\t_m1$1.multiply( object.parent.matrixWorld );\n\n\t\t}\n\n\t\tobject.applyMatrix4( _m1$1 );\n\n\t\tthis.add( object );\n\n\t\tobject.updateWorldMatrix( false, true );\n\n\t\treturn this;\n\n\t}\n\n\tgetObjectById( id ) {\n\n\t\treturn this.getObjectByProperty( 'id', id );\n\n\t}\n\n\tgetObjectByName( name ) {\n\n\t\treturn this.getObjectByProperty( 'name', name );\n\n\t}\n\n\tgetObjectByProperty( name, value ) {\n\n\t\tif ( this[ name ] === value ) return this;\n\n\t\tfor ( let i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tconst child = this.children[ i ];\n\t\t\tconst object = child.getObjectByProperty( name, value );\n\n\t\t\tif ( object !== undefined ) {\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t}\n\n\tgetObjectsByProperty( name, value ) {\n\n\t\tlet result = [];\n\n\t\tif ( this[ name ] === value ) result.push( this );\n\n\t\tfor ( let i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tconst childResult = this.children[ i ].getObjectsByProperty( name, value );\n\n\t\t\tif ( childResult.length > 0 ) {\n\n\t\t\t\tresult = result.concat( childResult );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tgetWorldPosition( target ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\treturn target.setFromMatrixPosition( this.matrixWorld );\n\n\t}\n\n\tgetWorldQuaternion( target ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tthis.matrixWorld.decompose( _position$3, target, _scale$2 );\n\n\t\treturn target;\n\n\t}\n\n\tgetWorldScale( target ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tthis.matrixWorld.decompose( _position$3, _quaternion$2, target );\n\n\t\treturn target;\n\n\t}\n\n\tgetWorldDirection( target ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tconst e = this.matrixWorld.elements;\n\n\t\treturn target.set( e[ 8 ], e[ 9 ], e[ 10 ] ).normalize();\n\n\t}\n\n\traycast( /* raycaster, intersects */ ) {}\n\n\ttraverse( callback ) {\n\n\t\tcallback( this );\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverse( callback );\n\n\t\t}\n\n\t}\n\n\ttraverseVisible( callback ) {\n\n\t\tif ( this.visible === false ) return;\n\n\t\tcallback( this );\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverseVisible( callback );\n\n\t\t}\n\n\t}\n\n\ttraverseAncestors( callback ) {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tcallback( parent );\n\n\t\t\tparent.traverseAncestors( callback );\n\n\t\t}\n\n\t}\n\n\tupdateMatrix() {\n\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\n\t\tthis.matrixWorldNeedsUpdate = true;\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\n\n\t\t\tif ( this.parent === null ) {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t}\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tconst child = children[ i ];\n\n\t\t\tif ( child.matrixWorldAutoUpdate === true || force === true ) {\n\n\t\t\t\tchild.updateMatrixWorld( force );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tupdateWorldMatrix( updateParents, updateChildren ) {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( updateParents === true && parent !== null && parent.matrixWorldAutoUpdate === true ) {\n\n\t\t\tparent.updateWorldMatrix( true, false );\n\n\t\t}\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.parent === null ) {\n\n\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t} else {\n\n\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t}\n\n\t\t// update children\n\n\t\tif ( updateChildren === true ) {\n\n\t\t\tconst children = this.children;\n\n\t\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tconst child = children[ i ];\n\n\t\t\t\tif ( child.matrixWorldAutoUpdate === true ) {\n\n\t\t\t\t\tchild.updateWorldMatrix( false, true );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\t// meta is a string when called from JSON.stringify\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tconst output = {};\n\n\t\t// meta is a hash used to collect geometries, materials.\n\t\t// not providing it implies that this is the root object\n\t\t// being serialized.\n\t\tif ( isRootObject ) {\n\n\t\t\t// initialize meta obj\n\t\t\tmeta = {\n\t\t\t\tgeometries: {},\n\t\t\t\tmaterials: {},\n\t\t\t\ttextures: {},\n\t\t\t\timages: {},\n\t\t\t\tshapes: {},\n\t\t\t\tskeletons: {},\n\t\t\t\tanimations: {},\n\t\t\t\tnodes: {}\n\t\t\t};\n\n\t\t\toutput.metadata = {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Object',\n\t\t\t\tgenerator: 'Object3D.toJSON'\n\t\t\t};\n\n\t\t}\n\n\t\t// standard Object3D serialization\n\n\t\tconst object = {};\n\n\t\tobject.uuid = this.uuid;\n\t\tobject.type = this.type;\n\n\t\tif ( this.name !== '' ) object.name = this.name;\n\t\tif ( this.castShadow === true ) object.castShadow = true;\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\n\t\tif ( this.visible === false ) object.visible = false;\n\t\tif ( this.frustumCulled === false ) object.frustumCulled = false;\n\t\tif ( this.renderOrder !== 0 ) object.renderOrder = this.renderOrder;\n\t\tif ( Object.keys( this.userData ).length > 0 ) object.userData = this.userData;\n\n\t\tobject.layers = this.layers.mask;\n\t\tobject.matrix = this.matrix.toArray();\n\n\t\tif ( this.matrixAutoUpdate === false ) object.matrixAutoUpdate = false;\n\n\t\t// object specific properties\n\n\t\tif ( this.isInstancedMesh ) {\n\n\t\t\tobject.type = 'InstancedMesh';\n\t\t\tobject.count = this.count;\n\t\t\tobject.instanceMatrix = this.instanceMatrix.toJSON();\n\t\t\tif ( this.instanceColor !== null ) object.instanceColor = this.instanceColor.toJSON();\n\n\t\t}\n\n\t\t//\n\n\t\tfunction serialize( library, element ) {\n\n\t\t\tif ( library[ element.uuid ] === undefined ) {\n\n\t\t\t\tlibrary[ element.uuid ] = element.toJSON( meta );\n\n\t\t\t}\n\n\t\t\treturn element.uuid;\n\n\t\t}\n\n\t\tif ( this.isScene ) {\n\n\t\t\tif ( this.background ) {\n\n\t\t\t\tif ( this.background.isColor ) {\n\n\t\t\t\t\tobject.background = this.background.toJSON();\n\n\t\t\t\t} else if ( this.background.isTexture ) {\n\n\t\t\t\t\tobject.background = this.background.toJSON( meta ).uuid;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( this.environment && this.environment.isTexture && this.environment.isRenderTargetTexture !== true ) {\n\n\t\t\t\tobject.environment = this.environment.toJSON( meta ).uuid;\n\n\t\t\t}\n\n\t\t} else if ( this.isMesh || this.isLine || this.isPoints ) {\n\n\t\t\tobject.geometry = serialize( meta.geometries, this.geometry );\n\n\t\t\tconst parameters = this.geometry.parameters;\n\n\t\t\tif ( parameters !== undefined && parameters.shapes !== undefined ) {\n\n\t\t\t\tconst shapes = parameters.shapes;\n\n\t\t\t\tif ( Array.isArray( shapes ) ) {\n\n\t\t\t\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tconst shape = shapes[ i ];\n\n\t\t\t\t\t\tserialize( meta.shapes, shape );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tserialize( meta.shapes, shapes );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.isSkinnedMesh ) {\n\n\t\t\tobject.bindMode = this.bindMode;\n\t\t\tobject.bindMatrix = this.bindMatrix.toArray();\n\n\t\t\tif ( this.skeleton !== undefined ) {\n\n\t\t\t\tserialize( meta.skeletons, this.skeleton );\n\n\t\t\t\tobject.skeleton = this.skeleton.uuid;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.material !== undefined ) {\n\n\t\t\tif ( Array.isArray( this.material ) ) {\n\n\t\t\t\tconst uuids = [];\n\n\t\t\t\tfor ( let i = 0, l = this.material.length; i < l; i ++ ) {\n\n\t\t\t\t\tuuids.push( serialize( meta.materials, this.material[ i ] ) );\n\n\t\t\t\t}\n\n\t\t\t\tobject.material = uuids;\n\n\t\t\t} else {\n\n\t\t\t\tobject.material = serialize( meta.materials, this.material );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.children.length > 0 ) {\n\n\t\t\tobject.children = [];\n\n\t\t\tfor ( let i = 0; i < this.children.length; i ++ ) {\n\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.animations.length > 0 ) {\n\n\t\t\tobject.animations = [];\n\n\t\t\tfor ( let i = 0; i < this.animations.length; i ++ ) {\n\n\t\t\t\tconst animation = this.animations[ i ];\n\n\t\t\t\tobject.animations.push( serialize( meta.animations, animation ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( isRootObject ) {\n\n\t\t\tconst geometries = extractFromCache( meta.geometries );\n\t\t\tconst materials = extractFromCache( meta.materials );\n\t\t\tconst textures = extractFromCache( meta.textures );\n\t\t\tconst images = extractFromCache( meta.images );\n\t\t\tconst shapes = extractFromCache( meta.shapes );\n\t\t\tconst skeletons = extractFromCache( meta.skeletons );\n\t\t\tconst animations = extractFromCache( meta.animations );\n\t\t\tconst nodes = extractFromCache( meta.nodes );\n\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\n\t\t\tif ( images.length > 0 ) output.images = images;\n\t\t\tif ( shapes.length > 0 ) output.shapes = shapes;\n\t\t\tif ( skeletons.length > 0 ) output.skeletons = skeletons;\n\t\t\tif ( animations.length > 0 ) output.animations = animations;\n\t\t\tif ( nodes.length > 0 ) output.nodes = nodes;\n\n\t\t}\n\n\t\toutput.object = object;\n\n\t\treturn output;\n\n\t\t// extract data from the cache hash\n\t\t// remove metadata on each item\n\t\t// and return as array\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tconst values = [];\n\t\t\tfor ( const key in cache ) {\n\n\t\t\t\tconst data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t}\n\n\tclone( recursive ) {\n\n\t\treturn new this.constructor().copy( this, recursive );\n\n\t}\n\n\tcopy( source, recursive = true ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.up.copy( source.up );\n\n\t\tthis.position.copy( source.position );\n\t\tthis.rotation.order = source.rotation.order;\n\t\tthis.quaternion.copy( source.quaternion );\n\t\tthis.scale.copy( source.scale );\n\n\t\tthis.matrix.copy( source.matrix );\n\t\tthis.matrixWorld.copy( source.matrixWorld );\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\n\n\t\tthis.matrixWorldAutoUpdate = source.matrixWorldAutoUpdate;\n\n\t\tthis.layers.mask = source.layers.mask;\n\t\tthis.visible = source.visible;\n\n\t\tthis.castShadow = source.castShadow;\n\t\tthis.receiveShadow = source.receiveShadow;\n\n\t\tthis.frustumCulled = source.frustumCulled;\n\t\tthis.renderOrder = source.renderOrder;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tfor ( let i = 0; i < source.children.length; i ++ ) {\n\n\t\t\t\tconst child = source.children[ i ];\n\t\t\t\tthis.add( child.clone() );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nObject3D.DefaultUp = /*@__PURE__*/ new Vector3( 0, 1, 0 );\nObject3D.DefaultMatrixAutoUpdate = true;\nObject3D.DefaultMatrixWorldAutoUpdate = true;\n\nconst _v0$1 = /*@__PURE__*/ new Vector3();\nconst _v1$3 = /*@__PURE__*/ new Vector3();\nconst _v2$2 = /*@__PURE__*/ new Vector3();\nconst _v3$1 = /*@__PURE__*/ new Vector3();\n\nconst _vab = /*@__PURE__*/ new Vector3();\nconst _vac = /*@__PURE__*/ new Vector3();\nconst _vbc = /*@__PURE__*/ new Vector3();\nconst _vap = /*@__PURE__*/ new Vector3();\nconst _vbp = /*@__PURE__*/ new Vector3();\nconst _vcp = /*@__PURE__*/ new Vector3();\n\nclass Triangle {\n\n\tconstructor( a = new Vector3(), b = new Vector3(), c = new Vector3() ) {\n\n\t\tthis.a = a;\n\t\tthis.b = b;\n\t\tthis.c = c;\n\n\t}\n\n\tstatic getNormal( a, b, c, target ) {\n\n\t\ttarget.subVectors( c, b );\n\t\t_v0$1.subVectors( a, b );\n\t\ttarget.cross( _v0$1 );\n\n\t\tconst targetLengthSq = target.lengthSq();\n\t\tif ( targetLengthSq > 0 ) {\n\n\t\t\treturn target.multiplyScalar( 1 / Math.sqrt( targetLengthSq ) );\n\n\t\t}\n\n\t\treturn target.set( 0, 0, 0 );\n\n\t}\n\n\t// static/instance method to calculate barycentric coordinates\n\t// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\n\tstatic getBarycoord( point, a, b, c, target ) {\n\n\t\t_v0$1.subVectors( c, a );\n\t\t_v1$3.subVectors( b, a );\n\t\t_v2$2.subVectors( point, a );\n\n\t\tconst dot00 = _v0$1.dot( _v0$1 );\n\t\tconst dot01 = _v0$1.dot( _v1$3 );\n\t\tconst dot02 = _v0$1.dot( _v2$2 );\n\t\tconst dot11 = _v1$3.dot( _v1$3 );\n\t\tconst dot12 = _v1$3.dot( _v2$2 );\n\n\t\tconst denom = ( dot00 * dot11 - dot01 * dot01 );\n\n\t\t// collinear or singular triangle\n\t\tif ( denom === 0 ) {\n\n\t\t\t// arbitrary location outside of triangle?\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\n\t\t\treturn target.set( - 2, - 1, - 1 );\n\n\t\t}\n\n\t\tconst invDenom = 1 / denom;\n\t\tconst u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\n\t\tconst v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\n\n\t\t// barycentric coordinates must always sum to 1\n\t\treturn target.set( 1 - u - v, v, u );\n\n\t}\n\n\tstatic containsPoint( point, a, b, c ) {\n\n\t\tthis.getBarycoord( point, a, b, c, _v3$1 );\n\n\t\treturn ( _v3$1.x >= 0 ) && ( _v3$1.y >= 0 ) && ( ( _v3$1.x + _v3$1.y ) <= 1 );\n\n\t}\n\n\tstatic getUV( point, p1, p2, p3, uv1, uv2, uv3, target ) {\n\n\t\tthis.getBarycoord( point, p1, p2, p3, _v3$1 );\n\n\t\ttarget.set( 0, 0 );\n\t\ttarget.addScaledVector( uv1, _v3$1.x );\n\t\ttarget.addScaledVector( uv2, _v3$1.y );\n\t\ttarget.addScaledVector( uv3, _v3$1.z );\n\n\t\treturn target;\n\n\t}\n\n\tstatic isFrontFacing( a, b, c, direction ) {\n\n\t\t_v0$1.subVectors( c, b );\n\t\t_v1$3.subVectors( a, b );\n\n\t\t// strictly front facing\n\t\treturn ( _v0$1.cross( _v1$3 ).dot( direction ) < 0 ) ? true : false;\n\n\t}\n\n\tset( a, b, c ) {\n\n\t\tthis.a.copy( a );\n\t\tthis.b.copy( b );\n\t\tthis.c.copy( c );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPointsAndIndices( points, i0, i1, i2 ) {\n\n\t\tthis.a.copy( points[ i0 ] );\n\t\tthis.b.copy( points[ i1 ] );\n\t\tthis.c.copy( points[ i2 ] );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromAttributeAndIndices( attribute, i0, i1, i2 ) {\n\n\t\tthis.a.fromBufferAttribute( attribute, i0 );\n\t\tthis.b.fromBufferAttribute( attribute, i1 );\n\t\tthis.c.fromBufferAttribute( attribute, i2 );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( triangle ) {\n\n\t\tthis.a.copy( triangle.a );\n\t\tthis.b.copy( triangle.b );\n\t\tthis.c.copy( triangle.c );\n\n\t\treturn this;\n\n\t}\n\n\tgetArea() {\n\n\t\t_v0$1.subVectors( this.c, this.b );\n\t\t_v1$3.subVectors( this.a, this.b );\n\n\t\treturn _v0$1.cross( _v1$3 ).length() * 0.5;\n\n\t}\n\n\tgetMidpoint( target ) {\n\n\t\treturn target.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\n\n\t}\n\n\tgetNormal( target ) {\n\n\t\treturn Triangle.getNormal( this.a, this.b, this.c, target );\n\n\t}\n\n\tgetPlane( target ) {\n\n\t\treturn target.setFromCoplanarPoints( this.a, this.b, this.c );\n\n\t}\n\n\tgetBarycoord( point, target ) {\n\n\t\treturn Triangle.getBarycoord( point, this.a, this.b, this.c, target );\n\n\t}\n\n\tgetUV( point, uv1, uv2, uv3, target ) {\n\n\t\treturn Triangle.getUV( point, this.a, this.b, this.c, uv1, uv2, uv3, target );\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn Triangle.containsPoint( point, this.a, this.b, this.c );\n\n\t}\n\n\tisFrontFacing( direction ) {\n\n\t\treturn Triangle.isFrontFacing( this.a, this.b, this.c, direction );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsTriangle( this );\n\n\t}\n\n\tclosestPointToPoint( p, target ) {\n\n\t\tconst a = this.a, b = this.b, c = this.c;\n\t\tlet v, w;\n\n\t\t// algorithm thanks to Real-Time Collision Detection by Christer Ericson,\n\t\t// published by Morgan Kaufmann Publishers, (c) 2005 Elsevier Inc.,\n\t\t// under the accompanying license; see chapter 5.1.5 for detailed explanation.\n\t\t// basically, we're distinguishing which of the voronoi regions of the triangle\n\t\t// the point lies in with the minimum amount of redundant computation.\n\n\t\t_vab.subVectors( b, a );\n\t\t_vac.subVectors( c, a );\n\t\t_vap.subVectors( p, a );\n\t\tconst d1 = _vab.dot( _vap );\n\t\tconst d2 = _vac.dot( _vap );\n\t\tif ( d1 <= 0 && d2 <= 0 ) {\n\n\t\t\t// vertex region of A; barycentric coords (1, 0, 0)\n\t\t\treturn target.copy( a );\n\n\t\t}\n\n\t\t_vbp.subVectors( p, b );\n\t\tconst d3 = _vab.dot( _vbp );\n\t\tconst d4 = _vac.dot( _vbp );\n\t\tif ( d3 >= 0 && d4 <= d3 ) {\n\n\t\t\t// vertex region of B; barycentric coords (0, 1, 0)\n\t\t\treturn target.copy( b );\n\n\t\t}\n\n\t\tconst vc = d1 * d4 - d3 * d2;\n\t\tif ( vc <= 0 && d1 >= 0 && d3 <= 0 ) {\n\n\t\t\tv = d1 / ( d1 - d3 );\n\t\t\t// edge region of AB; barycentric coords (1-v, v, 0)\n\t\t\treturn target.copy( a ).addScaledVector( _vab, v );\n\n\t\t}\n\n\t\t_vcp.subVectors( p, c );\n\t\tconst d5 = _vab.dot( _vcp );\n\t\tconst d6 = _vac.dot( _vcp );\n\t\tif ( d6 >= 0 && d5 <= d6 ) {\n\n\t\t\t// vertex region of C; barycentric coords (0, 0, 1)\n\t\t\treturn target.copy( c );\n\n\t\t}\n\n\t\tconst vb = d5 * d2 - d1 * d6;\n\t\tif ( vb <= 0 && d2 >= 0 && d6 <= 0 ) {\n\n\t\t\tw = d2 / ( d2 - d6 );\n\t\t\t// edge region of AC; barycentric coords (1-w, 0, w)\n\t\t\treturn target.copy( a ).addScaledVector( _vac, w );\n\n\t\t}\n\n\t\tconst va = d3 * d6 - d5 * d4;\n\t\tif ( va <= 0 && ( d4 - d3 ) >= 0 && ( d5 - d6 ) >= 0 ) {\n\n\t\t\t_vbc.subVectors( c, b );\n\t\t\tw = ( d4 - d3 ) / ( ( d4 - d3 ) + ( d5 - d6 ) );\n\t\t\t// edge region of BC; barycentric coords (0, 1-w, w)\n\t\t\treturn target.copy( b ).addScaledVector( _vbc, w ); // edge region of BC\n\n\t\t}\n\n\t\t// face region\n\t\tconst denom = 1 / ( va + vb + vc );\n\t\t// u = va * denom\n\t\tv = vb * denom;\n\t\tw = vc * denom;\n\n\t\treturn target.copy( a ).addScaledVector( _vab, v ).addScaledVector( _vac, w );\n\n\t}\n\n\tequals( triangle ) {\n\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\n\n\t}\n\n}\n\nlet materialId = 0;\n\nclass Material extends EventDispatcher {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isMaterial = true;\n\n\t\tObject.defineProperty( this, 'id', { value: materialId ++ } );\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.name = '';\n\t\tthis.type = 'Material';\n\n\t\tthis.blending = NormalBlending;\n\t\tthis.side = FrontSide;\n\t\tthis.vertexColors = false;\n\n\t\tthis.opacity = 1;\n\t\tthis.transparent = false;\n\n\t\tthis.blendSrc = SrcAlphaFactor;\n\t\tthis.blendDst = OneMinusSrcAlphaFactor;\n\t\tthis.blendEquation = AddEquation;\n\t\tthis.blendSrcAlpha = null;\n\t\tthis.blendDstAlpha = null;\n\t\tthis.blendEquationAlpha = null;\n\n\t\tthis.depthFunc = LessEqualDepth;\n\t\tthis.depthTest = true;\n\t\tthis.depthWrite = true;\n\n\t\tthis.stencilWriteMask = 0xff;\n\t\tthis.stencilFunc = AlwaysStencilFunc;\n\t\tthis.stencilRef = 0;\n\t\tthis.stencilFuncMask = 0xff;\n\t\tthis.stencilFail = KeepStencilOp;\n\t\tthis.stencilZFail = KeepStencilOp;\n\t\tthis.stencilZPass = KeepStencilOp;\n\t\tthis.stencilWrite = false;\n\n\t\tthis.clippingPlanes = null;\n\t\tthis.clipIntersection = false;\n\t\tthis.clipShadows = false;\n\n\t\tthis.shadowSide = null;\n\n\t\tthis.colorWrite = true;\n\n\t\tthis.precision = null; // override the renderer's default precision for this material\n\n\t\tthis.polygonOffset = false;\n\t\tthis.polygonOffsetFactor = 0;\n\t\tthis.polygonOffsetUnits = 0;\n\n\t\tthis.dithering = false;\n\n\t\tthis.alphaToCoverage = false;\n\t\tthis.premultipliedAlpha = false;\n\n\t\tthis.visible = true;\n\n\t\tthis.toneMapped = true;\n\n\t\tthis.userData = {};\n\n\t\tthis.version = 0;\n\n\t\tthis._alphaTest = 0;\n\n\t}\n\n\tget alphaTest() {\n\n\t\treturn this._alphaTest;\n\n\t}\n\n\tset alphaTest( value ) {\n\n\t\tif ( this._alphaTest > 0 !== value > 0 ) {\n\n\t\t\tthis.version ++;\n\n\t\t}\n\n\t\tthis._alphaTest = value;\n\n\t}\n\n\tonBuild( /* shaderobject, renderer */ ) {}\n\n\tonBeforeRender( /* renderer, scene, camera, geometry, object, group */ ) {}\n\n\tonBeforeCompile( /* shaderobject, renderer */ ) {}\n\n\tcustomProgramCacheKey() {\n\n\t\treturn this.onBeforeCompile.toString();\n\n\t}\n\n\tsetValues( values ) {\n\n\t\tif ( values === undefined ) return;\n\n\t\tfor ( const key in values ) {\n\n\t\t\tconst newValue = values[ key ];\n\n\t\t\tif ( newValue === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Material: \\'' + key + '\\' parameter is undefined.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tconst currentValue = this[ key ];\n\n\t\t\tif ( currentValue === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.' + this.type + ': \\'' + key + '\\' is not a property of this material.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( currentValue && currentValue.isColor ) {\n\n\t\t\t\tcurrentValue.set( newValue );\n\n\t\t\t} else if ( ( currentValue && currentValue.isVector3 ) && ( newValue && newValue.isVector3 ) ) {\n\n\t\t\t\tcurrentValue.copy( newValue );\n\n\t\t\t} else {\n\n\t\t\t\tthis[ key ] = newValue;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( isRootObject ) {\n\n\t\t\tmeta = {\n\t\t\t\ttextures: {},\n\t\t\t\timages: {}\n\t\t\t};\n\n\t\t}\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Material',\n\t\t\t\tgenerator: 'Material.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Material serialization\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.color && this.color.isColor ) data.color = this.color.getHex();\n\n\t\tif ( this.roughness !== undefined ) data.roughness = this.roughness;\n\t\tif ( this.metalness !== undefined ) data.metalness = this.metalness;\n\n\t\tif ( this.sheen !== undefined ) data.sheen = this.sheen;\n\t\tif ( this.sheenColor && this.sheenColor.isColor ) data.sheenColor = this.sheenColor.getHex();\n\t\tif ( this.sheenRoughness !== undefined ) data.sheenRoughness = this.sheenRoughness;\n\t\tif ( this.emissive && this.emissive.isColor ) data.emissive = this.emissive.getHex();\n\t\tif ( this.emissiveIntensity && this.emissiveIntensity !== 1 ) data.emissiveIntensity = this.emissiveIntensity;\n\n\t\tif ( this.specular && this.specular.isColor ) data.specular = this.specular.getHex();\n\t\tif ( this.specularIntensity !== undefined ) data.specularIntensity = this.specularIntensity;\n\t\tif ( this.specularColor && this.specularColor.isColor ) data.specularColor = this.specularColor.getHex();\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\n\t\tif ( this.clearcoat !== undefined ) data.clearcoat = this.clearcoat;\n\t\tif ( this.clearcoatRoughness !== undefined ) data.clearcoatRoughness = this.clearcoatRoughness;\n\n\t\tif ( this.clearcoatMap && this.clearcoatMap.isTexture ) {\n\n\t\t\tdata.clearcoatMap = this.clearcoatMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.clearcoatRoughnessMap && this.clearcoatRoughnessMap.isTexture ) {\n\n\t\t\tdata.clearcoatRoughnessMap = this.clearcoatRoughnessMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture ) {\n\n\t\t\tdata.clearcoatNormalMap = this.clearcoatNormalMap.toJSON( meta ).uuid;\n\t\t\tdata.clearcoatNormalScale = this.clearcoatNormalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.iridescence !== undefined ) data.iridescence = this.iridescence;\n\t\tif ( this.iridescenceIOR !== undefined ) data.iridescenceIOR = this.iridescenceIOR;\n\t\tif ( this.iridescenceThicknessRange !== undefined ) data.iridescenceThicknessRange = this.iridescenceThicknessRange;\n\n\t\tif ( this.iridescenceMap && this.iridescenceMap.isTexture ) {\n\n\t\t\tdata.iridescenceMap = this.iridescenceMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.iridescenceThicknessMap && this.iridescenceThicknessMap.isTexture ) {\n\n\t\t\tdata.iridescenceThicknessMap = this.iridescenceThicknessMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.map && this.map.isTexture ) data.map = this.map.toJSON( meta ).uuid;\n\t\tif ( this.matcap && this.matcap.isTexture ) data.matcap = this.matcap.toJSON( meta ).uuid;\n\t\tif ( this.alphaMap && this.alphaMap.isTexture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\n\n\t\tif ( this.lightMap && this.lightMap.isTexture ) {\n\n\t\t\tdata.lightMap = this.lightMap.toJSON( meta ).uuid;\n\t\t\tdata.lightMapIntensity = this.lightMapIntensity;\n\n\t\t}\n\n\t\tif ( this.aoMap && this.aoMap.isTexture ) {\n\n\t\t\tdata.aoMap = this.aoMap.toJSON( meta ).uuid;\n\t\t\tdata.aoMapIntensity = this.aoMapIntensity;\n\n\t\t}\n\n\t\tif ( this.bumpMap && this.bumpMap.isTexture ) {\n\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\n\t\t\tdata.bumpScale = this.bumpScale;\n\n\t\t}\n\n\t\tif ( this.normalMap && this.normalMap.isTexture ) {\n\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\n\t\t\tdata.normalMapType = this.normalMapType;\n\t\t\tdata.normalScale = this.normalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.displacementMap && this.displacementMap.isTexture ) {\n\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\n\t\t\tdata.displacementScale = this.displacementScale;\n\t\t\tdata.displacementBias = this.displacementBias;\n\n\t\t}\n\n\t\tif ( this.roughnessMap && this.roughnessMap.isTexture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\n\t\tif ( this.metalnessMap && this.metalnessMap.isTexture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\n\n\t\tif ( this.emissiveMap && this.emissiveMap.isTexture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\n\t\tif ( this.specularMap && this.specularMap.isTexture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\n\t\tif ( this.specularIntensityMap && this.specularIntensityMap.isTexture ) data.specularIntensityMap = this.specularIntensityMap.toJSON( meta ).uuid;\n\t\tif ( this.specularColorMap && this.specularColorMap.isTexture ) data.specularColorMap = this.specularColorMap.toJSON( meta ).uuid;\n\n\t\tif ( this.envMap && this.envMap.isTexture ) {\n\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\n\n\t\t\tif ( this.combine !== undefined ) data.combine = this.combine;\n\n\t\t}\n\n\t\tif ( this.envMapIntensity !== undefined ) data.envMapIntensity = this.envMapIntensity;\n\t\tif ( this.reflectivity !== undefined ) data.reflectivity = this.reflectivity;\n\t\tif ( this.refractionRatio !== undefined ) data.refractionRatio = this.refractionRatio;\n\n\t\tif ( this.gradientMap && this.gradientMap.isTexture ) {\n\n\t\t\tdata.gradientMap = this.gradientMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.transmission !== undefined ) data.transmission = this.transmission;\n\t\tif ( this.transmissionMap && this.transmissionMap.isTexture ) data.transmissionMap = this.transmissionMap.toJSON( meta ).uuid;\n\t\tif ( this.thickness !== undefined ) data.thickness = this.thickness;\n\t\tif ( this.thicknessMap && this.thicknessMap.isTexture ) data.thicknessMap = this.thicknessMap.toJSON( meta ).uuid;\n\t\tif ( this.attenuationDistance !== undefined && this.attenuationDistance !== Infinity ) data.attenuationDistance = this.attenuationDistance;\n\t\tif ( this.attenuationColor !== undefined ) data.attenuationColor = this.attenuationColor.getHex();\n\n\t\tif ( this.size !== undefined ) data.size = this.size;\n\t\tif ( this.shadowSide !== null ) data.shadowSide = this.shadowSide;\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\n\n\t\tif ( this.blending !== NormalBlending ) data.blending = this.blending;\n\t\tif ( this.side !== FrontSide ) data.side = this.side;\n\t\tif ( this.vertexColors ) data.vertexColors = true;\n\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\n\t\tif ( this.transparent === true ) data.transparent = this.transparent;\n\n\t\tdata.depthFunc = this.depthFunc;\n\t\tdata.depthTest = this.depthTest;\n\t\tdata.depthWrite = this.depthWrite;\n\t\tdata.colorWrite = this.colorWrite;\n\n\t\tdata.stencilWrite = this.stencilWrite;\n\t\tdata.stencilWriteMask = this.stencilWriteMask;\n\t\tdata.stencilFunc = this.stencilFunc;\n\t\tdata.stencilRef = this.stencilRef;\n\t\tdata.stencilFuncMask = this.stencilFuncMask;\n\t\tdata.stencilFail = this.stencilFail;\n\t\tdata.stencilZFail = this.stencilZFail;\n\t\tdata.stencilZPass = this.stencilZPass;\n\n\t\t// rotation (SpriteMaterial)\n\t\tif ( this.rotation !== undefined && this.rotation !== 0 ) data.rotation = this.rotation;\n\n\t\tif ( this.polygonOffset === true ) data.polygonOffset = true;\n\t\tif ( this.polygonOffsetFactor !== 0 ) data.polygonOffsetFactor = this.polygonOffsetFactor;\n\t\tif ( this.polygonOffsetUnits !== 0 ) data.polygonOffsetUnits = this.polygonOffsetUnits;\n\n\t\tif ( this.linewidth !== undefined && this.linewidth !== 1 ) data.linewidth = this.linewidth;\n\t\tif ( this.dashSize !== undefined ) data.dashSize = this.dashSize;\n\t\tif ( this.gapSize !== undefined ) data.gapSize = this.gapSize;\n\t\tif ( this.scale !== undefined ) data.scale = this.scale;\n\n\t\tif ( this.dithering === true ) data.dithering = true;\n\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\n\t\tif ( this.alphaToCoverage === true ) data.alphaToCoverage = this.alphaToCoverage;\n\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\n\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\n\t\tif ( this.wireframeLinecap !== 'round' ) data.wireframeLinecap = this.wireframeLinecap;\n\t\tif ( this.wireframeLinejoin !== 'round' ) data.wireframeLinejoin = this.wireframeLinejoin;\n\n\t\tif ( this.flatShading === true ) data.flatShading = this.flatShading;\n\n\t\tif ( this.visible === false ) data.visible = false;\n\n\t\tif ( this.toneMapped === false ) data.toneMapped = false;\n\n\t\tif ( this.fog === false ) data.fog = false;\n\n\t\tif ( Object.keys( this.userData ).length > 0 ) data.userData = this.userData;\n\n\t\t// TODO: Copied from Object3D.toJSON\n\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tconst values = [];\n\n\t\t\tfor ( const key in cache ) {\n\n\t\t\t\tconst data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t\tif ( isRootObject ) {\n\n\t\t\tconst textures = extractFromCache( meta.textures );\n\t\t\tconst images = extractFromCache( meta.images );\n\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\n\t\t\tif ( images.length > 0 ) data.images = images;\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.blending = source.blending;\n\t\tthis.side = source.side;\n\t\tthis.vertexColors = source.vertexColors;\n\n\t\tthis.opacity = source.opacity;\n\t\tthis.transparent = source.transparent;\n\n\t\tthis.blendSrc = source.blendSrc;\n\t\tthis.blendDst = source.blendDst;\n\t\tthis.blendEquation = source.blendEquation;\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\n\n\t\tthis.depthFunc = source.depthFunc;\n\t\tthis.depthTest = source.depthTest;\n\t\tthis.depthWrite = source.depthWrite;\n\n\t\tthis.stencilWriteMask = source.stencilWriteMask;\n\t\tthis.stencilFunc = source.stencilFunc;\n\t\tthis.stencilRef = source.stencilRef;\n\t\tthis.stencilFuncMask = source.stencilFuncMask;\n\t\tthis.stencilFail = source.stencilFail;\n\t\tthis.stencilZFail = source.stencilZFail;\n\t\tthis.stencilZPass = source.stencilZPass;\n\t\tthis.stencilWrite = source.stencilWrite;\n\n\t\tconst srcPlanes = source.clippingPlanes;\n\t\tlet dstPlanes = null;\n\n\t\tif ( srcPlanes !== null ) {\n\n\t\t\tconst n = srcPlanes.length;\n\t\t\tdstPlanes = new Array( n );\n\n\t\t\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\t\t\tdstPlanes[ i ] = srcPlanes[ i ].clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.clippingPlanes = dstPlanes;\n\t\tthis.clipIntersection = source.clipIntersection;\n\t\tthis.clipShadows = source.clipShadows;\n\n\t\tthis.shadowSide = source.shadowSide;\n\n\t\tthis.colorWrite = source.colorWrite;\n\n\t\tthis.precision = source.precision;\n\n\t\tthis.polygonOffset = source.polygonOffset;\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\n\n\t\tthis.dithering = source.dithering;\n\n\t\tthis.alphaTest = source.alphaTest;\n\t\tthis.alphaToCoverage = source.alphaToCoverage;\n\t\tthis.premultipliedAlpha = source.premultipliedAlpha;\n\n\t\tthis.visible = source.visible;\n\n\t\tthis.toneMapped = source.toneMapped;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n}\n\nclass MeshBasicMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshBasicMaterial = true;\n\n\t\tthis.type = 'MeshBasicMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // emissive\n\n\t\tthis.map = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.specularMap = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.envMap = null;\n\t\tthis.combine = MultiplyOperation;\n\t\tthis.reflectivity = 1;\n\t\tthis.refractionRatio = 0.98;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.specularMap = source.specularMap;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.envMap = source.envMap;\n\t\tthis.combine = source.combine;\n\t\tthis.reflectivity = source.reflectivity;\n\t\tthis.refractionRatio = source.refractionRatio;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _vector$9 = /*@__PURE__*/ new Vector3();\nconst _vector2$1 = /*@__PURE__*/ new Vector2();\n\nclass BufferAttribute {\n\n\tconstructor( array, itemSize, normalized = false ) {\n\n\t\tif ( Array.isArray( array ) ) {\n\n\t\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t\t}\n\n\t\tthis.isBufferAttribute = true;\n\n\t\tthis.name = '';\n\n\t\tthis.array = array;\n\t\tthis.itemSize = itemSize;\n\t\tthis.count = array !== undefined ? array.length / itemSize : 0;\n\t\tthis.normalized = normalized;\n\n\t\tthis.usage = StaticDrawUsage;\n\t\tthis.updateRange = { offset: 0, count: - 1 };\n\n\t\tthis.version = 0;\n\n\t}\n\n\tonUploadCallback() {}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n\tsetUsage( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.name = source.name;\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.itemSize = source.itemSize;\n\t\tthis.count = source.count;\n\t\tthis.normalized = source.normalized;\n\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t}\n\n\tcopyAt( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.itemSize;\n\t\tindex2 *= attribute.itemSize;\n\n\t\tfor ( let i = 0, l = this.itemSize; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcopyArray( array ) {\n\n\t\tthis.array.set( array );\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tif ( this.itemSize === 2 ) {\n\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t\t_vector2$1.fromBufferAttribute( this, i );\n\t\t\t\t_vector2$1.applyMatrix3( m );\n\n\t\t\t\tthis.setXY( i, _vector2$1.x, _vector2$1.y );\n\n\t\t\t}\n\n\t\t} else if ( this.itemSize === 3 ) {\n\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t\t_vector$9.fromBufferAttribute( this, i );\n\t\t\t\t_vector$9.applyMatrix3( m );\n\n\t\t\t\tthis.setXYZ( i, _vector$9.x, _vector$9.y, _vector$9.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$9.fromBufferAttribute( this, i );\n\n\t\t\t_vector$9.applyMatrix4( m );\n\n\t\t\tthis.setXYZ( i, _vector$9.x, _vector$9.y, _vector$9.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tapplyNormalMatrix( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$9.fromBufferAttribute( this, i );\n\n\t\t\t_vector$9.applyNormalMatrix( m );\n\n\t\t\tthis.setXYZ( i, _vector$9.x, _vector$9.y, _vector$9.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttransformDirection( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$9.fromBufferAttribute( this, i );\n\n\t\t\t_vector$9.transformDirection( m );\n\n\t\t\tthis.setXYZ( i, _vector$9.x, _vector$9.y, _vector$9.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tset( value, offset = 0 ) {\n\n\t\t// Matching BufferAttribute constructor, do not normalize the array.\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t}\n\n\tgetX( index ) {\n\n\t\tlet x = this.array[ index * this.itemSize ];\n\n\t\tif ( this.normalized ) x = denormalize( x, this.array );\n\n\t\treturn x;\n\n\t}\n\n\tsetX( index, x ) {\n\n\t\tif ( this.normalized ) x = normalize( x, this.array );\n\n\t\tthis.array[ index * this.itemSize ] = x;\n\n\t\treturn this;\n\n\t}\n\n\tgetY( index ) {\n\n\t\tlet y = this.array[ index * this.itemSize + 1 ];\n\n\t\tif ( this.normalized ) y = denormalize( y, this.array );\n\n\t\treturn y;\n\n\t}\n\n\tsetY( index, y ) {\n\n\t\tif ( this.normalized ) y = normalize( y, this.array );\n\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\n\n\t\treturn this;\n\n\t}\n\n\tgetZ( index ) {\n\n\t\tlet z = this.array[ index * this.itemSize + 2 ];\n\n\t\tif ( this.normalized ) z = denormalize( z, this.array );\n\n\t\treturn z;\n\n\t}\n\n\tsetZ( index, z ) {\n\n\t\tif ( this.normalized ) z = normalize( z, this.array );\n\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\n\n\t\treturn this;\n\n\t}\n\n\tgetW( index ) {\n\n\t\tlet w = this.array[ index * this.itemSize + 3 ];\n\n\t\tif ( this.normalized ) w = denormalize( w, this.array );\n\n\t\treturn w;\n\n\t}\n\n\tsetW( index, w ) {\n\n\t\tif ( this.normalized ) w = normalize( w, this.array );\n\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetXY( index, x, y ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\n\t\t}\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetXYZ( index, x, y, z ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\t\t\tz = normalize( z, this.array );\n\n\t\t}\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetXYZW( index, x, y, z, w ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\t\t\tz = normalize( z, this.array );\n\t\t\tw = normalize( w, this.array );\n\n\t\t}\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\t\tthis.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t}\n\n\tonUpload( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.array, this.itemSize ).copy( this );\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = {\n\t\t\titemSize: this.itemSize,\n\t\t\ttype: this.array.constructor.name,\n\t\t\tarray: Array.from( this.array ),\n\t\t\tnormalized: this.normalized\n\t\t};\n\n\t\tif ( this.name !== '' ) data.name = this.name;\n\t\tif ( this.usage !== StaticDrawUsage ) data.usage = this.usage;\n\t\tif ( this.updateRange.offset !== 0 || this.updateRange.count !== - 1 ) data.updateRange = this.updateRange;\n\n\t\treturn data;\n\n\t}\n\n\t// @deprecated\n\n\tcopyColorsArray() {\n\n\t\tconsole.error( 'THREE.BufferAttribute: copyColorsArray() was removed in r144.' );\n\n\t}\n\n\tcopyVector2sArray() {\n\n\t\tconsole.error( 'THREE.BufferAttribute: copyVector2sArray() was removed in r144.' );\n\n\t}\n\n\tcopyVector3sArray() {\n\n\t\tconsole.error( 'THREE.BufferAttribute: copyVector3sArray() was removed in r144.' );\n\n\t}\n\n\tcopyVector4sArray() {\n\n\t\tconsole.error( 'THREE.BufferAttribute: copyVector4sArray() was removed in r144.' );\n\n\t}\n\n}\n\n//\n\nclass Int8BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Int8Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Uint8BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint8Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Uint8ClampedBufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint8ClampedArray( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Int16BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Int16Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Uint16BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint16Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Int32BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Int32Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Uint32BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint32Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Float16BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint16Array( array ), itemSize, normalized );\n\n\t\tthis.isFloat16BufferAttribute = true;\n\n\t}\n\n}\n\n\nclass Float32BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Float32Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Float64BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Float64Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nlet _id$1 = 0;\n\nconst _m1 = /*@__PURE__*/ new Matrix4();\nconst _obj = /*@__PURE__*/ new Object3D();\nconst _offset = /*@__PURE__*/ new Vector3();\nconst _box$1 = /*@__PURE__*/ new Box3();\nconst _boxMorphTargets = /*@__PURE__*/ new Box3();\nconst _vector$8 = /*@__PURE__*/ new Vector3();\n\nclass BufferGeometry extends EventDispatcher {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isBufferGeometry = true;\n\n\t\tObject.defineProperty( this, 'id', { value: _id$1 ++ } );\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.name = '';\n\t\tthis.type = 'BufferGeometry';\n\n\t\tthis.index = null;\n\t\tthis.attributes = {};\n\n\t\tthis.morphAttributes = {};\n\t\tthis.morphTargetsRelative = false;\n\n\t\tthis.groups = [];\n\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\tthis.drawRange = { start: 0, count: Infinity };\n\n\t\tthis.userData = {};\n\n\t}\n\n\tgetIndex() {\n\n\t\treturn this.index;\n\n\t}\n\n\tsetIndex( index ) {\n\n\t\tif ( Array.isArray( index ) ) {\n\n\t\t\tthis.index = new ( arrayNeedsUint32( index ) ? Uint32BufferAttribute : Uint16BufferAttribute )( index, 1 );\n\n\t\t} else {\n\n\t\t\tthis.index = index;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetAttribute( name ) {\n\n\t\treturn this.attributes[ name ];\n\n\t}\n\n\tsetAttribute( name, attribute ) {\n\n\t\tthis.attributes[ name ] = attribute;\n\n\t\treturn this;\n\n\t}\n\n\tdeleteAttribute( name ) {\n\n\t\tdelete this.attributes[ name ];\n\n\t\treturn this;\n\n\t}\n\n\thasAttribute( name ) {\n\n\t\treturn this.attributes[ name ] !== undefined;\n\n\t}\n\n\taddGroup( start, count, materialIndex = 0 ) {\n\n\t\tthis.groups.push( {\n\n\t\t\tstart: start,\n\t\t\tcount: count,\n\t\t\tmaterialIndex: materialIndex\n\n\t\t} );\n\n\t}\n\n\tclearGroups() {\n\n\t\tthis.groups = [];\n\n\t}\n\n\tsetDrawRange( start, count ) {\n\n\t\tthis.drawRange.start = start;\n\t\tthis.drawRange.count = count;\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tconst position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tposition.applyMatrix4( matrix );\n\n\t\t\tposition.needsUpdate = true;\n\n\t\t}\n\n\t\tconst normal = this.attributes.normal;\n\n\t\tif ( normal !== undefined ) {\n\n\t\t\tconst normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t\tnormal.applyNormalMatrix( normalMatrix );\n\n\t\t\tnormal.needsUpdate = true;\n\n\t\t}\n\n\t\tconst tangent = this.attributes.tangent;\n\n\t\tif ( tangent !== undefined ) {\n\n\t\t\ttangent.transformDirection( matrix );\n\n\t\t\ttangent.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tapplyQuaternion( q ) {\n\n\t\t_m1.makeRotationFromQuaternion( q );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateX( angle ) {\n\n\t\t// rotate geometry around world x-axis\n\n\t\t_m1.makeRotationX( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateY( angle ) {\n\n\t\t// rotate geometry around world y-axis\n\n\t\t_m1.makeRotationY( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateZ( angle ) {\n\n\t\t// rotate geometry around world z-axis\n\n\t\t_m1.makeRotationZ( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( x, y, z ) {\n\n\t\t// translate geometry\n\n\t\t_m1.makeTranslation( x, y, z );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\tscale( x, y, z ) {\n\n\t\t// scale geometry\n\n\t\t_m1.makeScale( x, y, z );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\tlookAt( vector ) {\n\n\t\t_obj.lookAt( vector );\n\n\t\t_obj.updateMatrix();\n\n\t\tthis.applyMatrix4( _obj.matrix );\n\n\t\treturn this;\n\n\t}\n\n\tcenter() {\n\n\t\tthis.computeBoundingBox();\n\n\t\tthis.boundingBox.getCenter( _offset ).negate();\n\n\t\tthis.translate( _offset.x, _offset.y, _offset.z );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tconst position = [];\n\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tconst point = points[ i ];\n\t\t\tposition.push( point.x, point.y, point.z || 0 );\n\n\t\t}\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( position, 3 ) );\n\n\t\treturn this;\n\n\t}\n\n\tcomputeBoundingBox() {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tconst position = this.attributes.position;\n\t\tconst morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position && position.isGLBufferAttribute ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set \"mesh.frustumCulled\" to \"false\".', this );\n\n\t\t\tthis.boundingBox.set(\n\t\t\t\tnew Vector3( - Infinity, - Infinity, - Infinity ),\n\t\t\t\tnew Vector3( + Infinity, + Infinity, + Infinity )\n\t\t\t);\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tthis.boundingBox.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_box$1.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector$8.addVectors( this.boundingBox.min, _box$1.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector$8 );\n\n\t\t\t\t\t\t_vector$8.addVectors( this.boundingBox.max, _box$1.max );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector$8 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box$1.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box$1.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.boundingBox.makeEmpty();\n\n\t\t}\n\n\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t}\n\n\t}\n\n\tcomputeBoundingSphere() {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tconst position = this.attributes.position;\n\t\tconst morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position && position.isGLBufferAttribute ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set \"mesh.frustumCulled\" to \"false\".', this );\n\n\t\t\tthis.boundingSphere.set( new Vector3(), Infinity );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( position ) {\n\n\t\t\t// first, find the center of the bounding sphere\n\n\t\t\tconst center = this.boundingSphere.center;\n\n\t\t\t_box$1.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_boxMorphTargets.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector$8.addVectors( _box$1.min, _boxMorphTargets.min );\n\t\t\t\t\t\t_box$1.expandByPoint( _vector$8 );\n\n\t\t\t\t\t\t_vector$8.addVectors( _box$1.max, _boxMorphTargets.max );\n\t\t\t\t\t\t_box$1.expandByPoint( _vector$8 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t_box$1.expandByPoint( _boxMorphTargets.min );\n\t\t\t\t\t\t_box$1.expandByPoint( _boxMorphTargets.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_box$1.getCenter( center );\n\n\t\t\t// second, try to find a boundingSphere with a radius smaller than the\n\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\n\n\t\t\tlet maxRadiusSq = 0;\n\n\t\t\tfor ( let i = 0, il = position.count; i < il; i ++ ) {\n\n\t\t\t\t_vector$8.fromBufferAttribute( position, i );\n\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector$8 ) );\n\n\t\t\t}\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\tconst morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t\t\t\tfor ( let j = 0, jl = morphAttribute.count; j < jl; j ++ ) {\n\n\t\t\t\t\t\t_vector$8.fromBufferAttribute( morphAttribute, j );\n\n\t\t\t\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t\t\t\t_offset.fromBufferAttribute( position, j );\n\t\t\t\t\t\t\t_vector$8.add( _offset );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector$8 ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tcomputeTangents() {\n\n\t\tconst index = this.index;\n\t\tconst attributes = this.attributes;\n\n\t\t// based on http://www.terathon.com/code/tangent.html\n\t\t// (per vertex tangents)\n\n\t\tif ( index === null ||\n\t\t\t attributes.position === undefined ||\n\t\t\t attributes.normal === undefined ||\n\t\t\t attributes.uv === undefined ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst indices = index.array;\n\t\tconst positions = attributes.position.array;\n\t\tconst normals = attributes.normal.array;\n\t\tconst uvs = attributes.uv.array;\n\n\t\tconst nVertices = positions.length / 3;\n\n\t\tif ( this.hasAttribute( 'tangent' ) === false ) {\n\n\t\t\tthis.setAttribute( 'tangent', new BufferAttribute( new Float32Array( 4 * nVertices ), 4 ) );\n\n\t\t}\n\n\t\tconst tangents = this.getAttribute( 'tangent' ).array;\n\n\t\tconst tan1 = [], tan2 = [];\n\n\t\tfor ( let i = 0; i < nVertices; i ++ ) {\n\n\t\t\ttan1[ i ] = new Vector3();\n\t\t\ttan2[ i ] = new Vector3();\n\n\t\t}\n\n\t\tconst vA = new Vector3(),\n\t\t\tvB = new Vector3(),\n\t\t\tvC = new Vector3(),\n\n\t\t\tuvA = new Vector2(),\n\t\t\tuvB = new Vector2(),\n\t\t\tuvC = new Vector2(),\n\n\t\t\tsdir = new Vector3(),\n\t\t\ttdir = new Vector3();\n\n\t\tfunction handleTriangle( a, b, c ) {\n\n\t\t\tvA.fromArray( positions, a * 3 );\n\t\t\tvB.fromArray( positions, b * 3 );\n\t\t\tvC.fromArray( positions, c * 3 );\n\n\t\t\tuvA.fromArray( uvs, a * 2 );\n\t\t\tuvB.fromArray( uvs, b * 2 );\n\t\t\tuvC.fromArray( uvs, c * 2 );\n\n\t\t\tvB.sub( vA );\n\t\t\tvC.sub( vA );\n\n\t\t\tuvB.sub( uvA );\n\t\t\tuvC.sub( uvA );\n\n\t\t\tconst r = 1.0 / ( uvB.x * uvC.y - uvC.x * uvB.y );\n\n\t\t\t// silently ignore degenerate uv triangles having coincident or colinear vertices\n\n\t\t\tif ( ! isFinite( r ) ) return;\n\n\t\t\tsdir.copy( vB ).multiplyScalar( uvC.y ).addScaledVector( vC, - uvB.y ).multiplyScalar( r );\n\t\t\ttdir.copy( vC ).multiplyScalar( uvB.x ).addScaledVector( vB, - uvC.x ).multiplyScalar( r );\n\n\t\t\ttan1[ a ].add( sdir );\n\t\t\ttan1[ b ].add( sdir );\n\t\t\ttan1[ c ].add( sdir );\n\n\t\t\ttan2[ a ].add( tdir );\n\t\t\ttan2[ b ].add( tdir );\n\t\t\ttan2[ c ].add( tdir );\n\n\t\t}\n\n\t\tlet groups = this.groups;\n\n\t\tif ( groups.length === 0 ) {\n\n\t\t\tgroups = [ {\n\t\t\t\tstart: 0,\n\t\t\t\tcount: indices.length\n\t\t\t} ];\n\n\t\t}\n\n\t\tfor ( let i = 0, il = groups.length; i < il; ++ i ) {\n\n\t\t\tconst group = groups[ i ];\n\n\t\t\tconst start = group.start;\n\t\t\tconst count = group.count;\n\n\t\t\tfor ( let j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\thandleTriangle(\n\t\t\t\t\tindices[ j + 0 ],\n\t\t\t\t\tindices[ j + 1 ],\n\t\t\t\t\tindices[ j + 2 ]\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst tmp = new Vector3(), tmp2 = new Vector3();\n\t\tconst n = new Vector3(), n2 = new Vector3();\n\n\t\tfunction handleVertex( v ) {\n\n\t\t\tn.fromArray( normals, v * 3 );\n\t\t\tn2.copy( n );\n\n\t\t\tconst t = tan1[ v ];\n\n\t\t\t// Gram-Schmidt orthogonalize\n\n\t\t\ttmp.copy( t );\n\t\t\ttmp.sub( n.multiplyScalar( n.dot( t ) ) ).normalize();\n\n\t\t\t// Calculate handedness\n\n\t\t\ttmp2.crossVectors( n2, t );\n\t\t\tconst test = tmp2.dot( tan2[ v ] );\n\t\t\tconst w = ( test < 0.0 ) ? - 1.0 : 1.0;\n\n\t\t\ttangents[ v * 4 ] = tmp.x;\n\t\t\ttangents[ v * 4 + 1 ] = tmp.y;\n\t\t\ttangents[ v * 4 + 2 ] = tmp.z;\n\t\t\ttangents[ v * 4 + 3 ] = w;\n\n\t\t}\n\n\t\tfor ( let i = 0, il = groups.length; i < il; ++ i ) {\n\n\t\t\tconst group = groups[ i ];\n\n\t\t\tconst start = group.start;\n\t\t\tconst count = group.count;\n\n\t\t\tfor ( let j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\thandleVertex( indices[ j + 0 ] );\n\t\t\t\thandleVertex( indices[ j + 1 ] );\n\t\t\t\thandleVertex( indices[ j + 2 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tcomputeVertexNormals() {\n\n\t\tconst index = this.index;\n\t\tconst positionAttribute = this.getAttribute( 'position' );\n\n\t\tif ( positionAttribute !== undefined ) {\n\n\t\t\tlet normalAttribute = this.getAttribute( 'normal' );\n\n\t\t\tif ( normalAttribute === undefined ) {\n\n\t\t\t\tnormalAttribute = new BufferAttribute( new Float32Array( positionAttribute.count * 3 ), 3 );\n\t\t\t\tthis.setAttribute( 'normal', normalAttribute );\n\n\t\t\t} else {\n\n\t\t\t\t// reset existing normals to zero\n\n\t\t\t\tfor ( let i = 0, il = normalAttribute.count; i < il; i ++ ) {\n\n\t\t\t\t\tnormalAttribute.setXYZ( i, 0, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\n\t\t\tconst nA = new Vector3(), nB = new Vector3(), nC = new Vector3();\n\t\t\tconst cb = new Vector3(), ab = new Vector3();\n\n\t\t\t// indexed elements\n\n\t\t\tif ( index ) {\n\n\t\t\t\tfor ( let i = 0, il = index.count; i < il; i += 3 ) {\n\n\t\t\t\t\tconst vA = index.getX( i + 0 );\n\t\t\t\t\tconst vB = index.getX( i + 1 );\n\t\t\t\t\tconst vC = index.getX( i + 2 );\n\n\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, vA );\n\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, vB );\n\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, vC );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnA.fromBufferAttribute( normalAttribute, vA );\n\t\t\t\t\tnB.fromBufferAttribute( normalAttribute, vB );\n\t\t\t\t\tnC.fromBufferAttribute( normalAttribute, vC );\n\n\t\t\t\t\tnA.add( cb );\n\t\t\t\t\tnB.add( cb );\n\t\t\t\t\tnC.add( cb );\n\n\t\t\t\t\tnormalAttribute.setXYZ( vA, nA.x, nA.y, nA.z );\n\t\t\t\t\tnormalAttribute.setXYZ( vB, nB.x, nB.y, nB.z );\n\t\t\t\t\tnormalAttribute.setXYZ( vC, nC.x, nC.y, nC.z );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\n\n\t\t\t\tfor ( let i = 0, il = positionAttribute.count; i < il; i += 3 ) {\n\n\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, i + 0 );\n\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, i + 1 );\n\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, i + 2 );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnormalAttribute.setXYZ( i + 0, cb.x, cb.y, cb.z );\n\t\t\t\t\tnormalAttribute.setXYZ( i + 1, cb.x, cb.y, cb.z );\n\t\t\t\t\tnormalAttribute.setXYZ( i + 2, cb.x, cb.y, cb.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.normalizeNormals();\n\n\t\t\tnormalAttribute.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n\t// @deprecated since r144\n\n\tmerge() {\n\n\t\tconsole.error( 'THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead.' );\n\t\treturn this;\n\n\t}\n\n\tnormalizeNormals() {\n\n\t\tconst normals = this.attributes.normal;\n\n\t\tfor ( let i = 0, il = normals.count; i < il; i ++ ) {\n\n\t\t\t_vector$8.fromBufferAttribute( normals, i );\n\n\t\t\t_vector$8.normalize();\n\n\t\t\tnormals.setXYZ( i, _vector$8.x, _vector$8.y, _vector$8.z );\n\n\t\t}\n\n\t}\n\n\ttoNonIndexed() {\n\n\t\tfunction convertBufferAttribute( attribute, indices ) {\n\n\t\t\tconst array = attribute.array;\n\t\t\tconst itemSize = attribute.itemSize;\n\t\t\tconst normalized = attribute.normalized;\n\n\t\t\tconst array2 = new array.constructor( indices.length * itemSize );\n\n\t\t\tlet index = 0, index2 = 0;\n\n\t\t\tfor ( let i = 0, l = indices.length; i < l; i ++ ) {\n\n\t\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\tindex = indices[ i ] * attribute.data.stride + attribute.offset;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tindex = indices[ i ] * itemSize;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let j = 0; j < itemSize; j ++ ) {\n\n\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new BufferAttribute( array2, itemSize, normalized );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.index === null ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst geometry2 = new BufferGeometry();\n\n\t\tconst indices = this.index.array;\n\t\tconst attributes = this.attributes;\n\n\t\t// attributes\n\n\t\tfor ( const name in attributes ) {\n\n\t\t\tconst attribute = attributes[ name ];\n\n\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\tgeometry2.setAttribute( name, newAttribute );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tconst morphAttributes = this.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst morphArray = [];\n\t\t\tconst morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( let i = 0, il = morphAttribute.length; i < il; i ++ ) {\n\n\t\t\t\tconst attribute = morphAttribute[ i ];\n\n\t\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\t\tmorphArray.push( newAttribute );\n\n\t\t\t}\n\n\t\t\tgeometry2.morphAttributes[ name ] = morphArray;\n\n\t\t}\n\n\t\tgeometry2.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tconst groups = this.groups;\n\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tconst group = groups[ i ];\n\t\t\tgeometry2.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\treturn geometry2;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'BufferGeometry',\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard BufferGeometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\t\tif ( Object.keys( this.userData ).length > 0 ) data.userData = this.userData;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tconst parameters = this.parameters;\n\n\t\t\tfor ( const key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\t// for simplicity the code assumes attributes are not shared across geometries, see #15811\n\n\t\tdata.data = { attributes: {} };\n\n\t\tconst index = this.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tdata.data.index = {\n\t\t\t\ttype: index.array.constructor.name,\n\t\t\t\tarray: Array.prototype.slice.call( index.array )\n\t\t\t};\n\n\t\t}\n\n\t\tconst attributes = this.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tconst attribute = attributes[ key ];\n\n\t\t\tdata.data.attributes[ key ] = attribute.toJSON( data.data );\n\n\t\t}\n\n\t\tconst morphAttributes = {};\n\t\tlet hasMorphAttributes = false;\n\n\t\tfor ( const key in this.morphAttributes ) {\n\n\t\t\tconst attributeArray = this.morphAttributes[ key ];\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0, il = attributeArray.length; i < il; i ++ ) {\n\n\t\t\t\tconst attribute = attributeArray[ i ];\n\n\t\t\t\tarray.push( attribute.toJSON( data.data ) );\n\n\t\t\t}\n\n\t\t\tif ( array.length > 0 ) {\n\n\t\t\t\tmorphAttributes[ key ] = array;\n\n\t\t\t\thasMorphAttributes = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( hasMorphAttributes ) {\n\n\t\t\tdata.data.morphAttributes = morphAttributes;\n\t\t\tdata.data.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t}\n\n\t\tconst groups = this.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\n\n\t\t}\n\n\t\tconst boundingSphere = this.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tdata.data.boundingSphere = {\n\t\t\t\tcenter: boundingSphere.center.toArray(),\n\t\t\t\tradius: boundingSphere.radius\n\t\t\t};\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\t// reset\n\n\t\tthis.index = null;\n\t\tthis.attributes = {};\n\t\tthis.morphAttributes = {};\n\t\tthis.groups = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// used for storing cloned, shared data\n\n\t\tconst data = {};\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// index\n\n\t\tconst index = source.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tthis.setIndex( index.clone( data ) );\n\n\t\t}\n\n\t\t// attributes\n\n\t\tconst attributes = source.attributes;\n\n\t\tfor ( const name in attributes ) {\n\n\t\t\tconst attribute = attributes[ name ];\n\t\t\tthis.setAttribute( name, attribute.clone( data ) );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tconst morphAttributes = source.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst array = [];\n\t\t\tconst morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( let i = 0, l = morphAttribute.length; i < l; i ++ ) {\n\n\t\t\t\tarray.push( morphAttribute[ i ].clone( data ) );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\tthis.morphTargetsRelative = source.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tconst groups = source.groups;\n\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tconst group = groups[ i ];\n\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tconst boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tconst boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// draw range\n\n\t\tthis.drawRange.start = source.drawRange.start;\n\t\tthis.drawRange.count = source.drawRange.count;\n\n\t\t// user data\n\n\t\tthis.userData = source.userData;\n\n\t\t// geometry generator parameters\n\n\t\tif ( source.parameters !== undefined ) this.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n}\n\nconst _inverseMatrix$2 = /*@__PURE__*/ new Matrix4();\nconst _ray$2 = /*@__PURE__*/ new Ray();\nconst _sphere$3 = /*@__PURE__*/ new Sphere();\n\nconst _vA$1 = /*@__PURE__*/ new Vector3();\nconst _vB$1 = /*@__PURE__*/ new Vector3();\nconst _vC$1 = /*@__PURE__*/ new Vector3();\n\nconst _tempA = /*@__PURE__*/ new Vector3();\nconst _morphA = /*@__PURE__*/ new Vector3();\n\nconst _uvA$1 = /*@__PURE__*/ new Vector2();\nconst _uvB$1 = /*@__PURE__*/ new Vector2();\nconst _uvC$1 = /*@__PURE__*/ new Vector2();\n\nconst _intersectionPoint = /*@__PURE__*/ new Vector3();\nconst _intersectionPointWorld = /*@__PURE__*/ new Vector3();\n\nclass Mesh extends Object3D {\n\n\tconstructor( geometry = new BufferGeometry(), material = new MeshBasicMaterial() ) {\n\n\t\tsuper();\n\n\t\tthis.isMesh = true;\n\n\t\tthis.type = 'Mesh';\n\n\t\tthis.geometry = geometry;\n\t\tthis.material = material;\n\n\t\tthis.updateMorphTargets();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tif ( source.morphTargetInfluences !== undefined ) {\n\n\t\t\tthis.morphTargetInfluences = source.morphTargetInfluences.slice();\n\n\t\t}\n\n\t\tif ( source.morphTargetDictionary !== undefined ) {\n\n\t\t\tthis.morphTargetDictionary = Object.assign( {}, source.morphTargetDictionary );\n\n\t\t}\n\n\t\tthis.material = source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t}\n\n\tupdateMorphTargets() {\n\n\t\tconst geometry = this.geometry;\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\t\tconst keys = Object.keys( morphAttributes );\n\n\t\tif ( keys.length > 0 ) {\n\n\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tgetVertexPosition( vert, target ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst position = geometry.attributes.position;\n\t\tconst morphPosition = geometry.morphAttributes.position;\n\t\tconst morphTargetsRelative = geometry.morphTargetsRelative;\n\n\t\ttarget.fromBufferAttribute( position, vert );\n\n\t\tconst morphInfluences = this.morphTargetInfluences;\n\n\t\tif ( morphPosition && morphInfluences ) {\n\n\t\t\t_morphA.set( 0, 0, 0 );\n\n\t\t\tfor ( let i = 0, il = morphPosition.length; i < il; i ++ ) {\n\n\t\t\t\tconst influence = morphInfluences[ i ];\n\t\t\t\tconst morphAttribute = morphPosition[ i ];\n\n\t\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t\t_tempA.fromBufferAttribute( morphAttribute, vert );\n\n\t\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t\t_morphA.addScaledVector( _tempA, influence );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_morphA.addScaledVector( _tempA.sub( target ), influence );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttarget.add( _morphA );\n\n\t\t}\n\n\t\tif ( this.isSkinnedMesh ) {\n\n\t\t\tthis.boneTransform( vert, target );\n\n\t\t}\n\n\t\treturn target;\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst material = this.material;\n\t\tconst matrixWorld = this.matrixWorld;\n\n\t\tif ( material === undefined ) return;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere$3.copy( geometry.boundingSphere );\n\t\t_sphere$3.applyMatrix4( matrixWorld );\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere$3 ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix$2.copy( matrixWorld ).invert();\n\t\t_ray$2.copy( raycaster.ray ).applyMatrix4( _inverseMatrix$2 );\n\n\t\t// Check boundingBox before continuing\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tif ( _ray$2.intersectsBox( geometry.boundingBox ) === false ) return;\n\n\t\t}\n\n\t\tlet intersection;\n\n\t\tconst index = geometry.index;\n\t\tconst position = geometry.attributes.position;\n\t\tconst uv = geometry.attributes.uv;\n\t\tconst uv2 = geometry.attributes.uv2;\n\t\tconst groups = geometry.groups;\n\t\tconst drawRange = geometry.drawRange;\n\n\t\tif ( index !== null ) {\n\n\t\t\t// indexed buffer geometry\n\n\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\tconst start = Math.max( group.start, drawRange.start );\n\t\t\t\t\tconst end = Math.min( index.count, Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) ) );\n\n\t\t\t\t\tfor ( let j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\tconst a = index.getX( j );\n\t\t\t\t\t\tconst b = index.getX( j + 1 );\n\t\t\t\t\t\tconst c = index.getX( j + 2 );\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray$2, uv, uv2, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\t\tconst end = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\tfor ( let i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\tconst a = index.getX( i );\n\t\t\t\t\tconst b = index.getX( i + 1 );\n\t\t\t\t\tconst c = index.getX( i + 2 );\n\n\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray$2, uv, uv2, a, b, c );\n\n\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( position !== undefined ) {\n\n\t\t\t// non-indexed buffer geometry\n\n\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\tconst start = Math.max( group.start, drawRange.start );\n\t\t\t\t\tconst end = Math.min( position.count, Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) ) );\n\n\t\t\t\t\tfor ( let j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\tconst a = j;\n\t\t\t\t\t\tconst b = j + 1;\n\t\t\t\t\t\tconst c = j + 2;\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray$2, uv, uv2, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\t\tconst end = Math.min( position.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\tfor ( let i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\tconst a = i;\n\t\t\t\t\tconst b = i + 1;\n\t\t\t\t\tconst c = i + 2;\n\n\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray$2, uv, uv2, a, b, c );\n\n\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nfunction checkIntersection( object, material, raycaster, ray, pA, pB, pC, point ) {\n\n\tlet intersect;\n\n\tif ( material.side === BackSide ) {\n\n\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\n\n\t} else {\n\n\t\tintersect = ray.intersectTriangle( pA, pB, pC, ( material.side === FrontSide ), point );\n\n\t}\n\n\tif ( intersect === null ) return null;\n\n\t_intersectionPointWorld.copy( point );\n\t_intersectionPointWorld.applyMatrix4( object.matrixWorld );\n\n\tconst distance = raycaster.ray.origin.distanceTo( _intersectionPointWorld );\n\n\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\n\n\treturn {\n\t\tdistance: distance,\n\t\tpoint: _intersectionPointWorld.clone(),\n\t\tobject: object\n\t};\n\n}\n\nfunction checkBufferGeometryIntersection( object, material, raycaster, ray, uv, uv2, a, b, c ) {\n\n\tobject.getVertexPosition( a, _vA$1 );\n\tobject.getVertexPosition( b, _vB$1 );\n\tobject.getVertexPosition( c, _vC$1 );\n\n\tconst intersection = checkIntersection( object, material, raycaster, ray, _vA$1, _vB$1, _vC$1, _intersectionPoint );\n\n\tif ( intersection ) {\n\n\t\tif ( uv ) {\n\n\t\t\t_uvA$1.fromBufferAttribute( uv, a );\n\t\t\t_uvB$1.fromBufferAttribute( uv, b );\n\t\t\t_uvC$1.fromBufferAttribute( uv, c );\n\n\t\t\tintersection.uv = Triangle.getUV( _intersectionPoint, _vA$1, _vB$1, _vC$1, _uvA$1, _uvB$1, _uvC$1, new Vector2() );\n\n\t\t}\n\n\t\tif ( uv2 ) {\n\n\t\t\t_uvA$1.fromBufferAttribute( uv2, a );\n\t\t\t_uvB$1.fromBufferAttribute( uv2, b );\n\t\t\t_uvC$1.fromBufferAttribute( uv2, c );\n\n\t\t\tintersection.uv2 = Triangle.getUV( _intersectionPoint, _vA$1, _vB$1, _vC$1, _uvA$1, _uvB$1, _uvC$1, new Vector2() );\n\n\t\t}\n\n\t\tconst face = {\n\t\t\ta: a,\n\t\t\tb: b,\n\t\t\tc: c,\n\t\t\tnormal: new Vector3(),\n\t\t\tmaterialIndex: 0\n\t\t};\n\n\t\tTriangle.getNormal( _vA$1, _vB$1, _vC$1, face.normal );\n\n\t\tintersection.face = face;\n\n\t}\n\n\treturn intersection;\n\n}\n\nclass BoxGeometry extends BufferGeometry {\n\n\tconstructor( width = 1, height = 1, depth = 1, widthSegments = 1, heightSegments = 1, depthSegments = 1 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'BoxGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tdepth: depth,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tdepthSegments: depthSegments\n\t\t};\n\n\t\tconst scope = this;\n\n\t\t// segments\n\n\t\twidthSegments = Math.floor( widthSegments );\n\t\theightSegments = Math.floor( heightSegments );\n\t\tdepthSegments = Math.floor( depthSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tlet numberOfVertices = 0;\n\t\tlet groupStart = 0;\n\n\t\t// build each side of the box geometry\n\n\t\tbuildPlane( 'z', 'y', 'x', - 1, - 1, depth, height, width, depthSegments, heightSegments, 0 ); // px\n\t\tbuildPlane( 'z', 'y', 'x', 1, - 1, depth, height, - width, depthSegments, heightSegments, 1 ); // nx\n\t\tbuildPlane( 'x', 'z', 'y', 1, 1, width, depth, height, widthSegments, depthSegments, 2 ); // py\n\t\tbuildPlane( 'x', 'z', 'y', 1, - 1, width, depth, - height, widthSegments, depthSegments, 3 ); // ny\n\t\tbuildPlane( 'x', 'y', 'z', 1, - 1, width, height, depth, widthSegments, heightSegments, 4 ); // pz\n\t\tbuildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth, widthSegments, heightSegments, 5 ); // nz\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\tfunction buildPlane( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\n\n\t\t\tconst segmentWidth = width / gridX;\n\t\t\tconst segmentHeight = height / gridY;\n\n\t\t\tconst widthHalf = width / 2;\n\t\t\tconst heightHalf = height / 2;\n\t\t\tconst depthHalf = depth / 2;\n\n\t\t\tconst gridX1 = gridX + 1;\n\t\t\tconst gridY1 = gridY + 1;\n\n\t\t\tlet vertexCounter = 0;\n\t\t\tlet groupCount = 0;\n\n\t\t\tconst vector = new Vector3();\n\n\t\t\t// generate vertices, normals and uvs\n\n\t\t\tfor ( let iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\t\tconst y = iy * segmentHeight - heightHalf;\n\n\t\t\t\tfor ( let ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\t\tconst x = ix * segmentWidth - widthHalf;\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = x * udir;\n\t\t\t\t\tvector[ v ] = y * vdir;\n\t\t\t\t\tvector[ w ] = depthHalf;\n\n\t\t\t\t\t// now apply vector to vertex buffer\n\n\t\t\t\t\tvertices.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = 0;\n\t\t\t\t\tvector[ v ] = 0;\n\t\t\t\t\tvector[ w ] = depth > 0 ? 1 : - 1;\n\n\t\t\t\t\t// now apply vector to normal buffer\n\n\t\t\t\t\tnormals.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// uvs\n\n\t\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t\t\t// counters\n\n\t\t\t\t\tvertexCounter += 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// indices\n\n\t\t\t// 1. you need three indices to draw a single face\n\t\t\t// 2. a single segment consists of two faces\n\t\t\t// 3. so we need to generate six (2*3) indices per segment\n\n\t\t\tfor ( let iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\t\tfor ( let ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\t\tconst a = numberOfVertices + ix + gridX1 * iy;\n\t\t\t\t\tconst b = numberOfVertices + ix + gridX1 * ( iy + 1 );\n\t\t\t\t\tconst c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\t\tconst d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t\t// increase counter\n\n\t\t\t\t\tgroupCount += 6;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, materialIndex );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t\t// update total number of vertices\n\n\t\t\tnumberOfVertices += vertexCounter;\n\n\t\t}\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new BoxGeometry( data.width, data.height, data.depth, data.widthSegments, data.heightSegments, data.depthSegments );\n\n\t}\n\n}\n\n/**\n * Uniform Utilities\n */\n\nfunction cloneUniforms( src ) {\n\n\tconst dst = {};\n\n\tfor ( const u in src ) {\n\n\t\tdst[ u ] = {};\n\n\t\tfor ( const p in src[ u ] ) {\n\n\t\t\tconst property = src[ u ][ p ];\n\n\t\t\tif ( property && ( property.isColor ||\n\t\t\t\tproperty.isMatrix3 || property.isMatrix4 ||\n\t\t\t\tproperty.isVector2 || property.isVector3 || property.isVector4 ||\n\t\t\t\tproperty.isTexture || property.isQuaternion ) ) {\n\n\t\t\t\tdst[ u ][ p ] = property.clone();\n\n\t\t\t} else if ( Array.isArray( property ) ) {\n\n\t\t\t\tdst[ u ][ p ] = property.slice();\n\n\t\t\t} else {\n\n\t\t\t\tdst[ u ][ p ] = property;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn dst;\n\n}\n\nfunction mergeUniforms( uniforms ) {\n\n\tconst merged = {};\n\n\tfor ( let u = 0; u < uniforms.length; u ++ ) {\n\n\t\tconst tmp = cloneUniforms( uniforms[ u ] );\n\n\t\tfor ( const p in tmp ) {\n\n\t\t\tmerged[ p ] = tmp[ p ];\n\n\t\t}\n\n\t}\n\n\treturn merged;\n\n}\n\nfunction cloneUniformsGroups( src ) {\n\n\tconst dst = [];\n\n\tfor ( let u = 0; u < src.length; u ++ ) {\n\n\t\tdst.push( src[ u ].clone() );\n\n\t}\n\n\treturn dst;\n\n}\n\nfunction getUnlitUniformColorSpace( renderer ) {\n\n\tif ( renderer.getRenderTarget() === null ) {\n\n\t\t// https://github.com/mrdoob/three.js/pull/23937#issuecomment-1111067398\n\t\treturn renderer.outputEncoding === sRGBEncoding ? SRGBColorSpace : LinearSRGBColorSpace;\n\n\t}\n\n\treturn LinearSRGBColorSpace;\n\n}\n\n// Legacy\n\nconst UniformsUtils = { clone: cloneUniforms, merge: mergeUniforms };\n\nvar default_vertex = \"void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}\";\n\nvar default_fragment = \"void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}\";\n\nclass ShaderMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isShaderMaterial = true;\n\n\t\tthis.type = 'ShaderMaterial';\n\n\t\tthis.defines = {};\n\t\tthis.uniforms = {};\n\t\tthis.uniformsGroups = [];\n\n\t\tthis.vertexShader = default_vertex;\n\t\tthis.fragmentShader = default_fragment;\n\n\t\tthis.linewidth = 1;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\n\t\tthis.fog = false; // set to use scene fog\n\t\tthis.lights = false; // set to use scene lights\n\t\tthis.clipping = false; // set to use user-defined clipping planes\n\n\t\tthis.extensions = {\n\t\t\tderivatives: false, // set to use derivatives\n\t\t\tfragDepth: false, // set to use fragment depth values\n\t\t\tdrawBuffers: false, // set to use draw buffers\n\t\t\tshaderTextureLOD: false // set to use shader texture LOD\n\t\t};\n\n\t\t// When rendered geometry doesn't include these attributes but the material does,\n\t\t// use these default values in WebGL. This avoids errors when buffer data is missing.\n\t\tthis.defaultAttributeValues = {\n\t\t\t'color': [ 1, 1, 1 ],\n\t\t\t'uv': [ 0, 0 ],\n\t\t\t'uv2': [ 0, 0 ]\n\t\t};\n\n\t\tthis.index0AttributeName = undefined;\n\t\tthis.uniformsNeedUpdate = false;\n\n\t\tthis.glslVersion = null;\n\n\t\tif ( parameters !== undefined ) {\n\n\t\t\tthis.setValues( parameters );\n\n\t\t}\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.fragmentShader = source.fragmentShader;\n\t\tthis.vertexShader = source.vertexShader;\n\n\t\tthis.uniforms = cloneUniforms( source.uniforms );\n\t\tthis.uniformsGroups = cloneUniformsGroups( source.uniformsGroups );\n\n\t\tthis.defines = Object.assign( {}, source.defines );\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\t\tthis.fog = source.fog;\n\t\tthis.lights = source.lights;\n\t\tthis.clipping = source.clipping;\n\n\t\tthis.extensions = Object.assign( {}, source.extensions );\n\n\t\tthis.glslVersion = source.glslVersion;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.glslVersion = this.glslVersion;\n\t\tdata.uniforms = {};\n\n\t\tfor ( const name in this.uniforms ) {\n\n\t\t\tconst uniform = this.uniforms[ name ];\n\t\t\tconst value = uniform.value;\n\n\t\t\tif ( value && value.isTexture ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 't',\n\t\t\t\t\tvalue: value.toJSON( meta ).uuid\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isColor ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'c',\n\t\t\t\t\tvalue: value.getHex()\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isVector2 ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'v2',\n\t\t\t\t\tvalue: value.toArray()\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isVector3 ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'v3',\n\t\t\t\t\tvalue: value.toArray()\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isVector4 ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'v4',\n\t\t\t\t\tvalue: value.toArray()\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isMatrix3 ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'm3',\n\t\t\t\t\tvalue: value.toArray()\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isMatrix4 ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'm4',\n\t\t\t\t\tvalue: value.toArray()\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\tvalue: value\n\t\t\t\t};\n\n\t\t\t\t// note: the array variants v2v, v3v, v4v, m4v and tv are not supported so far\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( Object.keys( this.defines ).length > 0 ) data.defines = this.defines;\n\n\t\tdata.vertexShader = this.vertexShader;\n\t\tdata.fragmentShader = this.fragmentShader;\n\n\t\tconst extensions = {};\n\n\t\tfor ( const key in this.extensions ) {\n\n\t\t\tif ( this.extensions[ key ] === true ) extensions[ key ] = true;\n\n\t\t}\n\n\t\tif ( Object.keys( extensions ).length > 0 ) data.extensions = extensions;\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass Camera extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isCamera = true;\n\n\t\tthis.type = 'Camera';\n\n\t\tthis.matrixWorldInverse = new Matrix4();\n\n\t\tthis.projectionMatrix = new Matrix4();\n\t\tthis.projectionMatrixInverse = new Matrix4();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\n\n\t\tthis.projectionMatrix.copy( source.projectionMatrix );\n\t\tthis.projectionMatrixInverse.copy( source.projectionMatrixInverse );\n\n\t\treturn this;\n\n\t}\n\n\tgetWorldDirection( target ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tconst e = this.matrixWorld.elements;\n\n\t\treturn target.set( - e[ 8 ], - e[ 9 ], - e[ 10 ] ).normalize();\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t\tthis.matrixWorldInverse.copy( this.matrixWorld ).invert();\n\n\t}\n\n\tupdateWorldMatrix( updateParents, updateChildren ) {\n\n\t\tsuper.updateWorldMatrix( updateParents, updateChildren );\n\n\t\tthis.matrixWorldInverse.copy( this.matrixWorld ).invert();\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nclass PerspectiveCamera extends Camera {\n\n\tconstructor( fov = 50, aspect = 1, near = 0.1, far = 2000 ) {\n\n\t\tsuper();\n\n\t\tthis.isPerspectiveCamera = true;\n\n\t\tthis.type = 'PerspectiveCamera';\n\n\t\tthis.fov = fov;\n\t\tthis.zoom = 1;\n\n\t\tthis.near = near;\n\t\tthis.far = far;\n\t\tthis.focus = 10;\n\n\t\tthis.aspect = aspect;\n\t\tthis.view = null;\n\n\t\tthis.filmGauge = 35;\t// width of the film (default in millimeters)\n\t\tthis.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.fov = source.fov;\n\t\tthis.zoom = source.zoom;\n\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\t\tthis.focus = source.focus;\n\n\t\tthis.aspect = source.aspect;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\tthis.filmGauge = source.filmGauge;\n\t\tthis.filmOffset = source.filmOffset;\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Sets the FOV by focal length in respect to the current .filmGauge.\n\t *\n\t * The default film gauge is 35, so that the focal length can be specified for\n\t * a 35mm (full frame) camera.\n\t *\n\t * Values for focal length and film gauge must have the same unit.\n\t */\n\tsetFocalLength( focalLength ) {\n\n\t\t/** see {@link http://www.bobatkins.com/photography/technical/field_of_view.html} */\n\t\tconst vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\n\n\t\tthis.fov = RAD2DEG * 2 * Math.atan( vExtentSlope );\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\t/**\n\t * Calculates the focal length from the current .fov and .filmGauge.\n\t */\n\tgetFocalLength() {\n\n\t\tconst vExtentSlope = Math.tan( DEG2RAD * 0.5 * this.fov );\n\n\t\treturn 0.5 * this.getFilmHeight() / vExtentSlope;\n\n\t}\n\n\tgetEffectiveFOV() {\n\n\t\treturn RAD2DEG * 2 * Math.atan(\n\t\t\tMath.tan( DEG2RAD * 0.5 * this.fov ) / this.zoom );\n\n\t}\n\n\tgetFilmWidth() {\n\n\t\t// film not completely covered in portrait format (aspect < 1)\n\t\treturn this.filmGauge * Math.min( this.aspect, 1 );\n\n\t}\n\n\tgetFilmHeight() {\n\n\t\t// film not completely covered in landscape format (aspect > 1)\n\t\treturn this.filmGauge / Math.max( this.aspect, 1 );\n\n\t}\n\n\t/**\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\n\t * multi-monitor/multi-machine setups.\n\t *\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n\t * the monitors are in grid like this\n\t *\n\t *   +---+---+---+\n\t *   | A | B | C |\n\t *   +---+---+---+\n\t *   | D | E | F |\n\t *   +---+---+---+\n\t *\n\t * then for each monitor you would call it like this\n\t *\n\t *   const w = 1920;\n\t *   const h = 1080;\n\t *   const fullWidth = w * 3;\n\t *   const fullHeight = h * 2;\n\t *\n\t *   --A--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n\t *   --B--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n\t *   --C--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n\t *   --D--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n\t *   --E--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n\t *   --F--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n\t *\n\t *   Note there is no reason monitors have to be the same size or in a grid.\n\t */\n\tsetViewOffset( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tthis.aspect = fullWidth / fullHeight;\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tclearViewOffset() {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tupdateProjectionMatrix() {\n\n\t\tconst near = this.near;\n\t\tlet top = near * Math.tan( DEG2RAD * 0.5 * this.fov ) / this.zoom;\n\t\tlet height = 2 * top;\n\t\tlet width = this.aspect * height;\n\t\tlet left = - 0.5 * width;\n\t\tconst view = this.view;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tconst fullWidth = view.fullWidth,\n\t\t\t\tfullHeight = view.fullHeight;\n\n\t\t\tleft += view.offsetX * width / fullWidth;\n\t\t\ttop -= view.offsetY * height / fullHeight;\n\t\t\twidth *= view.width / fullWidth;\n\t\t\theight *= view.height / fullHeight;\n\n\t\t}\n\n\t\tconst skew = this.filmOffset;\n\t\tif ( skew !== 0 ) left += near * skew / this.getFilmWidth();\n\n\t\tthis.projectionMatrix.makePerspective( left, left + width, top, top - height, near, this.far );\n\n\t\tthis.projectionMatrixInverse.copy( this.projectionMatrix ).invert();\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.object.fov = this.fov;\n\t\tdata.object.zoom = this.zoom;\n\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\t\tdata.object.focus = this.focus;\n\n\t\tdata.object.aspect = this.aspect;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\tdata.object.filmGauge = this.filmGauge;\n\t\tdata.object.filmOffset = this.filmOffset;\n\n\t\treturn data;\n\n\t}\n\n}\n\nconst fov = - 90; // negative fov is not an error\nconst aspect = 1;\n\nclass CubeCamera extends Object3D {\n\n\tconstructor( near, far, renderTarget ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'CubeCamera';\n\n\t\tthis.renderTarget = renderTarget;\n\n\t\tconst cameraPX = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraPX.layers = this.layers;\n\t\tcameraPX.up.set( 0, 1, 0 );\n\t\tcameraPX.lookAt( 1, 0, 0 );\n\t\tthis.add( cameraPX );\n\n\t\tconst cameraNX = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraNX.layers = this.layers;\n\t\tcameraNX.up.set( 0, 1, 0 );\n\t\tcameraNX.lookAt( - 1, 0, 0 );\n\t\tthis.add( cameraNX );\n\n\t\tconst cameraPY = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraPY.layers = this.layers;\n\t\tcameraPY.up.set( 0, 0, - 1 );\n\t\tcameraPY.lookAt( 0, 1, 0 );\n\t\tthis.add( cameraPY );\n\n\t\tconst cameraNY = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraNY.layers = this.layers;\n\t\tcameraNY.up.set( 0, 0, 1 );\n\t\tcameraNY.lookAt( 0, - 1, 0 );\n\t\tthis.add( cameraNY );\n\n\t\tconst cameraPZ = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraPZ.layers = this.layers;\n\t\tcameraPZ.up.set( 0, 1, 0 );\n\t\tcameraPZ.lookAt( 0, 0, 1 );\n\t\tthis.add( cameraPZ );\n\n\t\tconst cameraNZ = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraNZ.layers = this.layers;\n\t\tcameraNZ.up.set( 0, 1, 0 );\n\t\tcameraNZ.lookAt( 0, 0, - 1 );\n\t\tthis.add( cameraNZ );\n\n\t}\n\n\tupdate( renderer, scene ) {\n\n\t\tif ( this.parent === null ) this.updateMatrixWorld();\n\n\t\tconst renderTarget = this.renderTarget;\n\n\t\tconst [ cameraPX, cameraNX, cameraPY, cameraNY, cameraPZ, cameraNZ ] = this.children;\n\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\tconst currentToneMapping = renderer.toneMapping;\n\t\tconst currentXrEnabled = renderer.xr.enabled;\n\n\t\trenderer.toneMapping = NoToneMapping;\n\t\trenderer.xr.enabled = false;\n\n\t\tconst generateMipmaps = renderTarget.texture.generateMipmaps;\n\n\t\trenderTarget.texture.generateMipmaps = false;\n\n\t\trenderer.setRenderTarget( renderTarget, 0 );\n\t\trenderer.render( scene, cameraPX );\n\n\t\trenderer.setRenderTarget( renderTarget, 1 );\n\t\trenderer.render( scene, cameraNX );\n\n\t\trenderer.setRenderTarget( renderTarget, 2 );\n\t\trenderer.render( scene, cameraPY );\n\n\t\trenderer.setRenderTarget( renderTarget, 3 );\n\t\trenderer.render( scene, cameraNY );\n\n\t\trenderer.setRenderTarget( renderTarget, 4 );\n\t\trenderer.render( scene, cameraPZ );\n\n\t\trenderTarget.texture.generateMipmaps = generateMipmaps;\n\n\t\trenderer.setRenderTarget( renderTarget, 5 );\n\t\trenderer.render( scene, cameraNZ );\n\n\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t\trenderer.toneMapping = currentToneMapping;\n\t\trenderer.xr.enabled = currentXrEnabled;\n\n\t\trenderTarget.texture.needsPMREMUpdate = true;\n\n\t}\n\n}\n\nclass CubeTexture extends Texture {\n\n\tconstructor( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\t\timages = images !== undefined ? images : [];\n\t\tmapping = mapping !== undefined ? mapping : CubeReflectionMapping;\n\n\t\tsuper( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\t\tthis.isCubeTexture = true;\n\n\t\tthis.flipY = false;\n\n\t}\n\n\tget images() {\n\n\t\treturn this.image;\n\n\t}\n\n\tset images( value ) {\n\n\t\tthis.image = value;\n\n\t}\n\n}\n\nclass WebGLCubeRenderTarget extends WebGLRenderTarget {\n\n\tconstructor( size = 1, options = {} ) {\n\n\t\tsuper( size, size, options );\n\n\t\tthis.isWebGLCubeRenderTarget = true;\n\n\t\tconst image = { width: size, height: size, depth: 1 };\n\t\tconst images = [ image, image, image, image, image, image ];\n\n\t\tthis.texture = new CubeTexture( images, options.mapping, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\n\n\t\t// By convention -- likely based on the RenderMan spec from the 1990's -- cube maps are specified by WebGL (and three.js)\n\t\t// in a coordinate system in which positive-x is to the right when looking up the positive-z axis -- in other words,\n\t\t// in a left-handed coordinate system. By continuing this convention, preexisting cube maps continued to render correctly.\n\n\t\t// three.js uses a right-handed coordinate system. So environment maps used in three.js appear to have px and nx swapped\n\t\t// and the flag isRenderTargetTexture controls this conversion. The flip is not required when using WebGLCubeRenderTarget.texture\n\t\t// as a cube texture (this is detected when isRenderTargetTexture is set to true for cube textures).\n\n\t\tthis.texture.isRenderTargetTexture = true;\n\n\t\tthis.texture.generateMipmaps = options.generateMipmaps !== undefined ? options.generateMipmaps : false;\n\t\tthis.texture.minFilter = options.minFilter !== undefined ? options.minFilter : LinearFilter;\n\n\t}\n\n\tfromEquirectangularTexture( renderer, texture ) {\n\n\t\tthis.texture.type = texture.type;\n\t\tthis.texture.encoding = texture.encoding;\n\n\t\tthis.texture.generateMipmaps = texture.generateMipmaps;\n\t\tthis.texture.minFilter = texture.minFilter;\n\t\tthis.texture.magFilter = texture.magFilter;\n\n\t\tconst shader = {\n\n\t\t\tuniforms: {\n\t\t\t\ttEquirect: { value: null },\n\t\t\t},\n\n\t\t\tvertexShader: /* glsl */`\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t`,\n\n\t\t\tfragmentShader: /* glsl */`\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t`\n\t\t};\n\n\t\tconst geometry = new BoxGeometry( 5, 5, 5 );\n\n\t\tconst material = new ShaderMaterial( {\n\n\t\t\tname: 'CubemapFromEquirect',\n\n\t\t\tuniforms: cloneUniforms( shader.uniforms ),\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tfragmentShader: shader.fragmentShader,\n\t\t\tside: BackSide,\n\t\t\tblending: NoBlending\n\n\t\t} );\n\n\t\tmaterial.uniforms.tEquirect.value = texture;\n\n\t\tconst mesh = new Mesh( geometry, material );\n\n\t\tconst currentMinFilter = texture.minFilter;\n\n\t\t// Avoid blurred poles\n\t\tif ( texture.minFilter === LinearMipmapLinearFilter ) texture.minFilter = LinearFilter;\n\n\t\tconst camera = new CubeCamera( 1, 10, this );\n\t\tcamera.update( renderer, mesh );\n\n\t\ttexture.minFilter = currentMinFilter;\n\n\t\tmesh.geometry.dispose();\n\t\tmesh.material.dispose();\n\n\t\treturn this;\n\n\t}\n\n\tclear( renderer, color, depth, stencil ) {\n\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\trenderer.setRenderTarget( this, i );\n\n\t\t\trenderer.clear( color, depth, stencil );\n\n\t\t}\n\n\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t}\n\n}\n\nconst _vector1 = /*@__PURE__*/ new Vector3();\nconst _vector2 = /*@__PURE__*/ new Vector3();\nconst _normalMatrix = /*@__PURE__*/ new Matrix3();\n\nclass Plane {\n\n\tconstructor( normal = new Vector3( 1, 0, 0 ), constant = 0 ) {\n\n\t\tthis.isPlane = true;\n\n\t\t// normal is assumed to be normalized\n\n\t\tthis.normal = normal;\n\t\tthis.constant = constant;\n\n\t}\n\n\tset( normal, constant ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = constant;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponents( x, y, z, w ) {\n\n\t\tthis.normal.set( x, y, z );\n\t\tthis.constant = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromNormalAndCoplanarPoint( normal, point ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = - point.dot( this.normal );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCoplanarPoints( a, b, c ) {\n\n\t\tconst normal = _vector1.subVectors( c, b ).cross( _vector2.subVectors( a, b ) ).normalize();\n\n\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( plane ) {\n\n\t\tthis.normal.copy( plane.normal );\n\t\tthis.constant = plane.constant;\n\n\t\treturn this;\n\n\t}\n\n\tnormalize() {\n\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\n\n\t\tconst inverseNormalLength = 1.0 / this.normal.length();\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\n\t\tthis.constant *= inverseNormalLength;\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.constant *= - 1;\n\t\tthis.normal.negate();\n\n\t\treturn this;\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn this.normal.dot( point ) + this.constant;\n\n\t}\n\n\tdistanceToSphere( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\n\n\t}\n\n\tprojectPoint( point, target ) {\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.distanceToPoint( point ) ).add( point );\n\n\t}\n\n\tintersectLine( line, target ) {\n\n\t\tconst direction = line.delta( _vector1 );\n\n\t\tconst denominator = this.normal.dot( direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\n\n\t\t\t\treturn target.copy( line.start );\n\n\t\t\t}\n\n\t\t\t// Unsure if this is the correct method to handle this case.\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\n\n\t\tif ( t < 0 || t > 1 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\treturn target.copy( direction ).multiplyScalar( t ).add( line.start );\n\n\t}\n\n\tintersectsLine( line ) {\n\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n\n\t\tconst startSign = this.distanceToPoint( line.start );\n\t\tconst endSign = this.distanceToPoint( line.end );\n\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsPlane( this );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\treturn sphere.intersectsPlane( this );\n\n\t}\n\n\tcoplanarPoint( target ) {\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.constant );\n\n\t}\n\n\tapplyMatrix4( matrix, optionalNormalMatrix ) {\n\n\t\tconst normalMatrix = optionalNormalMatrix || _normalMatrix.getNormalMatrix( matrix );\n\n\t\tconst referencePoint = this.coplanarPoint( _vector1 ).applyMatrix4( matrix );\n\n\t\tconst normal = this.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\tthis.constant = - referencePoint.dot( normal );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.constant -= offset.dot( this.normal );\n\n\t\treturn this;\n\n\t}\n\n\tequals( plane ) {\n\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nconst _sphere$2 = /*@__PURE__*/ new Sphere();\nconst _vector$7 = /*@__PURE__*/ new Vector3();\n\nclass Frustum {\n\n\tconstructor( p0 = new Plane(), p1 = new Plane(), p2 = new Plane(), p3 = new Plane(), p4 = new Plane(), p5 = new Plane() ) {\n\n\t\tthis.planes = [ p0, p1, p2, p3, p4, p5 ];\n\n\t}\n\n\tset( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tconst planes = this.planes;\n\n\t\tplanes[ 0 ].copy( p0 );\n\t\tplanes[ 1 ].copy( p1 );\n\t\tplanes[ 2 ].copy( p2 );\n\t\tplanes[ 3 ].copy( p3 );\n\t\tplanes[ 4 ].copy( p4 );\n\t\tplanes[ 5 ].copy( p5 );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( frustum ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromProjectionMatrix( m ) {\n\n\t\tconst planes = this.planes;\n\t\tconst me = m.elements;\n\t\tconst me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\n\t\tconst me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\n\t\tconst me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\n\t\tconst me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\n\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\n\n\t\treturn this;\n\n\t}\n\n\tintersectsObject( object ) {\n\n\t\tconst geometry = object.geometry;\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere$2.copy( geometry.boundingSphere ).applyMatrix4( object.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere$2 );\n\n\t}\n\n\tintersectsSprite( sprite ) {\n\n\t\t_sphere$2.center.set( 0, 0, 0 );\n\t\t_sphere$2.radius = 0.7071067811865476;\n\t\t_sphere$2.applyMatrix4( sprite.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere$2 );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\tconst planes = this.planes;\n\t\tconst center = sphere.center;\n\t\tconst negRadius = - sphere.radius;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst distance = planes[ i ].distanceToPoint( center );\n\n\t\t\tif ( distance < negRadius ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst plane = planes[ i ];\n\n\t\t\t// corner at max distance\n\n\t\t\t_vector$7.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n\t\t\t_vector$7.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n\t\t\t_vector$7.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n\t\t\tif ( plane.distanceToPoint( _vector$7 ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nfunction WebGLAnimation() {\n\n\tlet context = null;\n\tlet isAnimating = false;\n\tlet animationLoop = null;\n\tlet requestId = null;\n\n\tfunction onAnimationFrame( time, frame ) {\n\n\t\tanimationLoop( time, frame );\n\n\t\trequestId = context.requestAnimationFrame( onAnimationFrame );\n\n\t}\n\n\treturn {\n\n\t\tstart: function () {\n\n\t\t\tif ( isAnimating === true ) return;\n\t\t\tif ( animationLoop === null ) return;\n\n\t\t\trequestId = context.requestAnimationFrame( onAnimationFrame );\n\n\t\t\tisAnimating = true;\n\n\t\t},\n\n\t\tstop: function () {\n\n\t\t\tcontext.cancelAnimationFrame( requestId );\n\n\t\t\tisAnimating = false;\n\n\t\t},\n\n\t\tsetAnimationLoop: function ( callback ) {\n\n\t\t\tanimationLoop = callback;\n\n\t\t},\n\n\t\tsetContext: function ( value ) {\n\n\t\t\tcontext = value;\n\n\t\t}\n\n\t};\n\n}\n\nfunction WebGLAttributes( gl, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tconst buffers = new WeakMap();\n\n\tfunction createBuffer( attribute, bufferType ) {\n\n\t\tconst array = attribute.array;\n\t\tconst usage = attribute.usage;\n\n\t\tconst buffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\t\tgl.bufferData( bufferType, array, usage );\n\n\t\tattribute.onUploadCallback();\n\n\t\tlet type;\n\n\t\tif ( array instanceof Float32Array ) {\n\n\t\t\ttype = 5126;\n\n\t\t} else if ( array instanceof Uint16Array ) {\n\n\t\t\tif ( attribute.isFloat16BufferAttribute ) {\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\ttype = 5131;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\ttype = 5123;\n\n\t\t\t}\n\n\t\t} else if ( array instanceof Int16Array ) {\n\n\t\t\ttype = 5122;\n\n\t\t} else if ( array instanceof Uint32Array ) {\n\n\t\t\ttype = 5125;\n\n\t\t} else if ( array instanceof Int32Array ) {\n\n\t\t\ttype = 5124;\n\n\t\t} else if ( array instanceof Int8Array ) {\n\n\t\t\ttype = 5120;\n\n\t\t} else if ( array instanceof Uint8Array ) {\n\n\t\t\ttype = 5121;\n\n\t\t} else if ( array instanceof Uint8ClampedArray ) {\n\n\t\t\ttype = 5121;\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.WebGLAttributes: Unsupported buffer data format: ' + array );\n\n\t\t}\n\n\t\treturn {\n\t\t\tbuffer: buffer,\n\t\t\ttype: type,\n\t\t\tbytesPerElement: array.BYTES_PER_ELEMENT,\n\t\t\tversion: attribute.version\n\t\t};\n\n\t}\n\n\tfunction updateBuffer( buffer, attribute, bufferType ) {\n\n\t\tconst array = attribute.array;\n\t\tconst updateRange = attribute.updateRange;\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\n\t\tif ( updateRange.count === - 1 ) {\n\n\t\t\t// Not using update ranges\n\n\t\t\tgl.bufferSubData( bufferType, 0, array );\n\n\t\t} else {\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\t\tarray, updateRange.offset, updateRange.count );\n\n\t\t\t} else {\n\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\t\tarray.subarray( updateRange.offset, updateRange.offset + updateRange.count ) );\n\n\t\t\t}\n\n\t\t\tupdateRange.count = - 1; // reset range\n\n\t\t}\n\n\t\tattribute.onUploadCallback();\n\n\t}\n\n\t//\n\n\tfunction get( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\treturn buffers.get( attribute );\n\n\t}\n\n\tfunction remove( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tconst data = buffers.get( attribute );\n\n\t\tif ( data ) {\n\n\t\t\tgl.deleteBuffer( data.buffer );\n\n\t\t\tbuffers.delete( attribute );\n\n\t\t}\n\n\t}\n\n\tfunction update( attribute, bufferType ) {\n\n\t\tif ( attribute.isGLBufferAttribute ) {\n\n\t\t\tconst cached = buffers.get( attribute );\n\n\t\t\tif ( ! cached || cached.version < attribute.version ) {\n\n\t\t\t\tbuffers.set( attribute, {\n\t\t\t\t\tbuffer: attribute.buffer,\n\t\t\t\t\ttype: attribute.type,\n\t\t\t\t\tbytesPerElement: attribute.elementSize,\n\t\t\t\t\tversion: attribute.version\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tconst data = buffers.get( attribute );\n\n\t\tif ( data === undefined ) {\n\n\t\t\tbuffers.set( attribute, createBuffer( attribute, bufferType ) );\n\n\t\t} else if ( data.version < attribute.version ) {\n\n\t\t\tupdateBuffer( data.buffer, attribute, bufferType );\n\n\t\t\tdata.version = attribute.version;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update\n\n\t};\n\n}\n\nclass PlaneGeometry extends BufferGeometry {\n\n\tconstructor( width = 1, height = 1, widthSegments = 1, heightSegments = 1 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'PlaneGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments\n\t\t};\n\n\t\tconst width_half = width / 2;\n\t\tconst height_half = height / 2;\n\n\t\tconst gridX = Math.floor( widthSegments );\n\t\tconst gridY = Math.floor( heightSegments );\n\n\t\tconst gridX1 = gridX + 1;\n\t\tconst gridY1 = gridY + 1;\n\n\t\tconst segment_width = width / gridX;\n\t\tconst segment_height = height / gridY;\n\n\t\t//\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\tfor ( let iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\tconst y = iy * segment_height - height_half;\n\n\t\t\tfor ( let ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\tconst x = ix * segment_width - width_half;\n\n\t\t\t\tvertices.push( x, - y, 0 );\n\n\t\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\tfor ( let ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\tconst a = ix + gridX1 * iy;\n\t\t\t\tconst b = ix + gridX1 * ( iy + 1 );\n\t\t\t\tconst c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\tconst d = ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new PlaneGeometry( data.width, data.height, data.widthSegments, data.heightSegments );\n\n\t}\n\n}\n\nvar alphamap_fragment = \"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\";\n\nvar alphamap_pars_fragment = \"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\";\n\nvar alphatest_fragment = \"#ifdef USE_ALPHATEST\\n\\tif ( diffuseColor.a < alphaTest ) discard;\\n#endif\";\n\nvar alphatest_pars_fragment = \"#ifdef USE_ALPHATEST\\n\\tuniform float alphaTest;\\n#endif\";\n\nvar aomap_fragment = \"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\\n\\t#endif\\n#endif\";\n\nvar aomap_pars_fragment = \"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\";\n\nvar begin_vertex = \"vec3 transformed = vec3( position );\";\n\nvar beginnormal_vertex = \"vec3 objectNormal = vec3( normal );\\n#ifdef USE_TANGENT\\n\\tvec3 objectTangent = vec3( tangent.xyz );\\n#endif\";\n\nvar bsdfs = \"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\\n\\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\\n\\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\\n}\\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\\n\\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\\n\\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\\n}\\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\\n    float x2 = x * x;\\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\\n}\\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\tfloat dotNL = saturate( dot( normal, lightDir ) );\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\\n\\tvec3 F = F_Schlick( f0, f90, dotVH );\\n\\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( V * D );\\n}\\n#ifdef USE_IRIDESCENCE\\n\\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\\n\\t\\tfloat alpha = pow2( roughness );\\n\\t\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\t\\tfloat dotNL = saturate( dot( normal, lightDir ) );\\n\\t\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\t\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\t\\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\\n\\t\\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\\n\\t\\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\t\\tfloat D = D_GGX( alpha, dotNH );\\n\\t\\treturn F * ( V * D );\\n\\t}\\n#endif\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\\n\\tfloat dotNV = saturate( dot( N, V ) );\\n\\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\\n\\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\\n\\treturn vec3( result );\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\n#if defined( USE_SHEEN )\\nfloat D_Charlie( float roughness, float dotNH ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tfloat invAlpha = 1.0 / alpha;\\n\\tfloat cos2h = dotNH * dotNH;\\n\\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\\n\\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\\n}\\nfloat V_Neubelt( float dotNV, float dotNL ) {\\n\\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\\n}\\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\\n\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\tfloat dotNL = saturate( dot( normal, lightDir ) );\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat D = D_Charlie( sheenRoughness, dotNH );\\n\\tfloat V = V_Neubelt( dotNV, dotNL );\\n\\treturn sheenColor * ( D * V );\\n}\\n#endif\";\n\nvar iridescence_fragment = \"#ifdef USE_IRIDESCENCE\\n\\tconst mat3 XYZ_TO_REC709 = mat3(\\n\\t\\t 3.2404542, -0.9692660,  0.0556434,\\n\\t\\t-1.5371385,  1.8760108, -0.2040259,\\n\\t\\t-0.4985314,  0.0415560,  1.0572252\\n\\t);\\n\\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\\n\\t\\tvec3 sqrtF0 = sqrt( fresnel0 );\\n\\t\\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\\n\\t}\\n\\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\\n\\t\\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\\n\\t}\\n\\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\\n\\t\\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\\n\\t}\\n\\tvec3 evalSensitivity( float OPD, vec3 shift ) {\\n\\t\\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\\n\\t\\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\\n\\t\\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\\n\\t\\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\\n\\t\\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\\n\\t\\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\\n\\t\\txyz /= 1.0685e-7;\\n\\t\\tvec3 rgb = XYZ_TO_REC709 * xyz;\\n\\t\\treturn rgb;\\n\\t}\\n\\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\\n\\t\\tvec3 I;\\n\\t\\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\\n\\t\\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\\n\\t\\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\\n\\t\\tif ( cosTheta2Sq < 0.0 ) {\\n\\t\\t\\t return vec3( 1.0 );\\n\\t\\t}\\n\\t\\tfloat cosTheta2 = sqrt( cosTheta2Sq );\\n\\t\\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\\n\\t\\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\\n\\t\\tfloat R21 = R12;\\n\\t\\tfloat T121 = 1.0 - R12;\\n\\t\\tfloat phi12 = 0.0;\\n\\t\\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\\n\\t\\tfloat phi21 = PI - phi12;\\n\\t\\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\\t\\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\\n\\t\\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\\n\\t\\tvec3 phi23 = vec3( 0.0 );\\n\\t\\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\\n\\t\\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\\n\\t\\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\\n\\t\\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\\n\\t\\tvec3 phi = vec3( phi21 ) + phi23;\\n\\t\\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\\n\\t\\tvec3 r123 = sqrt( R123 );\\n\\t\\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\\n\\t\\tvec3 C0 = R12 + Rs;\\n\\t\\tI = C0;\\n\\t\\tvec3 Cm = Rs - T121;\\n\\t\\tfor ( int m = 1; m <= 2; ++ m ) {\\n\\t\\t\\tCm *= r123;\\n\\t\\t\\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\\n\\t\\t\\tI += Cm * Sm;\\n\\t\\t}\\n\\t\\treturn max( I, vec3( 0.0 ) );\\n\\t}\\n#endif\";\n\nvar bumpmap_pars_fragment = \"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\\n\\t\\tvec3 vSigmaX = dFdx( surf_pos.xyz );\\n\\t\\tvec3 vSigmaY = dFdy( surf_pos.xyz );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\";\n\nvar clipping_planes_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvec4 plane;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\\n\\t\\tplane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t\\tif ( clipped ) discard;\\n\\t#endif\\n#endif\";\n\nvar clipping_planes_pars_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\";\n\nvar clipping_planes_pars_vertex = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n#endif\";\n\nvar clipping_planes_vertex = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvClipPosition = - mvPosition.xyz;\\n#endif\";\n\nvar color_fragment = \"#if defined( USE_COLOR_ALPHA )\\n\\tdiffuseColor *= vColor;\\n#elif defined( USE_COLOR )\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\";\n\nvar color_pars_fragment = \"#if defined( USE_COLOR_ALPHA )\\n\\tvarying vec4 vColor;\\n#elif defined( USE_COLOR )\\n\\tvarying vec3 vColor;\\n#endif\";\n\nvar color_pars_vertex = \"#if defined( USE_COLOR_ALPHA )\\n\\tvarying vec4 vColor;\\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\\n\\tvarying vec3 vColor;\\n#endif\";\n\nvar color_vertex = \"#if defined( USE_COLOR_ALPHA )\\n\\tvColor = vec4( 1.0 );\\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\\n\\tvColor = vec3( 1.0 );\\n#endif\\n#ifdef USE_COLOR\\n\\tvColor *= color;\\n#endif\\n#ifdef USE_INSTANCING_COLOR\\n\\tvColor.xyz *= instanceColor.xyz;\\n#endif\";\n\nvar common = \"#define PI 3.141592653589793\\n#define PI2 6.283185307179586\\n#define PI_HALF 1.5707963267948966\\n#define RECIPROCAL_PI 0.3183098861837907\\n#define RECIPROCAL_PI2 0.15915494309189535\\n#define EPSILON 1e-6\\n#ifndef saturate\\n#define saturate( a ) clamp( a, 0.0, 1.0 )\\n#endif\\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nvec3 pow2( const in vec3 x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract( sin( sn ) * c );\\n}\\n#ifdef HIGH_PRECISION\\n\\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\\n#else\\n\\tfloat precisionSafeLength( vec3 v ) {\\n\\t\\tfloat maxComponent = max3( abs( v ) );\\n\\t\\treturn length( v / maxComponent ) * maxComponent;\\n\\t}\\n#endif\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n#ifdef USE_CLEARCOAT\\n\\tvec3 clearcoatNormal;\\n#endif\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nfloat luminance( const in vec3 rgb ) {\\n\\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\\n\\treturn dot( weights, rgb );\\n}\\nbool isPerspectiveMatrix( mat4 m ) {\\n\\treturn m[ 2 ][ 3 ] == - 1.0;\\n}\\nvec2 equirectUv( in vec3 dir ) {\\n\\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\treturn vec2( u, v );\\n}\";\n\nvar cube_uv_reflection_fragment = \"#ifdef ENVMAP_TYPE_CUBE_UV\\n\\t#define cubeUV_minMipLevel 4.0\\n\\t#define cubeUV_minTileSize 16.0\\n\\tfloat getFace( vec3 direction ) {\\n\\t\\tvec3 absDirection = abs( direction );\\n\\t\\tfloat face = - 1.0;\\n\\t\\tif ( absDirection.x > absDirection.z ) {\\n\\t\\t\\tif ( absDirection.x > absDirection.y )\\n\\t\\t\\t\\tface = direction.x > 0.0 ? 0.0 : 3.0;\\n\\t\\t\\telse\\n\\t\\t\\t\\tface = direction.y > 0.0 ? 1.0 : 4.0;\\n\\t\\t} else {\\n\\t\\t\\tif ( absDirection.z > absDirection.y )\\n\\t\\t\\t\\tface = direction.z > 0.0 ? 2.0 : 5.0;\\n\\t\\t\\telse\\n\\t\\t\\t\\tface = direction.y > 0.0 ? 1.0 : 4.0;\\n\\t\\t}\\n\\t\\treturn face;\\n\\t}\\n\\tvec2 getUV( vec3 direction, float face ) {\\n\\t\\tvec2 uv;\\n\\t\\tif ( face == 0.0 ) {\\n\\t\\t\\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\\n\\t\\t} else if ( face == 1.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\\n\\t\\t} else if ( face == 2.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\\n\\t\\t} else if ( face == 3.0 ) {\\n\\t\\t\\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\\n\\t\\t} else if ( face == 4.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\\n\\t\\t} else {\\n\\t\\t\\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\\n\\t\\t}\\n\\t\\treturn 0.5 * ( uv + 1.0 );\\n\\t}\\n\\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\\n\\t\\tfloat face = getFace( direction );\\n\\t\\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\\n\\t\\tmipInt = max( mipInt, cubeUV_minMipLevel );\\n\\t\\tfloat faceSize = exp2( mipInt );\\n\\t\\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\\n\\t\\tif ( face > 2.0 ) {\\n\\t\\t\\tuv.y += faceSize;\\n\\t\\t\\tface -= 3.0;\\n\\t\\t}\\n\\t\\tuv.x += face * faceSize;\\n\\t\\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\\n\\t\\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\\n\\t\\tuv.x *= CUBEUV_TEXEL_WIDTH;\\n\\t\\tuv.y *= CUBEUV_TEXEL_HEIGHT;\\n\\t\\t#ifdef texture2DGradEXT\\n\\t\\t\\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\\n\\t\\t#else\\n\\t\\t\\treturn texture2D( envMap, uv ).rgb;\\n\\t\\t#endif\\n\\t}\\n\\t#define cubeUV_r0 1.0\\n\\t#define cubeUV_v0 0.339\\n\\t#define cubeUV_m0 - 2.0\\n\\t#define cubeUV_r1 0.8\\n\\t#define cubeUV_v1 0.276\\n\\t#define cubeUV_m1 - 1.0\\n\\t#define cubeUV_r4 0.4\\n\\t#define cubeUV_v4 0.046\\n\\t#define cubeUV_m4 2.0\\n\\t#define cubeUV_r5 0.305\\n\\t#define cubeUV_v5 0.016\\n\\t#define cubeUV_m5 3.0\\n\\t#define cubeUV_r6 0.21\\n\\t#define cubeUV_v6 0.0038\\n\\t#define cubeUV_m6 4.0\\n\\tfloat roughnessToMip( float roughness ) {\\n\\t\\tfloat mip = 0.0;\\n\\t\\tif ( roughness >= cubeUV_r1 ) {\\n\\t\\t\\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\\n\\t\\t} else if ( roughness >= cubeUV_r4 ) {\\n\\t\\t\\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\\n\\t\\t} else if ( roughness >= cubeUV_r5 ) {\\n\\t\\t\\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\\n\\t\\t} else if ( roughness >= cubeUV_r6 ) {\\n\\t\\t\\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\\n\\t\\t} else {\\n\\t\\t\\tmip = - 2.0 * log2( 1.16 * roughness );\\t\\t}\\n\\t\\treturn mip;\\n\\t}\\n\\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\\n\\t\\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\\n\\t\\tfloat mipF = fract( mip );\\n\\t\\tfloat mipInt = floor( mip );\\n\\t\\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\\n\\t\\tif ( mipF == 0.0 ) {\\n\\t\\t\\treturn vec4( color0, 1.0 );\\n\\t\\t} else {\\n\\t\\t\\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\\n\\t\\t\\treturn vec4( mix( color0, color1, mipF ), 1.0 );\\n\\t\\t}\\n\\t}\\n#endif\";\n\nvar defaultnormal_vertex = \"vec3 transformedNormal = objectNormal;\\n#ifdef USE_INSTANCING\\n\\tmat3 m = mat3( instanceMatrix );\\n\\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\\n\\ttransformedNormal = m * transformedNormal;\\n#endif\\ntransformedNormal = normalMatrix * transformedNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n#ifdef USE_TANGENT\\n\\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#ifdef FLIP_SIDED\\n\\t\\ttransformedTangent = - transformedTangent;\\n\\t#endif\\n#endif\";\n\nvar displacementmap_pars_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\";\n\nvar displacementmap_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\\n#endif\";\n\nvar emissivemap_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\";\n\nvar emissivemap_pars_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\";\n\nvar encodings_fragment = \"gl_FragColor = linearToOutputTexel( gl_FragColor );\";\n\nvar encodings_pars_fragment = \"vec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\\n}\";\n\nvar envmap_fragment = \"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvec3 cameraToFrag;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\";\n\nvar envmap_common_pars_fragment = \"#ifdef USE_ENVMAP\\n\\tuniform float envMapIntensity;\\n\\tuniform float flipEnvMap;\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\t\\n#endif\";\n\nvar envmap_pars_fragment = \"#ifdef USE_ENVMAP\\n\\tuniform float reflectivity;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\";\n\nvar envmap_pars_vertex = \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\t\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\";\n\nvar envmap_vertex = \"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\";\n\nvar fog_vertex = \"#ifdef USE_FOG\\n\\tvFogDepth = - mvPosition.z;\\n#endif\";\n\nvar fog_pars_vertex = \"#ifdef USE_FOG\\n\\tvarying float vFogDepth;\\n#endif\";\n\nvar fog_fragment = \"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\";\n\nvar fog_pars_fragment = \"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float vFogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\";\n\nvar gradientmap_pars_fragment = \"#ifdef USE_GRADIENTMAP\\n\\tuniform sampler2D gradientMap;\\n#endif\\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\tfloat dotNL = dot( normal, lightDirection );\\n\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t#ifdef USE_GRADIENTMAP\\n\\t\\treturn vec3( texture2D( gradientMap, coord ).r );\\n\\t#else\\n\\t\\tvec2 fw = fwidth( coord ) * 0.5;\\n\\t\\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\\n\\t#endif\\n}\";\n\nvar lightmap_fragment = \"#ifdef USE_LIGHTMAP\\n\\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\\n\\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\\n\\treflectedLight.indirectDiffuse += lightMapIrradiance;\\n#endif\";\n\nvar lightmap_pars_fragment = \"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\";\n\nvar lights_lambert_fragment = \"LambertMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularStrength = specularStrength;\";\n\nvar lights_lambert_pars_fragment = \"varying vec3 vViewPosition;\\nstruct LambertMaterial {\\n\\tvec3 diffuseColor;\\n\\tfloat specularStrength;\\n};\\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Lambert\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Lambert\";\n\nvar lights_pars_begin = \"uniform bool receiveShadow;\\nuniform vec3 ambientLightColor;\\nuniform vec3 lightProbe[ 9 ];\\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\\n\\tfloat x = normal.x, y = normal.y, z = normal.z;\\n\\tvec3 result = shCoefficients[ 0 ] * 0.886227;\\n\\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\\n\\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\\n\\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\\n\\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\\n\\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\\n\\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\\n\\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\\n\\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\\n\\treturn result;\\n}\\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\\n\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\\n\\treturn irradiance;\\n}\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\treturn irradiance;\\n}\\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n\\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\t\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\t\\tif ( cutoffDistance > 0.0 ) {\\n\\t\\t\\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t\\t}\\n\\t\\treturn distanceFalloff;\\n\\t#else\\n\\t\\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\\n\\t\\t\\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n\\t\\t}\\n\\t\\treturn 1.0;\\n\\t#endif\\n}\\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\\n\\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\\n\\t\\tlight.color = directionalLight.color;\\n\\t\\tlight.direction = directionalLight.direction;\\n\\t\\tlight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tlight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tlight.color = pointLight.color;\\n\\t\\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tlight.visible = ( light.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tlight.direction = normalize( lVector );\\n\\t\\tfloat angleCos = dot( light.direction, spotLight.direction );\\n\\t\\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\tif ( spotAttenuation > 0.0 ) {\\n\\t\\t\\tfloat lightDistance = length( lVector );\\n\\t\\t\\tlight.color = spotLight.color * spotAttenuation;\\n\\t\\t\\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tlight.visible = ( light.color != vec3( 0.0 ) );\\n\\t\\t} else {\\n\\t\\t\\tlight.color = vec3( 0.0 );\\n\\t\\t\\tlight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltc_1;\\tuniform sampler2D ltc_2;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\\n\\t\\tfloat dotNL = dot( normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\";\n\nvar envmap_physical_pars_fragment = \"#if defined( USE_ENVMAP )\\n\\tvec3 getIBLIrradiance( const in vec3 normal ) {\\n\\t\\t#if defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\\n\\t\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t\\t#else\\n\\t\\t\\treturn vec3( 0.0 );\\n\\t\\t#endif\\n\\t}\\n\\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\\n\\t\\t#if defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 reflectVec = reflect( - viewDir, normal );\\n\\t\\t\\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\\n\\t\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\\n\\t\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t\\t#else\\n\\t\\t\\treturn vec3( 0.0 );\\n\\t\\t#endif\\n\\t}\\n#endif\";\n\nvar lights_toon_fragment = \"ToonMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\";\n\nvar lights_toon_pars_fragment = \"varying vec3 vViewPosition;\\nstruct ToonMaterial {\\n\\tvec3 diffuseColor;\\n};\\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Toon\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Toon\";\n\nvar lights_phong_fragment = \"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\";\n\nvar lights_phong_pars_fragment = \"varying vec3 vViewPosition;\\nstruct BlinnPhongMaterial {\\n\\tvec3 diffuseColor;\\n\\tvec3 specularColor;\\n\\tfloat specularShininess;\\n\\tfloat specularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\";\n\nvar lights_physical_fragment = \"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\\nmaterial.roughness = min( material.roughness, 1.0 );\\n#ifdef IOR\\n\\tmaterial.ior = ior;\\n\\t#ifdef SPECULAR\\n\\t\\tfloat specularIntensityFactor = specularIntensity;\\n\\t\\tvec3 specularColorFactor = specularColor;\\n\\t\\t#ifdef USE_SPECULARINTENSITYMAP\\n\\t\\t\\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\\n\\t\\t#endif\\n\\t\\t#ifdef USE_SPECULARCOLORMAP\\n\\t\\t\\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\\n\\t\\t#endif\\n\\t\\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\\n\\t#else\\n\\t\\tfloat specularIntensityFactor = 1.0;\\n\\t\\tvec3 specularColorFactor = vec3( 1.0 );\\n\\t\\tmaterial.specularF90 = 1.0;\\n\\t#endif\\n\\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\\n\\tmaterial.specularF90 = 1.0;\\n#endif\\n#ifdef USE_CLEARCOAT\\n\\tmaterial.clearcoat = clearcoat;\\n\\tmaterial.clearcoatRoughness = clearcoatRoughness;\\n\\tmaterial.clearcoatF0 = vec3( 0.04 );\\n\\tmaterial.clearcoatF90 = 1.0;\\n\\t#ifdef USE_CLEARCOATMAP\\n\\t\\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\t\\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\\n\\t#endif\\n\\tmaterial.clearcoat = saturate( material.clearcoat );\\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\\n\\tmaterial.clearcoatRoughness += geometryRoughness;\\n\\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\\n#endif\\n#ifdef USE_IRIDESCENCE\\n\\tmaterial.iridescence = iridescence;\\n\\tmaterial.iridescenceIOR = iridescenceIOR;\\n\\t#ifdef USE_IRIDESCENCEMAP\\n\\t\\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\\n\\t#endif\\n\\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\\n\\t\\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\\n\\t#else\\n\\t\\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\\n\\t#endif\\n#endif\\n#ifdef USE_SHEEN\\n\\tmaterial.sheenColor = sheenColor;\\n\\t#ifdef USE_SHEENCOLORMAP\\n\\t\\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\\n\\t#endif\\n\\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\\n\\t#ifdef USE_SHEENROUGHNESSMAP\\n\\t\\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\\n\\t#endif\\n#endif\";\n\nvar lights_physical_pars_fragment = \"struct PhysicalMaterial {\\n\\tvec3 diffuseColor;\\n\\tfloat roughness;\\n\\tvec3 specularColor;\\n\\tfloat specularF90;\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tfloat clearcoat;\\n\\t\\tfloat clearcoatRoughness;\\n\\t\\tvec3 clearcoatF0;\\n\\t\\tfloat clearcoatF90;\\n\\t#endif\\n\\t#ifdef USE_IRIDESCENCE\\n\\t\\tfloat iridescence;\\n\\t\\tfloat iridescenceIOR;\\n\\t\\tfloat iridescenceThickness;\\n\\t\\tvec3 iridescenceFresnel;\\n\\t\\tvec3 iridescenceF0;\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\tvec3 sheenColor;\\n\\t\\tfloat sheenRoughness;\\n\\t#endif\\n\\t#ifdef IOR\\n\\t\\tfloat ior;\\n\\t#endif\\n\\t#ifdef USE_TRANSMISSION\\n\\t\\tfloat transmission;\\n\\t\\tfloat transmissionAlpha;\\n\\t\\tfloat thickness;\\n\\t\\tfloat attenuationDistance;\\n\\t\\tvec3 attenuationColor;\\n\\t#endif\\n};\\nvec3 clearcoatSpecular = vec3( 0.0 );\\nvec3 sheenSpecular = vec3( 0.0 );\\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat r2 = roughness * roughness;\\n\\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\\n\\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\\n\\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\\n\\treturn saturate( DG * RECIPROCAL_PI );\\n}\\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\\n\\treturn fab;\\n}\\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\\n\\tvec2 fab = DFGApprox( normal, viewDir, roughness );\\n\\treturn specularColor * fab.x + specularF90 * fab.y;\\n}\\n#ifdef USE_IRIDESCENCE\\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\\n#else\\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\\n#endif\\n\\tvec2 fab = DFGApprox( normal, viewDir, roughness );\\n\\t#ifdef USE_IRIDESCENCE\\n\\t\\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\\n\\t#else\\n\\t\\tvec3 Fr = specularColor;\\n\\t#endif\\n\\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\\n\\tfloat Ess = fab.x + fab.y;\\n\\tfloat Ems = 1.0 - Ess;\\n\\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\\n\\tsingleScatter += FssEss;\\n\\tmultiScatter += Fms * Ems;\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometry.normal;\\n\\t\\tvec3 viewDir = geometry.viewDir;\\n\\t\\tvec3 position = geometry.position;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.roughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tvec4 t1 = texture2D( ltc_1, uv );\\n\\t\\tvec4 t2 = texture2D( ltc_2, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3( t1.x, 0, t1.y ),\\n\\t\\t\\tvec3(    0, 1,    0 ),\\n\\t\\t\\tvec3( t1.z, 0, t1.w )\\n\\t\\t);\\n\\t\\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\\n\\t\\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\\n\\t\\tvec3 ccIrradiance = dotNLcc * directLight.color;\\n\\t\\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\\n\\t#endif\\n\\t#ifdef USE_IRIDESCENCE\\n\\t\\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\\n\\t#else\\n\\t\\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\\n\\t#endif\\n\\tvec3 singleScattering = vec3( 0.0 );\\n\\tvec3 multiScattering = vec3( 0.0 );\\n\\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\\n\\t#ifdef USE_IRIDESCENCE\\n\\t\\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\\n\\t#else\\n\\t\\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\\n\\t#endif\\n\\tvec3 totalScattering = singleScattering + multiScattering;\\n\\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\\n\\treflectedLight.indirectSpecular += radiance * singleScattering;\\n\\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\\n\\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\";\n\nvar lights_fragment_begin = \"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\\n#ifdef USE_CLEARCOAT\\n\\tgeometry.clearcoatNormal = clearcoatNormal;\\n#endif\\n#ifdef USE_IRIDESCENCE\\n\\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\\n\\tif ( material.iridescenceThickness == 0.0 ) {\\n\\t\\tmaterial.iridescence = 0.0;\\n\\t} else {\\n\\t\\tmaterial.iridescence = saturate( material.iridescence );\\n\\t}\\n\\tif ( material.iridescence > 0.0 ) {\\n\\t\\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\\n\\t\\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\\n\\t}\\n#endif\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointLightInfo( pointLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\\n\\t\\tpointLightShadow = pointLightShadows[ i ];\\n\\t\\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\tvec4 spotColor;\\n\\tvec3 spotLightCoord;\\n\\tbool inSpotLightMap;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotLightInfo( spotLight, geometry, directLight );\\n\\t\\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\\n\\t\\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\\n\\t\\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\\n\\t\\t#else\\n\\t\\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\\n\\t\\t#endif\\n\\t\\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\\n\\t\\t\\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\\n\\t\\t\\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\\n\\t\\t\\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\\n\\t\\t\\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\\n\\t\\t#endif\\n\\t\\t#undef SPOT_LIGHT_MAP_INDEX\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\tspotLightShadow = spotLightShadows[ i ];\\n\\t\\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\\n\\t\\tdirectionalLightShadow = directionalLightShadows[ i ];\\n\\t\\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 iblIrradiance = vec3( 0.0 );\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tvec3 radiance = vec3( 0.0 );\\n\\tvec3 clearcoatRadiance = vec3( 0.0 );\\n#endif\";\n\nvar lights_fragment_maps = \"#if defined( RE_IndirectDiffuse )\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\\n\\t\\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tiblIrradiance += getIBLIrradiance( geometry.normal );\\n\\t#endif\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\\n\\t#endif\\n#endif\";\n\nvar lights_fragment_end = \"#if defined( RE_IndirectDiffuse )\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\\n#endif\";\n\nvar logdepthbuf_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\\n#endif\";\n\nvar logdepthbuf_pars_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tuniform float logDepthBufFC;\\n\\tvarying float vFragDepth;\\n\\tvarying float vIsPerspective;\\n#endif\";\n\nvar logdepthbuf_pars_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t\\tvarying float vIsPerspective;\\n\\t#else\\n\\t\\tuniform float logDepthBufFC;\\n\\t#endif\\n#endif\";\n\nvar logdepthbuf_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t\\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\\n\\t#else\\n\\t\\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\\n\\t\\t\\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\\n\\t\\t\\tgl_Position.z *= gl_Position.w;\\n\\t\\t}\\n\\t#endif\\n#endif\";\n\nvar map_fragment = \"#ifdef USE_MAP\\n\\tvec4 sampledDiffuseColor = texture2D( map, vUv );\\n\\t#ifdef DECODE_VIDEO_TEXTURE\\n\\t\\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\\n\\t#endif\\n\\tdiffuseColor *= sampledDiffuseColor;\\n#endif\";\n\nvar map_pars_fragment = \"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\";\n\nvar map_particle_fragment = \"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\\n#endif\\n#ifdef USE_MAP\\n\\tdiffuseColor *= texture2D( map, uv );\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\\n#endif\";\n\nvar map_particle_pars_fragment = \"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tuniform mat3 uvTransform;\\n#endif\\n#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\";\n\nvar metalnessmap_fragment = \"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\";\n\nvar metalnessmap_pars_fragment = \"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\";\n\nvar morphcolor_vertex = \"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\\n\\tvColor *= morphTargetBaseInfluence;\\n\\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\\n\\t\\t#if defined( USE_COLOR_ALPHA )\\n\\t\\t\\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\\n\\t\\t#elif defined( USE_COLOR )\\n\\t\\t\\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\\n\\t\\t#endif\\n\\t}\\n#endif\";\n\nvar morphnormal_vertex = \"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal *= morphTargetBaseInfluence;\\n\\t#ifdef MORPHTARGETS_TEXTURE\\n\\t\\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\\n\\t\\t\\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\\n\\t\\t}\\n\\t#else\\n\\t\\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\\n\\t\\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\\n\\t\\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\\n\\t\\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\\n\\t#endif\\n#endif\";\n\nvar morphtarget_pars_vertex = \"#ifdef USE_MORPHTARGETS\\n\\tuniform float morphTargetBaseInfluence;\\n\\t#ifdef MORPHTARGETS_TEXTURE\\n\\t\\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\\n\\t\\tuniform sampler2DArray morphTargetsTexture;\\n\\t\\tuniform ivec2 morphTargetsTextureSize;\\n\\t\\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\\n\\t\\t\\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\\n\\t\\t\\tint y = texelIndex / morphTargetsTextureSize.x;\\n\\t\\t\\tint x = texelIndex - y * morphTargetsTextureSize.x;\\n\\t\\t\\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\\n\\t\\t\\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\\n\\t\\t}\\n\\t#else\\n\\t\\t#ifndef USE_MORPHNORMALS\\n\\t\\t\\tuniform float morphTargetInfluences[ 8 ];\\n\\t\\t#else\\n\\t\\t\\tuniform float morphTargetInfluences[ 4 ];\\n\\t\\t#endif\\n\\t#endif\\n#endif\";\n\nvar morphtarget_vertex = \"#ifdef USE_MORPHTARGETS\\n\\ttransformed *= morphTargetBaseInfluence;\\n\\t#ifdef MORPHTARGETS_TEXTURE\\n\\t\\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\\n\\t\\t\\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\\n\\t\\t}\\n\\t#else\\n\\t\\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\\n\\t\\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\\n\\t\\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\\n\\t\\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\\n\\t\\t#ifndef USE_MORPHNORMALS\\n\\t\\t\\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\\n\\t\\t\\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\\n\\t\\t\\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\\n\\t\\t\\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\\n\\t\\t#endif\\n\\t#endif\\n#endif\";\n\nvar normal_fragment_begin = \"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\\n#ifdef FLAT_SHADED\\n\\tvec3 fdx = dFdx( vViewPosition );\\n\\tvec3 fdy = dFdy( vViewPosition );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * faceDirection;\\n\\t#endif\\n\\t#ifdef USE_TANGENT\\n\\t\\tvec3 tangent = normalize( vTangent );\\n\\t\\tvec3 bitangent = normalize( vBitangent );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\ttangent = tangent * faceDirection;\\n\\t\\t\\tbitangent = bitangent * faceDirection;\\n\\t\\t#endif\\n\\t\\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\\n\\t\\t\\tmat3 vTBN = mat3( tangent, bitangent, normal );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\nvec3 geometryNormal = normal;\";\n\nvar normal_fragment_maps = \"#ifdef OBJECTSPACE_NORMALMAP\\n\\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t#ifdef FLIP_SIDED\\n\\t\\tnormal = - normal;\\n\\t#endif\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * faceDirection;\\n\\t#endif\\n\\tnormal = normalize( normalMatrix * normal );\\n#elif defined( TANGENTSPACE_NORMALMAP )\\n\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tmapN.xy *= normalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tnormal = normalize( vTBN * mapN );\\n\\t#else\\n\\t\\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\\n\\t#endif\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\\n#endif\";\n\nvar normal_pars_fragment = \"#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\";\n\nvar normal_pars_vertex = \"#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\";\n\nvar normal_vertex = \"#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\";\n\nvar normalmap_pars_fragment = \"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n#endif\\n#ifdef OBJECTSPACE_NORMALMAP\\n\\tuniform mat3 normalMatrix;\\n#endif\\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\\n\\t\\tvec3 q0 = dFdx( eye_pos.xyz );\\n\\t\\tvec3 q1 = dFdy( eye_pos.xyz );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tvec3 N = surf_norm;\\n\\t\\tvec3 q1perp = cross( q1, N );\\n\\t\\tvec3 q0perp = cross( N, q0 );\\n\\t\\tvec3 T = q1perp * st0.x + q0perp * st1.x;\\n\\t\\tvec3 B = q1perp * st0.y + q0perp * st1.y;\\n\\t\\tfloat det = max( dot( T, T ), dot( B, B ) );\\n\\t\\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\\n\\t\\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\\n\\t}\\n#endif\";\n\nvar clearcoat_normal_fragment_begin = \"#ifdef USE_CLEARCOAT\\n\\tvec3 clearcoatNormal = geometryNormal;\\n#endif\";\n\nvar clearcoat_normal_fragment_maps = \"#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tclearcoatMapN.xy *= clearcoatNormalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\\n\\t#else\\n\\t\\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\\n\\t#endif\\n#endif\";\n\nvar clearcoat_pars_fragment = \"#ifdef USE_CLEARCOATMAP\\n\\tuniform sampler2D clearcoatMap;\\n#endif\\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\tuniform sampler2D clearcoatRoughnessMap;\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tuniform sampler2D clearcoatNormalMap;\\n\\tuniform vec2 clearcoatNormalScale;\\n#endif\";\n\nvar iridescence_pars_fragment = \"#ifdef USE_IRIDESCENCEMAP\\n\\tuniform sampler2D iridescenceMap;\\n#endif\\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\\n\\tuniform sampler2D iridescenceThicknessMap;\\n#endif\";\n\nvar output_fragment = \"#ifdef OPAQUE\\ndiffuseColor.a = 1.0;\\n#endif\\n#ifdef USE_TRANSMISSION\\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\\n#endif\\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );\";\n\nvar packing = \"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 2.0 * rgb.xyz - 1.0;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nvec2 packDepthToRG( in highp float v ) {\\n\\treturn packDepthToRGBA( v ).yx;\\n}\\nfloat unpackRGToDepth( const in highp vec2 v ) {\\n\\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\\n}\\nvec4 pack2HalfToRGBA( vec2 v ) {\\n\\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\\n\\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\\n}\\nvec2 unpackRGBATo2Half( vec4 v ) {\\n\\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\";\n\nvar premultiplied_alpha_fragment = \"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\";\n\nvar project_vertex = \"vec4 mvPosition = vec4( transformed, 1.0 );\\n#ifdef USE_INSTANCING\\n\\tmvPosition = instanceMatrix * mvPosition;\\n#endif\\nmvPosition = modelViewMatrix * mvPosition;\\ngl_Position = projectionMatrix * mvPosition;\";\n\nvar dithering_fragment = \"#ifdef DITHERING\\n\\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\";\n\nvar dithering_pars_fragment = \"#ifdef DITHERING\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\";\n\nvar roughnessmap_fragment = \"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\";\n\nvar roughnessmap_pars_fragment = \"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\";\n\nvar shadowmap_pars_fragment = \"#if NUM_SPOT_LIGHT_COORDS > 0\\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\\n#endif\\n#if NUM_SPOT_LIGHT_MAPS > 0\\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\\n#endif\\n#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\\n\\t\\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\\n\\t}\\n\\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\\n\\t\\tfloat occlusion = 1.0;\\n\\t\\tvec2 distribution = texture2DDistribution( shadow, uv );\\n\\t\\tfloat hard_shadow = step( compare , distribution.x );\\n\\t\\tif (hard_shadow != 1.0 ) {\\n\\t\\t\\tfloat distance = compare - distribution.x ;\\n\\t\\t\\tfloat variance = max( 0.00000, distribution.y * distribution.y );\\n\\t\\t\\tfloat softness_probability = variance / (variance + distance * distance );\\t\\t\\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\\t\\t\\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\\n\\t\\t}\\n\\t\\treturn occlusion;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\\n\\t\\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx2 = dx0 / 2.0;\\n\\t\\t\\tfloat dy2 = dy0 / 2.0;\\n\\t\\t\\tfloat dx3 = dx1 / 2.0;\\n\\t\\t\\tfloat dy3 = dy1 / 2.0;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 17.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx = texelSize.x;\\n\\t\\t\\tfloat dy = texelSize.y;\\n\\t\\t\\tvec2 uv = shadowCoord.xy;\\n\\t\\t\\tvec2 f = fract( uv * shadowMapSize + 0.5 );\\n\\t\\t\\tuv -= f * texelSize;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t f.y )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\tdp += shadowBias;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\";\n\nvar shadowmap_pars_vertex = \"#if NUM_SPOT_LIGHT_COORDS > 0\\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\\n#endif\\n#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n#endif\";\n\nvar shadowmap_vertex = \"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\tvec4 shadowWorldPosition;\\n\\t#endif\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_COORDS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition;\\n\\t\\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\t\\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\\n\\t\\t#endif\\n\\t\\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\";\n\nvar shadowmask_pars_fragment = \"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tspotLight = spotLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tpointLight = pointLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\";\n\nvar skinbase_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\";\n\nvar skinning_pars_vertex = \"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\tuniform highp sampler2D boneTexture;\\n\\tuniform int boneTextureSize;\\n\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\tfloat j = i * 4.0;\\n\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\ty = dy * ( y + 0.5 );\\n\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\treturn bone;\\n\\t}\\n#endif\";\n\nvar skinning_vertex = \"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\";\n\nvar skinnormal_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n\\t#ifdef USE_TANGENT\\n\\t\\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#endif\\n#endif\";\n\nvar specularmap_fragment = \"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\";\n\nvar specularmap_pars_fragment = \"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\";\n\nvar tonemapping_fragment = \"#if defined( TONE_MAPPING )\\n\\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\";\n\nvar tonemapping_pars_fragment = \"#ifndef saturate\\n#define saturate( a ) clamp( a, 0.0, 1.0 )\\n#endif\\nuniform float toneMappingExposure;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\nvec3 RRTAndODTFit( vec3 v ) {\\n\\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\\n\\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\\n\\treturn a / b;\\n}\\nvec3 ACESFilmicToneMapping( vec3 color ) {\\n\\tconst mat3 ACESInputMat = mat3(\\n\\t\\tvec3( 0.59719, 0.07600, 0.02840 ),\\t\\tvec3( 0.35458, 0.90834, 0.13383 ),\\n\\t\\tvec3( 0.04823, 0.01566, 0.83777 )\\n\\t);\\n\\tconst mat3 ACESOutputMat = mat3(\\n\\t\\tvec3(  1.60475, -0.10208, -0.00327 ),\\t\\tvec3( -0.53108,  1.10813, -0.07276 ),\\n\\t\\tvec3( -0.07367, -0.00605,  1.07602 )\\n\\t);\\n\\tcolor *= toneMappingExposure / 0.6;\\n\\tcolor = ACESInputMat * color;\\n\\tcolor = RRTAndODTFit( color );\\n\\tcolor = ACESOutputMat * color;\\n\\treturn saturate( color );\\n}\\nvec3 CustomToneMapping( vec3 color ) { return color; }\";\n\nvar transmission_fragment = \"#ifdef USE_TRANSMISSION\\n\\tmaterial.transmission = transmission;\\n\\tmaterial.transmissionAlpha = 1.0;\\n\\tmaterial.thickness = thickness;\\n\\tmaterial.attenuationDistance = attenuationDistance;\\n\\tmaterial.attenuationColor = attenuationColor;\\n\\t#ifdef USE_TRANSMISSIONMAP\\n\\t\\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\\n\\t#endif\\n\\t#ifdef USE_THICKNESSMAP\\n\\t\\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\\n\\t#endif\\n\\tvec3 pos = vWorldPosition;\\n\\tvec3 v = normalize( cameraPosition - pos );\\n\\tvec3 n = inverseTransformDirection( normal, viewMatrix );\\n\\tvec4 transmission = getIBLVolumeRefraction(\\n\\t\\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\\n\\t\\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\\n\\t\\tmaterial.attenuationColor, material.attenuationDistance );\\n\\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\\n\\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\\n#endif\";\n\nvar transmission_pars_fragment = \"#ifdef USE_TRANSMISSION\\n\\tuniform float transmission;\\n\\tuniform float thickness;\\n\\tuniform float attenuationDistance;\\n\\tuniform vec3 attenuationColor;\\n\\t#ifdef USE_TRANSMISSIONMAP\\n\\t\\tuniform sampler2D transmissionMap;\\n\\t#endif\\n\\t#ifdef USE_THICKNESSMAP\\n\\t\\tuniform sampler2D thicknessMap;\\n\\t#endif\\n\\tuniform vec2 transmissionSamplerSize;\\n\\tuniform sampler2D transmissionSamplerMap;\\n\\tuniform mat4 modelMatrix;\\n\\tuniform mat4 projectionMatrix;\\n\\tvarying vec3 vWorldPosition;\\n\\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\\n\\t\\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\\n\\t\\tvec3 modelScale;\\n\\t\\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\\n\\t\\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\\n\\t\\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\\n\\t\\treturn normalize( refractionVector ) * thickness * modelScale;\\n\\t}\\n\\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\\n\\t\\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\\n\\t}\\n\\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\\n\\t\\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\\n\\t\\t#ifdef texture2DLodEXT\\n\\t\\t\\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\\n\\t\\t#else\\n\\t\\t\\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\\n\\t\\t#endif\\n\\t}\\n\\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\\n\\t\\tif ( isinf( attenuationDistance ) ) {\\n\\t\\t\\treturn radiance;\\n\\t\\t} else {\\n\\t\\t\\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\\n\\t\\t\\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\\t\\t\\treturn transmittance * radiance;\\n\\t\\t}\\n\\t}\\n\\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\\n\\t\\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\\n\\t\\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\\n\\t\\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\\n\\t\\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\\n\\t\\tvec3 refractedRayExit = position + transmissionRay;\\n\\t\\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\\n\\t\\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\\n\\t\\trefractionCoords += 1.0;\\n\\t\\trefractionCoords /= 2.0;\\n\\t\\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\\n\\t\\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\\n\\t\\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\\n\\t\\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\\n\\t}\\n#endif\";\n\nvar uv_pars_fragment = \"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\\n\\tvarying vec2 vUv;\\n#endif\";\n\nvar uv_pars_vertex = \"#ifdef USE_UV\\n\\t#ifdef UVS_VERTEX_ONLY\\n\\t\\tvec2 vUv;\\n\\t#else\\n\\t\\tvarying vec2 vUv;\\n\\t#endif\\n\\tuniform mat3 uvTransform;\\n#endif\";\n\nvar uv_vertex = \"#ifdef USE_UV\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n#endif\";\n\nvar uv2_pars_fragment = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif\";\n\nvar uv2_pars_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n\\tuniform mat3 uv2Transform;\\n#endif\";\n\nvar uv2_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\\n#endif\";\n\nvar worldpos_vertex = \"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\\n\\tvec4 worldPosition = vec4( transformed, 1.0 );\\n\\t#ifdef USE_INSTANCING\\n\\t\\tworldPosition = instanceMatrix * worldPosition;\\n\\t#endif\\n\\tworldPosition = modelMatrix * worldPosition;\\n#endif\";\n\nconst vertex$h = \"varying vec2 vUv;\\nuniform mat3 uvTransform;\\nvoid main() {\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n\\tgl_Position = vec4( position.xy, 1.0, 1.0 );\\n}\";\n\nconst fragment$h = \"uniform sampler2D t2D;\\nuniform float backgroundIntensity;\\nvarying vec2 vUv;\\nvoid main() {\\n\\tvec4 texColor = texture2D( t2D, vUv );\\n\\t#ifdef DECODE_VIDEO_TEXTURE\\n\\t\\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\\n\\t#endif\\n\\ttexColor.rgb *= backgroundIntensity;\\n\\tgl_FragColor = texColor;\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\n\nconst vertex$g = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\";\n\nconst fragment$g = \"#ifdef ENVMAP_TYPE_CUBE\\n\\tuniform samplerCube envMap;\\n#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\tuniform sampler2D envMap;\\n#endif\\nuniform float flipEnvMap;\\nuniform float backgroundBlurriness;\\nuniform float backgroundIntensity;\\nvarying vec3 vWorldDirection;\\n#include <cube_uv_reflection_fragment>\\nvoid main() {\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\\n\\t#else\\n\\t\\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\t#endif\\n\\ttexColor.rgb *= backgroundIntensity;\\n\\tgl_FragColor = texColor;\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\n\nconst vertex$f = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\";\n\nconst fragment$f = \"uniform samplerCube tCube;\\nuniform float tFlip;\\nuniform float opacity;\\nvarying vec3 vWorldDirection;\\nvoid main() {\\n\\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\\n\\tgl_FragColor = texColor;\\n\\tgl_FragColor.a *= opacity;\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\n\nconst vertex$e = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvHighPrecisionZW = gl_Position.zw;\\n}\";\n\nconst fragment$e = \"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( fragCoordZ );\\n\\t#endif\\n}\";\n\nconst vertex$d = \"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}\";\n\nconst fragment$d = \"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}\";\n\nconst vertex$c = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\";\n\nconst fragment$c = \"uniform sampler2D tEquirect;\\nvarying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldDirection );\\n\\tvec2 sampleUV = equirectUv( direction );\\n\\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\n\nconst vertex$b = \"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\tvLineDistance = scale * lineDistance;\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$b = \"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\";\n\nconst vertex$a = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinbase_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$a = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\\n\\t\\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$9 = \"#define LAMBERT\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$9 = \"#define LAMBERT\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_lambert_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_lambert_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$8 = \"#define MATCAP\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <color_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n}\";\n\nconst fragment$8 = \"#define MATCAP\\nuniform vec3 diffuse;\\nuniform float opacity;\\nuniform sampler2D matcap;\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <normal_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tvec3 viewDir = normalize( vViewPosition );\\n\\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\\n\\tvec3 y = cross( viewDir, x );\\n\\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\\n\\t#ifdef USE_MATCAP\\n\\t\\tvec4 matcapColor = texture2D( matcap, uv );\\n\\t#else\\n\\t\\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\\n\\t#endif\\n\\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$7 = \"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\";\n\nconst fragment$7 = \"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <normal_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n\\t#ifdef OPAQUE\\n\\t\\tgl_FragColor.a = 1.0;\\n\\t#endif\\n}\";\n\nconst vertex$6 = \"#define PHONG\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$6 = \"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$5 = \"#define STANDARD\\nvarying vec3 vViewPosition;\\n#ifdef USE_TRANSMISSION\\n\\tvarying vec3 vWorldPosition;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n#ifdef USE_TRANSMISSION\\n\\tvWorldPosition = worldPosition.xyz;\\n#endif\\n}\";\n\nconst fragment$5 = \"#define STANDARD\\n#ifdef PHYSICAL\\n\\t#define IOR\\n\\t#define SPECULAR\\n#endif\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifdef IOR\\n\\tuniform float ior;\\n#endif\\n#ifdef SPECULAR\\n\\tuniform float specularIntensity;\\n\\tuniform vec3 specularColor;\\n\\t#ifdef USE_SPECULARINTENSITYMAP\\n\\t\\tuniform sampler2D specularIntensityMap;\\n\\t#endif\\n\\t#ifdef USE_SPECULARCOLORMAP\\n\\t\\tuniform sampler2D specularColorMap;\\n\\t#endif\\n#endif\\n#ifdef USE_CLEARCOAT\\n\\tuniform float clearcoat;\\n\\tuniform float clearcoatRoughness;\\n#endif\\n#ifdef USE_IRIDESCENCE\\n\\tuniform float iridescence;\\n\\tuniform float iridescenceIOR;\\n\\tuniform float iridescenceThicknessMinimum;\\n\\tuniform float iridescenceThicknessMaximum;\\n#endif\\n#ifdef USE_SHEEN\\n\\tuniform vec3 sheenColor;\\n\\tuniform float sheenRoughness;\\n\\t#ifdef USE_SHEENCOLORMAP\\n\\t\\tuniform sampler2D sheenColorMap;\\n\\t#endif\\n\\t#ifdef USE_SHEENROUGHNESSMAP\\n\\t\\tuniform sampler2D sheenRoughnessMap;\\n\\t#endif\\n#endif\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <bsdfs>\\n#include <iridescence_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_physical_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_physical_pars_fragment>\\n#include <transmission_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <clearcoat_pars_fragment>\\n#include <iridescence_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <clearcoat_normal_fragment_begin>\\n\\t#include <clearcoat_normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\\n\\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\\n\\t#include <transmission_fragment>\\n\\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\\n\\t#ifdef USE_SHEEN\\n\\t\\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\\n\\t\\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\\n\\t\\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\\n\\t\\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\\n\\t#endif\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$4 = \"#define TOON\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$4 = \"#define TOON\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_toon_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_toon_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$3 = \"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\tgl_PointSize = size;\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$3 = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\";\n\nconst vertex$2 = \"#include <common>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$2 = \"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\";\n\nconst vertex$1 = \"uniform float rotation;\\nuniform vec2 center;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\tvec2 scale;\\n\\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\\n\\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\\n\\t#ifndef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) scale *= - mvPosition.z;\\n\\t#endif\\n\\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\\n\\tvec2 rotatedPosition;\\n\\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\\n\\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\\n\\tmvPosition.xy += rotatedPosition;\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$1 = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\";\n\nconst ShaderChunk = {\n\talphamap_fragment: alphamap_fragment,\n\talphamap_pars_fragment: alphamap_pars_fragment,\n\talphatest_fragment: alphatest_fragment,\n\talphatest_pars_fragment: alphatest_pars_fragment,\n\taomap_fragment: aomap_fragment,\n\taomap_pars_fragment: aomap_pars_fragment,\n\tbegin_vertex: begin_vertex,\n\tbeginnormal_vertex: beginnormal_vertex,\n\tbsdfs: bsdfs,\n\tiridescence_fragment: iridescence_fragment,\n\tbumpmap_pars_fragment: bumpmap_pars_fragment,\n\tclipping_planes_fragment: clipping_planes_fragment,\n\tclipping_planes_pars_fragment: clipping_planes_pars_fragment,\n\tclipping_planes_pars_vertex: clipping_planes_pars_vertex,\n\tclipping_planes_vertex: clipping_planes_vertex,\n\tcolor_fragment: color_fragment,\n\tcolor_pars_fragment: color_pars_fragment,\n\tcolor_pars_vertex: color_pars_vertex,\n\tcolor_vertex: color_vertex,\n\tcommon: common,\n\tcube_uv_reflection_fragment: cube_uv_reflection_fragment,\n\tdefaultnormal_vertex: defaultnormal_vertex,\n\tdisplacementmap_pars_vertex: displacementmap_pars_vertex,\n\tdisplacementmap_vertex: displacementmap_vertex,\n\temissivemap_fragment: emissivemap_fragment,\n\temissivemap_pars_fragment: emissivemap_pars_fragment,\n\tencodings_fragment: encodings_fragment,\n\tencodings_pars_fragment: encodings_pars_fragment,\n\tenvmap_fragment: envmap_fragment,\n\tenvmap_common_pars_fragment: envmap_common_pars_fragment,\n\tenvmap_pars_fragment: envmap_pars_fragment,\n\tenvmap_pars_vertex: envmap_pars_vertex,\n\tenvmap_physical_pars_fragment: envmap_physical_pars_fragment,\n\tenvmap_vertex: envmap_vertex,\n\tfog_vertex: fog_vertex,\n\tfog_pars_vertex: fog_pars_vertex,\n\tfog_fragment: fog_fragment,\n\tfog_pars_fragment: fog_pars_fragment,\n\tgradientmap_pars_fragment: gradientmap_pars_fragment,\n\tlightmap_fragment: lightmap_fragment,\n\tlightmap_pars_fragment: lightmap_pars_fragment,\n\tlights_lambert_fragment: lights_lambert_fragment,\n\tlights_lambert_pars_fragment: lights_lambert_pars_fragment,\n\tlights_pars_begin: lights_pars_begin,\n\tlights_toon_fragment: lights_toon_fragment,\n\tlights_toon_pars_fragment: lights_toon_pars_fragment,\n\tlights_phong_fragment: lights_phong_fragment,\n\tlights_phong_pars_fragment: lights_phong_pars_fragment,\n\tlights_physical_fragment: lights_physical_fragment,\n\tlights_physical_pars_fragment: lights_physical_pars_fragment,\n\tlights_fragment_begin: lights_fragment_begin,\n\tlights_fragment_maps: lights_fragment_maps,\n\tlights_fragment_end: lights_fragment_end,\n\tlogdepthbuf_fragment: logdepthbuf_fragment,\n\tlogdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\n\tlogdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\n\tlogdepthbuf_vertex: logdepthbuf_vertex,\n\tmap_fragment: map_fragment,\n\tmap_pars_fragment: map_pars_fragment,\n\tmap_particle_fragment: map_particle_fragment,\n\tmap_particle_pars_fragment: map_particle_pars_fragment,\n\tmetalnessmap_fragment: metalnessmap_fragment,\n\tmetalnessmap_pars_fragment: metalnessmap_pars_fragment,\n\tmorphcolor_vertex: morphcolor_vertex,\n\tmorphnormal_vertex: morphnormal_vertex,\n\tmorphtarget_pars_vertex: morphtarget_pars_vertex,\n\tmorphtarget_vertex: morphtarget_vertex,\n\tnormal_fragment_begin: normal_fragment_begin,\n\tnormal_fragment_maps: normal_fragment_maps,\n\tnormal_pars_fragment: normal_pars_fragment,\n\tnormal_pars_vertex: normal_pars_vertex,\n\tnormal_vertex: normal_vertex,\n\tnormalmap_pars_fragment: normalmap_pars_fragment,\n\tclearcoat_normal_fragment_begin: clearcoat_normal_fragment_begin,\n\tclearcoat_normal_fragment_maps: clearcoat_normal_fragment_maps,\n\tclearcoat_pars_fragment: clearcoat_pars_fragment,\n\tiridescence_pars_fragment: iridescence_pars_fragment,\n\toutput_fragment: output_fragment,\n\tpacking: packing,\n\tpremultiplied_alpha_fragment: premultiplied_alpha_fragment,\n\tproject_vertex: project_vertex,\n\tdithering_fragment: dithering_fragment,\n\tdithering_pars_fragment: dithering_pars_fragment,\n\troughnessmap_fragment: roughnessmap_fragment,\n\troughnessmap_pars_fragment: roughnessmap_pars_fragment,\n\tshadowmap_pars_fragment: shadowmap_pars_fragment,\n\tshadowmap_pars_vertex: shadowmap_pars_vertex,\n\tshadowmap_vertex: shadowmap_vertex,\n\tshadowmask_pars_fragment: shadowmask_pars_fragment,\n\tskinbase_vertex: skinbase_vertex,\n\tskinning_pars_vertex: skinning_pars_vertex,\n\tskinning_vertex: skinning_vertex,\n\tskinnormal_vertex: skinnormal_vertex,\n\tspecularmap_fragment: specularmap_fragment,\n\tspecularmap_pars_fragment: specularmap_pars_fragment,\n\ttonemapping_fragment: tonemapping_fragment,\n\ttonemapping_pars_fragment: tonemapping_pars_fragment,\n\ttransmission_fragment: transmission_fragment,\n\ttransmission_pars_fragment: transmission_pars_fragment,\n\tuv_pars_fragment: uv_pars_fragment,\n\tuv_pars_vertex: uv_pars_vertex,\n\tuv_vertex: uv_vertex,\n\tuv2_pars_fragment: uv2_pars_fragment,\n\tuv2_pars_vertex: uv2_pars_vertex,\n\tuv2_vertex: uv2_vertex,\n\tworldpos_vertex: worldpos_vertex,\n\n\tbackground_vert: vertex$h,\n\tbackground_frag: fragment$h,\n\tbackgroundCube_vert: vertex$g,\n\tbackgroundCube_frag: fragment$g,\n\tcube_vert: vertex$f,\n\tcube_frag: fragment$f,\n\tdepth_vert: vertex$e,\n\tdepth_frag: fragment$e,\n\tdistanceRGBA_vert: vertex$d,\n\tdistanceRGBA_frag: fragment$d,\n\tequirect_vert: vertex$c,\n\tequirect_frag: fragment$c,\n\tlinedashed_vert: vertex$b,\n\tlinedashed_frag: fragment$b,\n\tmeshbasic_vert: vertex$a,\n\tmeshbasic_frag: fragment$a,\n\tmeshlambert_vert: vertex$9,\n\tmeshlambert_frag: fragment$9,\n\tmeshmatcap_vert: vertex$8,\n\tmeshmatcap_frag: fragment$8,\n\tmeshnormal_vert: vertex$7,\n\tmeshnormal_frag: fragment$7,\n\tmeshphong_vert: vertex$6,\n\tmeshphong_frag: fragment$6,\n\tmeshphysical_vert: vertex$5,\n\tmeshphysical_frag: fragment$5,\n\tmeshtoon_vert: vertex$4,\n\tmeshtoon_frag: fragment$4,\n\tpoints_vert: vertex$3,\n\tpoints_frag: fragment$3,\n\tshadow_vert: vertex$2,\n\tshadow_frag: fragment$2,\n\tsprite_vert: vertex$1,\n\tsprite_frag: fragment$1\n};\n\n/**\n * Uniforms library for shared webgl shaders\n */\n\nconst UniformsLib = {\n\n\tcommon: {\n\n\t\tdiffuse: { value: /*@__PURE__*/ new Color( 0xffffff ) },\n\t\topacity: { value: 1.0 },\n\n\t\tmap: { value: null },\n\t\tuvTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\tuv2Transform: { value: /*@__PURE__*/ new Matrix3() },\n\n\t\talphaMap: { value: null },\n\t\talphaTest: { value: 0 }\n\n\t},\n\n\tspecularmap: {\n\n\t\tspecularMap: { value: null },\n\n\t},\n\n\tenvmap: {\n\n\t\tenvMap: { value: null },\n\t\tflipEnvMap: { value: - 1 },\n\t\treflectivity: { value: 1.0 }, // basic, lambert, phong\n\t\tior: { value: 1.5 }, // physical\n\t\trefractionRatio: { value: 0.98 }, // basic, lambert, phong\n\n\t},\n\n\taomap: {\n\n\t\taoMap: { value: null },\n\t\taoMapIntensity: { value: 1 }\n\n\t},\n\n\tlightmap: {\n\n\t\tlightMap: { value: null },\n\t\tlightMapIntensity: { value: 1 }\n\n\t},\n\n\temissivemap: {\n\n\t\temissiveMap: { value: null }\n\n\t},\n\n\tbumpmap: {\n\n\t\tbumpMap: { value: null },\n\t\tbumpScale: { value: 1 }\n\n\t},\n\n\tnormalmap: {\n\n\t\tnormalMap: { value: null },\n\t\tnormalScale: { value: /*@__PURE__*/ new Vector2( 1, 1 ) }\n\n\t},\n\n\tdisplacementmap: {\n\n\t\tdisplacementMap: { value: null },\n\t\tdisplacementScale: { value: 1 },\n\t\tdisplacementBias: { value: 0 }\n\n\t},\n\n\troughnessmap: {\n\n\t\troughnessMap: { value: null }\n\n\t},\n\n\tmetalnessmap: {\n\n\t\tmetalnessMap: { value: null }\n\n\t},\n\n\tgradientmap: {\n\n\t\tgradientMap: { value: null }\n\n\t},\n\n\tfog: {\n\n\t\tfogDensity: { value: 0.00025 },\n\t\tfogNear: { value: 1 },\n\t\tfogFar: { value: 2000 },\n\t\tfogColor: { value: /*@__PURE__*/ new Color( 0xffffff ) }\n\n\t},\n\n\tlights: {\n\n\t\tambientLightColor: { value: [] },\n\n\t\tlightProbe: { value: [] },\n\n\t\tdirectionalLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tcolor: {}\n\t\t} },\n\n\t\tdirectionalLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tdirectionalShadowMap: { value: [] },\n\t\tdirectionalShadowMatrix: { value: [] },\n\n\t\tspotLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdirection: {},\n\t\t\tdistance: {},\n\t\t\tconeCos: {},\n\t\t\tpenumbraCos: {},\n\t\t\tdecay: {}\n\t\t} },\n\n\t\tspotLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tspotLightMap: { value: [] },\n\t\tspotShadowMap: { value: [] },\n\t\tspotLightMatrix: { value: [] },\n\n\t\tpointLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdecay: {},\n\t\t\tdistance: {}\n\t\t} },\n\n\t\tpointLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {},\n\t\t\tshadowCameraNear: {},\n\t\t\tshadowCameraFar: {}\n\t\t} },\n\n\t\tpointShadowMap: { value: [] },\n\t\tpointShadowMatrix: { value: [] },\n\n\t\themisphereLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tskyColor: {},\n\t\t\tgroundColor: {}\n\t\t} },\n\n\t\t// TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\n\t\trectAreaLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\twidth: {},\n\t\t\theight: {}\n\t\t} },\n\n\t\tltc_1: { value: null },\n\t\tltc_2: { value: null }\n\n\t},\n\n\tpoints: {\n\n\t\tdiffuse: { value: /*@__PURE__*/ new Color( 0xffffff ) },\n\t\topacity: { value: 1.0 },\n\t\tsize: { value: 1.0 },\n\t\tscale: { value: 1.0 },\n\t\tmap: { value: null },\n\t\talphaMap: { value: null },\n\t\talphaTest: { value: 0 },\n\t\tuvTransform: { value: /*@__PURE__*/ new Matrix3() }\n\n\t},\n\n\tsprite: {\n\n\t\tdiffuse: { value: /*@__PURE__*/ new Color( 0xffffff ) },\n\t\topacity: { value: 1.0 },\n\t\tcenter: { value: /*@__PURE__*/ new Vector2( 0.5, 0.5 ) },\n\t\trotation: { value: 0.0 },\n\t\tmap: { value: null },\n\t\talphaMap: { value: null },\n\t\talphaTest: { value: 0 },\n\t\tuvTransform: { value: /*@__PURE__*/ new Matrix3() }\n\n\t}\n\n};\n\nconst ShaderLib = {\n\n\tbasic: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshbasic_vert,\n\t\tfragmentShader: ShaderChunk.meshbasic_frag\n\n\t},\n\n\tlambert: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: /*@__PURE__*/ new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshlambert_vert,\n\t\tfragmentShader: ShaderChunk.meshlambert_frag\n\n\t},\n\n\tphong: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: /*@__PURE__*/ new Color( 0x000000 ) },\n\t\t\t\tspecular: { value: /*@__PURE__*/ new Color( 0x111111 ) },\n\t\t\t\tshininess: { value: 30 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphong_vert,\n\t\tfragmentShader: ShaderChunk.meshphong_frag\n\n\t},\n\n\tstandard: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.roughnessmap,\n\t\t\tUniformsLib.metalnessmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: /*@__PURE__*/ new Color( 0x000000 ) },\n\t\t\t\troughness: { value: 1.0 },\n\t\t\t\tmetalness: { value: 0.0 },\n\t\t\t\tenvMapIntensity: { value: 1 } // temporary\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphysical_vert,\n\t\tfragmentShader: ShaderChunk.meshphysical_frag\n\n\t},\n\n\ttoon: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.gradientmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: /*@__PURE__*/ new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshtoon_vert,\n\t\tfragmentShader: ShaderChunk.meshtoon_frag\n\n\t},\n\n\tmatcap: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tmatcap: { value: null }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshmatcap_vert,\n\t\tfragmentShader: ShaderChunk.meshmatcap_frag\n\n\t},\n\n\tpoints: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.points,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.points_vert,\n\t\tfragmentShader: ShaderChunk.points_frag\n\n\t},\n\n\tdashed: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tscale: { value: 1 },\n\t\t\t\tdashSize: { value: 1 },\n\t\t\t\ttotalSize: { value: 2 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.linedashed_vert,\n\t\tfragmentShader: ShaderChunk.linedashed_frag\n\n\t},\n\n\tdepth: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.depth_vert,\n\t\tfragmentShader: ShaderChunk.depth_frag\n\n\t},\n\n\tnormal: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshnormal_vert,\n\t\tfragmentShader: ShaderChunk.meshnormal_frag\n\n\t},\n\n\tsprite: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.sprite,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.sprite_vert,\n\t\tfragmentShader: ShaderChunk.sprite_frag\n\n\t},\n\n\tbackground: {\n\n\t\tuniforms: {\n\t\t\tuvTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t\tt2D: { value: null },\n\t\t\tbackgroundIntensity: { value: 1 }\n\t\t},\n\n\t\tvertexShader: ShaderChunk.background_vert,\n\t\tfragmentShader: ShaderChunk.background_frag\n\n\t},\n\n\tbackgroundCube: {\n\n\t\tuniforms: {\n\t\t\tenvMap: { value: null },\n\t\t\tflipEnvMap: { value: - 1 },\n\t\t\tbackgroundBlurriness: { value: 0 },\n\t\t\tbackgroundIntensity: { value: 1 }\n\t\t},\n\n\t\tvertexShader: ShaderChunk.backgroundCube_vert,\n\t\tfragmentShader: ShaderChunk.backgroundCube_frag\n\n\t},\n\n\tcube: {\n\n\t\tuniforms: {\n\t\t\ttCube: { value: null },\n\t\t\ttFlip: { value: - 1 },\n\t\t\topacity: { value: 1.0 }\n\t\t},\n\n\t\tvertexShader: ShaderChunk.cube_vert,\n\t\tfragmentShader: ShaderChunk.cube_frag\n\n\t},\n\n\tequirect: {\n\n\t\tuniforms: {\n\t\t\ttEquirect: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.equirect_vert,\n\t\tfragmentShader: ShaderChunk.equirect_frag\n\n\t},\n\n\tdistanceRGBA: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\treferencePosition: { value: /*@__PURE__*/ new Vector3() },\n\t\t\t\tnearDistance: { value: 1 },\n\t\t\t\tfarDistance: { value: 1000 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.distanceRGBA_vert,\n\t\tfragmentShader: ShaderChunk.distanceRGBA_frag\n\n\t},\n\n\tshadow: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.lights,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tcolor: { value: /*@__PURE__*/ new Color( 0x00000 ) },\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t},\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.shadow_vert,\n\t\tfragmentShader: ShaderChunk.shadow_frag\n\n\t}\n\n};\n\nShaderLib.physical = {\n\n\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\tShaderLib.standard.uniforms,\n\t\t{\n\t\t\tclearcoat: { value: 0 },\n\t\t\tclearcoatMap: { value: null },\n\t\t\tclearcoatRoughness: { value: 0 },\n\t\t\tclearcoatRoughnessMap: { value: null },\n\t\t\tclearcoatNormalScale: { value: /*@__PURE__*/ new Vector2( 1, 1 ) },\n\t\t\tclearcoatNormalMap: { value: null },\n\t\t\tiridescence: { value: 0 },\n\t\t\tiridescenceMap: { value: null },\n\t\t\tiridescenceIOR: { value: 1.3 },\n\t\t\tiridescenceThicknessMinimum: { value: 100 },\n\t\t\tiridescenceThicknessMaximum: { value: 400 },\n\t\t\tiridescenceThicknessMap: { value: null },\n\t\t\tsheen: { value: 0 },\n\t\t\tsheenColor: { value: /*@__PURE__*/ new Color( 0x000000 ) },\n\t\t\tsheenColorMap: { value: null },\n\t\t\tsheenRoughness: { value: 1 },\n\t\t\tsheenRoughnessMap: { value: null },\n\t\t\ttransmission: { value: 0 },\n\t\t\ttransmissionMap: { value: null },\n\t\t\ttransmissionSamplerSize: { value: /*@__PURE__*/ new Vector2() },\n\t\t\ttransmissionSamplerMap: { value: null },\n\t\t\tthickness: { value: 0 },\n\t\t\tthicknessMap: { value: null },\n\t\t\tattenuationDistance: { value: 0 },\n\t\t\tattenuationColor: { value: /*@__PURE__*/ new Color( 0x000000 ) },\n\t\t\tspecularIntensity: { value: 1 },\n\t\t\tspecularIntensityMap: { value: null },\n\t\t\tspecularColor: { value: /*@__PURE__*/ new Color( 1, 1, 1 ) },\n\t\t\tspecularColorMap: { value: null },\n\t\t}\n\t] ),\n\n\tvertexShader: ShaderChunk.meshphysical_vert,\n\tfragmentShader: ShaderChunk.meshphysical_frag\n\n};\n\nconst _rgb = { r: 0, b: 0, g: 0 };\n\nfunction WebGLBackground( renderer, cubemaps, cubeuvmaps, state, objects, alpha, premultipliedAlpha ) {\n\n\tconst clearColor = new Color( 0x000000 );\n\tlet clearAlpha = alpha === true ? 0 : 1;\n\n\tlet planeMesh;\n\tlet boxMesh;\n\n\tlet currentBackground = null;\n\tlet currentBackgroundVersion = 0;\n\tlet currentTonemapping = null;\n\n\tfunction render( renderList, scene ) {\n\n\t\tlet forceClear = false;\n\t\tlet background = scene.isScene === true ? scene.background : null;\n\n\t\tif ( background && background.isTexture ) {\n\n\t\t\tconst usePMREM = scene.backgroundBlurriness > 0; // use PMREM if the user wants to blur the background\n\t\t\tbackground = ( usePMREM ? cubeuvmaps : cubemaps ).get( background );\n\n\t\t}\n\n\t\t// Ignore background in AR\n\t\t// TODO: Reconsider this.\n\n\t\tconst xr = renderer.xr;\n\t\tconst session = xr.getSession && xr.getSession();\n\n\t\tif ( session && session.environmentBlendMode === 'additive' ) {\n\n\t\t\tbackground = null;\n\n\t\t}\n\n\t\tif ( background === null ) {\n\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t} else if ( background && background.isColor ) {\n\n\t\t\tsetClear( background, 1 );\n\t\t\tforceClear = true;\n\n\t\t}\n\n\t\tif ( renderer.autoClear || forceClear ) {\n\n\t\t\trenderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\n\t\t}\n\n\t\tif ( background && ( background.isCubeTexture || background.mapping === CubeUVReflectionMapping ) ) {\n\n\t\t\tif ( boxMesh === undefined ) {\n\n\t\t\t\tboxMesh = new Mesh(\n\t\t\t\t\tnew BoxGeometry( 1, 1, 1 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\tname: 'BackgroundCubeMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.backgroundCube.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.backgroundCube.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.backgroundCube.fragmentShader,\n\t\t\t\t\t\tside: BackSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'normal' );\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'uv' );\n\n\t\t\t\tboxMesh.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\t\t\tthis.matrixWorld.copyPosition( camera.matrixWorld );\n\n\t\t\t\t};\n\n\t\t\t\t// add \"envMap\" material property so the renderer can evaluate it like for built-in materials\n\t\t\t\tObject.defineProperty( boxMesh.material, 'envMap', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.envMap.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( boxMesh );\n\n\t\t\t}\n\n\t\t\tboxMesh.material.uniforms.envMap.value = background;\n\t\t\tboxMesh.material.uniforms.flipEnvMap.value = ( background.isCubeTexture && background.isRenderTargetTexture === false ) ? - 1 : 1;\n\t\t\tboxMesh.material.uniforms.backgroundBlurriness.value = scene.backgroundBlurriness;\n\t\t\tboxMesh.material.uniforms.backgroundIntensity.value = scene.backgroundIntensity;\n\t\t\tboxMesh.material.toneMapped = ( background.encoding === sRGBEncoding ) ? false : true;\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t\tcurrentBackgroundVersion !== background.version ||\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\n\n\t\t\t\tboxMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = background.version;\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\n\n\t\t\t}\n\n\t\t\tboxMesh.layers.enableAll();\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( boxMesh, boxMesh.geometry, boxMesh.material, 0, 0, null );\n\n\t\t} else if ( background && background.isTexture ) {\n\n\t\t\tif ( planeMesh === undefined ) {\n\n\t\t\t\tplaneMesh = new Mesh(\n\t\t\t\t\tnew PlaneGeometry( 2, 2 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\tname: 'BackgroundMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.background.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.background.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.background.fragmentShader,\n\t\t\t\t\t\tside: FrontSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tplaneMesh.geometry.deleteAttribute( 'normal' );\n\n\t\t\t\t// add \"map\" material property so the renderer can evaluate it like for built-in materials\n\t\t\t\tObject.defineProperty( planeMesh.material, 'map', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.t2D.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( planeMesh );\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.t2D.value = background;\n\t\t\tplaneMesh.material.uniforms.backgroundIntensity.value = scene.backgroundIntensity;\n\t\t\tplaneMesh.material.toneMapped = ( background.encoding === sRGBEncoding ) ? false : true;\n\n\t\t\tif ( background.matrixAutoUpdate === true ) {\n\n\t\t\t\tbackground.updateMatrix();\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.uvTransform.value.copy( background.matrix );\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t\tcurrentBackgroundVersion !== background.version ||\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\n\n\t\t\t\tplaneMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = background.version;\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\n\n\t\t\t}\n\n\t\t\tplaneMesh.layers.enableAll();\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( planeMesh, planeMesh.geometry, planeMesh.material, 0, 0, null );\n\n\t\t}\n\n\t}\n\n\tfunction setClear( color, alpha ) {\n\n\t\tcolor.getRGB( _rgb, getUnlitUniformColorSpace( renderer ) );\n\n\t\tstate.buffers.color.setClear( _rgb.r, _rgb.g, _rgb.b, alpha, premultipliedAlpha );\n\n\t}\n\n\treturn {\n\n\t\tgetClearColor: function () {\n\n\t\t\treturn clearColor;\n\n\t\t},\n\t\tsetClearColor: function ( color, alpha = 1 ) {\n\n\t\t\tclearColor.set( color );\n\t\t\tclearAlpha = alpha;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\tgetClearAlpha: function () {\n\n\t\t\treturn clearAlpha;\n\n\t\t},\n\t\tsetClearAlpha: function ( alpha ) {\n\n\t\t\tclearAlpha = alpha;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\trender: render\n\n\t};\n\n}\n\nfunction WebGLBindingStates( gl, extensions, attributes, capabilities ) {\n\n\tconst maxVertexAttributes = gl.getParameter( 34921 );\n\n\tconst extension = capabilities.isWebGL2 ? null : extensions.get( 'OES_vertex_array_object' );\n\tconst vaoAvailable = capabilities.isWebGL2 || extension !== null;\n\n\tconst bindingStates = {};\n\n\tconst defaultState = createBindingState( null );\n\tlet currentState = defaultState;\n\tlet forceUpdate = false;\n\n\tfunction setup( object, material, program, geometry, index ) {\n\n\t\tlet updateBuffers = false;\n\n\t\tif ( vaoAvailable ) {\n\n\t\t\tconst state = getBindingState( geometry, program, material );\n\n\t\t\tif ( currentState !== state ) {\n\n\t\t\t\tcurrentState = state;\n\t\t\t\tbindVertexArrayObject( currentState.object );\n\n\t\t\t}\n\n\t\t\tupdateBuffers = needsUpdate( object, geometry, program, index );\n\n\t\t\tif ( updateBuffers ) saveCache( object, geometry, program, index );\n\n\t\t} else {\n\n\t\t\tconst wireframe = ( material.wireframe === true );\n\n\t\t\tif ( currentState.geometry !== geometry.id ||\n\t\t\t\tcurrentState.program !== program.id ||\n\t\t\t\tcurrentState.wireframe !== wireframe ) {\n\n\t\t\t\tcurrentState.geometry = geometry.id;\n\t\t\t\tcurrentState.program = program.id;\n\t\t\t\tcurrentState.wireframe = wireframe;\n\n\t\t\t\tupdateBuffers = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( index !== null ) {\n\n\t\t\tattributes.update( index, 34963 );\n\n\t\t}\n\n\t\tif ( updateBuffers || forceUpdate ) {\n\n\t\t\tforceUpdate = false;\n\n\t\t\tsetupVertexAttributes( object, material, program, geometry );\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tgl.bindBuffer( 34963, attributes.get( index ).buffer );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction createVertexArrayObject() {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.createVertexArray();\n\n\t\treturn extension.createVertexArrayOES();\n\n\t}\n\n\tfunction bindVertexArrayObject( vao ) {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.bindVertexArray( vao );\n\n\t\treturn extension.bindVertexArrayOES( vao );\n\n\t}\n\n\tfunction deleteVertexArrayObject( vao ) {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.deleteVertexArray( vao );\n\n\t\treturn extension.deleteVertexArrayOES( vao );\n\n\t}\n\n\tfunction getBindingState( geometry, program, material ) {\n\n\t\tconst wireframe = ( material.wireframe === true );\n\n\t\tlet programMap = bindingStates[ geometry.id ];\n\n\t\tif ( programMap === undefined ) {\n\n\t\t\tprogramMap = {};\n\t\t\tbindingStates[ geometry.id ] = programMap;\n\n\t\t}\n\n\t\tlet stateMap = programMap[ program.id ];\n\n\t\tif ( stateMap === undefined ) {\n\n\t\t\tstateMap = {};\n\t\t\tprogramMap[ program.id ] = stateMap;\n\n\t\t}\n\n\t\tlet state = stateMap[ wireframe ];\n\n\t\tif ( state === undefined ) {\n\n\t\t\tstate = createBindingState( createVertexArrayObject() );\n\t\t\tstateMap[ wireframe ] = state;\n\n\t\t}\n\n\t\treturn state;\n\n\t}\n\n\tfunction createBindingState( vao ) {\n\n\t\tconst newAttributes = [];\n\t\tconst enabledAttributes = [];\n\t\tconst attributeDivisors = [];\n\n\t\tfor ( let i = 0; i < maxVertexAttributes; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\t\t\tenabledAttributes[ i ] = 0;\n\t\t\tattributeDivisors[ i ] = 0;\n\n\t\t}\n\n\t\treturn {\n\n\t\t\t// for backward compatibility on non-VAO support browser\n\t\t\tgeometry: null,\n\t\t\tprogram: null,\n\t\t\twireframe: false,\n\n\t\t\tnewAttributes: newAttributes,\n\t\t\tenabledAttributes: enabledAttributes,\n\t\t\tattributeDivisors: attributeDivisors,\n\t\t\tobject: vao,\n\t\t\tattributes: {},\n\t\t\tindex: null\n\n\t\t};\n\n\t}\n\n\tfunction needsUpdate( object, geometry, program, index ) {\n\n\t\tconst cachedAttributes = currentState.attributes;\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\tlet attributesNum = 0;\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tfor ( const name in programAttributes ) {\n\n\t\t\tconst programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute.location >= 0 ) {\n\n\t\t\t\tconst cachedAttribute = cachedAttributes[ name ];\n\t\t\t\tlet geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\tif ( geometryAttribute === undefined ) {\n\n\t\t\t\t\tif ( name === 'instanceMatrix' && object.instanceMatrix ) geometryAttribute = object.instanceMatrix;\n\t\t\t\t\tif ( name === 'instanceColor' && object.instanceColor ) geometryAttribute = object.instanceColor;\n\n\t\t\t\t}\n\n\t\t\t\tif ( cachedAttribute === undefined ) return true;\n\n\t\t\t\tif ( cachedAttribute.attribute !== geometryAttribute ) return true;\n\n\t\t\t\tif ( geometryAttribute && cachedAttribute.data !== geometryAttribute.data ) return true;\n\n\t\t\t\tattributesNum ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( currentState.attributesNum !== attributesNum ) return true;\n\n\t\tif ( currentState.index !== index ) return true;\n\n\t\treturn false;\n\n\t}\n\n\tfunction saveCache( object, geometry, program, index ) {\n\n\t\tconst cache = {};\n\t\tconst attributes = geometry.attributes;\n\t\tlet attributesNum = 0;\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tfor ( const name in programAttributes ) {\n\n\t\t\tconst programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute.location >= 0 ) {\n\n\t\t\t\tlet attribute = attributes[ name ];\n\n\t\t\t\tif ( attribute === undefined ) {\n\n\t\t\t\t\tif ( name === 'instanceMatrix' && object.instanceMatrix ) attribute = object.instanceMatrix;\n\t\t\t\t\tif ( name === 'instanceColor' && object.instanceColor ) attribute = object.instanceColor;\n\n\t\t\t\t}\n\n\t\t\t\tconst data = {};\n\t\t\t\tdata.attribute = attribute;\n\n\t\t\t\tif ( attribute && attribute.data ) {\n\n\t\t\t\t\tdata.data = attribute.data;\n\n\t\t\t\t}\n\n\t\t\t\tcache[ name ] = data;\n\n\t\t\t\tattributesNum ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tcurrentState.attributes = cache;\n\t\tcurrentState.attributesNum = attributesNum;\n\n\t\tcurrentState.index = index;\n\n\t}\n\n\tfunction initAttributes() {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\n\t\tfor ( let i = 0, il = newAttributes.length; i < il; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttribute( attribute ) {\n\n\t\tenableAttributeAndDivisor( attribute, 0 );\n\n\t}\n\n\tfunction enableAttributeAndDivisor( attribute, meshPerAttribute ) {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\t\tconst enabledAttributes = currentState.enabledAttributes;\n\t\tconst attributeDivisors = currentState.attributeDivisors;\n\n\t\tnewAttributes[ attribute ] = 1;\n\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\n\n\t\t\tconst extension = capabilities.isWebGL2 ? gl : extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\textension[ capabilities.isWebGL2 ? 'vertexAttribDivisor' : 'vertexAttribDivisorANGLE' ]( attribute, meshPerAttribute );\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\n\n\t\t}\n\n\t}\n\n\tfunction disableUnusedAttributes() {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\t\tconst enabledAttributes = currentState.enabledAttributes;\n\n\t\tfor ( let i = 0, il = enabledAttributes.length; i < il; i ++ ) {\n\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction vertexAttribPointer( index, size, type, normalized, stride, offset ) {\n\n\t\tif ( capabilities.isWebGL2 === true && ( type === 5124 || type === 5125 ) ) {\n\n\t\t\tgl.vertexAttribIPointer( index, size, type, stride, offset );\n\n\t\t} else {\n\n\t\t\tgl.vertexAttribPointer( index, size, type, normalized, stride, offset );\n\n\t\t}\n\n\t}\n\n\tfunction setupVertexAttributes( object, material, program, geometry ) {\n\n\t\tif ( capabilities.isWebGL2 === false && ( object.isInstancedMesh || geometry.isInstancedBufferGeometry ) ) {\n\n\t\t\tif ( extensions.get( 'ANGLE_instanced_arrays' ) === null ) return;\n\n\t\t}\n\n\t\tinitAttributes();\n\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tconst materialDefaultAttributeValues = material.defaultAttributeValues;\n\n\t\tfor ( const name in programAttributes ) {\n\n\t\t\tconst programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute.location >= 0 ) {\n\n\t\t\t\tlet geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\tif ( geometryAttribute === undefined ) {\n\n\t\t\t\t\tif ( name === 'instanceMatrix' && object.instanceMatrix ) geometryAttribute = object.instanceMatrix;\n\t\t\t\t\tif ( name === 'instanceColor' && object.instanceColor ) geometryAttribute = object.instanceColor;\n\n\t\t\t\t}\n\n\t\t\t\tif ( geometryAttribute !== undefined ) {\n\n\t\t\t\t\tconst normalized = geometryAttribute.normalized;\n\t\t\t\t\tconst size = geometryAttribute.itemSize;\n\n\t\t\t\t\tconst attribute = attributes.get( geometryAttribute );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tconst buffer = attribute.buffer;\n\t\t\t\t\tconst type = attribute.type;\n\t\t\t\t\tconst bytesPerElement = attribute.bytesPerElement;\n\n\t\t\t\t\tif ( geometryAttribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tconst data = geometryAttribute.data;\n\t\t\t\t\t\tconst stride = data.stride;\n\t\t\t\t\t\tconst offset = geometryAttribute.offset;\n\n\t\t\t\t\t\tif ( data.isInstancedInterleavedBuffer ) {\n\n\t\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute.location + i, data.meshPerAttribute );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( object.isInstancedMesh !== true && geometry._maxInstanceCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = data.meshPerAttribute * data.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\t\tenableAttribute( programAttribute.location + i );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgl.bindBuffer( 34962, buffer );\n\n\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\tvertexAttribPointer(\n\t\t\t\t\t\t\t\tprogramAttribute.location + i,\n\t\t\t\t\t\t\t\tsize / programAttribute.locationSize,\n\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\tnormalized,\n\t\t\t\t\t\t\t\tstride * bytesPerElement,\n\t\t\t\t\t\t\t\t( offset + ( size / programAttribute.locationSize ) * i ) * bytesPerElement\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( geometryAttribute.isInstancedBufferAttribute ) {\n\n\t\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute.location + i, geometryAttribute.meshPerAttribute );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( object.isInstancedMesh !== true && geometry._maxInstanceCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\t\tenableAttribute( programAttribute.location + i );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgl.bindBuffer( 34962, buffer );\n\n\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\tvertexAttribPointer(\n\t\t\t\t\t\t\t\tprogramAttribute.location + i,\n\t\t\t\t\t\t\t\tsize / programAttribute.locationSize,\n\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\tnormalized,\n\t\t\t\t\t\t\t\tsize * bytesPerElement,\n\t\t\t\t\t\t\t\t( size / programAttribute.locationSize ) * i * bytesPerElement\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\n\n\t\t\t\t\tconst value = materialDefaultAttributeValues[ name ];\n\n\t\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\t\tswitch ( value.length ) {\n\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\tgl.vertexAttrib2fv( programAttribute.location, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\tgl.vertexAttrib3fv( programAttribute.location, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\tgl.vertexAttrib4fv( programAttribute.location, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tgl.vertexAttrib1fv( programAttribute.location, value );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tdisableUnusedAttributes();\n\n\t}\n\n\tfunction dispose() {\n\n\t\treset();\n\n\t\tfor ( const geometryId in bindingStates ) {\n\n\t\t\tconst programMap = bindingStates[ geometryId ];\n\n\t\t\tfor ( const programId in programMap ) {\n\n\t\t\t\tconst stateMap = programMap[ programId ];\n\n\t\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t\t}\n\n\t\t\t\tdelete programMap[ programId ];\n\n\t\t\t}\n\n\t\t\tdelete bindingStates[ geometryId ];\n\n\t\t}\n\n\t}\n\n\tfunction releaseStatesOfGeometry( geometry ) {\n\n\t\tif ( bindingStates[ geometry.id ] === undefined ) return;\n\n\t\tconst programMap = bindingStates[ geometry.id ];\n\n\t\tfor ( const programId in programMap ) {\n\n\t\t\tconst stateMap = programMap[ programId ];\n\n\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t}\n\n\t\t\tdelete programMap[ programId ];\n\n\t\t}\n\n\t\tdelete bindingStates[ geometry.id ];\n\n\t}\n\n\tfunction releaseStatesOfProgram( program ) {\n\n\t\tfor ( const geometryId in bindingStates ) {\n\n\t\t\tconst programMap = bindingStates[ geometryId ];\n\n\t\t\tif ( programMap[ program.id ] === undefined ) continue;\n\n\t\t\tconst stateMap = programMap[ program.id ];\n\n\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t}\n\n\t\t\tdelete programMap[ program.id ];\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\tresetDefaultState();\n\t\tforceUpdate = true;\n\n\t\tif ( currentState === defaultState ) return;\n\n\t\tcurrentState = defaultState;\n\t\tbindVertexArrayObject( currentState.object );\n\n\t}\n\n\t// for backward-compatibility\n\n\tfunction resetDefaultState() {\n\n\t\tdefaultState.geometry = null;\n\t\tdefaultState.program = null;\n\t\tdefaultState.wireframe = false;\n\n\t}\n\n\treturn {\n\n\t\tsetup: setup,\n\t\treset: reset,\n\t\tresetDefaultState: resetDefaultState,\n\t\tdispose: dispose,\n\t\treleaseStatesOfGeometry: releaseStatesOfGeometry,\n\t\treleaseStatesOfProgram: releaseStatesOfProgram,\n\n\t\tinitAttributes: initAttributes,\n\t\tenableAttribute: enableAttribute,\n\t\tdisableUnusedAttributes: disableUnusedAttributes\n\n\t};\n\n}\n\nfunction WebGLBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tlet mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawArrays( mode, start, count );\n\n\t\tinfo.update( count, mode, 1 );\n\n\t}\n\n\tfunction renderInstances( start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tlet extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawArraysInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawArraysInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, start, count, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\nfunction WebGLCapabilities( gl, extensions, parameters ) {\n\n\tlet maxAnisotropy;\n\n\tfunction getMaxAnisotropy() {\n\n\t\tif ( maxAnisotropy !== undefined ) return maxAnisotropy;\n\n\t\tif ( extensions.has( 'EXT_texture_filter_anisotropic' ) === true ) {\n\n\t\t\tconst extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\t\tmaxAnisotropy = gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\n\n\t\t} else {\n\n\t\t\tmaxAnisotropy = 0;\n\n\t\t}\n\n\t\treturn maxAnisotropy;\n\n\t}\n\n\tfunction getMaxPrecision( precision ) {\n\n\t\tif ( precision === 'highp' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( 35633, 36338 ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( 35632, 36338 ).precision > 0 ) {\n\n\t\t\t\treturn 'highp';\n\n\t\t\t}\n\n\t\t\tprecision = 'mediump';\n\n\t\t}\n\n\t\tif ( precision === 'mediump' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( 35633, 36337 ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( 35632, 36337 ).precision > 0 ) {\n\n\t\t\t\treturn 'mediump';\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn 'lowp';\n\n\t}\n\n\tconst isWebGL2 = ( typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext ) ||\n\t\t( typeof WebGL2ComputeRenderingContext !== 'undefined' && gl instanceof WebGL2ComputeRenderingContext );\n\n\tlet precision = parameters.precision !== undefined ? parameters.precision : 'highp';\n\tconst maxPrecision = getMaxPrecision( precision );\n\n\tif ( maxPrecision !== precision ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.' );\n\t\tprecision = maxPrecision;\n\n\t}\n\n\tconst drawBuffers = isWebGL2 || extensions.has( 'WEBGL_draw_buffers' );\n\n\tconst logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;\n\n\tconst maxTextures = gl.getParameter( 34930 );\n\tconst maxVertexTextures = gl.getParameter( 35660 );\n\tconst maxTextureSize = gl.getParameter( 3379 );\n\tconst maxCubemapSize = gl.getParameter( 34076 );\n\n\tconst maxAttributes = gl.getParameter( 34921 );\n\tconst maxVertexUniforms = gl.getParameter( 36347 );\n\tconst maxVaryings = gl.getParameter( 36348 );\n\tconst maxFragmentUniforms = gl.getParameter( 36349 );\n\n\tconst vertexTextures = maxVertexTextures > 0;\n\tconst floatFragmentTextures = isWebGL2 || extensions.has( 'OES_texture_float' );\n\tconst floatVertexTextures = vertexTextures && floatFragmentTextures;\n\n\tconst maxSamples = isWebGL2 ? gl.getParameter( 36183 ) : 0;\n\n\treturn {\n\n\t\tisWebGL2: isWebGL2,\n\n\t\tdrawBuffers: drawBuffers,\n\n\t\tgetMaxAnisotropy: getMaxAnisotropy,\n\t\tgetMaxPrecision: getMaxPrecision,\n\n\t\tprecision: precision,\n\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\tmaxTextures: maxTextures,\n\t\tmaxVertexTextures: maxVertexTextures,\n\t\tmaxTextureSize: maxTextureSize,\n\t\tmaxCubemapSize: maxCubemapSize,\n\n\t\tmaxAttributes: maxAttributes,\n\t\tmaxVertexUniforms: maxVertexUniforms,\n\t\tmaxVaryings: maxVaryings,\n\t\tmaxFragmentUniforms: maxFragmentUniforms,\n\n\t\tvertexTextures: vertexTextures,\n\t\tfloatFragmentTextures: floatFragmentTextures,\n\t\tfloatVertexTextures: floatVertexTextures,\n\n\t\tmaxSamples: maxSamples\n\n\t};\n\n}\n\nfunction WebGLClipping( properties ) {\n\n\tconst scope = this;\n\n\tlet globalState = null,\n\t\tnumGlobalPlanes = 0,\n\t\tlocalClippingEnabled = false,\n\t\trenderingShadows = false;\n\n\tconst plane = new Plane(),\n\t\tviewNormalMatrix = new Matrix3(),\n\n\t\tuniform = { value: null, needsUpdate: false };\n\n\tthis.uniform = uniform;\n\tthis.numPlanes = 0;\n\tthis.numIntersection = 0;\n\n\tthis.init = function ( planes, enableLocalClipping, camera ) {\n\n\t\tconst enabled =\n\t\t\tplanes.length !== 0 ||\n\t\t\tenableLocalClipping ||\n\t\t\t// enable state of previous frame - the clipping code has to\n\t\t\t// run another frame in order to reset the state:\n\t\t\tnumGlobalPlanes !== 0 ||\n\t\t\tlocalClippingEnabled;\n\n\t\tlocalClippingEnabled = enableLocalClipping;\n\n\t\tglobalState = projectPlanes( planes, camera, 0 );\n\t\tnumGlobalPlanes = planes.length;\n\n\t\treturn enabled;\n\n\t};\n\n\tthis.beginShadows = function () {\n\n\t\trenderingShadows = true;\n\t\tprojectPlanes( null );\n\n\t};\n\n\tthis.endShadows = function () {\n\n\t\trenderingShadows = false;\n\t\tresetGlobalState();\n\n\t};\n\n\tthis.setState = function ( material, camera, useCache ) {\n\n\t\tconst planes = material.clippingPlanes,\n\t\t\tclipIntersection = material.clipIntersection,\n\t\t\tclipShadows = material.clipShadows;\n\n\t\tconst materialProperties = properties.get( material );\n\n\t\tif ( ! localClippingEnabled || planes === null || planes.length === 0 || renderingShadows && ! clipShadows ) {\n\n\t\t\t// there's no local clipping\n\n\t\t\tif ( renderingShadows ) {\n\n\t\t\t\t// there's no global clipping\n\n\t\t\t\tprojectPlanes( null );\n\n\t\t\t} else {\n\n\t\t\t\tresetGlobalState();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst nGlobal = renderingShadows ? 0 : numGlobalPlanes,\n\t\t\t\tlGlobal = nGlobal * 4;\n\n\t\t\tlet dstArray = materialProperties.clippingState || null;\n\n\t\t\tuniform.value = dstArray; // ensure unique state\n\n\t\t\tdstArray = projectPlanes( planes, camera, lGlobal, useCache );\n\n\t\t\tfor ( let i = 0; i !== lGlobal; ++ i ) {\n\n\t\t\t\tdstArray[ i ] = globalState[ i ];\n\n\t\t\t}\n\n\t\t\tmaterialProperties.clippingState = dstArray;\n\t\t\tthis.numIntersection = clipIntersection ? this.numPlanes : 0;\n\t\t\tthis.numPlanes += nGlobal;\n\n\t\t}\n\n\n\t};\n\n\tfunction resetGlobalState() {\n\n\t\tif ( uniform.value !== globalState ) {\n\n\t\t\tuniform.value = globalState;\n\t\t\tuniform.needsUpdate = numGlobalPlanes > 0;\n\n\t\t}\n\n\t\tscope.numPlanes = numGlobalPlanes;\n\t\tscope.numIntersection = 0;\n\n\t}\n\n\tfunction projectPlanes( planes, camera, dstOffset, skipTransform ) {\n\n\t\tconst nPlanes = planes !== null ? planes.length : 0;\n\t\tlet dstArray = null;\n\n\t\tif ( nPlanes !== 0 ) {\n\n\t\t\tdstArray = uniform.value;\n\n\t\t\tif ( skipTransform !== true || dstArray === null ) {\n\n\t\t\t\tconst flatSize = dstOffset + nPlanes * 4,\n\t\t\t\t\tviewMatrix = camera.matrixWorldInverse;\n\n\t\t\t\tviewNormalMatrix.getNormalMatrix( viewMatrix );\n\n\t\t\t\tif ( dstArray === null || dstArray.length < flatSize ) {\n\n\t\t\t\t\tdstArray = new Float32Array( flatSize );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0, i4 = dstOffset; i !== nPlanes; ++ i, i4 += 4 ) {\n\n\t\t\t\t\tplane.copy( planes[ i ] ).applyMatrix4( viewMatrix, viewNormalMatrix );\n\n\t\t\t\t\tplane.normal.toArray( dstArray, i4 );\n\t\t\t\t\tdstArray[ i4 + 3 ] = plane.constant;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tuniform.value = dstArray;\n\t\t\tuniform.needsUpdate = true;\n\n\t\t}\n\n\t\tscope.numPlanes = nPlanes;\n\t\tscope.numIntersection = 0;\n\n\t\treturn dstArray;\n\n\t}\n\n}\n\nfunction WebGLCubeMaps( renderer ) {\n\n\tlet cubemaps = new WeakMap();\n\n\tfunction mapTextureMapping( texture, mapping ) {\n\n\t\tif ( mapping === EquirectangularReflectionMapping ) {\n\n\t\t\ttexture.mapping = CubeReflectionMapping;\n\n\t\t} else if ( mapping === EquirectangularRefractionMapping ) {\n\n\t\t\ttexture.mapping = CubeRefractionMapping;\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tfunction get( texture ) {\n\n\t\tif ( texture && texture.isTexture && texture.isRenderTargetTexture === false ) {\n\n\t\t\tconst mapping = texture.mapping;\n\n\t\t\tif ( mapping === EquirectangularReflectionMapping || mapping === EquirectangularRefractionMapping ) {\n\n\t\t\t\tif ( cubemaps.has( texture ) ) {\n\n\t\t\t\t\tconst cubemap = cubemaps.get( texture ).texture;\n\t\t\t\t\treturn mapTextureMapping( cubemap, texture.mapping );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst image = texture.image;\n\n\t\t\t\t\tif ( image && image.height > 0 ) {\n\n\t\t\t\t\t\tconst renderTarget = new WebGLCubeRenderTarget( image.height / 2 );\n\t\t\t\t\t\trenderTarget.fromEquirectangularTexture( renderer, texture );\n\t\t\t\t\t\tcubemaps.set( texture, renderTarget );\n\n\t\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\t\t\t\treturn mapTextureMapping( renderTarget.texture, texture.mapping );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// image not yet ready. try the conversion next frame\n\n\t\t\t\t\t\treturn null;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tfunction onTextureDispose( event ) {\n\n\t\tconst texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tconst cubemap = cubemaps.get( texture );\n\n\t\tif ( cubemap !== undefined ) {\n\n\t\t\tcubemaps.delete( texture );\n\t\t\tcubemap.dispose();\n\n\t\t}\n\n\t}\n\n\tfunction dispose() {\n\n\t\tcubemaps = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nclass OrthographicCamera extends Camera {\n\n\tconstructor( left = - 1, right = 1, top = 1, bottom = - 1, near = 0.1, far = 2000 ) {\n\n\t\tsuper();\n\n\t\tthis.isOrthographicCamera = true;\n\n\t\tthis.type = 'OrthographicCamera';\n\n\t\tthis.zoom = 1;\n\t\tthis.view = null;\n\n\t\tthis.left = left;\n\t\tthis.right = right;\n\t\tthis.top = top;\n\t\tthis.bottom = bottom;\n\n\t\tthis.near = near;\n\t\tthis.far = far;\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.left = source.left;\n\t\tthis.right = source.right;\n\t\tthis.top = source.top;\n\t\tthis.bottom = source.bottom;\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\n\t\tthis.zoom = source.zoom;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\treturn this;\n\n\t}\n\n\tsetViewOffset( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tclearViewOffset() {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tupdateProjectionMatrix() {\n\n\t\tconst dx = ( this.right - this.left ) / ( 2 * this.zoom );\n\t\tconst dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\n\t\tconst cx = ( this.right + this.left ) / 2;\n\t\tconst cy = ( this.top + this.bottom ) / 2;\n\n\t\tlet left = cx - dx;\n\t\tlet right = cx + dx;\n\t\tlet top = cy + dy;\n\t\tlet bottom = cy - dy;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tconst scaleW = ( this.right - this.left ) / this.view.fullWidth / this.zoom;\n\t\t\tconst scaleH = ( this.top - this.bottom ) / this.view.fullHeight / this.zoom;\n\n\t\t\tleft += scaleW * this.view.offsetX;\n\t\t\tright = left + scaleW * this.view.width;\n\t\t\ttop -= scaleH * this.view.offsetY;\n\t\t\tbottom = top - scaleH * this.view.height;\n\n\t\t}\n\n\t\tthis.projectionMatrix.makeOrthographic( left, right, top, bottom, this.near, this.far );\n\n\t\tthis.projectionMatrixInverse.copy( this.projectionMatrix ).invert();\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.object.zoom = this.zoom;\n\t\tdata.object.left = this.left;\n\t\tdata.object.right = this.right;\n\t\tdata.object.top = this.top;\n\t\tdata.object.bottom = this.bottom;\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\treturn data;\n\n\t}\n\n}\n\nconst LOD_MIN = 4;\n\n// The standard deviations (radians) associated with the extra mips. These are\n// chosen to approximate a Trowbridge-Reitz distribution function times the\n// geometric shadowing function. These sigma values squared must match the\n// variance #defines in cube_uv_reflection_fragment.glsl.js.\nconst EXTRA_LOD_SIGMA = [ 0.125, 0.215, 0.35, 0.446, 0.526, 0.582 ];\n\n// The maximum length of the blur for loop. Smaller sigmas will use fewer\n// samples and exit early, but not recompile the shader.\nconst MAX_SAMPLES = 20;\n\nconst _flatCamera = /*@__PURE__*/ new OrthographicCamera();\nconst _clearColor = /*@__PURE__*/ new Color();\nlet _oldTarget = null;\n\n// Golden Ratio\nconst PHI = ( 1 + Math.sqrt( 5 ) ) / 2;\nconst INV_PHI = 1 / PHI;\n\n// Vertices of a dodecahedron (except the opposites, which represent the\n// same axis), used as axis directions evenly spread on a sphere.\nconst _axisDirections = [\n\t/*@__PURE__*/ new Vector3( 1, 1, 1 ),\n\t/*@__PURE__*/ new Vector3( - 1, 1, 1 ),\n\t/*@__PURE__*/ new Vector3( 1, 1, - 1 ),\n\t/*@__PURE__*/ new Vector3( - 1, 1, - 1 ),\n\t/*@__PURE__*/ new Vector3( 0, PHI, INV_PHI ),\n\t/*@__PURE__*/ new Vector3( 0, PHI, - INV_PHI ),\n\t/*@__PURE__*/ new Vector3( INV_PHI, 0, PHI ),\n\t/*@__PURE__*/ new Vector3( - INV_PHI, 0, PHI ),\n\t/*@__PURE__*/ new Vector3( PHI, INV_PHI, 0 ),\n\t/*@__PURE__*/ new Vector3( - PHI, INV_PHI, 0 ) ];\n\n/**\n * This class generates a Prefiltered, Mipmapped Radiance Environment Map\n * (PMREM) from a cubeMap environment texture. This allows different levels of\n * blur to be quickly accessed based on material roughness. It is packed into a\n * special CubeUV format that allows us to perform custom interpolation so that\n * we can support nonlinear formats such as RGBE. Unlike a traditional mipmap\n * chain, it only goes down to the LOD_MIN level (above), and then creates extra\n * even more filtered 'mips' at the same LOD_MIN resolution, associated with\n * higher roughness levels. In this way we maintain resolution to smoothly\n * interpolate diffuse lighting while limiting sampling computation.\n *\n * Paper: Fast, Accurate Image-Based Lighting\n * https://drive.google.com/file/d/15y8r_UpKlU9SvV4ILb0C3qCPecS8pvLz/view\n*/\n\nclass PMREMGenerator {\n\n\tconstructor( renderer ) {\n\n\t\tthis._renderer = renderer;\n\t\tthis._pingPongRenderTarget = null;\n\n\t\tthis._lodMax = 0;\n\t\tthis._cubeSize = 0;\n\t\tthis._lodPlanes = [];\n\t\tthis._sizeLods = [];\n\t\tthis._sigmas = [];\n\n\t\tthis._blurMaterial = null;\n\t\tthis._cubemapMaterial = null;\n\t\tthis._equirectMaterial = null;\n\n\t\tthis._compileMaterial( this._blurMaterial );\n\n\t}\n\n\t/**\n\t * Generates a PMREM from a supplied Scene, which can be faster than using an\n\t * image if networking bandwidth is low. Optional sigma specifies a blur radius\n\t * in radians to be applied to the scene before PMREM generation. Optional near\n\t * and far planes ensure the scene is rendered in its entirety (the cubeCamera\n\t * is placed at the origin).\n\t */\n\tfromScene( scene, sigma = 0, near = 0.1, far = 100 ) {\n\n\t\t_oldTarget = this._renderer.getRenderTarget();\n\n\t\tthis._setSize( 256 );\n\n\t\tconst cubeUVRenderTarget = this._allocateTargets();\n\t\tcubeUVRenderTarget.depthBuffer = true;\n\n\t\tthis._sceneToCubeUV( scene, near, far, cubeUVRenderTarget );\n\n\t\tif ( sigma > 0 ) {\n\n\t\t\tthis._blur( cubeUVRenderTarget, 0, 0, sigma );\n\n\t\t}\n\n\t\tthis._applyPMREM( cubeUVRenderTarget );\n\t\tthis._cleanup( cubeUVRenderTarget );\n\n\t\treturn cubeUVRenderTarget;\n\n\t}\n\n\t/**\n\t * Generates a PMREM from an equirectangular texture, which can be either LDR\n\t * or HDR. The ideal input image size is 1k (1024 x 512),\n\t * as this matches best with the 256 x 256 cubemap output.\n\t */\n\tfromEquirectangular( equirectangular, renderTarget = null ) {\n\n\t\treturn this._fromTexture( equirectangular, renderTarget );\n\n\t}\n\n\t/**\n\t * Generates a PMREM from an cubemap texture, which can be either LDR\n\t * or HDR. The ideal input cube size is 256 x 256,\n\t * as this matches best with the 256 x 256 cubemap output.\n\t */\n\tfromCubemap( cubemap, renderTarget = null ) {\n\n\t\treturn this._fromTexture( cubemap, renderTarget );\n\n\t}\n\n\t/**\n\t * Pre-compiles the cubemap shader. You can get faster start-up by invoking this method during\n\t * your texture's network fetch for increased concurrency.\n\t */\n\tcompileCubemapShader() {\n\n\t\tif ( this._cubemapMaterial === null ) {\n\n\t\t\tthis._cubemapMaterial = _getCubemapMaterial();\n\t\t\tthis._compileMaterial( this._cubemapMaterial );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Pre-compiles the equirectangular shader. You can get faster start-up by invoking this method during\n\t * your texture's network fetch for increased concurrency.\n\t */\n\tcompileEquirectangularShader() {\n\n\t\tif ( this._equirectMaterial === null ) {\n\n\t\t\tthis._equirectMaterial = _getEquirectMaterial();\n\t\t\tthis._compileMaterial( this._equirectMaterial );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Disposes of the PMREMGenerator's internal memory. Note that PMREMGenerator is a static class,\n\t * so you should not need more than one PMREMGenerator object. If you do, calling dispose() on\n\t * one of them will cause any others to also become unusable.\n\t */\n\tdispose() {\n\n\t\tthis._dispose();\n\n\t\tif ( this._cubemapMaterial !== null ) this._cubemapMaterial.dispose();\n\t\tif ( this._equirectMaterial !== null ) this._equirectMaterial.dispose();\n\n\t}\n\n\t// private interface\n\n\t_setSize( cubeSize ) {\n\n\t\tthis._lodMax = Math.floor( Math.log2( cubeSize ) );\n\t\tthis._cubeSize = Math.pow( 2, this._lodMax );\n\n\t}\n\n\t_dispose() {\n\n\t\tif ( this._blurMaterial !== null ) this._blurMaterial.dispose();\n\n\t\tif ( this._pingPongRenderTarget !== null ) this._pingPongRenderTarget.dispose();\n\n\t\tfor ( let i = 0; i < this._lodPlanes.length; i ++ ) {\n\n\t\t\tthis._lodPlanes[ i ].dispose();\n\n\t\t}\n\n\t}\n\n\t_cleanup( outputTarget ) {\n\n\t\tthis._renderer.setRenderTarget( _oldTarget );\n\t\toutputTarget.scissorTest = false;\n\t\t_setViewport( outputTarget, 0, 0, outputTarget.width, outputTarget.height );\n\n\t}\n\n\t_fromTexture( texture, renderTarget ) {\n\n\t\tif ( texture.mapping === CubeReflectionMapping || texture.mapping === CubeRefractionMapping ) {\n\n\t\t\tthis._setSize( texture.image.length === 0 ? 16 : ( texture.image[ 0 ].width || texture.image[ 0 ].image.width ) );\n\n\t\t} else { // Equirectangular\n\n\t\t\tthis._setSize( texture.image.width / 4 );\n\n\t\t}\n\n\t\t_oldTarget = this._renderer.getRenderTarget();\n\n\t\tconst cubeUVRenderTarget = renderTarget || this._allocateTargets();\n\t\tthis._textureToCubeUV( texture, cubeUVRenderTarget );\n\t\tthis._applyPMREM( cubeUVRenderTarget );\n\t\tthis._cleanup( cubeUVRenderTarget );\n\n\t\treturn cubeUVRenderTarget;\n\n\t}\n\n\t_allocateTargets() {\n\n\t\tconst width = 3 * Math.max( this._cubeSize, 16 * 7 );\n\t\tconst height = 4 * this._cubeSize;\n\n\t\tconst params = {\n\t\t\tmagFilter: LinearFilter,\n\t\t\tminFilter: LinearFilter,\n\t\t\tgenerateMipmaps: false,\n\t\t\ttype: HalfFloatType,\n\t\t\tformat: RGBAFormat,\n\t\t\tencoding: LinearEncoding,\n\t\t\tdepthBuffer: false\n\t\t};\n\n\t\tconst cubeUVRenderTarget = _createRenderTarget( width, height, params );\n\n\t\tif ( this._pingPongRenderTarget === null || this._pingPongRenderTarget.width !== width ) {\n\n\t\t\tif ( this._pingPongRenderTarget !== null ) {\n\n\t\t\t\tthis._dispose();\n\n\t\t\t}\n\n\t\t\tthis._pingPongRenderTarget = _createRenderTarget( width, height, params );\n\n\t\t\tconst { _lodMax } = this;\n\t\t\t( { sizeLods: this._sizeLods, lodPlanes: this._lodPlanes, sigmas: this._sigmas } = _createPlanes( _lodMax ) );\n\n\t\t\tthis._blurMaterial = _getBlurShader( _lodMax, width, height );\n\n\t\t}\n\n\t\treturn cubeUVRenderTarget;\n\n\t}\n\n\t_compileMaterial( material ) {\n\n\t\tconst tmpMesh = new Mesh( this._lodPlanes[ 0 ], material );\n\t\tthis._renderer.compile( tmpMesh, _flatCamera );\n\n\t}\n\n\t_sceneToCubeUV( scene, near, far, cubeUVRenderTarget ) {\n\n\t\tconst fov = 90;\n\t\tconst aspect = 1;\n\t\tconst cubeCamera = new PerspectiveCamera( fov, aspect, near, far );\n\t\tconst upSign = [ 1, - 1, 1, 1, 1, 1 ];\n\t\tconst forwardSign = [ 1, 1, 1, - 1, - 1, - 1 ];\n\t\tconst renderer = this._renderer;\n\n\t\tconst originalAutoClear = renderer.autoClear;\n\t\tconst toneMapping = renderer.toneMapping;\n\t\trenderer.getClearColor( _clearColor );\n\n\t\trenderer.toneMapping = NoToneMapping;\n\t\trenderer.autoClear = false;\n\n\t\tconst backgroundMaterial = new MeshBasicMaterial( {\n\t\t\tname: 'PMREM.Background',\n\t\t\tside: BackSide,\n\t\t\tdepthWrite: false,\n\t\t\tdepthTest: false,\n\t\t} );\n\n\t\tconst backgroundBox = new Mesh( new BoxGeometry(), backgroundMaterial );\n\n\t\tlet useSolidColor = false;\n\t\tconst background = scene.background;\n\n\t\tif ( background ) {\n\n\t\t\tif ( background.isColor ) {\n\n\t\t\t\tbackgroundMaterial.color.copy( background );\n\t\t\t\tscene.background = null;\n\t\t\t\tuseSolidColor = true;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tbackgroundMaterial.color.copy( _clearColor );\n\t\t\tuseSolidColor = true;\n\n\t\t}\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst col = i % 3;\n\n\t\t\tif ( col === 0 ) {\n\n\t\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\n\t\t\t\tcubeCamera.lookAt( forwardSign[ i ], 0, 0 );\n\n\t\t\t} else if ( col === 1 ) {\n\n\t\t\t\tcubeCamera.up.set( 0, 0, upSign[ i ] );\n\t\t\t\tcubeCamera.lookAt( 0, forwardSign[ i ], 0 );\n\n\t\t\t} else {\n\n\t\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\n\t\t\t\tcubeCamera.lookAt( 0, 0, forwardSign[ i ] );\n\n\t\t\t}\n\n\t\t\tconst size = this._cubeSize;\n\n\t\t\t_setViewport( cubeUVRenderTarget, col * size, i > 2 ? size : 0, size, size );\n\n\t\t\trenderer.setRenderTarget( cubeUVRenderTarget );\n\n\t\t\tif ( useSolidColor ) {\n\n\t\t\t\trenderer.render( backgroundBox, cubeCamera );\n\n\t\t\t}\n\n\t\t\trenderer.render( scene, cubeCamera );\n\n\t\t}\n\n\t\tbackgroundBox.geometry.dispose();\n\t\tbackgroundBox.material.dispose();\n\n\t\trenderer.toneMapping = toneMapping;\n\t\trenderer.autoClear = originalAutoClear;\n\t\tscene.background = background;\n\n\t}\n\n\t_textureToCubeUV( texture, cubeUVRenderTarget ) {\n\n\t\tconst renderer = this._renderer;\n\n\t\tconst isCubeTexture = ( texture.mapping === CubeReflectionMapping || texture.mapping === CubeRefractionMapping );\n\n\t\tif ( isCubeTexture ) {\n\n\t\t\tif ( this._cubemapMaterial === null ) {\n\n\t\t\t\tthis._cubemapMaterial = _getCubemapMaterial();\n\n\t\t\t}\n\n\t\t\tthis._cubemapMaterial.uniforms.flipEnvMap.value = ( texture.isRenderTargetTexture === false ) ? - 1 : 1;\n\n\t\t} else {\n\n\t\t\tif ( this._equirectMaterial === null ) {\n\n\t\t\t\tthis._equirectMaterial = _getEquirectMaterial();\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst material = isCubeTexture ? this._cubemapMaterial : this._equirectMaterial;\n\t\tconst mesh = new Mesh( this._lodPlanes[ 0 ], material );\n\n\t\tconst uniforms = material.uniforms;\n\n\t\tuniforms[ 'envMap' ].value = texture;\n\n\t\tconst size = this._cubeSize;\n\n\t\t_setViewport( cubeUVRenderTarget, 0, 0, 3 * size, 2 * size );\n\n\t\trenderer.setRenderTarget( cubeUVRenderTarget );\n\t\trenderer.render( mesh, _flatCamera );\n\n\t}\n\n\t_applyPMREM( cubeUVRenderTarget ) {\n\n\t\tconst renderer = this._renderer;\n\t\tconst autoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\tfor ( let i = 1; i < this._lodPlanes.length; i ++ ) {\n\n\t\t\tconst sigma = Math.sqrt( this._sigmas[ i ] * this._sigmas[ i ] - this._sigmas[ i - 1 ] * this._sigmas[ i - 1 ] );\n\n\t\t\tconst poleAxis = _axisDirections[ ( i - 1 ) % _axisDirections.length ];\n\n\t\t\tthis._blur( cubeUVRenderTarget, i - 1, i, sigma, poleAxis );\n\n\t\t}\n\n\t\trenderer.autoClear = autoClear;\n\n\t}\n\n\t/**\n\t * This is a two-pass Gaussian blur for a cubemap. Normally this is done\n\t * vertically and horizontally, but this breaks down on a cube. Here we apply\n\t * the blur latitudinally (around the poles), and then longitudinally (towards\n\t * the poles) to approximate the orthogonally-separable blur. It is least\n\t * accurate at the poles, but still does a decent job.\n\t */\n\t_blur( cubeUVRenderTarget, lodIn, lodOut, sigma, poleAxis ) {\n\n\t\tconst pingPongRenderTarget = this._pingPongRenderTarget;\n\n\t\tthis._halfBlur(\n\t\t\tcubeUVRenderTarget,\n\t\t\tpingPongRenderTarget,\n\t\t\tlodIn,\n\t\t\tlodOut,\n\t\t\tsigma,\n\t\t\t'latitudinal',\n\t\t\tpoleAxis );\n\n\t\tthis._halfBlur(\n\t\t\tpingPongRenderTarget,\n\t\t\tcubeUVRenderTarget,\n\t\t\tlodOut,\n\t\t\tlodOut,\n\t\t\tsigma,\n\t\t\t'longitudinal',\n\t\t\tpoleAxis );\n\n\t}\n\n\t_halfBlur( targetIn, targetOut, lodIn, lodOut, sigmaRadians, direction, poleAxis ) {\n\n\t\tconst renderer = this._renderer;\n\t\tconst blurMaterial = this._blurMaterial;\n\n\t\tif ( direction !== 'latitudinal' && direction !== 'longitudinal' ) {\n\n\t\t\tconsole.error(\n\t\t\t\t'blur direction must be either latitudinal or longitudinal!' );\n\n\t\t}\n\n\t\t// Number of standard deviations at which to cut off the discrete approximation.\n\t\tconst STANDARD_DEVIATIONS = 3;\n\n\t\tconst blurMesh = new Mesh( this._lodPlanes[ lodOut ], blurMaterial );\n\t\tconst blurUniforms = blurMaterial.uniforms;\n\n\t\tconst pixels = this._sizeLods[ lodIn ] - 1;\n\t\tconst radiansPerPixel = isFinite( sigmaRadians ) ? Math.PI / ( 2 * pixels ) : 2 * Math.PI / ( 2 * MAX_SAMPLES - 1 );\n\t\tconst sigmaPixels = sigmaRadians / radiansPerPixel;\n\t\tconst samples = isFinite( sigmaRadians ) ? 1 + Math.floor( STANDARD_DEVIATIONS * sigmaPixels ) : MAX_SAMPLES;\n\n\t\tif ( samples > MAX_SAMPLES ) {\n\n\t\t\tconsole.warn( `sigmaRadians, ${\n\t\t\t\tsigmaRadians}, is too large and will clip, as it requested ${\n\t\t\t\tsamples} samples when the maximum is set to ${MAX_SAMPLES}` );\n\n\t\t}\n\n\t\tconst weights = [];\n\t\tlet sum = 0;\n\n\t\tfor ( let i = 0; i < MAX_SAMPLES; ++ i ) {\n\n\t\t\tconst x = i / sigmaPixels;\n\t\t\tconst weight = Math.exp( - x * x / 2 );\n\t\t\tweights.push( weight );\n\n\t\t\tif ( i === 0 ) {\n\n\t\t\t\tsum += weight;\n\n\t\t\t} else if ( i < samples ) {\n\n\t\t\t\tsum += 2 * weight;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let i = 0; i < weights.length; i ++ ) {\n\n\t\t\tweights[ i ] = weights[ i ] / sum;\n\n\t\t}\n\n\t\tblurUniforms[ 'envMap' ].value = targetIn.texture;\n\t\tblurUniforms[ 'samples' ].value = samples;\n\t\tblurUniforms[ 'weights' ].value = weights;\n\t\tblurUniforms[ 'latitudinal' ].value = direction === 'latitudinal';\n\n\t\tif ( poleAxis ) {\n\n\t\t\tblurUniforms[ 'poleAxis' ].value = poleAxis;\n\n\t\t}\n\n\t\tconst { _lodMax } = this;\n\t\tblurUniforms[ 'dTheta' ].value = radiansPerPixel;\n\t\tblurUniforms[ 'mipInt' ].value = _lodMax - lodIn;\n\n\t\tconst outputSize = this._sizeLods[ lodOut ];\n\t\tconst x = 3 * outputSize * ( lodOut > _lodMax - LOD_MIN ? lodOut - _lodMax + LOD_MIN : 0 );\n\t\tconst y = 4 * ( this._cubeSize - outputSize );\n\n\t\t_setViewport( targetOut, x, y, 3 * outputSize, 2 * outputSize );\n\t\trenderer.setRenderTarget( targetOut );\n\t\trenderer.render( blurMesh, _flatCamera );\n\n\t}\n\n}\n\n\n\nfunction _createPlanes( lodMax ) {\n\n\tconst lodPlanes = [];\n\tconst sizeLods = [];\n\tconst sigmas = [];\n\n\tlet lod = lodMax;\n\n\tconst totalLods = lodMax - LOD_MIN + 1 + EXTRA_LOD_SIGMA.length;\n\n\tfor ( let i = 0; i < totalLods; i ++ ) {\n\n\t\tconst sizeLod = Math.pow( 2, lod );\n\t\tsizeLods.push( sizeLod );\n\t\tlet sigma = 1.0 / sizeLod;\n\n\t\tif ( i > lodMax - LOD_MIN ) {\n\n\t\t\tsigma = EXTRA_LOD_SIGMA[ i - lodMax + LOD_MIN - 1 ];\n\n\t\t} else if ( i === 0 ) {\n\n\t\t\tsigma = 0;\n\n\t\t}\n\n\t\tsigmas.push( sigma );\n\n\t\tconst texelSize = 1.0 / ( sizeLod - 2 );\n\t\tconst min = - texelSize;\n\t\tconst max = 1 + texelSize;\n\t\tconst uv1 = [ min, min, max, min, max, max, min, min, max, max, min, max ];\n\n\t\tconst cubeFaces = 6;\n\t\tconst vertices = 6;\n\t\tconst positionSize = 3;\n\t\tconst uvSize = 2;\n\t\tconst faceIndexSize = 1;\n\n\t\tconst position = new Float32Array( positionSize * vertices * cubeFaces );\n\t\tconst uv = new Float32Array( uvSize * vertices * cubeFaces );\n\t\tconst faceIndex = new Float32Array( faceIndexSize * vertices * cubeFaces );\n\n\t\tfor ( let face = 0; face < cubeFaces; face ++ ) {\n\n\t\t\tconst x = ( face % 3 ) * 2 / 3 - 1;\n\t\t\tconst y = face > 2 ? 0 : - 1;\n\t\t\tconst coordinates = [\n\t\t\t\tx, y, 0,\n\t\t\t\tx + 2 / 3, y, 0,\n\t\t\t\tx + 2 / 3, y + 1, 0,\n\t\t\t\tx, y, 0,\n\t\t\t\tx + 2 / 3, y + 1, 0,\n\t\t\t\tx, y + 1, 0\n\t\t\t];\n\t\t\tposition.set( coordinates, positionSize * vertices * face );\n\t\t\tuv.set( uv1, uvSize * vertices * face );\n\t\t\tconst fill = [ face, face, face, face, face, face ];\n\t\t\tfaceIndex.set( fill, faceIndexSize * vertices * face );\n\n\t\t}\n\n\t\tconst planes = new BufferGeometry();\n\t\tplanes.setAttribute( 'position', new BufferAttribute( position, positionSize ) );\n\t\tplanes.setAttribute( 'uv', new BufferAttribute( uv, uvSize ) );\n\t\tplanes.setAttribute( 'faceIndex', new BufferAttribute( faceIndex, faceIndexSize ) );\n\t\tlodPlanes.push( planes );\n\n\t\tif ( lod > LOD_MIN ) {\n\n\t\t\tlod --;\n\n\t\t}\n\n\t}\n\n\treturn { lodPlanes, sizeLods, sigmas };\n\n}\n\nfunction _createRenderTarget( width, height, params ) {\n\n\tconst cubeUVRenderTarget = new WebGLRenderTarget( width, height, params );\n\tcubeUVRenderTarget.texture.mapping = CubeUVReflectionMapping;\n\tcubeUVRenderTarget.texture.name = 'PMREM.cubeUv';\n\tcubeUVRenderTarget.scissorTest = true;\n\treturn cubeUVRenderTarget;\n\n}\n\nfunction _setViewport( target, x, y, width, height ) {\n\n\ttarget.viewport.set( x, y, width, height );\n\ttarget.scissor.set( x, y, width, height );\n\n}\n\nfunction _getBlurShader( lodMax, width, height ) {\n\n\tconst weights = new Float32Array( MAX_SAMPLES );\n\tconst poleAxis = new Vector3( 0, 1, 0 );\n\tconst shaderMaterial = new ShaderMaterial( {\n\n\t\tname: 'SphericalGaussianBlur',\n\n\t\tdefines: {\n\t\t\t'n': MAX_SAMPLES,\n\t\t\t'CUBEUV_TEXEL_WIDTH': 1.0 / width,\n\t\t\t'CUBEUV_TEXEL_HEIGHT': 1.0 / height,\n\t\t\t'CUBEUV_MAX_MIP': `${lodMax}.0`,\n\t\t},\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'samples': { value: 1 },\n\t\t\t'weights': { value: weights },\n\t\t\t'latitudinal': { value: false },\n\t\t\t'dTheta': { value: 0 },\n\t\t\t'mipInt': { value: 0 },\n\t\t\t'poleAxis': { value: poleAxis }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\treturn shaderMaterial;\n\n}\n\nfunction _getEquirectMaterial() {\n\n\treturn new ShaderMaterial( {\n\n\t\tname: 'EquirectangularToCubeUV',\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n}\n\nfunction _getCubemapMaterial() {\n\n\treturn new ShaderMaterial( {\n\n\t\tname: 'CubemapToCubeUV',\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'flipEnvMap': { value: - 1 }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n}\n\nfunction _getCommonVertexShader() {\n\n\treturn /* glsl */`\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t`;\n\n}\n\nfunction WebGLCubeUVMaps( renderer ) {\n\n\tlet cubeUVmaps = new WeakMap();\n\n\tlet pmremGenerator = null;\n\n\tfunction get( texture ) {\n\n\t\tif ( texture && texture.isTexture ) {\n\n\t\t\tconst mapping = texture.mapping;\n\n\t\t\tconst isEquirectMap = ( mapping === EquirectangularReflectionMapping || mapping === EquirectangularRefractionMapping );\n\t\t\tconst isCubeMap = ( mapping === CubeReflectionMapping || mapping === CubeRefractionMapping );\n\n\t\t\t// equirect/cube map to cubeUV conversion\n\n\t\t\tif ( isEquirectMap || isCubeMap ) {\n\n\t\t\t\tif ( texture.isRenderTargetTexture && texture.needsPMREMUpdate === true ) {\n\n\t\t\t\t\ttexture.needsPMREMUpdate = false;\n\n\t\t\t\t\tlet renderTarget = cubeUVmaps.get( texture );\n\n\t\t\t\t\tif ( pmremGenerator === null ) pmremGenerator = new PMREMGenerator( renderer );\n\n\t\t\t\t\trenderTarget = isEquirectMap ? pmremGenerator.fromEquirectangular( texture, renderTarget ) : pmremGenerator.fromCubemap( texture, renderTarget );\n\t\t\t\t\tcubeUVmaps.set( texture, renderTarget );\n\n\t\t\t\t\treturn renderTarget.texture;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( cubeUVmaps.has( texture ) ) {\n\n\t\t\t\t\t\treturn cubeUVmaps.get( texture ).texture;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst image = texture.image;\n\n\t\t\t\t\t\tif ( ( isEquirectMap && image && image.height > 0 ) || ( isCubeMap && image && isCubeTextureComplete( image ) ) ) {\n\n\t\t\t\t\t\t\tif ( pmremGenerator === null ) pmremGenerator = new PMREMGenerator( renderer );\n\n\t\t\t\t\t\t\tconst renderTarget = isEquirectMap ? pmremGenerator.fromEquirectangular( texture ) : pmremGenerator.fromCubemap( texture );\n\t\t\t\t\t\t\tcubeUVmaps.set( texture, renderTarget );\n\n\t\t\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\t\t\t\t\treturn renderTarget.texture;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// image not yet ready. try the conversion next frame\n\n\t\t\t\t\t\t\treturn null;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tfunction isCubeTextureComplete( image ) {\n\n\t\tlet count = 0;\n\t\tconst length = 6;\n\n\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\tif ( image[ i ] !== undefined ) count ++;\n\n\t\t}\n\n\t\treturn count === length;\n\n\n\t}\n\n\tfunction onTextureDispose( event ) {\n\n\t\tconst texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tconst cubemapUV = cubeUVmaps.get( texture );\n\n\t\tif ( cubemapUV !== undefined ) {\n\n\t\t\tcubeUVmaps.delete( texture );\n\t\t\tcubemapUV.dispose();\n\n\t\t}\n\n\t}\n\n\tfunction dispose() {\n\n\t\tcubeUVmaps = new WeakMap();\n\n\t\tif ( pmremGenerator !== null ) {\n\n\t\t\tpmremGenerator.dispose();\n\t\t\tpmremGenerator = null;\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction WebGLExtensions( gl ) {\n\n\tconst extensions = {};\n\n\tfunction getExtension( name ) {\n\n\t\tif ( extensions[ name ] !== undefined ) {\n\n\t\t\treturn extensions[ name ];\n\n\t\t}\n\n\t\tlet extension;\n\n\t\tswitch ( name ) {\n\n\t\t\tcase 'WEBGL_depth_texture':\n\t\t\t\textension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'EXT_texture_filter_anisotropic':\n\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'WEBGL_compressed_texture_s3tc':\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\textension = gl.getExtension( name );\n\n\t\t}\n\n\t\textensions[ name ] = extension;\n\n\t\treturn extension;\n\n\t}\n\n\treturn {\n\n\t\thas: function ( name ) {\n\n\t\t\treturn getExtension( name ) !== null;\n\n\t\t},\n\n\t\tinit: function ( capabilities ) {\n\n\t\t\tif ( capabilities.isWebGL2 ) {\n\n\t\t\t\tgetExtension( 'EXT_color_buffer_float' );\n\n\t\t\t} else {\n\n\t\t\t\tgetExtension( 'WEBGL_depth_texture' );\n\t\t\t\tgetExtension( 'OES_texture_float' );\n\t\t\t\tgetExtension( 'OES_texture_half_float' );\n\t\t\t\tgetExtension( 'OES_texture_half_float_linear' );\n\t\t\t\tgetExtension( 'OES_standard_derivatives' );\n\t\t\t\tgetExtension( 'OES_element_index_uint' );\n\t\t\t\tgetExtension( 'OES_vertex_array_object' );\n\t\t\t\tgetExtension( 'ANGLE_instanced_arrays' );\n\n\t\t\t}\n\n\t\t\tgetExtension( 'OES_texture_float_linear' );\n\t\t\tgetExtension( 'EXT_color_buffer_half_float' );\n\t\t\tgetExtension( 'WEBGL_multisampled_render_to_texture' );\n\n\t\t},\n\n\t\tget: function ( name ) {\n\n\t\t\tconst extension = getExtension( name );\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\n\n\t\t\t}\n\n\t\t\treturn extension;\n\n\t\t}\n\n\t};\n\n}\n\nfunction WebGLGeometries( gl, attributes, info, bindingStates ) {\n\n\tconst geometries = {};\n\tconst wireframeAttributes = new WeakMap();\n\n\tfunction onGeometryDispose( event ) {\n\n\t\tconst geometry = event.target;\n\n\t\tif ( geometry.index !== null ) {\n\n\t\t\tattributes.remove( geometry.index );\n\n\t\t}\n\n\t\tfor ( const name in geometry.attributes ) {\n\n\t\t\tattributes.remove( geometry.attributes[ name ] );\n\n\t\t}\n\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\n\n\t\tdelete geometries[ geometry.id ];\n\n\t\tconst attribute = wireframeAttributes.get( geometry );\n\n\t\tif ( attribute ) {\n\n\t\t\tattributes.remove( attribute );\n\t\t\twireframeAttributes.delete( geometry );\n\n\t\t}\n\n\t\tbindingStates.releaseStatesOfGeometry( geometry );\n\n\t\tif ( geometry.isInstancedBufferGeometry === true ) {\n\n\t\t\tdelete geometry._maxInstanceCount;\n\n\t\t}\n\n\t\t//\n\n\t\tinfo.memory.geometries --;\n\n\t}\n\n\tfunction get( object, geometry ) {\n\n\t\tif ( geometries[ geometry.id ] === true ) return geometry;\n\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\n\n\t\tgeometries[ geometry.id ] = true;\n\n\t\tinfo.memory.geometries ++;\n\n\t\treturn geometry;\n\n\t}\n\n\tfunction update( geometry ) {\n\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\t// Updating index buffer in VAO now. See WebGLBindingStates.\n\n\t\tfor ( const name in geometryAttributes ) {\n\n\t\t\tattributes.update( geometryAttributes[ name ], 34962 );\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst array = morphAttributes[ name ];\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tattributes.update( array[ i ], 34962 );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction updateWireframeAttribute( geometry ) {\n\n\t\tconst indices = [];\n\n\t\tconst geometryIndex = geometry.index;\n\t\tconst geometryPosition = geometry.attributes.position;\n\t\tlet version = 0;\n\n\t\tif ( geometryIndex !== null ) {\n\n\t\t\tconst array = geometryIndex.array;\n\t\t\tversion = geometryIndex.version;\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\t\tconst a = array[ i + 0 ];\n\t\t\t\tconst b = array[ i + 1 ];\n\t\t\t\tconst c = array[ i + 2 ];\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst array = geometryPosition.array;\n\t\t\tversion = geometryPosition.version;\n\n\t\t\tfor ( let i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\n\n\t\t\t\tconst a = i + 0;\n\t\t\t\tconst b = i + 1;\n\t\t\t\tconst c = i + 2;\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst attribute = new ( arrayNeedsUint32( indices ) ? Uint32BufferAttribute : Uint16BufferAttribute )( indices, 1 );\n\t\tattribute.version = version;\n\n\t\t// Updating index buffer in VAO now. See WebGLBindingStates\n\n\t\t//\n\n\t\tconst previousAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( previousAttribute ) attributes.remove( previousAttribute );\n\n\t\t//\n\n\t\twireframeAttributes.set( geometry, attribute );\n\n\t}\n\n\tfunction getWireframeAttribute( geometry ) {\n\n\t\tconst currentAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( currentAttribute ) {\n\n\t\t\tconst geometryIndex = geometry.index;\n\n\t\t\tif ( geometryIndex !== null ) {\n\n\t\t\t\t// if the attribute is obsolete, create a new one\n\n\t\t\t\tif ( currentAttribute.version < geometryIndex.version ) {\n\n\t\t\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t}\n\n\t\treturn wireframeAttributes.get( geometry );\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tupdate: update,\n\n\t\tgetWireframeAttribute: getWireframeAttribute\n\n\t};\n\n}\n\nfunction WebGLIndexedBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tlet mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tlet type, bytesPerElement;\n\n\tfunction setIndex( value ) {\n\n\t\ttype = value.type;\n\t\tbytesPerElement = value.bytesPerElement;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawElements( mode, count, type, start * bytesPerElement );\n\n\t\tinfo.update( count, mode, 1 );\n\n\t}\n\n\tfunction renderInstances( start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tlet extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawElementsInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawElementsInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, count, type, start * bytesPerElement, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.setIndex = setIndex;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\nfunction WebGLInfo( gl ) {\n\n\tconst memory = {\n\t\tgeometries: 0,\n\t\ttextures: 0\n\t};\n\n\tconst render = {\n\t\tframe: 0,\n\t\tcalls: 0,\n\t\ttriangles: 0,\n\t\tpoints: 0,\n\t\tlines: 0\n\t};\n\n\tfunction update( count, mode, instanceCount ) {\n\n\t\trender.calls ++;\n\n\t\tswitch ( mode ) {\n\n\t\t\tcase 4:\n\t\t\t\trender.triangles += instanceCount * ( count / 3 );\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\t\t\t\trender.lines += instanceCount * ( count / 2 );\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\t\t\t\trender.lines += instanceCount * ( count - 1 );\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\trender.lines += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tcase 0:\n\t\t\t\trender.points += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.error( 'THREE.WebGLInfo: Unknown draw mode:', mode );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\trender.frame ++;\n\t\trender.calls = 0;\n\t\trender.triangles = 0;\n\t\trender.points = 0;\n\t\trender.lines = 0;\n\n\t}\n\n\treturn {\n\t\tmemory: memory,\n\t\trender: render,\n\t\tprograms: null,\n\t\tautoReset: true,\n\t\treset: reset,\n\t\tupdate: update\n\t};\n\n}\n\nfunction numericalSort( a, b ) {\n\n\treturn a[ 0 ] - b[ 0 ];\n\n}\n\nfunction absNumericalSort( a, b ) {\n\n\treturn Math.abs( b[ 1 ] ) - Math.abs( a[ 1 ] );\n\n}\n\nfunction WebGLMorphtargets( gl, capabilities, textures ) {\n\n\tconst influencesList = {};\n\tconst morphInfluences = new Float32Array( 8 );\n\tconst morphTextures = new WeakMap();\n\tconst morph = new Vector4();\n\n\tconst workInfluences = [];\n\n\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\tworkInfluences[ i ] = [ i, 0 ];\n\n\t}\n\n\tfunction update( object, geometry, material, program ) {\n\n\t\tconst objectInfluences = object.morphTargetInfluences;\n\n\t\tif ( capabilities.isWebGL2 === true ) {\n\n\t\t\t// instead of using attributes, the WebGL 2 code path encodes morph targets\n\t\t\t// into an array of data textures. Each layer represents a single morph target.\n\n\t\t\tconst morphAttribute = geometry.morphAttributes.position || geometry.morphAttributes.normal || geometry.morphAttributes.color;\n\t\t\tconst morphTargetsCount = ( morphAttribute !== undefined ) ? morphAttribute.length : 0;\n\n\t\t\tlet entry = morphTextures.get( geometry );\n\n\t\t\tif ( entry === undefined || entry.count !== morphTargetsCount ) {\n\n\t\t\t\tif ( entry !== undefined ) entry.texture.dispose();\n\n\t\t\t\tconst hasMorphPosition = geometry.morphAttributes.position !== undefined;\n\t\t\t\tconst hasMorphNormals = geometry.morphAttributes.normal !== undefined;\n\t\t\t\tconst hasMorphColors = geometry.morphAttributes.color !== undefined;\n\n\t\t\t\tconst morphTargets = geometry.morphAttributes.position || [];\n\t\t\t\tconst morphNormals = geometry.morphAttributes.normal || [];\n\t\t\t\tconst morphColors = geometry.morphAttributes.color || [];\n\n\t\t\t\tlet vertexDataCount = 0;\n\n\t\t\t\tif ( hasMorphPosition === true ) vertexDataCount = 1;\n\t\t\t\tif ( hasMorphNormals === true ) vertexDataCount = 2;\n\t\t\t\tif ( hasMorphColors === true ) vertexDataCount = 3;\n\n\t\t\t\tlet width = geometry.attributes.position.count * vertexDataCount;\n\t\t\t\tlet height = 1;\n\n\t\t\t\tif ( width > capabilities.maxTextureSize ) {\n\n\t\t\t\t\theight = Math.ceil( width / capabilities.maxTextureSize );\n\t\t\t\t\twidth = capabilities.maxTextureSize;\n\n\t\t\t\t}\n\n\t\t\t\tconst buffer = new Float32Array( width * height * 4 * morphTargetsCount );\n\n\t\t\t\tconst texture = new DataArrayTexture( buffer, width, height, morphTargetsCount );\n\t\t\t\ttexture.type = FloatType;\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t// fill buffer\n\n\t\t\t\tconst vertexDataStride = vertexDataCount * 4;\n\n\t\t\t\tfor ( let i = 0; i < morphTargetsCount; i ++ ) {\n\n\t\t\t\t\tconst morphTarget = morphTargets[ i ];\n\t\t\t\t\tconst morphNormal = morphNormals[ i ];\n\t\t\t\t\tconst morphColor = morphColors[ i ];\n\n\t\t\t\t\tconst offset = width * height * 4 * i;\n\n\t\t\t\t\tfor ( let j = 0; j < morphTarget.count; j ++ ) {\n\n\t\t\t\t\t\tconst stride = j * vertexDataStride;\n\n\t\t\t\t\t\tif ( hasMorphPosition === true ) {\n\n\t\t\t\t\t\t\tmorph.fromBufferAttribute( morphTarget, j );\n\n\t\t\t\t\t\t\tbuffer[ offset + stride + 0 ] = morph.x;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 1 ] = morph.y;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 2 ] = morph.z;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 3 ] = 0;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( hasMorphNormals === true ) {\n\n\t\t\t\t\t\t\tmorph.fromBufferAttribute( morphNormal, j );\n\n\t\t\t\t\t\t\tbuffer[ offset + stride + 4 ] = morph.x;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 5 ] = morph.y;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 6 ] = morph.z;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 7 ] = 0;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( hasMorphColors === true ) {\n\n\t\t\t\t\t\t\tmorph.fromBufferAttribute( morphColor, j );\n\n\t\t\t\t\t\t\tbuffer[ offset + stride + 8 ] = morph.x;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 9 ] = morph.y;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 10 ] = morph.z;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 11 ] = ( morphColor.itemSize === 4 ) ? morph.w : 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tentry = {\n\t\t\t\t\tcount: morphTargetsCount,\n\t\t\t\t\ttexture: texture,\n\t\t\t\t\tsize: new Vector2( width, height )\n\t\t\t\t};\n\n\t\t\t\tmorphTextures.set( geometry, entry );\n\n\t\t\t\tfunction disposeTexture() {\n\n\t\t\t\t\ttexture.dispose();\n\n\t\t\t\t\tmorphTextures.delete( geometry );\n\n\t\t\t\t\tgeometry.removeEventListener( 'dispose', disposeTexture );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.addEventListener( 'dispose', disposeTexture );\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tlet morphInfluencesSum = 0;\n\n\t\t\tfor ( let i = 0; i < objectInfluences.length; i ++ ) {\n\n\t\t\t\tmorphInfluencesSum += objectInfluences[ i ];\n\n\t\t\t}\n\n\t\t\tconst morphBaseInfluence = geometry.morphTargetsRelative ? 1 : 1 - morphInfluencesSum;\n\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetBaseInfluence', morphBaseInfluence );\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetInfluences', objectInfluences );\n\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetsTexture', entry.texture, textures );\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetsTextureSize', entry.size );\n\n\n\t\t} else {\n\n\t\t\t// When object doesn't have morph target influences defined, we treat it as a 0-length array\n\t\t\t// This is important to make sure we set up morphTargetBaseInfluence / morphTargetInfluences\n\n\t\t\tconst length = objectInfluences === undefined ? 0 : objectInfluences.length;\n\n\t\t\tlet influences = influencesList[ geometry.id ];\n\n\t\t\tif ( influences === undefined || influences.length !== length ) {\n\n\t\t\t\t// initialise list\n\n\t\t\t\tinfluences = [];\n\n\t\t\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\t\t\tinfluences[ i ] = [ i, 0 ];\n\n\t\t\t\t}\n\n\t\t\t\tinfluencesList[ geometry.id ] = influences;\n\n\t\t\t}\n\n\t\t\t// Collect influences\n\n\t\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\t\tconst influence = influences[ i ];\n\n\t\t\t\tinfluence[ 0 ] = i;\n\t\t\t\tinfluence[ 1 ] = objectInfluences[ i ];\n\n\t\t\t}\n\n\t\t\tinfluences.sort( absNumericalSort );\n\n\t\t\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\t\t\tif ( i < length && influences[ i ][ 1 ] ) {\n\n\t\t\t\t\tworkInfluences[ i ][ 0 ] = influences[ i ][ 0 ];\n\t\t\t\t\tworkInfluences[ i ][ 1 ] = influences[ i ][ 1 ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tworkInfluences[ i ][ 0 ] = Number.MAX_SAFE_INTEGER;\n\t\t\t\t\tworkInfluences[ i ][ 1 ] = 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tworkInfluences.sort( numericalSort );\n\n\t\t\tconst morphTargets = geometry.morphAttributes.position;\n\t\t\tconst morphNormals = geometry.morphAttributes.normal;\n\n\t\t\tlet morphInfluencesSum = 0;\n\n\t\t\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\t\t\tconst influence = workInfluences[ i ];\n\t\t\t\tconst index = influence[ 0 ];\n\t\t\t\tconst value = influence[ 1 ];\n\n\t\t\t\tif ( index !== Number.MAX_SAFE_INTEGER && value ) {\n\n\t\t\t\t\tif ( morphTargets && geometry.getAttribute( 'morphTarget' + i ) !== morphTargets[ index ] ) {\n\n\t\t\t\t\t\tgeometry.setAttribute( 'morphTarget' + i, morphTargets[ index ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( morphNormals && geometry.getAttribute( 'morphNormal' + i ) !== morphNormals[ index ] ) {\n\n\t\t\t\t\t\tgeometry.setAttribute( 'morphNormal' + i, morphNormals[ index ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmorphInfluences[ i ] = value;\n\t\t\t\t\tmorphInfluencesSum += value;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( morphTargets && geometry.hasAttribute( 'morphTarget' + i ) === true ) {\n\n\t\t\t\t\t\tgeometry.deleteAttribute( 'morphTarget' + i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( morphNormals && geometry.hasAttribute( 'morphNormal' + i ) === true ) {\n\n\t\t\t\t\t\tgeometry.deleteAttribute( 'morphNormal' + i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmorphInfluences[ i ] = 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// GLSL shader uses formula baseinfluence * base + sum(target * influence)\n\t\t\t// This allows us to switch between absolute morphs and relative morphs without changing shader code\n\t\t\t// When baseinfluence = 1 - sum(influence), the above is equivalent to sum((target - base) * influence)\n\t\t\tconst morphBaseInfluence = geometry.morphTargetsRelative ? 1 : 1 - morphInfluencesSum;\n\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetBaseInfluence', morphBaseInfluence );\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetInfluences', morphInfluences );\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\tupdate: update\n\n\t};\n\n}\n\nfunction WebGLObjects( gl, geometries, attributes, info ) {\n\n\tlet updateMap = new WeakMap();\n\n\tfunction update( object ) {\n\n\t\tconst frame = info.render.frame;\n\n\t\tconst geometry = object.geometry;\n\t\tconst buffergeometry = geometries.get( object, geometry );\n\n\t\t// Update once per frame\n\n\t\tif ( updateMap.get( buffergeometry ) !== frame ) {\n\n\t\t\tgeometries.update( buffergeometry );\n\n\t\t\tupdateMap.set( buffergeometry, frame );\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh ) {\n\n\t\t\tif ( object.hasEventListener( 'dispose', onInstancedMeshDispose ) === false ) {\n\n\t\t\t\tobject.addEventListener( 'dispose', onInstancedMeshDispose );\n\n\t\t\t}\n\n\t\t\tattributes.update( object.instanceMatrix, 34962 );\n\n\t\t\tif ( object.instanceColor !== null ) {\n\n\t\t\t\tattributes.update( object.instanceColor, 34962 );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tupdateMap = new WeakMap();\n\n\t}\n\n\tfunction onInstancedMeshDispose( event ) {\n\n\t\tconst instancedMesh = event.target;\n\n\t\tinstancedMesh.removeEventListener( 'dispose', onInstancedMeshDispose );\n\n\t\tattributes.remove( instancedMesh.instanceMatrix );\n\n\t\tif ( instancedMesh.instanceColor !== null ) attributes.remove( instancedMesh.instanceColor );\n\n\t}\n\n\treturn {\n\n\t\tupdate: update,\n\t\tdispose: dispose\n\n\t};\n\n}\n\n/**\n * Uniforms of a program.\n * Those form a tree structure with a special top-level container for the root,\n * which you get by calling 'new WebGLUniforms( gl, program )'.\n *\n *\n * Properties of inner nodes including the top-level container:\n *\n * .seq - array of nested uniforms\n * .map - nested uniforms by name\n *\n *\n * Methods of all nodes except the top-level container:\n *\n * .setValue( gl, value, [textures] )\n *\n * \t\tuploads a uniform value(s)\n *  \tthe 'textures' parameter is needed for sampler uniforms\n *\n *\n * Static methods of the top-level container (textures factorizations):\n *\n * .upload( gl, seq, values, textures )\n *\n * \t\tsets uniforms in 'seq' to 'values[id].value'\n *\n * .seqWithValue( seq, values ) : filteredSeq\n *\n * \t\tfilters 'seq' entries with corresponding entry in values\n *\n *\n * Methods of the top-level container (textures factorizations):\n *\n * .setValue( gl, name, value, textures )\n *\n * \t\tsets uniform with  name 'name' to 'value'\n *\n * .setOptional( gl, obj, prop )\n *\n * \t\tlike .set for an optional property of the object\n *\n */\n\nconst emptyTexture = /*@__PURE__*/ new Texture();\nconst emptyArrayTexture = /*@__PURE__*/ new DataArrayTexture();\nconst empty3dTexture = /*@__PURE__*/ new Data3DTexture();\nconst emptyCubeTexture = /*@__PURE__*/ new CubeTexture();\n\n// --- Utilities ---\n\n// Array Caches (provide typed arrays for temporary by size)\n\nconst arrayCacheF32 = [];\nconst arrayCacheI32 = [];\n\n// Float32Array caches used for uploading Matrix uniforms\n\nconst mat4array = new Float32Array( 16 );\nconst mat3array = new Float32Array( 9 );\nconst mat2array = new Float32Array( 4 );\n\n// Flattening for arrays of vectors and matrices\n\nfunction flatten( array, nBlocks, blockSize ) {\n\n\tconst firstElem = array[ 0 ];\n\n\tif ( firstElem <= 0 || firstElem > 0 ) return array;\n\t// unoptimized: ! isNaN( firstElem )\n\t// see http://jacksondunstan.com/articles/983\n\n\tconst n = nBlocks * blockSize;\n\tlet r = arrayCacheF32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Float32Array( n );\n\t\tarrayCacheF32[ n ] = r;\n\n\t}\n\n\tif ( nBlocks !== 0 ) {\n\n\t\tfirstElem.toArray( r, 0 );\n\n\t\tfor ( let i = 1, offset = 0; i !== nBlocks; ++ i ) {\n\n\t\t\toffset += blockSize;\n\t\t\tarray[ i ].toArray( r, offset );\n\n\t\t}\n\n\t}\n\n\treturn r;\n\n}\n\nfunction arraysEqual( a, b ) {\n\n\tif ( a.length !== b.length ) return false;\n\n\tfor ( let i = 0, l = a.length; i < l; i ++ ) {\n\n\t\tif ( a[ i ] !== b[ i ] ) return false;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction copyArray( a, b ) {\n\n\tfor ( let i = 0, l = b.length; i < l; i ++ ) {\n\n\t\ta[ i ] = b[ i ];\n\n\t}\n\n}\n\n// Texture unit allocation\n\nfunction allocTexUnits( textures, n ) {\n\n\tlet r = arrayCacheI32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Int32Array( n );\n\t\tarrayCacheI32[ n ] = r;\n\n\t}\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\tr[ i ] = textures.allocateTextureUnit();\n\n\t}\n\n\treturn r;\n\n}\n\n// --- Setters ---\n\n// Note: Defining these methods externally, because they come in a bunch\n// and this way their names minify.\n\n// Single scalar\n\nfunction setValueV1f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1f( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Single float vector (from flat array or THREE.VectorN)\n\nfunction setValueV2f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y ) {\n\n\t\t\tgl.uniform2f( this.addr, v.x, v.y );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform2fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV3f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z ) {\n\n\t\t\tgl.uniform3f( this.addr, v.x, v.y, v.z );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\n\t\t}\n\n\t} else if ( v.r !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.r || cache[ 1 ] !== v.g || cache[ 2 ] !== v.b ) {\n\n\t\t\tgl.uniform3f( this.addr, v.r, v.g, v.b );\n\n\t\t\tcache[ 0 ] = v.r;\n\t\t\tcache[ 1 ] = v.g;\n\t\t\tcache[ 2 ] = v.b;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform3fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV4f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z || cache[ 3 ] !== v.w ) {\n\n\t\t\tgl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\t\t\tcache[ 3 ] = v.w;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform4fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\n// Single matrix (from flat array or THREE.MatrixN)\n\nfunction setValueM2( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix2fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat2array.set( elements );\n\n\t\tgl.uniformMatrix2fv( this.addr, false, mat2array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM3( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix3fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat3array.set( elements );\n\n\t\tgl.uniformMatrix3fv( this.addr, false, mat3array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM4( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix4fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat4array.set( elements );\n\n\t\tgl.uniformMatrix4fv( this.addr, false, mat4array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\n// Single integer / boolean\n\nfunction setValueV1i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1i( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Single integer / boolean vector (from flat array or THREE.VectorN)\n\nfunction setValueV2i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y ) {\n\n\t\t\tgl.uniform2i( this.addr, v.x, v.y );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform2iv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV3i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z ) {\n\n\t\t\tgl.uniform3i( this.addr, v.x, v.y, v.z );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform3iv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV4i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z || cache[ 3 ] !== v.w ) {\n\n\t\t\tgl.uniform4i( this.addr, v.x, v.y, v.z, v.w );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\t\t\tcache[ 3 ] = v.w;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform4iv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\n// Single unsigned integer\n\nfunction setValueV1ui( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1ui( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Single unsigned integer vector (from flat array or THREE.VectorN)\n\nfunction setValueV2ui( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y ) {\n\n\t\t\tgl.uniform2ui( this.addr, v.x, v.y );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform2uiv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV3ui( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z ) {\n\n\t\t\tgl.uniform3ui( this.addr, v.x, v.y, v.z );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform3uiv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV4ui( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z || cache[ 3 ] !== v.w ) {\n\n\t\t\tgl.uniform4ui( this.addr, v.x, v.y, v.z, v.w );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\t\t\tcache[ 3 ] = v.w;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform4uiv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\n\n// Single texture (2D / Cube)\n\nfunction setValueT1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture2D( v || emptyTexture, unit );\n\n}\n\nfunction setValueT3D1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture3D( v || empty3dTexture, unit );\n\n}\n\nfunction setValueT6( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTextureCube( v || emptyCubeTexture, unit );\n\n}\n\nfunction setValueT2DArray1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture2DArray( v || emptyArrayTexture, unit );\n\n}\n\n// Helper to pick the right setter for the singular case\n\nfunction getSingularSetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1f; // FLOAT\n\t\tcase 0x8b50: return setValueV2f; // _VEC2\n\t\tcase 0x8b51: return setValueV3f; // _VEC3\n\t\tcase 0x8b52: return setValueV4f; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2; // _MAT2\n\t\tcase 0x8b5b: return setValueM3; // _MAT3\n\t\tcase 0x8b5c: return setValueM4; // _MAT4\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1i; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2i; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3i; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4i; // _VEC4\n\n\t\tcase 0x1405: return setValueV1ui; // UINT\n\t\tcase 0x8dc6: return setValueV2ui; // _VEC2\n\t\tcase 0x8dc7: return setValueV3ui; // _VEC3\n\t\tcase 0x8dc8: return setValueV4ui; // _VEC4\n\n\t\tcase 0x8b5e: // SAMPLER_2D\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\n\t\tcase 0x8dca: // INT_SAMPLER_2D\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\n\t\t\treturn setValueT1;\n\n\t\tcase 0x8b5f: // SAMPLER_3D\n\t\tcase 0x8dcb: // INT_SAMPLER_3D\n\t\tcase 0x8dd3: // UNSIGNED_INT_SAMPLER_3D\n\t\t\treturn setValueT3D1;\n\n\t\tcase 0x8b60: // SAMPLER_CUBE\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\n\t\t\treturn setValueT6;\n\n\t\tcase 0x8dc1: // SAMPLER_2D_ARRAY\n\t\tcase 0x8dcf: // INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dd7: // UNSIGNED_INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dc4: // SAMPLER_2D_ARRAY_SHADOW\n\t\t\treturn setValueT2DArray1;\n\n\t}\n\n}\n\n\n// Array of scalars\n\nfunction setValueV1fArray( gl, v ) {\n\n\tgl.uniform1fv( this.addr, v );\n\n}\n\n// Array of vectors (from flat array or array of THREE.VectorN)\n\nfunction setValueV2fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 2 );\n\n\tgl.uniform2fv( this.addr, data );\n\n}\n\nfunction setValueV3fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 3 );\n\n\tgl.uniform3fv( this.addr, data );\n\n}\n\nfunction setValueV4fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 4 );\n\n\tgl.uniform4fv( this.addr, data );\n\n}\n\n// Array of matrices (from flat array or array of THREE.MatrixN)\n\nfunction setValueM2Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 4 );\n\n\tgl.uniformMatrix2fv( this.addr, false, data );\n\n}\n\nfunction setValueM3Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 9 );\n\n\tgl.uniformMatrix3fv( this.addr, false, data );\n\n}\n\nfunction setValueM4Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 16 );\n\n\tgl.uniformMatrix4fv( this.addr, false, data );\n\n}\n\n// Array of integer / boolean\n\nfunction setValueV1iArray( gl, v ) {\n\n\tgl.uniform1iv( this.addr, v );\n\n}\n\n// Array of integer / boolean vectors (from flat array)\n\nfunction setValueV2iArray( gl, v ) {\n\n\tgl.uniform2iv( this.addr, v );\n\n}\n\nfunction setValueV3iArray( gl, v ) {\n\n\tgl.uniform3iv( this.addr, v );\n\n}\n\nfunction setValueV4iArray( gl, v ) {\n\n\tgl.uniform4iv( this.addr, v );\n\n}\n\n// Array of unsigned integer\n\nfunction setValueV1uiArray( gl, v ) {\n\n\tgl.uniform1uiv( this.addr, v );\n\n}\n\n// Array of unsigned integer vectors (from flat array)\n\nfunction setValueV2uiArray( gl, v ) {\n\n\tgl.uniform2uiv( this.addr, v );\n\n}\n\nfunction setValueV3uiArray( gl, v ) {\n\n\tgl.uniform3uiv( this.addr, v );\n\n}\n\nfunction setValueV4uiArray( gl, v ) {\n\n\tgl.uniform4uiv( this.addr, v );\n\n}\n\n\n// Array of textures (2D / 3D / Cube / 2DArray)\n\nfunction setValueT1Array( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tif ( ! arraysEqual( cache, units ) ) {\n\n\t\tgl.uniform1iv( this.addr, units );\n\n\t\tcopyArray( cache, units );\n\n\t}\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.setTexture2D( v[ i ] || emptyTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT3DArray( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tif ( ! arraysEqual( cache, units ) ) {\n\n\t\tgl.uniform1iv( this.addr, units );\n\n\t\tcopyArray( cache, units );\n\n\t}\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.setTexture3D( v[ i ] || empty3dTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT6Array( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tif ( ! arraysEqual( cache, units ) ) {\n\n\t\tgl.uniform1iv( this.addr, units );\n\n\t\tcopyArray( cache, units );\n\n\t}\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.setTextureCube( v[ i ] || emptyCubeTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT2DArrayArray( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tif ( ! arraysEqual( cache, units ) ) {\n\n\t\tgl.uniform1iv( this.addr, units );\n\n\t\tcopyArray( cache, units );\n\n\t}\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.setTexture2DArray( v[ i ] || emptyArrayTexture, units[ i ] );\n\n\t}\n\n}\n\n\n// Helper to pick the right setter for a pure (bottom-level) array\n\nfunction getPureArraySetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1fArray; // FLOAT\n\t\tcase 0x8b50: return setValueV2fArray; // _VEC2\n\t\tcase 0x8b51: return setValueV3fArray; // _VEC3\n\t\tcase 0x8b52: return setValueV4fArray; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2Array; // _MAT2\n\t\tcase 0x8b5b: return setValueM3Array; // _MAT3\n\t\tcase 0x8b5c: return setValueM4Array; // _MAT4\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1iArray; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2iArray; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3iArray; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4iArray; // _VEC4\n\n\t\tcase 0x1405: return setValueV1uiArray; // UINT\n\t\tcase 0x8dc6: return setValueV2uiArray; // _VEC2\n\t\tcase 0x8dc7: return setValueV3uiArray; // _VEC3\n\t\tcase 0x8dc8: return setValueV4uiArray; // _VEC4\n\n\t\tcase 0x8b5e: // SAMPLER_2D\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\n\t\tcase 0x8dca: // INT_SAMPLER_2D\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\n\t\t\treturn setValueT1Array;\n\n\t\tcase 0x8b5f: // SAMPLER_3D\n\t\tcase 0x8dcb: // INT_SAMPLER_3D\n\t\tcase 0x8dd3: // UNSIGNED_INT_SAMPLER_3D\n\t\t\treturn setValueT3DArray;\n\n\t\tcase 0x8b60: // SAMPLER_CUBE\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\n\t\t\treturn setValueT6Array;\n\n\t\tcase 0x8dc1: // SAMPLER_2D_ARRAY\n\t\tcase 0x8dcf: // INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dd7: // UNSIGNED_INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dc4: // SAMPLER_2D_ARRAY_SHADOW\n\t\t\treturn setValueT2DArrayArray;\n\n\t}\n\n}\n\n// --- Uniform Classes ---\n\nclass SingleUniform {\n\n\tconstructor( id, activeInfo, addr ) {\n\n\t\tthis.id = id;\n\t\tthis.addr = addr;\n\t\tthis.cache = [];\n\t\tthis.setValue = getSingularSetter( activeInfo.type );\n\n\t\t// this.path = activeInfo.name; // DEBUG\n\n\t}\n\n}\n\nclass PureArrayUniform {\n\n\tconstructor( id, activeInfo, addr ) {\n\n\t\tthis.id = id;\n\t\tthis.addr = addr;\n\t\tthis.cache = [];\n\t\tthis.size = activeInfo.size;\n\t\tthis.setValue = getPureArraySetter( activeInfo.type );\n\n\t\t// this.path = activeInfo.name; // DEBUG\n\n\t}\n\n}\n\nclass StructuredUniform {\n\n\tconstructor( id ) {\n\n\t\tthis.id = id;\n\n\t\tthis.seq = [];\n\t\tthis.map = {};\n\n\t}\n\n\tsetValue( gl, value, textures ) {\n\n\t\tconst seq = this.seq;\n\n\t\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\t\tconst u = seq[ i ];\n\t\t\tu.setValue( gl, value[ u.id ], textures );\n\n\t\t}\n\n\t}\n\n}\n\n// --- Top-level ---\n\n// Parser - builds up the property tree from the path strings\n\nconst RePathPart = /(\\w+)(\\])?(\\[|\\.)?/g;\n\n// extracts\n// \t- the identifier (member name or array index)\n//  - followed by an optional right bracket (found when array index)\n//  - followed by an optional left bracket or dot (type of subscript)\n//\n// Note: These portions can be read in a non-overlapping fashion and\n// allow straightforward parsing of the hierarchy that WebGL encodes\n// in the uniform names.\n\nfunction addUniform( container, uniformObject ) {\n\n\tcontainer.seq.push( uniformObject );\n\tcontainer.map[ uniformObject.id ] = uniformObject;\n\n}\n\nfunction parseUniform( activeInfo, addr, container ) {\n\n\tconst path = activeInfo.name,\n\t\tpathLength = path.length;\n\n\t// reset RegExp object, because of the early exit of a previous run\n\tRePathPart.lastIndex = 0;\n\n\twhile ( true ) {\n\n\t\tconst match = RePathPart.exec( path ),\n\t\t\tmatchEnd = RePathPart.lastIndex;\n\n\t\tlet id = match[ 1 ];\n\t\tconst idIsIndex = match[ 2 ] === ']',\n\t\t\tsubscript = match[ 3 ];\n\n\t\tif ( idIsIndex ) id = id | 0; // convert to integer\n\n\t\tif ( subscript === undefined || subscript === '[' && matchEnd + 2 === pathLength ) {\n\n\t\t\t// bare name or \"pure\" bottom-level array \"[0]\" suffix\n\n\t\t\taddUniform( container, subscript === undefined ?\n\t\t\t\tnew SingleUniform( id, activeInfo, addr ) :\n\t\t\t\tnew PureArrayUniform( id, activeInfo, addr ) );\n\n\t\t\tbreak;\n\n\t\t} else {\n\n\t\t\t// step into inner node / create it in case it doesn't exist\n\n\t\t\tconst map = container.map;\n\t\t\tlet next = map[ id ];\n\n\t\t\tif ( next === undefined ) {\n\n\t\t\t\tnext = new StructuredUniform( id );\n\t\t\t\taddUniform( container, next );\n\n\t\t\t}\n\n\t\t\tcontainer = next;\n\n\t\t}\n\n\t}\n\n}\n\n// Root Container\n\nclass WebGLUniforms {\n\n\tconstructor( gl, program ) {\n\n\t\tthis.seq = [];\n\t\tthis.map = {};\n\n\t\tconst n = gl.getProgramParameter( program, 35718 );\n\n\t\tfor ( let i = 0; i < n; ++ i ) {\n\n\t\t\tconst info = gl.getActiveUniform( program, i ),\n\t\t\t\taddr = gl.getUniformLocation( program, info.name );\n\n\t\t\tparseUniform( info, addr, this );\n\n\t\t}\n\n\t}\n\n\tsetValue( gl, name, value, textures ) {\n\n\t\tconst u = this.map[ name ];\n\n\t\tif ( u !== undefined ) u.setValue( gl, value, textures );\n\n\t}\n\n\tsetOptional( gl, object, name ) {\n\n\t\tconst v = object[ name ];\n\n\t\tif ( v !== undefined ) this.setValue( gl, name, v );\n\n\t}\n\n\tstatic upload( gl, seq, values, textures ) {\n\n\t\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\t\tconst u = seq[ i ],\n\t\t\t\tv = values[ u.id ];\n\n\t\t\tif ( v.needsUpdate !== false ) {\n\n\t\t\t\t// note: always updating when .needsUpdate is undefined\n\t\t\t\tu.setValue( gl, v.value, textures );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tstatic seqWithValue( seq, values ) {\n\n\t\tconst r = [];\n\n\t\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\t\tconst u = seq[ i ];\n\t\t\tif ( u.id in values ) r.push( u );\n\n\t\t}\n\n\t\treturn r;\n\n\t}\n\n}\n\nfunction WebGLShader( gl, type, string ) {\n\n\tconst shader = gl.createShader( type );\n\n\tgl.shaderSource( shader, string );\n\tgl.compileShader( shader );\n\n\treturn shader;\n\n}\n\nlet programIdCount = 0;\n\nfunction handleSource( string, errorLine ) {\n\n\tconst lines = string.split( '\\n' );\n\tconst lines2 = [];\n\n\tconst from = Math.max( errorLine - 6, 0 );\n\tconst to = Math.min( errorLine + 6, lines.length );\n\n\tfor ( let i = from; i < to; i ++ ) {\n\n\t\tconst line = i + 1;\n\t\tlines2.push( `${line === errorLine ? '>' : ' '} ${line}: ${lines[ i ]}` );\n\n\t}\n\n\treturn lines2.join( '\\n' );\n\n}\n\nfunction getEncodingComponents( encoding ) {\n\n\tswitch ( encoding ) {\n\n\t\tcase LinearEncoding:\n\t\t\treturn [ 'Linear', '( value )' ];\n\t\tcase sRGBEncoding:\n\t\t\treturn [ 'sRGB', '( value )' ];\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Unsupported encoding:', encoding );\n\t\t\treturn [ 'Linear', '( value )' ];\n\n\t}\n\n}\n\nfunction getShaderErrors( gl, shader, type ) {\n\n\tconst status = gl.getShaderParameter( shader, 35713 );\n\tconst errors = gl.getShaderInfoLog( shader ).trim();\n\n\tif ( status && errors === '' ) return '';\n\n\tconst errorMatches = /ERROR: 0:(\\d+)/.exec( errors );\n\tif ( errorMatches ) {\n\n\t\t// --enable-privileged-webgl-extension\n\t\t// console.log( '**' + type + '**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\n\n\t\tconst errorLine = parseInt( errorMatches[ 1 ] );\n\t\treturn type.toUpperCase() + '\\n\\n' + errors + '\\n\\n' + handleSource( gl.getShaderSource( shader ), errorLine );\n\n\t} else {\n\n\t\treturn errors;\n\n\t}\n\n}\n\nfunction getTexelEncodingFunction( functionName, encoding ) {\n\n\tconst components = getEncodingComponents( encoding );\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return LinearTo' + components[ 0 ] + components[ 1 ] + '; }';\n\n}\n\nfunction getToneMappingFunction( functionName, toneMapping ) {\n\n\tlet toneMappingName;\n\n\tswitch ( toneMapping ) {\n\n\t\tcase LinearToneMapping:\n\t\t\ttoneMappingName = 'Linear';\n\t\t\tbreak;\n\n\t\tcase ReinhardToneMapping:\n\t\t\ttoneMappingName = 'Reinhard';\n\t\t\tbreak;\n\n\t\tcase CineonToneMapping:\n\t\t\ttoneMappingName = 'OptimizedCineon';\n\t\t\tbreak;\n\n\t\tcase ACESFilmicToneMapping:\n\t\t\ttoneMappingName = 'ACESFilmic';\n\t\t\tbreak;\n\n\t\tcase CustomToneMapping:\n\t\t\ttoneMappingName = 'Custom';\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Unsupported toneMapping:', toneMapping );\n\t\t\ttoneMappingName = 'Linear';\n\n\t}\n\n\treturn 'vec3 ' + functionName + '( vec3 color ) { return ' + toneMappingName + 'ToneMapping( color ); }';\n\n}\n\nfunction generateExtensions( parameters ) {\n\n\tconst chunks = [\n\t\t( parameters.extensionDerivatives || !! parameters.envMapCubeUVHeight || parameters.bumpMap || parameters.tangentSpaceNormalMap || parameters.clearcoatNormalMap || parameters.flatShading || parameters.shaderID === 'physical' ) ? '#extension GL_OES_standard_derivatives : enable' : '',\n\t\t( parameters.extensionFragDepth || parameters.logarithmicDepthBuffer ) && parameters.rendererExtensionFragDepth ? '#extension GL_EXT_frag_depth : enable' : '',\n\t\t( parameters.extensionDrawBuffers && parameters.rendererExtensionDrawBuffers ) ? '#extension GL_EXT_draw_buffers : require' : '',\n\t\t( parameters.extensionShaderTextureLOD || parameters.envMap || parameters.transmission ) && parameters.rendererExtensionShaderTextureLod ? '#extension GL_EXT_shader_texture_lod : enable' : ''\n\t];\n\n\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\n\n}\n\nfunction generateDefines( defines ) {\n\n\tconst chunks = [];\n\n\tfor ( const name in defines ) {\n\n\t\tconst value = defines[ name ];\n\n\t\tif ( value === false ) continue;\n\n\t\tchunks.push( '#define ' + name + ' ' + value );\n\n\t}\n\n\treturn chunks.join( '\\n' );\n\n}\n\nfunction fetchAttributeLocations( gl, program ) {\n\n\tconst attributes = {};\n\n\tconst n = gl.getProgramParameter( program, 35721 );\n\n\tfor ( let i = 0; i < n; i ++ ) {\n\n\t\tconst info = gl.getActiveAttrib( program, i );\n\t\tconst name = info.name;\n\n\t\tlet locationSize = 1;\n\t\tif ( info.type === 35674 ) locationSize = 2;\n\t\tif ( info.type === 35675 ) locationSize = 3;\n\t\tif ( info.type === 35676 ) locationSize = 4;\n\n\t\t// console.log( 'THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:', name, i );\n\n\t\tattributes[ name ] = {\n\t\t\ttype: info.type,\n\t\t\tlocation: gl.getAttribLocation( program, name ),\n\t\t\tlocationSize: locationSize\n\t\t};\n\n\t}\n\n\treturn attributes;\n\n}\n\nfunction filterEmptyLine( string ) {\n\n\treturn string !== '';\n\n}\n\nfunction replaceLightNums( string, parameters ) {\n\n\tconst numSpotLightCoords = parameters.numSpotLightShadows + parameters.numSpotLightMaps - parameters.numSpotLightShadowsWithMaps;\n\n\treturn string\n\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\n\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\n\t\t.replace( /NUM_SPOT_LIGHT_MAPS/g, parameters.numSpotLightMaps )\n\t\t.replace( /NUM_SPOT_LIGHT_COORDS/g, numSpotLightCoords )\n\t\t.replace( /NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights )\n\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\n\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights )\n\t\t.replace( /NUM_DIR_LIGHT_SHADOWS/g, parameters.numDirLightShadows )\n\t\t.replace( /NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g, parameters.numSpotLightShadowsWithMaps )\n\t\t.replace( /NUM_SPOT_LIGHT_SHADOWS/g, parameters.numSpotLightShadows )\n\t\t.replace( /NUM_POINT_LIGHT_SHADOWS/g, parameters.numPointLightShadows );\n\n}\n\nfunction replaceClippingPlaneNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_CLIPPING_PLANES/g, parameters.numClippingPlanes )\n\t\t.replace( /UNION_CLIPPING_PLANES/g, ( parameters.numClippingPlanes - parameters.numClipIntersection ) );\n\n}\n\n// Resolve Includes\n\nconst includePattern = /^[ \\t]*#include +<([\\w\\d./]+)>/gm;\n\nfunction resolveIncludes( string ) {\n\n\treturn string.replace( includePattern, includeReplacer );\n\n}\n\nfunction includeReplacer( match, include ) {\n\n\tconst string = ShaderChunk[ include ];\n\n\tif ( string === undefined ) {\n\n\t\tthrow new Error( 'Can not resolve #include <' + include + '>' );\n\n\t}\n\n\treturn resolveIncludes( string );\n\n}\n\n// Unroll Loops\n\nconst unrollLoopPattern = /#pragma unroll_loop_start\\s+for\\s*\\(\\s*int\\s+i\\s*=\\s*(\\d+)\\s*;\\s*i\\s*<\\s*(\\d+)\\s*;\\s*i\\s*\\+\\+\\s*\\)\\s*{([\\s\\S]+?)}\\s+#pragma unroll_loop_end/g;\n\nfunction unrollLoops( string ) {\n\n\treturn string.replace( unrollLoopPattern, loopReplacer );\n\n}\n\nfunction loopReplacer( match, start, end, snippet ) {\n\n\tlet string = '';\n\n\tfor ( let i = parseInt( start ); i < parseInt( end ); i ++ ) {\n\n\t\tstring += snippet\n\t\t\t.replace( /\\[\\s*i\\s*\\]/g, '[ ' + i + ' ]' )\n\t\t\t.replace( /UNROLLED_LOOP_INDEX/g, i );\n\n\t}\n\n\treturn string;\n\n}\n\n//\n\nfunction generatePrecision( parameters ) {\n\n\tlet precisionstring = 'precision ' + parameters.precision + ' float;\\nprecision ' + parameters.precision + ' int;';\n\n\tif ( parameters.precision === 'highp' ) {\n\n\t\tprecisionstring += '\\n#define HIGH_PRECISION';\n\n\t} else if ( parameters.precision === 'mediump' ) {\n\n\t\tprecisionstring += '\\n#define MEDIUM_PRECISION';\n\n\t} else if ( parameters.precision === 'lowp' ) {\n\n\t\tprecisionstring += '\\n#define LOW_PRECISION';\n\n\t}\n\n\treturn precisionstring;\n\n}\n\nfunction generateShadowMapTypeDefine( parameters ) {\n\n\tlet shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\n\n\tif ( parameters.shadowMapType === PCFShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\n\n\t} else if ( parameters.shadowMapType === PCFSoftShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\n\n\t} else if ( parameters.shadowMapType === VSMShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_VSM';\n\n\t}\n\n\treturn shadowMapTypeDefine;\n\n}\n\nfunction generateEnvMapTypeDefine( parameters ) {\n\n\tlet envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.envMapMode ) {\n\n\t\t\tcase CubeReflectionMapping:\n\t\t\tcase CubeRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\t\t\t\tbreak;\n\n\t\t\tcase CubeUVReflectionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapTypeDefine;\n\n}\n\nfunction generateEnvMapModeDefine( parameters ) {\n\n\tlet envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.envMapMode ) {\n\n\t\t\tcase CubeRefractionMapping:\n\n\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapModeDefine;\n\n}\n\nfunction generateEnvMapBlendingDefine( parameters ) {\n\n\tlet envMapBlendingDefine = 'ENVMAP_BLENDING_NONE';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.combine ) {\n\n\t\t\tcase MultiplyOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\t\t\t\tbreak;\n\n\t\t\tcase MixOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\n\t\t\t\tbreak;\n\n\t\t\tcase AddOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapBlendingDefine;\n\n}\n\nfunction generateCubeUVSize( parameters ) {\n\n\tconst imageHeight = parameters.envMapCubeUVHeight;\n\n\tif ( imageHeight === null ) return null;\n\n\tconst maxMip = Math.log2( imageHeight ) - 2;\n\n\tconst texelHeight = 1.0 / imageHeight;\n\n\tconst texelWidth = 1.0 / ( 3 * Math.max( Math.pow( 2, maxMip ), 7 * 16 ) );\n\n\treturn { texelWidth, texelHeight, maxMip };\n\n}\n\nfunction WebGLProgram( renderer, cacheKey, parameters, bindingStates ) {\n\n\t// TODO Send this event to Three.js DevTools\n\t// console.log( 'WebGLProgram', cacheKey );\n\n\tconst gl = renderer.getContext();\n\n\tconst defines = parameters.defines;\n\n\tlet vertexShader = parameters.vertexShader;\n\tlet fragmentShader = parameters.fragmentShader;\n\n\tconst shadowMapTypeDefine = generateShadowMapTypeDefine( parameters );\n\tconst envMapTypeDefine = generateEnvMapTypeDefine( parameters );\n\tconst envMapModeDefine = generateEnvMapModeDefine( parameters );\n\tconst envMapBlendingDefine = generateEnvMapBlendingDefine( parameters );\n\tconst envMapCubeUVSize = generateCubeUVSize( parameters );\n\n\tconst customExtensions = parameters.isWebGL2 ? '' : generateExtensions( parameters );\n\n\tconst customDefines = generateDefines( defines );\n\n\tconst program = gl.createProgram();\n\n\tlet prefixVertex, prefixFragment;\n\tlet versionString = parameters.glslVersion ? '#version ' + parameters.glslVersion + '\\n' : '';\n\n\tif ( parameters.isRawShaderMaterial ) {\n\n\t\tprefixVertex = [\n\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixVertex.length > 0 ) {\n\n\t\t\tprefixVertex += '\\n';\n\n\t\t}\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixFragment.length > 0 ) {\n\n\t\t\tprefixFragment += '\\n';\n\n\t\t}\n\n\t} else {\n\n\t\tprefixVertex = [\n\n\t\t\tgeneratePrecision( parameters ),\n\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.instancing ? '#define USE_INSTANCING' : '',\n\t\t\tparameters.instancingColor ? '#define USE_INSTANCING_COLOR' : '',\n\n\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\n\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\n\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\n\t\t\tparameters.iridescenceMap ? '#define USE_IRIDESCENCEMAP' : '',\n\t\t\tparameters.iridescenceThicknessMap ? '#define USE_IRIDESCENCE_THICKNESSMAP' : '',\n\n\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\n\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.specularIntensityMap ? '#define USE_SPECULARINTENSITYMAP' : '',\n\t\t\tparameters.specularColorMap ? '#define USE_SPECULARCOLORMAP' : '',\n\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\n\t\t\tparameters.transmission ? '#define USE_TRANSMISSION' : '',\n\t\t\tparameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',\n\t\t\tparameters.thicknessMap ? '#define USE_THICKNESSMAP' : '',\n\n\t\t\tparameters.sheenColorMap ? '#define USE_SHEENCOLORMAP' : '',\n\t\t\tparameters.sheenRoughnessMap ? '#define USE_SHEENROUGHNESSMAP' : '',\n\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexAlphas ? '#define USE_COLOR_ALPHA' : '',\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\n\n\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\n\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\n\t\t\t( parameters.morphColors && parameters.isWebGL2 ) ? '#define USE_MORPHCOLORS' : '',\n\t\t\t( parameters.morphTargetsCount > 0 && parameters.isWebGL2 ) ? '#define MORPHTARGETS_TEXTURE' : '',\n\t\t\t( parameters.morphTargetsCount > 0 && parameters.isWebGL2 ) ? '#define MORPHTARGETS_TEXTURE_STRIDE ' + parameters.morphTextureStride : '',\n\t\t\t( parameters.morphTargetsCount > 0 && parameters.isWebGL2 ) ? '#define MORPHTARGETS_COUNT ' + parameters.morphTargetsCount : '',\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t'uniform mat4 modelMatrix;',\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform mat3 normalMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t'#ifdef USE_INSTANCING',\n\n\t\t\t'\tattribute mat4 instanceMatrix;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_INSTANCING_COLOR',\n\n\t\t\t'\tattribute vec3 instanceColor;',\n\n\t\t\t'#endif',\n\n\t\t\t'attribute vec3 position;',\n\t\t\t'attribute vec3 normal;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'#ifdef USE_TANGENT',\n\n\t\t\t'\tattribute vec4 tangent;',\n\n\t\t\t'#endif',\n\n\t\t\t'#if defined( USE_COLOR_ALPHA )',\n\n\t\t\t'\tattribute vec4 color;',\n\n\t\t\t'#elif defined( USE_COLOR )',\n\n\t\t\t'\tattribute vec3 color;',\n\n\t\t\t'#endif',\n\n\t\t\t'#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )',\n\n\t\t\t'\tattribute vec3 morphTarget0;',\n\t\t\t'\tattribute vec3 morphTarget1;',\n\t\t\t'\tattribute vec3 morphTarget2;',\n\t\t\t'\tattribute vec3 morphTarget3;',\n\n\t\t\t'\t#ifdef USE_MORPHNORMALS',\n\n\t\t\t'\t\tattribute vec3 morphNormal0;',\n\t\t\t'\t\tattribute vec3 morphNormal1;',\n\t\t\t'\t\tattribute vec3 morphNormal2;',\n\t\t\t'\t\tattribute vec3 morphNormal3;',\n\n\t\t\t'\t#else',\n\n\t\t\t'\t\tattribute vec3 morphTarget4;',\n\t\t\t'\t\tattribute vec3 morphTarget5;',\n\t\t\t'\t\tattribute vec3 morphTarget6;',\n\t\t\t'\t\tattribute vec3 morphTarget7;',\n\n\t\t\t'\t#endif',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_SKINNING',\n\n\t\t\t'\tattribute vec4 skinIndex;',\n\t\t\t'\tattribute vec4 skinWeight;',\n\n\t\t\t'#endif',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\n\t\t\tgeneratePrecision( parameters ),\n\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines,\n\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.matcap ? '#define USE_MATCAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\n\t\t\tenvMapCubeUVSize ? '#define CUBEUV_TEXEL_WIDTH ' + envMapCubeUVSize.texelWidth : '',\n\t\t\tenvMapCubeUVSize ? '#define CUBEUV_TEXEL_HEIGHT ' + envMapCubeUVSize.texelHeight : '',\n\t\t\tenvMapCubeUVSize ? '#define CUBEUV_MAX_MIP ' + envMapCubeUVSize.maxMip + '.0' : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\n\n\t\t\tparameters.clearcoat ? '#define USE_CLEARCOAT' : '',\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\n\t\t\tparameters.iridescence ? '#define USE_IRIDESCENCE' : '',\n\t\t\tparameters.iridescenceMap ? '#define USE_IRIDESCENCEMAP' : '',\n\t\t\tparameters.iridescenceThicknessMap ? '#define USE_IRIDESCENCE_THICKNESSMAP' : '',\n\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.specularIntensityMap ? '#define USE_SPECULARINTENSITYMAP' : '',\n\t\t\tparameters.specularColorMap ? '#define USE_SPECULARCOLORMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\tparameters.alphaTest ? '#define USE_ALPHATEST' : '',\n\n\t\t\tparameters.sheen ? '#define USE_SHEEN' : '',\n\t\t\tparameters.sheenColorMap ? '#define USE_SHEENCOLORMAP' : '',\n\t\t\tparameters.sheenRoughnessMap ? '#define USE_SHEENROUGHNESSMAP' : '',\n\n\t\t\tparameters.transmission ? '#define USE_TRANSMISSION' : '',\n\t\t\tparameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',\n\t\t\tparameters.thicknessMap ? '#define USE_THICKNESSMAP' : '',\n\n\t\t\tparameters.decodeVideoTexture ? '#define DECODE_VIDEO_TEXTURE' : '',\n\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors || parameters.instancingColor ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexAlphas ? '#define USE_COLOR_ALPHA' : '',\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\n\n\t\t\tparameters.gradientMap ? '#define USE_GRADIENTMAP' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.premultipliedAlpha ? '#define PREMULTIPLIED_ALPHA' : '',\n\n\t\t\tparameters.physicallyCorrectLights ? '#define PHYSICALLY_CORRECT_LIGHTS' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? '#define TONE_MAPPING' : '',\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? ShaderChunk[ 'tonemapping_pars_fragment' ] : '', // this code is required here because it is used by the toneMapping() function defined below\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? getToneMappingFunction( 'toneMapping', parameters.toneMapping ) : '',\n\n\t\t\tparameters.dithering ? '#define DITHERING' : '',\n\t\t\tparameters.opaque ? '#define OPAQUE' : '',\n\n\t\t\tShaderChunk[ 'encodings_pars_fragment' ], // this code is required here because it is used by the various encoding/decoding function defined below\n\t\t\tgetTexelEncodingFunction( 'linearToOutputTexel', parameters.outputEncoding ),\n\n\t\t\tparameters.useDepthPacking ? '#define DEPTH_PACKING ' + parameters.depthPacking : '',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t}\n\n\tvertexShader = resolveIncludes( vertexShader );\n\tvertexShader = replaceLightNums( vertexShader, parameters );\n\tvertexShader = replaceClippingPlaneNums( vertexShader, parameters );\n\n\tfragmentShader = resolveIncludes( fragmentShader );\n\tfragmentShader = replaceLightNums( fragmentShader, parameters );\n\tfragmentShader = replaceClippingPlaneNums( fragmentShader, parameters );\n\n\tvertexShader = unrollLoops( vertexShader );\n\tfragmentShader = unrollLoops( fragmentShader );\n\n\tif ( parameters.isWebGL2 && parameters.isRawShaderMaterial !== true ) {\n\n\t\t// GLSL 3.0 conversion for built-in materials and ShaderMaterial\n\n\t\tversionString = '#version 300 es\\n';\n\n\t\tprefixVertex = [\n\t\t\t'precision mediump sampler2DArray;',\n\t\t\t'#define attribute in',\n\t\t\t'#define varying out',\n\t\t\t'#define texture2D texture'\n\t\t].join( '\\n' ) + '\\n' + prefixVertex;\n\n\t\tprefixFragment = [\n\t\t\t'#define varying in',\n\t\t\t( parameters.glslVersion === GLSL3 ) ? '' : 'layout(location = 0) out highp vec4 pc_fragColor;',\n\t\t\t( parameters.glslVersion === GLSL3 ) ? '' : '#define gl_FragColor pc_fragColor',\n\t\t\t'#define gl_FragDepthEXT gl_FragDepth',\n\t\t\t'#define texture2D texture',\n\t\t\t'#define textureCube texture',\n\t\t\t'#define texture2DProj textureProj',\n\t\t\t'#define texture2DLodEXT textureLod',\n\t\t\t'#define texture2DProjLodEXT textureProjLod',\n\t\t\t'#define textureCubeLodEXT textureLod',\n\t\t\t'#define texture2DGradEXT textureGrad',\n\t\t\t'#define texture2DProjGradEXT textureProjGrad',\n\t\t\t'#define textureCubeGradEXT textureGrad'\n\t\t].join( '\\n' ) + '\\n' + prefixFragment;\n\n\t}\n\n\tconst vertexGlsl = versionString + prefixVertex + vertexShader;\n\tconst fragmentGlsl = versionString + prefixFragment + fragmentShader;\n\n\t// console.log( '*VERTEX*', vertexGlsl );\n\t// console.log( '*FRAGMENT*', fragmentGlsl );\n\n\tconst glVertexShader = WebGLShader( gl, 35633, vertexGlsl );\n\tconst glFragmentShader = WebGLShader( gl, 35632, fragmentGlsl );\n\n\tgl.attachShader( program, glVertexShader );\n\tgl.attachShader( program, glFragmentShader );\n\n\t// Force a particular attribute to index 0.\n\n\tif ( parameters.index0AttributeName !== undefined ) {\n\n\t\tgl.bindAttribLocation( program, 0, parameters.index0AttributeName );\n\n\t} else if ( parameters.morphTargets === true ) {\n\n\t\t// programs with morphTargets displace position out of attribute 0\n\t\tgl.bindAttribLocation( program, 0, 'position' );\n\n\t}\n\n\tgl.linkProgram( program );\n\n\t// check for link errors\n\tif ( renderer.debug.checkShaderErrors ) {\n\n\t\tconst programLog = gl.getProgramInfoLog( program ).trim();\n\t\tconst vertexLog = gl.getShaderInfoLog( glVertexShader ).trim();\n\t\tconst fragmentLog = gl.getShaderInfoLog( glFragmentShader ).trim();\n\n\t\tlet runnable = true;\n\t\tlet haveDiagnostics = true;\n\n\t\tif ( gl.getProgramParameter( program, 35714 ) === false ) {\n\n\t\t\trunnable = false;\n\n\t\t\tconst vertexErrors = getShaderErrors( gl, glVertexShader, 'vertex' );\n\t\t\tconst fragmentErrors = getShaderErrors( gl, glFragmentShader, 'fragment' );\n\n\t\t\tconsole.error(\n\t\t\t\t'THREE.WebGLProgram: Shader Error ' + gl.getError() + ' - ' +\n\t\t\t\t'VALIDATE_STATUS ' + gl.getProgramParameter( program, 35715 ) + '\\n\\n' +\n\t\t\t\t'Program Info Log: ' + programLog + '\\n' +\n\t\t\t\tvertexErrors + '\\n' +\n\t\t\t\tfragmentErrors\n\t\t\t);\n\n\t\t} else if ( programLog !== '' ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Program Info Log:', programLog );\n\n\t\t} else if ( vertexLog === '' || fragmentLog === '' ) {\n\n\t\t\thaveDiagnostics = false;\n\n\t\t}\n\n\t\tif ( haveDiagnostics ) {\n\n\t\t\tthis.diagnostics = {\n\n\t\t\t\trunnable: runnable,\n\n\t\t\t\tprogramLog: programLog,\n\n\t\t\t\tvertexShader: {\n\n\t\t\t\t\tlog: vertexLog,\n\t\t\t\t\tprefix: prefixVertex\n\n\t\t\t\t},\n\n\t\t\t\tfragmentShader: {\n\n\t\t\t\t\tlog: fragmentLog,\n\t\t\t\t\tprefix: prefixFragment\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t}\n\n\t// Clean up\n\n\t// Crashes in iOS9 and iOS10. #18402\n\t// gl.detachShader( program, glVertexShader );\n\t// gl.detachShader( program, glFragmentShader );\n\n\tgl.deleteShader( glVertexShader );\n\tgl.deleteShader( glFragmentShader );\n\n\t// set up caching for uniform locations\n\n\tlet cachedUniforms;\n\n\tthis.getUniforms = function () {\n\n\t\tif ( cachedUniforms === undefined ) {\n\n\t\t\tcachedUniforms = new WebGLUniforms( gl, program );\n\n\t\t}\n\n\t\treturn cachedUniforms;\n\n\t};\n\n\t// set up caching for attribute locations\n\n\tlet cachedAttributes;\n\n\tthis.getAttributes = function () {\n\n\t\tif ( cachedAttributes === undefined ) {\n\n\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\n\n\t\t}\n\n\t\treturn cachedAttributes;\n\n\t};\n\n\t// free resource\n\n\tthis.destroy = function () {\n\n\t\tbindingStates.releaseStatesOfProgram( this );\n\n\t\tgl.deleteProgram( program );\n\t\tthis.program = undefined;\n\n\t};\n\n\t//\n\n\tthis.name = parameters.shaderName;\n\tthis.id = programIdCount ++;\n\tthis.cacheKey = cacheKey;\n\tthis.usedTimes = 1;\n\tthis.program = program;\n\tthis.vertexShader = glVertexShader;\n\tthis.fragmentShader = glFragmentShader;\n\n\treturn this;\n\n}\n\nlet _id = 0;\n\nclass WebGLShaderCache {\n\n\tconstructor() {\n\n\t\tthis.shaderCache = new Map();\n\t\tthis.materialCache = new Map();\n\n\t}\n\n\tupdate( material ) {\n\n\t\tconst vertexShader = material.vertexShader;\n\t\tconst fragmentShader = material.fragmentShader;\n\n\t\tconst vertexShaderStage = this._getShaderStage( vertexShader );\n\t\tconst fragmentShaderStage = this._getShaderStage( fragmentShader );\n\n\t\tconst materialShaders = this._getShaderCacheForMaterial( material );\n\n\t\tif ( materialShaders.has( vertexShaderStage ) === false ) {\n\n\t\t\tmaterialShaders.add( vertexShaderStage );\n\t\t\tvertexShaderStage.usedTimes ++;\n\n\t\t}\n\n\t\tif ( materialShaders.has( fragmentShaderStage ) === false ) {\n\n\t\t\tmaterialShaders.add( fragmentShaderStage );\n\t\t\tfragmentShaderStage.usedTimes ++;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tremove( material ) {\n\n\t\tconst materialShaders = this.materialCache.get( material );\n\n\t\tfor ( const shaderStage of materialShaders ) {\n\n\t\t\tshaderStage.usedTimes --;\n\n\t\t\tif ( shaderStage.usedTimes === 0 ) this.shaderCache.delete( shaderStage.code );\n\n\t\t}\n\n\t\tthis.materialCache.delete( material );\n\n\t\treturn this;\n\n\t}\n\n\tgetVertexShaderID( material ) {\n\n\t\treturn this._getShaderStage( material.vertexShader ).id;\n\n\t}\n\n\tgetFragmentShaderID( material ) {\n\n\t\treturn this._getShaderStage( material.fragmentShader ).id;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.shaderCache.clear();\n\t\tthis.materialCache.clear();\n\n\t}\n\n\t_getShaderCacheForMaterial( material ) {\n\n\t\tconst cache = this.materialCache;\n\t\tlet set = cache.get( material );\n\n\t\tif ( set === undefined ) {\n\n\t\t\tset = new Set();\n\t\t\tcache.set( material, set );\n\n\t\t}\n\n\t\treturn set;\n\n\t}\n\n\t_getShaderStage( code ) {\n\n\t\tconst cache = this.shaderCache;\n\t\tlet stage = cache.get( code );\n\n\t\tif ( stage === undefined ) {\n\n\t\t\tstage = new WebGLShaderStage( code );\n\t\t\tcache.set( code, stage );\n\n\t\t}\n\n\t\treturn stage;\n\n\t}\n\n}\n\nclass WebGLShaderStage {\n\n\tconstructor( code ) {\n\n\t\tthis.id = _id ++;\n\n\t\tthis.code = code;\n\t\tthis.usedTimes = 0;\n\n\t}\n\n}\n\nfunction WebGLPrograms( renderer, cubemaps, cubeuvmaps, extensions, capabilities, bindingStates, clipping ) {\n\n\tconst _programLayers = new Layers();\n\tconst _customShaders = new WebGLShaderCache();\n\tconst programs = [];\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\tconst logarithmicDepthBuffer = capabilities.logarithmicDepthBuffer;\n\tconst vertexTextures = capabilities.vertexTextures;\n\tlet precision = capabilities.precision;\n\n\tconst shaderIDs = {\n\t\tMeshDepthMaterial: 'depth',\n\t\tMeshDistanceMaterial: 'distanceRGBA',\n\t\tMeshNormalMaterial: 'normal',\n\t\tMeshBasicMaterial: 'basic',\n\t\tMeshLambertMaterial: 'lambert',\n\t\tMeshPhongMaterial: 'phong',\n\t\tMeshToonMaterial: 'toon',\n\t\tMeshStandardMaterial: 'physical',\n\t\tMeshPhysicalMaterial: 'physical',\n\t\tMeshMatcapMaterial: 'matcap',\n\t\tLineBasicMaterial: 'basic',\n\t\tLineDashedMaterial: 'dashed',\n\t\tPointsMaterial: 'points',\n\t\tShadowMaterial: 'shadow',\n\t\tSpriteMaterial: 'sprite'\n\t};\n\n\tfunction getParameters( material, lights, shadows, scene, object ) {\n\n\t\tconst fog = scene.fog;\n\t\tconst geometry = object.geometry;\n\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\n\n\t\tconst envMap = ( material.isMeshStandardMaterial ? cubeuvmaps : cubemaps ).get( material.envMap || environment );\n\t\tconst envMapCubeUVHeight = ( !! envMap ) && ( envMap.mapping === CubeUVReflectionMapping ) ? envMap.image.height : null;\n\n\t\tconst shaderID = shaderIDs[ material.type ];\n\n\t\t// heuristics to create shader parameters according to lights in the scene\n\t\t// (not to blow over maxLights budget)\n\n\t\tif ( material.precision !== null ) {\n\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\n\n\t\t\tif ( precision !== material.precision ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tconst morphAttribute = geometry.morphAttributes.position || geometry.morphAttributes.normal || geometry.morphAttributes.color;\n\t\tconst morphTargetsCount = ( morphAttribute !== undefined ) ? morphAttribute.length : 0;\n\n\t\tlet morphTextureStride = 0;\n\n\t\tif ( geometry.morphAttributes.position !== undefined ) morphTextureStride = 1;\n\t\tif ( geometry.morphAttributes.normal !== undefined ) morphTextureStride = 2;\n\t\tif ( geometry.morphAttributes.color !== undefined ) morphTextureStride = 3;\n\n\t\t//\n\n\t\tlet vertexShader, fragmentShader;\n\t\tlet customVertexShaderID, customFragmentShaderID;\n\n\t\tif ( shaderID ) {\n\n\t\t\tconst shader = ShaderLib[ shaderID ];\n\n\t\t\tvertexShader = shader.vertexShader;\n\t\t\tfragmentShader = shader.fragmentShader;\n\n\t\t} else {\n\n\t\t\tvertexShader = material.vertexShader;\n\t\t\tfragmentShader = material.fragmentShader;\n\n\t\t\t_customShaders.update( material );\n\n\t\t\tcustomVertexShaderID = _customShaders.getVertexShaderID( material );\n\t\t\tcustomFragmentShaderID = _customShaders.getFragmentShaderID( material );\n\n\t\t}\n\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\tconst useAlphaTest = material.alphaTest > 0;\n\t\tconst useClearcoat = material.clearcoat > 0;\n\t\tconst useIridescence = material.iridescence > 0;\n\n\t\tconst parameters = {\n\n\t\t\tisWebGL2: isWebGL2,\n\n\t\t\tshaderID: shaderID,\n\t\t\tshaderName: material.type,\n\n\t\t\tvertexShader: vertexShader,\n\t\t\tfragmentShader: fragmentShader,\n\t\t\tdefines: material.defines,\n\n\t\t\tcustomVertexShaderID: customVertexShaderID,\n\t\t\tcustomFragmentShaderID: customFragmentShaderID,\n\n\t\t\tisRawShaderMaterial: material.isRawShaderMaterial === true,\n\t\t\tglslVersion: material.glslVersion,\n\n\t\t\tprecision: precision,\n\n\t\t\tinstancing: object.isInstancedMesh === true,\n\t\t\tinstancingColor: object.isInstancedMesh === true && object.instanceColor !== null,\n\n\t\t\tsupportsVertexTextures: vertexTextures,\n\t\t\toutputEncoding: ( currentRenderTarget === null ) ? renderer.outputEncoding : ( currentRenderTarget.isXRRenderTarget === true ? currentRenderTarget.texture.encoding : LinearEncoding ),\n\t\t\tmap: !! material.map,\n\t\t\tmatcap: !! material.matcap,\n\t\t\tenvMap: !! envMap,\n\t\t\tenvMapMode: envMap && envMap.mapping,\n\t\t\tenvMapCubeUVHeight: envMapCubeUVHeight,\n\t\t\tlightMap: !! material.lightMap,\n\t\t\taoMap: !! material.aoMap,\n\t\t\temissiveMap: !! material.emissiveMap,\n\t\t\tbumpMap: !! material.bumpMap,\n\t\t\tnormalMap: !! material.normalMap,\n\t\t\tobjectSpaceNormalMap: material.normalMapType === ObjectSpaceNormalMap,\n\t\t\ttangentSpaceNormalMap: material.normalMapType === TangentSpaceNormalMap,\n\n\t\t\tdecodeVideoTexture: !! material.map && ( material.map.isVideoTexture === true ) && ( material.map.encoding === sRGBEncoding ),\n\n\t\t\tclearcoat: useClearcoat,\n\t\t\tclearcoatMap: useClearcoat && !! material.clearcoatMap,\n\t\t\tclearcoatRoughnessMap: useClearcoat && !! material.clearcoatRoughnessMap,\n\t\t\tclearcoatNormalMap: useClearcoat && !! material.clearcoatNormalMap,\n\n\t\t\tiridescence: useIridescence,\n\t\t\tiridescenceMap: useIridescence && !! material.iridescenceMap,\n\t\t\tiridescenceThicknessMap: useIridescence && !! material.iridescenceThicknessMap,\n\n\t\t\tdisplacementMap: !! material.displacementMap,\n\t\t\troughnessMap: !! material.roughnessMap,\n\t\t\tmetalnessMap: !! material.metalnessMap,\n\t\t\tspecularMap: !! material.specularMap,\n\t\t\tspecularIntensityMap: !! material.specularIntensityMap,\n\t\t\tspecularColorMap: !! material.specularColorMap,\n\n\t\t\topaque: material.transparent === false && material.blending === NormalBlending,\n\n\t\t\talphaMap: !! material.alphaMap,\n\t\t\talphaTest: useAlphaTest,\n\n\t\t\tgradientMap: !! material.gradientMap,\n\n\t\t\tsheen: material.sheen > 0,\n\t\t\tsheenColorMap: !! material.sheenColorMap,\n\t\t\tsheenRoughnessMap: !! material.sheenRoughnessMap,\n\n\t\t\ttransmission: material.transmission > 0,\n\t\t\ttransmissionMap: !! material.transmissionMap,\n\t\t\tthicknessMap: !! material.thicknessMap,\n\n\t\t\tcombine: material.combine,\n\n\t\t\tvertexTangents: ( !! material.normalMap && !! geometry.attributes.tangent ),\n\t\t\tvertexColors: material.vertexColors,\n\t\t\tvertexAlphas: material.vertexColors === true && !! geometry.attributes.color && geometry.attributes.color.itemSize === 4,\n\t\t\tvertexUvs: !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatMap || !! material.clearcoatRoughnessMap || !! material.clearcoatNormalMap || !! material.iridescenceMap || !! material.iridescenceThicknessMap || !! material.displacementMap || !! material.transmissionMap || !! material.thicknessMap || !! material.specularIntensityMap || !! material.specularColorMap || !! material.sheenColorMap || !! material.sheenRoughnessMap,\n\t\t\tuvsVertexOnly: ! ( !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatNormalMap || !! material.iridescenceMap || !! material.iridescenceThicknessMap || material.transmission > 0 || !! material.transmissionMap || !! material.thicknessMap || !! material.specularIntensityMap || !! material.specularColorMap || material.sheen > 0 || !! material.sheenColorMap || !! material.sheenRoughnessMap ) && !! material.displacementMap,\n\n\t\t\tfog: !! fog,\n\t\t\tuseFog: material.fog === true,\n\t\t\tfogExp2: ( fog && fog.isFogExp2 ),\n\n\t\t\tflatShading: !! material.flatShading,\n\n\t\t\tsizeAttenuation: material.sizeAttenuation,\n\t\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\t\tskinning: object.isSkinnedMesh === true,\n\n\t\t\tmorphTargets: geometry.morphAttributes.position !== undefined,\n\t\t\tmorphNormals: geometry.morphAttributes.normal !== undefined,\n\t\t\tmorphColors: geometry.morphAttributes.color !== undefined,\n\t\t\tmorphTargetsCount: morphTargetsCount,\n\t\t\tmorphTextureStride: morphTextureStride,\n\n\t\t\tnumDirLights: lights.directional.length,\n\t\t\tnumPointLights: lights.point.length,\n\t\t\tnumSpotLights: lights.spot.length,\n\t\t\tnumSpotLightMaps: lights.spotLightMap.length,\n\t\t\tnumRectAreaLights: lights.rectArea.length,\n\t\t\tnumHemiLights: lights.hemi.length,\n\n\t\t\tnumDirLightShadows: lights.directionalShadowMap.length,\n\t\t\tnumPointLightShadows: lights.pointShadowMap.length,\n\t\t\tnumSpotLightShadows: lights.spotShadowMap.length,\n\t\t\tnumSpotLightShadowsWithMaps: lights.numSpotLightShadowsWithMaps,\n\n\t\t\tnumClippingPlanes: clipping.numPlanes,\n\t\t\tnumClipIntersection: clipping.numIntersection,\n\n\t\t\tdithering: material.dithering,\n\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && shadows.length > 0,\n\t\t\tshadowMapType: renderer.shadowMap.type,\n\n\t\t\ttoneMapping: material.toneMapped ? renderer.toneMapping : NoToneMapping,\n\t\t\tphysicallyCorrectLights: renderer.physicallyCorrectLights,\n\n\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\n\n\t\t\tdoubleSided: material.side === DoubleSide,\n\t\t\tflipSided: material.side === BackSide,\n\n\t\t\tuseDepthPacking: !! material.depthPacking,\n\t\t\tdepthPacking: material.depthPacking || 0,\n\n\t\t\tindex0AttributeName: material.index0AttributeName,\n\n\t\t\textensionDerivatives: material.extensions && material.extensions.derivatives,\n\t\t\textensionFragDepth: material.extensions && material.extensions.fragDepth,\n\t\t\textensionDrawBuffers: material.extensions && material.extensions.drawBuffers,\n\t\t\textensionShaderTextureLOD: material.extensions && material.extensions.shaderTextureLOD,\n\n\t\t\trendererExtensionFragDepth: isWebGL2 || extensions.has( 'EXT_frag_depth' ),\n\t\t\trendererExtensionDrawBuffers: isWebGL2 || extensions.has( 'WEBGL_draw_buffers' ),\n\t\t\trendererExtensionShaderTextureLod: isWebGL2 || extensions.has( 'EXT_shader_texture_lod' ),\n\n\t\t\tcustomProgramCacheKey: material.customProgramCacheKey()\n\n\t\t};\n\n\t\treturn parameters;\n\n\t}\n\n\tfunction getProgramCacheKey( parameters ) {\n\n\t\tconst array = [];\n\n\t\tif ( parameters.shaderID ) {\n\n\t\t\tarray.push( parameters.shaderID );\n\n\t\t} else {\n\n\t\t\tarray.push( parameters.customVertexShaderID );\n\t\t\tarray.push( parameters.customFragmentShaderID );\n\n\t\t}\n\n\t\tif ( parameters.defines !== undefined ) {\n\n\t\t\tfor ( const name in parameters.defines ) {\n\n\t\t\t\tarray.push( name );\n\t\t\t\tarray.push( parameters.defines[ name ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( parameters.isRawShaderMaterial === false ) {\n\n\t\t\tgetProgramCacheKeyParameters( array, parameters );\n\t\t\tgetProgramCacheKeyBooleans( array, parameters );\n\t\t\tarray.push( renderer.outputEncoding );\n\n\t\t}\n\n\t\tarray.push( parameters.customProgramCacheKey );\n\n\t\treturn array.join();\n\n\t}\n\n\tfunction getProgramCacheKeyParameters( array, parameters ) {\n\n\t\tarray.push( parameters.precision );\n\t\tarray.push( parameters.outputEncoding );\n\t\tarray.push( parameters.envMapMode );\n\t\tarray.push( parameters.envMapCubeUVHeight );\n\t\tarray.push( parameters.combine );\n\t\tarray.push( parameters.vertexUvs );\n\t\tarray.push( parameters.fogExp2 );\n\t\tarray.push( parameters.sizeAttenuation );\n\t\tarray.push( parameters.morphTargetsCount );\n\t\tarray.push( parameters.morphAttributeCount );\n\t\tarray.push( parameters.numDirLights );\n\t\tarray.push( parameters.numPointLights );\n\t\tarray.push( parameters.numSpotLights );\n\t\tarray.push( parameters.numSpotLightMaps );\n\t\tarray.push( parameters.numHemiLights );\n\t\tarray.push( parameters.numRectAreaLights );\n\t\tarray.push( parameters.numDirLightShadows );\n\t\tarray.push( parameters.numPointLightShadows );\n\t\tarray.push( parameters.numSpotLightShadows );\n\t\tarray.push( parameters.numSpotLightShadowsWithMaps );\n\t\tarray.push( parameters.shadowMapType );\n\t\tarray.push( parameters.toneMapping );\n\t\tarray.push( parameters.numClippingPlanes );\n\t\tarray.push( parameters.numClipIntersection );\n\t\tarray.push( parameters.depthPacking );\n\n\t}\n\n\tfunction getProgramCacheKeyBooleans( array, parameters ) {\n\n\t\t_programLayers.disableAll();\n\n\t\tif ( parameters.isWebGL2 )\n\t\t\t_programLayers.enable( 0 );\n\t\tif ( parameters.supportsVertexTextures )\n\t\t\t_programLayers.enable( 1 );\n\t\tif ( parameters.instancing )\n\t\t\t_programLayers.enable( 2 );\n\t\tif ( parameters.instancingColor )\n\t\t\t_programLayers.enable( 3 );\n\t\tif ( parameters.map )\n\t\t\t_programLayers.enable( 4 );\n\t\tif ( parameters.matcap )\n\t\t\t_programLayers.enable( 5 );\n\t\tif ( parameters.envMap )\n\t\t\t_programLayers.enable( 6 );\n\t\tif ( parameters.lightMap )\n\t\t\t_programLayers.enable( 7 );\n\t\tif ( parameters.aoMap )\n\t\t\t_programLayers.enable( 8 );\n\t\tif ( parameters.emissiveMap )\n\t\t\t_programLayers.enable( 9 );\n\t\tif ( parameters.bumpMap )\n\t\t\t_programLayers.enable( 10 );\n\t\tif ( parameters.normalMap )\n\t\t\t_programLayers.enable( 11 );\n\t\tif ( parameters.objectSpaceNormalMap )\n\t\t\t_programLayers.enable( 12 );\n\t\tif ( parameters.tangentSpaceNormalMap )\n\t\t\t_programLayers.enable( 13 );\n\t\tif ( parameters.clearcoat )\n\t\t\t_programLayers.enable( 14 );\n\t\tif ( parameters.clearcoatMap )\n\t\t\t_programLayers.enable( 15 );\n\t\tif ( parameters.clearcoatRoughnessMap )\n\t\t\t_programLayers.enable( 16 );\n\t\tif ( parameters.clearcoatNormalMap )\n\t\t\t_programLayers.enable( 17 );\n\t\tif ( parameters.iridescence )\n\t\t\t_programLayers.enable( 18 );\n\t\tif ( parameters.iridescenceMap )\n\t\t\t_programLayers.enable( 19 );\n\t\tif ( parameters.iridescenceThicknessMap )\n\t\t\t_programLayers.enable( 20 );\n\t\tif ( parameters.displacementMap )\n\t\t\t_programLayers.enable( 21 );\n\t\tif ( parameters.specularMap )\n\t\t\t_programLayers.enable( 22 );\n\t\tif ( parameters.roughnessMap )\n\t\t\t_programLayers.enable( 23 );\n\t\tif ( parameters.metalnessMap )\n\t\t\t_programLayers.enable( 24 );\n\t\tif ( parameters.gradientMap )\n\t\t\t_programLayers.enable( 25 );\n\t\tif ( parameters.alphaMap )\n\t\t\t_programLayers.enable( 26 );\n\t\tif ( parameters.alphaTest )\n\t\t\t_programLayers.enable( 27 );\n\t\tif ( parameters.vertexColors )\n\t\t\t_programLayers.enable( 28 );\n\t\tif ( parameters.vertexAlphas )\n\t\t\t_programLayers.enable( 29 );\n\t\tif ( parameters.vertexUvs )\n\t\t\t_programLayers.enable( 30 );\n\t\tif ( parameters.vertexTangents )\n\t\t\t_programLayers.enable( 31 );\n\t\tif ( parameters.uvsVertexOnly )\n\t\t\t_programLayers.enable( 32 );\n\n\t\tarray.push( _programLayers.mask );\n\t\t_programLayers.disableAll();\n\n\t\tif ( parameters.fog )\n\t\t\t_programLayers.enable( 0 );\n\t\tif ( parameters.useFog )\n\t\t\t_programLayers.enable( 1 );\n\t\tif ( parameters.flatShading )\n\t\t\t_programLayers.enable( 2 );\n\t\tif ( parameters.logarithmicDepthBuffer )\n\t\t\t_programLayers.enable( 3 );\n\t\tif ( parameters.skinning )\n\t\t\t_programLayers.enable( 4 );\n\t\tif ( parameters.morphTargets )\n\t\t\t_programLayers.enable( 5 );\n\t\tif ( parameters.morphNormals )\n\t\t\t_programLayers.enable( 6 );\n\t\tif ( parameters.morphColors )\n\t\t\t_programLayers.enable( 7 );\n\t\tif ( parameters.premultipliedAlpha )\n\t\t\t_programLayers.enable( 8 );\n\t\tif ( parameters.shadowMapEnabled )\n\t\t\t_programLayers.enable( 9 );\n\t\tif ( parameters.physicallyCorrectLights )\n\t\t\t_programLayers.enable( 10 );\n\t\tif ( parameters.doubleSided )\n\t\t\t_programLayers.enable( 11 );\n\t\tif ( parameters.flipSided )\n\t\t\t_programLayers.enable( 12 );\n\t\tif ( parameters.useDepthPacking )\n\t\t\t_programLayers.enable( 13 );\n\t\tif ( parameters.dithering )\n\t\t\t_programLayers.enable( 14 );\n\t\tif ( parameters.specularIntensityMap )\n\t\t\t_programLayers.enable( 15 );\n\t\tif ( parameters.specularColorMap )\n\t\t\t_programLayers.enable( 16 );\n\t\tif ( parameters.transmission )\n\t\t\t_programLayers.enable( 17 );\n\t\tif ( parameters.transmissionMap )\n\t\t\t_programLayers.enable( 18 );\n\t\tif ( parameters.thicknessMap )\n\t\t\t_programLayers.enable( 19 );\n\t\tif ( parameters.sheen )\n\t\t\t_programLayers.enable( 20 );\n\t\tif ( parameters.sheenColorMap )\n\t\t\t_programLayers.enable( 21 );\n\t\tif ( parameters.sheenRoughnessMap )\n\t\t\t_programLayers.enable( 22 );\n\t\tif ( parameters.decodeVideoTexture )\n\t\t\t_programLayers.enable( 23 );\n\t\tif ( parameters.opaque )\n\t\t\t_programLayers.enable( 24 );\n\n\t\tarray.push( _programLayers.mask );\n\n\t}\n\n\tfunction getUniforms( material ) {\n\n\t\tconst shaderID = shaderIDs[ material.type ];\n\t\tlet uniforms;\n\n\t\tif ( shaderID ) {\n\n\t\t\tconst shader = ShaderLib[ shaderID ];\n\t\t\tuniforms = UniformsUtils.clone( shader.uniforms );\n\n\t\t} else {\n\n\t\t\tuniforms = material.uniforms;\n\n\t\t}\n\n\t\treturn uniforms;\n\n\t}\n\n\tfunction acquireProgram( parameters, cacheKey ) {\n\n\t\tlet program;\n\n\t\t// Check if code has been already compiled\n\t\tfor ( let p = 0, pl = programs.length; p < pl; p ++ ) {\n\n\t\t\tconst preexistingProgram = programs[ p ];\n\n\t\t\tif ( preexistingProgram.cacheKey === cacheKey ) {\n\n\t\t\t\tprogram = preexistingProgram;\n\t\t\t\t++ program.usedTimes;\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( program === undefined ) {\n\n\t\t\tprogram = new WebGLProgram( renderer, cacheKey, parameters, bindingStates );\n\t\t\tprograms.push( program );\n\n\t\t}\n\n\t\treturn program;\n\n\t}\n\n\tfunction releaseProgram( program ) {\n\n\t\tif ( -- program.usedTimes === 0 ) {\n\n\t\t\t// Remove from unordered set\n\t\t\tconst i = programs.indexOf( program );\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\n\t\t\tprograms.pop();\n\n\t\t\t// Free WebGL resources\n\t\t\tprogram.destroy();\n\n\t\t}\n\n\t}\n\n\tfunction releaseShaderCache( material ) {\n\n\t\t_customShaders.remove( material );\n\n\t}\n\n\tfunction dispose() {\n\n\t\t_customShaders.dispose();\n\n\t}\n\n\treturn {\n\t\tgetParameters: getParameters,\n\t\tgetProgramCacheKey: getProgramCacheKey,\n\t\tgetUniforms: getUniforms,\n\t\tacquireProgram: acquireProgram,\n\t\treleaseProgram: releaseProgram,\n\t\treleaseShaderCache: releaseShaderCache,\n\t\t// Exposed for resource monitoring & error feedback via renderer.info:\n\t\tprograms: programs,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction WebGLProperties() {\n\n\tlet properties = new WeakMap();\n\n\tfunction get( object ) {\n\n\t\tlet map = properties.get( object );\n\n\t\tif ( map === undefined ) {\n\n\t\t\tmap = {};\n\t\t\tproperties.set( object, map );\n\n\t\t}\n\n\t\treturn map;\n\n\t}\n\n\tfunction remove( object ) {\n\n\t\tproperties.delete( object );\n\n\t}\n\n\tfunction update( object, key, value ) {\n\n\t\tproperties.get( object )[ key ] = value;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tproperties = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction painterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.material.id !== b.material.id ) {\n\n\t\treturn a.material.id - b.material.id;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn a.z - b.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\nfunction reversePainterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn b.z - a.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\n\nfunction WebGLRenderList() {\n\n\tconst renderItems = [];\n\tlet renderItemsIndex = 0;\n\n\tconst opaque = [];\n\tconst transmissive = [];\n\tconst transparent = [];\n\n\tfunction init() {\n\n\t\trenderItemsIndex = 0;\n\n\t\topaque.length = 0;\n\t\ttransmissive.length = 0;\n\t\ttransparent.length = 0;\n\n\t}\n\n\tfunction getNextRenderItem( object, geometry, material, groupOrder, z, group ) {\n\n\t\tlet renderItem = renderItems[ renderItemsIndex ];\n\n\t\tif ( renderItem === undefined ) {\n\n\t\t\trenderItem = {\n\t\t\t\tid: object.id,\n\t\t\t\tobject: object,\n\t\t\t\tgeometry: geometry,\n\t\t\t\tmaterial: material,\n\t\t\t\tgroupOrder: groupOrder,\n\t\t\t\trenderOrder: object.renderOrder,\n\t\t\t\tz: z,\n\t\t\t\tgroup: group\n\t\t\t};\n\n\t\t\trenderItems[ renderItemsIndex ] = renderItem;\n\n\t\t} else {\n\n\t\t\trenderItem.id = object.id;\n\t\t\trenderItem.object = object;\n\t\t\trenderItem.geometry = geometry;\n\t\t\trenderItem.material = material;\n\t\t\trenderItem.groupOrder = groupOrder;\n\t\t\trenderItem.renderOrder = object.renderOrder;\n\t\t\trenderItem.z = z;\n\t\t\trenderItem.group = group;\n\n\t\t}\n\n\t\trenderItemsIndex ++;\n\n\t\treturn renderItem;\n\n\t}\n\n\tfunction push( object, geometry, material, groupOrder, z, group ) {\n\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\tif ( material.transmission > 0.0 ) {\n\n\t\t\ttransmissive.push( renderItem );\n\n\t\t} else if ( material.transparent === true ) {\n\n\t\t\ttransparent.push( renderItem );\n\n\t\t} else {\n\n\t\t\topaque.push( renderItem );\n\n\t\t}\n\n\t}\n\n\tfunction unshift( object, geometry, material, groupOrder, z, group ) {\n\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\tif ( material.transmission > 0.0 ) {\n\n\t\t\ttransmissive.unshift( renderItem );\n\n\t\t} else if ( material.transparent === true ) {\n\n\t\t\ttransparent.unshift( renderItem );\n\n\t\t} else {\n\n\t\t\topaque.unshift( renderItem );\n\n\t\t}\n\n\t}\n\n\tfunction sort( customOpaqueSort, customTransparentSort ) {\n\n\t\tif ( opaque.length > 1 ) opaque.sort( customOpaqueSort || painterSortStable );\n\t\tif ( transmissive.length > 1 ) transmissive.sort( customTransparentSort || reversePainterSortStable );\n\t\tif ( transparent.length > 1 ) transparent.sort( customTransparentSort || reversePainterSortStable );\n\n\t}\n\n\tfunction finish() {\n\n\t\t// Clear references from inactive renderItems in the list\n\n\t\tfor ( let i = renderItemsIndex, il = renderItems.length; i < il; i ++ ) {\n\n\t\t\tconst renderItem = renderItems[ i ];\n\n\t\t\tif ( renderItem.id === null ) break;\n\n\t\t\trenderItem.id = null;\n\t\t\trenderItem.object = null;\n\t\t\trenderItem.geometry = null;\n\t\t\trenderItem.material = null;\n\t\t\trenderItem.group = null;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\topaque: opaque,\n\t\ttransmissive: transmissive,\n\t\ttransparent: transparent,\n\n\t\tinit: init,\n\t\tpush: push,\n\t\tunshift: unshift,\n\t\tfinish: finish,\n\n\t\tsort: sort\n\t};\n\n}\n\nfunction WebGLRenderLists() {\n\n\tlet lists = new WeakMap();\n\n\tfunction get( scene, renderCallDepth ) {\n\n\t\tconst listArray = lists.get( scene );\n\t\tlet list;\n\n\t\tif ( listArray === undefined ) {\n\n\t\t\tlist = new WebGLRenderList();\n\t\t\tlists.set( scene, [ list ] );\n\n\t\t} else {\n\n\t\t\tif ( renderCallDepth >= listArray.length ) {\n\n\t\t\t\tlist = new WebGLRenderList();\n\t\t\t\tlistArray.push( list );\n\n\t\t\t} else {\n\n\t\t\t\tlist = listArray[ renderCallDepth ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn list;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tlists = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction UniformsCache() {\n\n\tconst lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tlet uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tconeCos: 0,\n\t\t\t\t\t\tpenumbraCos: 0,\n\t\t\t\t\t\tdecay: 0\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tdecay: 0\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'HemisphereLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tskyColor: new Color(),\n\t\t\t\t\t\tgroundColor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'RectAreaLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\thalfWidth: new Vector3(),\n\t\t\t\t\t\thalfHeight: new Vector3()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\nfunction ShadowUniformsCache() {\n\n\tconst lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tlet uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2(),\n\t\t\t\t\t\tshadowCameraNear: 1,\n\t\t\t\t\t\tshadowCameraFar: 1000\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\t// TODO (abelnation): set RectAreaLight shadow uniforms\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\n\n\nlet nextVersion = 0;\n\nfunction shadowCastingAndTexturingLightsFirst( lightA, lightB ) {\n\n\treturn ( lightB.castShadow ? 2 : 0 ) - ( lightA.castShadow ? 2 : 0 ) + ( lightB.map ? 1 : 0 ) - ( lightA.map ? 1 : 0 );\n\n}\n\nfunction WebGLLights( extensions, capabilities ) {\n\n\tconst cache = new UniformsCache();\n\n\tconst shadowCache = ShadowUniformsCache();\n\n\tconst state = {\n\n\t\tversion: 0,\n\n\t\thash: {\n\t\t\tdirectionalLength: - 1,\n\t\t\tpointLength: - 1,\n\t\t\tspotLength: - 1,\n\t\t\trectAreaLength: - 1,\n\t\t\themiLength: - 1,\n\n\t\t\tnumDirectionalShadows: - 1,\n\t\t\tnumPointShadows: - 1,\n\t\t\tnumSpotShadows: - 1,\n\t\t\tnumSpotMaps: - 1\n\t\t},\n\n\t\tambient: [ 0, 0, 0 ],\n\t\tprobe: [],\n\t\tdirectional: [],\n\t\tdirectionalShadow: [],\n\t\tdirectionalShadowMap: [],\n\t\tdirectionalShadowMatrix: [],\n\t\tspot: [],\n\t\tspotLightMap: [],\n\t\tspotShadow: [],\n\t\tspotShadowMap: [],\n\t\tspotLightMatrix: [],\n\t\trectArea: [],\n\t\trectAreaLTC1: null,\n\t\trectAreaLTC2: null,\n\t\tpoint: [],\n\t\tpointShadow: [],\n\t\tpointShadowMap: [],\n\t\tpointShadowMatrix: [],\n\t\themi: [],\n\t\tnumSpotLightShadowsWithMaps: 0\n\n\t};\n\n\tfor ( let i = 0; i < 9; i ++ ) state.probe.push( new Vector3() );\n\n\tconst vector3 = new Vector3();\n\tconst matrix4 = new Matrix4();\n\tconst matrix42 = new Matrix4();\n\n\tfunction setup( lights, physicallyCorrectLights ) {\n\n\t\tlet r = 0, g = 0, b = 0;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) state.probe[ i ].set( 0, 0, 0 );\n\n\t\tlet directionalLength = 0;\n\t\tlet pointLength = 0;\n\t\tlet spotLength = 0;\n\t\tlet rectAreaLength = 0;\n\t\tlet hemiLength = 0;\n\n\t\tlet numDirectionalShadows = 0;\n\t\tlet numPointShadows = 0;\n\t\tlet numSpotShadows = 0;\n\t\tlet numSpotMaps = 0;\n\t\tlet numSpotShadowsWithMaps = 0;\n\n\t\t// ordering : [shadow casting + map texturing, map texturing, shadow casting, none ]\n\t\tlights.sort( shadowCastingAndTexturingLightsFirst );\n\n\t\t// artist-friendly light intensity scaling factor\n\t\tconst scaleFactor = ( physicallyCorrectLights !== true ) ? Math.PI : 1;\n\n\t\tfor ( let i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\n\t\t\tconst color = light.color;\n\t\t\tconst intensity = light.intensity;\n\t\t\tconst distance = light.distance;\n\n\t\t\tconst shadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\n\n\t\t\tif ( light.isAmbientLight ) {\n\n\t\t\t\tr += color.r * intensity * scaleFactor;\n\t\t\t\tg += color.g * intensity * scaleFactor;\n\t\t\t\tb += color.b * intensity * scaleFactor;\n\n\t\t\t} else if ( light.isLightProbe ) {\n\n\t\t\t\tfor ( let j = 0; j < 9; j ++ ) {\n\n\t\t\t\t\tstate.probe[ j ].addScaledVector( light.sh.coefficients[ j ], intensity );\n\n\t\t\t\t}\n\n\t\t\t} else if ( light.isDirectionalLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity * scaleFactor );\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\tstate.directionalShadow[ directionalLength ] = shadowUniforms;\n\t\t\t\t\tstate.directionalShadowMap[ directionalLength ] = shadowMap;\n\t\t\t\t\tstate.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumDirectionalShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.directional[ directionalLength ] = uniforms;\n\n\t\t\t\tdirectionalLength ++;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity * scaleFactor );\n\t\t\t\tuniforms.distance = distance;\n\n\t\t\t\tuniforms.coneCos = Math.cos( light.angle );\n\t\t\t\tuniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\n\t\t\t\tuniforms.decay = light.decay;\n\n\t\t\t\tstate.spot[ spotLength ] = uniforms;\n\n\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\tif ( light.map ) {\n\n\t\t\t\t\tstate.spotLightMap[ numSpotMaps ] = light.map;\n\t\t\t\t\tnumSpotMaps ++;\n\n\t\t\t\t\t// make sure the lightMatrix is up to date\n\t\t\t\t\t// TODO : do it if required only\n\t\t\t\t\tshadow.updateMatrices( light );\n\n\t\t\t\t\tif ( light.castShadow ) numSpotShadowsWithMaps ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.spotLightMatrix[ spotLength ] = shadow.matrix;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\tstate.spotShadow[ spotLength ] = shadowUniforms;\n\t\t\t\t\tstate.spotShadowMap[ spotLength ] = shadowMap;\n\n\t\t\t\t\tnumSpotShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tspotLength ++;\n\n\t\t\t} else if ( light.isRectAreaLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\n\t\t\t\tuniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\n\n\t\t\t\tstate.rectArea[ rectAreaLength ] = uniforms;\n\n\t\t\t\trectAreaLength ++;\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity * scaleFactor );\n\t\t\t\tuniforms.distance = light.distance;\n\t\t\t\tuniforms.decay = light.decay;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\t\t\t\t\tshadowUniforms.shadowCameraNear = shadow.camera.near;\n\t\t\t\t\tshadowUniforms.shadowCameraFar = shadow.camera.far;\n\n\t\t\t\t\tstate.pointShadow[ pointLength ] = shadowUniforms;\n\t\t\t\t\tstate.pointShadowMap[ pointLength ] = shadowMap;\n\t\t\t\t\tstate.pointShadowMatrix[ pointLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumPointShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.point[ pointLength ] = uniforms;\n\n\t\t\t\tpointLength ++;\n\n\t\t\t} else if ( light.isHemisphereLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.skyColor.copy( light.color ).multiplyScalar( intensity * scaleFactor );\n\t\t\t\tuniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity * scaleFactor );\n\n\t\t\t\tstate.hemi[ hemiLength ] = uniforms;\n\n\t\t\t\themiLength ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( rectAreaLength > 0 ) {\n\n\t\t\tif ( capabilities.isWebGL2 ) {\n\n\t\t\t\t// WebGL 2\n\n\t\t\t\tstate.rectAreaLTC1 = UniformsLib.LTC_FLOAT_1;\n\t\t\t\tstate.rectAreaLTC2 = UniformsLib.LTC_FLOAT_2;\n\n\t\t\t} else {\n\n\t\t\t\t// WebGL 1\n\n\t\t\t\tif ( extensions.has( 'OES_texture_float_linear' ) === true ) {\n\n\t\t\t\t\tstate.rectAreaLTC1 = UniformsLib.LTC_FLOAT_1;\n\t\t\t\t\tstate.rectAreaLTC2 = UniformsLib.LTC_FLOAT_2;\n\n\t\t\t\t} else if ( extensions.has( 'OES_texture_half_float_linear' ) === true ) {\n\n\t\t\t\t\tstate.rectAreaLTC1 = UniformsLib.LTC_HALF_1;\n\t\t\t\t\tstate.rectAreaLTC2 = UniformsLib.LTC_HALF_2;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.ambient[ 0 ] = r;\n\t\tstate.ambient[ 1 ] = g;\n\t\tstate.ambient[ 2 ] = b;\n\n\t\tconst hash = state.hash;\n\n\t\tif ( hash.directionalLength !== directionalLength ||\n\t\t\thash.pointLength !== pointLength ||\n\t\t\thash.spotLength !== spotLength ||\n\t\t\thash.rectAreaLength !== rectAreaLength ||\n\t\t\thash.hemiLength !== hemiLength ||\n\t\t\thash.numDirectionalShadows !== numDirectionalShadows ||\n\t\t\thash.numPointShadows !== numPointShadows ||\n\t\t\thash.numSpotShadows !== numSpotShadows ||\n\t\t\thash.numSpotMaps !== numSpotMaps ) {\n\n\t\t\tstate.directional.length = directionalLength;\n\t\t\tstate.spot.length = spotLength;\n\t\t\tstate.rectArea.length = rectAreaLength;\n\t\t\tstate.point.length = pointLength;\n\t\t\tstate.hemi.length = hemiLength;\n\n\t\t\tstate.directionalShadow.length = numDirectionalShadows;\n\t\t\tstate.directionalShadowMap.length = numDirectionalShadows;\n\t\t\tstate.pointShadow.length = numPointShadows;\n\t\t\tstate.pointShadowMap.length = numPointShadows;\n\t\t\tstate.spotShadow.length = numSpotShadows;\n\t\t\tstate.spotShadowMap.length = numSpotShadows;\n\t\t\tstate.directionalShadowMatrix.length = numDirectionalShadows;\n\t\t\tstate.pointShadowMatrix.length = numPointShadows;\n\t\t\tstate.spotLightMatrix.length = numSpotShadows + numSpotMaps - numSpotShadowsWithMaps;\n\t\t\tstate.spotLightMap.length = numSpotMaps;\n\t\t\tstate.numSpotLightShadowsWithMaps = numSpotShadowsWithMaps;\n\n\t\t\thash.directionalLength = directionalLength;\n\t\t\thash.pointLength = pointLength;\n\t\t\thash.spotLength = spotLength;\n\t\t\thash.rectAreaLength = rectAreaLength;\n\t\t\thash.hemiLength = hemiLength;\n\n\t\t\thash.numDirectionalShadows = numDirectionalShadows;\n\t\t\thash.numPointShadows = numPointShadows;\n\t\t\thash.numSpotShadows = numSpotShadows;\n\t\t\thash.numSpotMaps = numSpotMaps;\n\n\t\t\tstate.version = nextVersion ++;\n\n\t\t}\n\n\t}\n\n\tfunction setupView( lights, camera ) {\n\n\t\tlet directionalLength = 0;\n\t\tlet pointLength = 0;\n\t\tlet spotLength = 0;\n\t\tlet rectAreaLength = 0;\n\t\tlet hemiLength = 0;\n\n\t\tconst viewMatrix = camera.matrixWorldInverse;\n\n\t\tfor ( let i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\n\t\t\tif ( light.isDirectionalLight ) {\n\n\t\t\t\tconst uniforms = state.directional[ directionalLength ];\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tdirectionalLength ++;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tconst uniforms = state.spot[ spotLength ];\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tspotLength ++;\n\n\t\t\t} else if ( light.isRectAreaLight ) {\n\n\t\t\t\tconst uniforms = state.rectArea[ rectAreaLength ];\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\t// extract local rotation of light to derive width/height half vectors\n\t\t\t\tmatrix42.identity();\n\t\t\t\tmatrix4.copy( light.matrixWorld );\n\t\t\t\tmatrix4.premultiply( viewMatrix );\n\t\t\t\tmatrix42.extractRotation( matrix4 );\n\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\n\t\t\t\tuniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\n\n\t\t\t\tuniforms.halfWidth.applyMatrix4( matrix42 );\n\t\t\t\tuniforms.halfHeight.applyMatrix4( matrix42 );\n\n\t\t\t\trectAreaLength ++;\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tconst uniforms = state.point[ pointLength ];\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tpointLength ++;\n\n\t\t\t} else if ( light.isHemisphereLight ) {\n\n\t\t\t\tconst uniforms = state.hemi[ hemiLength ];\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\themiLength ++;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tsetup: setup,\n\t\tsetupView: setupView,\n\t\tstate: state\n\t};\n\n}\n\nfunction WebGLRenderState( extensions, capabilities ) {\n\n\tconst lights = new WebGLLights( extensions, capabilities );\n\n\tconst lightsArray = [];\n\tconst shadowsArray = [];\n\n\tfunction init() {\n\n\t\tlightsArray.length = 0;\n\t\tshadowsArray.length = 0;\n\n\t}\n\n\tfunction pushLight( light ) {\n\n\t\tlightsArray.push( light );\n\n\t}\n\n\tfunction pushShadow( shadowLight ) {\n\n\t\tshadowsArray.push( shadowLight );\n\n\t}\n\n\tfunction setupLights( physicallyCorrectLights ) {\n\n\t\tlights.setup( lightsArray, physicallyCorrectLights );\n\n\t}\n\n\tfunction setupLightsView( camera ) {\n\n\t\tlights.setupView( lightsArray, camera );\n\n\t}\n\n\tconst state = {\n\t\tlightsArray: lightsArray,\n\t\tshadowsArray: shadowsArray,\n\n\t\tlights: lights\n\t};\n\n\treturn {\n\t\tinit: init,\n\t\tstate: state,\n\t\tsetupLights: setupLights,\n\t\tsetupLightsView: setupLightsView,\n\n\t\tpushLight: pushLight,\n\t\tpushShadow: pushShadow\n\t};\n\n}\n\nfunction WebGLRenderStates( extensions, capabilities ) {\n\n\tlet renderStates = new WeakMap();\n\n\tfunction get( scene, renderCallDepth = 0 ) {\n\n\t\tconst renderStateArray = renderStates.get( scene );\n\t\tlet renderState;\n\n\t\tif ( renderStateArray === undefined ) {\n\n\t\t\trenderState = new WebGLRenderState( extensions, capabilities );\n\t\t\trenderStates.set( scene, [ renderState ] );\n\n\t\t} else {\n\n\t\t\tif ( renderCallDepth >= renderStateArray.length ) {\n\n\t\t\t\trenderState = new WebGLRenderState( extensions, capabilities );\n\t\t\t\trenderStateArray.push( renderState );\n\n\t\t\t} else {\n\n\t\t\t\trenderState = renderStateArray[ renderCallDepth ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn renderState;\n\n\t}\n\n\tfunction dispose() {\n\n\t\trenderStates = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nclass MeshDepthMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshDepthMaterial = true;\n\n\t\tthis.type = 'MeshDepthMaterial';\n\n\t\tthis.depthPacking = BasicDepthPacking;\n\n\t\tthis.map = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.depthPacking = source.depthPacking;\n\n\t\tthis.map = source.map;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshDistanceMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshDistanceMaterial = true;\n\n\t\tthis.type = 'MeshDistanceMaterial';\n\n\t\tthis.referencePosition = new Vector3();\n\t\tthis.nearDistance = 1;\n\t\tthis.farDistance = 1000;\n\n\t\tthis.map = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.referencePosition.copy( source.referencePosition );\n\t\tthis.nearDistance = source.nearDistance;\n\t\tthis.farDistance = source.farDistance;\n\n\t\tthis.map = source.map;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst vertex = \"void main() {\\n\\tgl_Position = vec4( position, 1.0 );\\n}\";\n\nconst fragment = \"uniform sampler2D shadow_pass;\\nuniform vec2 resolution;\\nuniform float radius;\\n#include <packing>\\nvoid main() {\\n\\tconst float samples = float( VSM_SAMPLES );\\n\\tfloat mean = 0.0;\\n\\tfloat squared_mean = 0.0;\\n\\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\\n\\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\\n\\tfor ( float i = 0.0; i < samples; i ++ ) {\\n\\t\\tfloat uvOffset = uvStart + i * uvStride;\\n\\t\\t#ifdef HORIZONTAL_PASS\\n\\t\\t\\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\\n\\t\\t\\tmean += distribution.x;\\n\\t\\t\\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\\n\\t\\t#else\\n\\t\\t\\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\\n\\t\\t\\tmean += depth;\\n\\t\\t\\tsquared_mean += depth * depth;\\n\\t\\t#endif\\n\\t}\\n\\tmean = mean / samples;\\n\\tsquared_mean = squared_mean / samples;\\n\\tfloat std_dev = sqrt( squared_mean - mean * mean );\\n\\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\\n}\";\n\nfunction WebGLShadowMap( _renderer, _objects, _capabilities ) {\n\n\tlet _frustum = new Frustum();\n\n\tconst _shadowMapSize = new Vector2(),\n\t\t_viewportSize = new Vector2(),\n\n\t\t_viewport = new Vector4(),\n\n\t\t_depthMaterial = new MeshDepthMaterial( { depthPacking: RGBADepthPacking } ),\n\t\t_distanceMaterial = new MeshDistanceMaterial(),\n\n\t\t_materialCache = {},\n\n\t\t_maxTextureSize = _capabilities.maxTextureSize;\n\n\tconst shadowSide = { 0: BackSide, 1: FrontSide, 2: DoubleSide };\n\n\tconst shadowMaterialVertical = new ShaderMaterial( {\n\t\tdefines: {\n\t\t\tVSM_SAMPLES: 8\n\t\t},\n\t\tuniforms: {\n\t\t\tshadow_pass: { value: null },\n\t\t\tresolution: { value: new Vector2() },\n\t\t\tradius: { value: 4.0 }\n\t\t},\n\n\t\tvertexShader: vertex,\n\t\tfragmentShader: fragment\n\n\t} );\n\n\tconst shadowMaterialHorizontal = shadowMaterialVertical.clone();\n\tshadowMaterialHorizontal.defines.HORIZONTAL_PASS = 1;\n\n\tconst fullScreenTri = new BufferGeometry();\n\tfullScreenTri.setAttribute(\n\t\t'position',\n\t\tnew BufferAttribute(\n\t\t\tnew Float32Array( [ - 1, - 1, 0.5, 3, - 1, 0.5, - 1, 3, 0.5 ] ),\n\t\t\t3\n\t\t)\n\t);\n\n\tconst fullScreenMesh = new Mesh( fullScreenTri, shadowMaterialVertical );\n\n\tconst scope = this;\n\n\tthis.enabled = false;\n\n\tthis.autoUpdate = true;\n\tthis.needsUpdate = false;\n\n\tthis.type = PCFShadowMap;\n\n\tthis.render = function ( lights, scene, camera ) {\n\n\t\tif ( scope.enabled === false ) return;\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\n\n\t\tif ( lights.length === 0 ) return;\n\n\t\tconst currentRenderTarget = _renderer.getRenderTarget();\n\t\tconst activeCubeFace = _renderer.getActiveCubeFace();\n\t\tconst activeMipmapLevel = _renderer.getActiveMipmapLevel();\n\n\t\tconst _state = _renderer.state;\n\n\t\t// Set GL state for depth map.\n\t\t_state.setBlending( NoBlending );\n\t\t_state.buffers.color.setClear( 1, 1, 1, 1 );\n\t\t_state.buffers.depth.setTest( true );\n\t\t_state.setScissorTest( false );\n\n\t\t// render depth map\n\n\t\tfor ( let i = 0, il = lights.length; i < il; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\t\t\tconst shadow = light.shadow;\n\n\t\t\tif ( shadow === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has no shadow.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( shadow.autoUpdate === false && shadow.needsUpdate === false ) continue;\n\n\t\t\t_shadowMapSize.copy( shadow.mapSize );\n\n\t\t\tconst shadowFrameExtents = shadow.getFrameExtents();\n\n\t\t\t_shadowMapSize.multiply( shadowFrameExtents );\n\n\t\t\t_viewportSize.copy( shadow.mapSize );\n\n\t\t\tif ( _shadowMapSize.x > _maxTextureSize || _shadowMapSize.y > _maxTextureSize ) {\n\n\t\t\t\tif ( _shadowMapSize.x > _maxTextureSize ) {\n\n\t\t\t\t\t_viewportSize.x = Math.floor( _maxTextureSize / shadowFrameExtents.x );\n\t\t\t\t\t_shadowMapSize.x = _viewportSize.x * shadowFrameExtents.x;\n\t\t\t\t\tshadow.mapSize.x = _viewportSize.x;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _shadowMapSize.y > _maxTextureSize ) {\n\n\t\t\t\t\t_viewportSize.y = Math.floor( _maxTextureSize / shadowFrameExtents.y );\n\t\t\t\t\t_shadowMapSize.y = _viewportSize.y * shadowFrameExtents.y;\n\t\t\t\t\tshadow.mapSize.y = _viewportSize.y;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null ) {\n\n\t\t\t\tconst pars = ( this.type !== VSMShadowMap ) ? { minFilter: NearestFilter, magFilter: NearestFilter } : {};\n\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\t\t\t\tshadow.map.texture.name = light.name + '.shadowMap';\n\n\t\t\t\tshadow.camera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\t_renderer.setRenderTarget( shadow.map );\n\t\t\t_renderer.clear();\n\n\t\t\tconst viewportCount = shadow.getViewportCount();\n\n\t\t\tfor ( let vp = 0; vp < viewportCount; vp ++ ) {\n\n\t\t\t\tconst viewport = shadow.getViewport( vp );\n\n\t\t\t\t_viewport.set(\n\t\t\t\t\t_viewportSize.x * viewport.x,\n\t\t\t\t\t_viewportSize.y * viewport.y,\n\t\t\t\t\t_viewportSize.x * viewport.z,\n\t\t\t\t\t_viewportSize.y * viewport.w\n\t\t\t\t);\n\n\t\t\t\t_state.viewport( _viewport );\n\n\t\t\t\tshadow.updateMatrices( light, vp );\n\n\t\t\t\t_frustum = shadow.getFrustum();\n\n\t\t\t\trenderObject( scene, camera, shadow.camera, light, this.type );\n\n\t\t\t}\n\n\t\t\t// do blur pass for VSM\n\n\t\t\tif ( shadow.isPointLightShadow !== true && this.type === VSMShadowMap ) {\n\n\t\t\t\tVSMPass( shadow, camera );\n\n\t\t\t}\n\n\t\t\tshadow.needsUpdate = false;\n\n\t\t}\n\n\t\tscope.needsUpdate = false;\n\n\t\t_renderer.setRenderTarget( currentRenderTarget, activeCubeFace, activeMipmapLevel );\n\n\t};\n\n\tfunction VSMPass( shadow, camera ) {\n\n\t\tconst geometry = _objects.update( fullScreenMesh );\n\n\t\tif ( shadowMaterialVertical.defines.VSM_SAMPLES !== shadow.blurSamples ) {\n\n\t\t\tshadowMaterialVertical.defines.VSM_SAMPLES = shadow.blurSamples;\n\t\t\tshadowMaterialHorizontal.defines.VSM_SAMPLES = shadow.blurSamples;\n\n\t\t\tshadowMaterialVertical.needsUpdate = true;\n\t\t\tshadowMaterialHorizontal.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( shadow.mapPass === null ) {\n\n\t\t\tshadow.mapPass = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y );\n\n\t\t}\n\n\t\t// vertical pass\n\n\t\tshadowMaterialVertical.uniforms.shadow_pass.value = shadow.map.texture;\n\t\tshadowMaterialVertical.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialVertical.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget( shadow.mapPass );\n\t\t_renderer.clear();\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialVertical, fullScreenMesh, null );\n\n\t\t// horizontal pass\n\n\t\tshadowMaterialHorizontal.uniforms.shadow_pass.value = shadow.mapPass.texture;\n\t\tshadowMaterialHorizontal.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialHorizontal.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget( shadow.map );\n\t\t_renderer.clear();\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialHorizontal, fullScreenMesh, null );\n\n\t}\n\n\tfunction getDepthMaterial( object, material, light, shadowCameraNear, shadowCameraFar, type ) {\n\n\t\tlet result = null;\n\n\t\tconst customMaterial = ( light.isPointLight === true ) ? object.customDistanceMaterial : object.customDepthMaterial;\n\n\t\tif ( customMaterial !== undefined ) {\n\n\t\t\tresult = customMaterial;\n\n\t\t} else {\n\n\t\t\tresult = ( light.isPointLight === true ) ? _distanceMaterial : _depthMaterial;\n\n\t\t\tif ( ( _renderer.localClippingEnabled && material.clipShadows === true && Array.isArray( material.clippingPlanes ) && material.clippingPlanes.length !== 0 ) ||\n\t\t\t\t( material.displacementMap && material.displacementScale !== 0 ) ||\n\t\t\t\t( material.alphaMap && material.alphaTest > 0 ) ||\n\t\t\t\t( material.map && material.alphaTest > 0 ) ) {\n\n\t\t\t\t// in this case we need a unique material instance reflecting the\n\t\t\t\t// appropriate state\n\n\t\t\t\tconst keyA = result.uuid, keyB = material.uuid;\n\n\t\t\t\tlet materialsForVariant = _materialCache[ keyA ];\n\n\t\t\t\tif ( materialsForVariant === undefined ) {\n\n\t\t\t\t\tmaterialsForVariant = {};\n\t\t\t\t\t_materialCache[ keyA ] = materialsForVariant;\n\n\t\t\t\t}\n\n\t\t\t\tlet cachedMaterial = materialsForVariant[ keyB ];\n\n\t\t\t\tif ( cachedMaterial === undefined ) {\n\n\t\t\t\t\tcachedMaterial = result.clone();\n\t\t\t\t\tmaterialsForVariant[ keyB ] = cachedMaterial;\n\n\t\t\t\t}\n\n\t\t\t\tresult = cachedMaterial;\n\n\t\t\t}\n\n\t\t}\n\n\t\tresult.visible = material.visible;\n\t\tresult.wireframe = material.wireframe;\n\n\t\tif ( type === VSMShadowMap ) {\n\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : material.side;\n\n\t\t} else {\n\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : shadowSide[ material.side ];\n\n\t\t}\n\n\t\tresult.alphaMap = material.alphaMap;\n\t\tresult.alphaTest = material.alphaTest;\n\t\tresult.map = material.map;\n\n\t\tresult.clipShadows = material.clipShadows;\n\t\tresult.clippingPlanes = material.clippingPlanes;\n\t\tresult.clipIntersection = material.clipIntersection;\n\n\t\tresult.displacementMap = material.displacementMap;\n\t\tresult.displacementScale = material.displacementScale;\n\t\tresult.displacementBias = material.displacementBias;\n\n\t\tresult.wireframeLinewidth = material.wireframeLinewidth;\n\t\tresult.linewidth = material.linewidth;\n\n\t\tif ( light.isPointLight === true && result.isMeshDistanceMaterial === true ) {\n\n\t\t\tresult.referencePosition.setFromMatrixPosition( light.matrixWorld );\n\t\t\tresult.nearDistance = shadowCameraNear;\n\t\t\tresult.farDistance = shadowCameraFar;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tfunction renderObject( object, camera, shadowCamera, light, type ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tconst visible = object.layers.test( camera.layers );\n\n\t\tif ( visible && ( object.isMesh || object.isLine || object.isPoints ) ) {\n\n\t\t\tif ( ( object.castShadow || ( object.receiveShadow && type === VSMShadowMap ) ) && ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) ) {\n\n\t\t\t\tobject.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\n\n\t\t\t\tconst geometry = _objects.update( object );\n\t\t\t\tconst material = object.material;\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tconst groups = geometry.groups;\n\n\t\t\t\t\tfor ( let k = 0, kl = groups.length; k < kl; k ++ ) {\n\n\t\t\t\t\t\tconst group = groups[ k ];\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\tconst depthMaterial = getDepthMaterial( object, groupMaterial, light, shadowCamera.near, shadowCamera.far, type );\n\n\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\tconst depthMaterial = getDepthMaterial( object, material, light, shadowCamera.near, shadowCamera.far, type );\n\n\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\trenderObject( children[ i ], camera, shadowCamera, light, type );\n\n\t\t}\n\n\t}\n\n}\n\nfunction WebGLState( gl, extensions, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tfunction ColorBuffer() {\n\n\t\tlet locked = false;\n\n\t\tconst color = new Vector4();\n\t\tlet currentColorMask = null;\n\t\tconst currentColorClear = new Vector4( 0, 0, 0, 0 );\n\n\t\treturn {\n\n\t\t\tsetMask: function ( colorMask ) {\n\n\t\t\t\tif ( currentColorMask !== colorMask && ! locked ) {\n\n\t\t\t\t\tgl.colorMask( colorMask, colorMask, colorMask, colorMask );\n\t\t\t\t\tcurrentColorMask = colorMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( r, g, b, a, premultipliedAlpha ) {\n\n\t\t\t\tif ( premultipliedAlpha === true ) {\n\n\t\t\t\t\tr *= a; g *= a; b *= a;\n\n\t\t\t\t}\n\n\t\t\t\tcolor.set( r, g, b, a );\n\n\t\t\t\tif ( currentColorClear.equals( color ) === false ) {\n\n\t\t\t\t\tgl.clearColor( r, g, b, a );\n\t\t\t\t\tcurrentColorClear.copy( color );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentColorMask = null;\n\t\t\t\tcurrentColorClear.set( - 1, 0, 0, 0 ); // set to invalid state\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction DepthBuffer() {\n\n\t\tlet locked = false;\n\n\t\tlet currentDepthMask = null;\n\t\tlet currentDepthFunc = null;\n\t\tlet currentDepthClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( depthTest ) {\n\n\t\t\t\tif ( depthTest ) {\n\n\t\t\t\t\tenable( 2929 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdisable( 2929 );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( depthMask ) {\n\n\t\t\t\tif ( currentDepthMask !== depthMask && ! locked ) {\n\n\t\t\t\t\tgl.depthMask( depthMask );\n\t\t\t\t\tcurrentDepthMask = depthMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( depthFunc ) {\n\n\t\t\t\tif ( currentDepthFunc !== depthFunc ) {\n\n\t\t\t\t\tswitch ( depthFunc ) {\n\n\t\t\t\t\t\tcase NeverDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( 512 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AlwaysDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( 519 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase LessDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( 513 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase LessEqualDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( 515 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EqualDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( 514 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase GreaterEqualDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( 518 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase GreaterDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( 516 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase NotEqualDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( 517 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tgl.depthFunc( 515 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentDepthFunc = depthFunc;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( depth ) {\n\n\t\t\t\tif ( currentDepthClear !== depth ) {\n\n\t\t\t\t\tgl.clearDepth( depth );\n\t\t\t\t\tcurrentDepthClear = depth;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentDepthMask = null;\n\t\t\t\tcurrentDepthFunc = null;\n\t\t\t\tcurrentDepthClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction StencilBuffer() {\n\n\t\tlet locked = false;\n\n\t\tlet currentStencilMask = null;\n\t\tlet currentStencilFunc = null;\n\t\tlet currentStencilRef = null;\n\t\tlet currentStencilFuncMask = null;\n\t\tlet currentStencilFail = null;\n\t\tlet currentStencilZFail = null;\n\t\tlet currentStencilZPass = null;\n\t\tlet currentStencilClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( stencilTest ) {\n\n\t\t\t\tif ( ! locked ) {\n\n\t\t\t\t\tif ( stencilTest ) {\n\n\t\t\t\t\t\tenable( 2960 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdisable( 2960 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( stencilMask ) {\n\n\t\t\t\tif ( currentStencilMask !== stencilMask && ! locked ) {\n\n\t\t\t\t\tgl.stencilMask( stencilMask );\n\t\t\t\t\tcurrentStencilMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( stencilFunc, stencilRef, stencilMask ) {\n\n\t\t\t\tif ( currentStencilFunc !== stencilFunc ||\n\t\t\t\t     currentStencilRef !== stencilRef ||\n\t\t\t\t     currentStencilFuncMask !== stencilMask ) {\n\n\t\t\t\t\tgl.stencilFunc( stencilFunc, stencilRef, stencilMask );\n\n\t\t\t\t\tcurrentStencilFunc = stencilFunc;\n\t\t\t\t\tcurrentStencilRef = stencilRef;\n\t\t\t\t\tcurrentStencilFuncMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetOp: function ( stencilFail, stencilZFail, stencilZPass ) {\n\n\t\t\t\tif ( currentStencilFail !== stencilFail ||\n\t\t\t\t     currentStencilZFail !== stencilZFail ||\n\t\t\t\t     currentStencilZPass !== stencilZPass ) {\n\n\t\t\t\t\tgl.stencilOp( stencilFail, stencilZFail, stencilZPass );\n\n\t\t\t\t\tcurrentStencilFail = stencilFail;\n\t\t\t\t\tcurrentStencilZFail = stencilZFail;\n\t\t\t\t\tcurrentStencilZPass = stencilZPass;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( stencil ) {\n\n\t\t\t\tif ( currentStencilClear !== stencil ) {\n\n\t\t\t\t\tgl.clearStencil( stencil );\n\t\t\t\t\tcurrentStencilClear = stencil;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentStencilMask = null;\n\t\t\t\tcurrentStencilFunc = null;\n\t\t\t\tcurrentStencilRef = null;\n\t\t\t\tcurrentStencilFuncMask = null;\n\t\t\t\tcurrentStencilFail = null;\n\t\t\t\tcurrentStencilZFail = null;\n\t\t\t\tcurrentStencilZPass = null;\n\t\t\t\tcurrentStencilClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t//\n\n\tconst colorBuffer = new ColorBuffer();\n\tconst depthBuffer = new DepthBuffer();\n\tconst stencilBuffer = new StencilBuffer();\n\n\tconst uboBindings = new WeakMap();\n\tconst uboProgramMap = new WeakMap();\n\n\tlet enabledCapabilities = {};\n\n\tlet currentBoundFramebuffers = {};\n\tlet currentDrawbuffers = new WeakMap();\n\tlet defaultDrawbuffers = [];\n\n\tlet currentProgram = null;\n\n\tlet currentBlendingEnabled = false;\n\tlet currentBlending = null;\n\tlet currentBlendEquation = null;\n\tlet currentBlendSrc = null;\n\tlet currentBlendDst = null;\n\tlet currentBlendEquationAlpha = null;\n\tlet currentBlendSrcAlpha = null;\n\tlet currentBlendDstAlpha = null;\n\tlet currentPremultipledAlpha = false;\n\n\tlet currentFlipSided = null;\n\tlet currentCullFace = null;\n\n\tlet currentLineWidth = null;\n\n\tlet currentPolygonOffsetFactor = null;\n\tlet currentPolygonOffsetUnits = null;\n\n\tconst maxTextures = gl.getParameter( 35661 );\n\n\tlet lineWidthAvailable = false;\n\tlet version = 0;\n\tconst glVersion = gl.getParameter( 7938 );\n\n\tif ( glVersion.indexOf( 'WebGL' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^WebGL (\\d)/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 1.0 );\n\n\t} else if ( glVersion.indexOf( 'OpenGL ES' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^OpenGL ES (\\d)/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 2.0 );\n\n\t}\n\n\tlet currentTextureSlot = null;\n\tlet currentBoundTextures = {};\n\n\tconst scissorParam = gl.getParameter( 3088 );\n\tconst viewportParam = gl.getParameter( 2978 );\n\n\tconst currentScissor = new Vector4().fromArray( scissorParam );\n\tconst currentViewport = new Vector4().fromArray( viewportParam );\n\n\tfunction createTexture( type, target, count ) {\n\n\t\tconst data = new Uint8Array( 4 ); // 4 is required to match default unpack alignment of 4.\n\t\tconst texture = gl.createTexture();\n\n\t\tgl.bindTexture( type, texture );\n\t\tgl.texParameteri( type, 10241, 9728 );\n\t\tgl.texParameteri( type, 10240, 9728 );\n\n\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\tgl.texImage2D( target + i, 0, 6408, 1, 1, 0, 6408, 5121, data );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tconst emptyTextures = {};\n\temptyTextures[ 3553 ] = createTexture( 3553, 3553, 1 );\n\temptyTextures[ 34067 ] = createTexture( 34067, 34069, 6 );\n\n\t// init\n\n\tcolorBuffer.setClear( 0, 0, 0, 1 );\n\tdepthBuffer.setClear( 1 );\n\tstencilBuffer.setClear( 0 );\n\n\tenable( 2929 );\n\tdepthBuffer.setFunc( LessEqualDepth );\n\n\tsetFlipSided( false );\n\tsetCullFace( CullFaceBack );\n\tenable( 2884 );\n\n\tsetBlending( NoBlending );\n\n\t//\n\n\tfunction enable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== true ) {\n\n\t\t\tgl.enable( id );\n\t\t\tenabledCapabilities[ id ] = true;\n\n\t\t}\n\n\t}\n\n\tfunction disable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== false ) {\n\n\t\t\tgl.disable( id );\n\t\t\tenabledCapabilities[ id ] = false;\n\n\t\t}\n\n\t}\n\n\tfunction bindFramebuffer( target, framebuffer ) {\n\n\t\tif ( currentBoundFramebuffers[ target ] !== framebuffer ) {\n\n\t\t\tgl.bindFramebuffer( target, framebuffer );\n\n\t\t\tcurrentBoundFramebuffers[ target ] = framebuffer;\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t// 36009 is equivalent to 36160\n\n\t\t\t\tif ( target === 36009 ) {\n\n\t\t\t\t\tcurrentBoundFramebuffers[ 36160 ] = framebuffer;\n\n\t\t\t\t}\n\n\t\t\t\tif ( target === 36160 ) {\n\n\t\t\t\t\tcurrentBoundFramebuffers[ 36009 ] = framebuffer;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tfunction drawBuffers( renderTarget, framebuffer ) {\n\n\t\tlet drawBuffers = defaultDrawbuffers;\n\n\t\tlet needsUpdate = false;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tdrawBuffers = currentDrawbuffers.get( framebuffer );\n\n\t\t\tif ( drawBuffers === undefined ) {\n\n\t\t\t\tdrawBuffers = [];\n\t\t\t\tcurrentDrawbuffers.set( framebuffer, drawBuffers );\n\n\t\t\t}\n\n\t\t\tif ( renderTarget.isWebGLMultipleRenderTargets ) {\n\n\t\t\t\tconst textures = renderTarget.texture;\n\n\t\t\t\tif ( drawBuffers.length !== textures.length || drawBuffers[ 0 ] !== 36064 ) {\n\n\t\t\t\t\tfor ( let i = 0, il = textures.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tdrawBuffers[ i ] = 36064 + i;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tdrawBuffers.length = textures.length;\n\n\t\t\t\t\tneedsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( drawBuffers[ 0 ] !== 36064 ) {\n\n\t\t\t\t\tdrawBuffers[ 0 ] = 36064;\n\n\t\t\t\t\tneedsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( drawBuffers[ 0 ] !== 1029 ) {\n\n\t\t\t\tdrawBuffers[ 0 ] = 1029;\n\n\t\t\t\tneedsUpdate = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( needsUpdate ) {\n\n\t\t\tif ( capabilities.isWebGL2 ) {\n\n\t\t\t\tgl.drawBuffers( drawBuffers );\n\n\t\t\t} else {\n\n\t\t\t\textensions.get( 'WEBGL_draw_buffers' ).drawBuffersWEBGL( drawBuffers );\n\n\t\t\t}\n\n\t\t}\n\n\n\t}\n\n\tfunction useProgram( program ) {\n\n\t\tif ( currentProgram !== program ) {\n\n\t\t\tgl.useProgram( program );\n\n\t\t\tcurrentProgram = program;\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tconst equationToGL = {\n\t\t[ AddEquation ]: 32774,\n\t\t[ SubtractEquation ]: 32778,\n\t\t[ ReverseSubtractEquation ]: 32779\n\t};\n\n\tif ( isWebGL2 ) {\n\n\t\tequationToGL[ MinEquation ] = 32775;\n\t\tequationToGL[ MaxEquation ] = 32776;\n\n\t} else {\n\n\t\tconst extension = extensions.get( 'EXT_blend_minmax' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tequationToGL[ MinEquation ] = extension.MIN_EXT;\n\t\t\tequationToGL[ MaxEquation ] = extension.MAX_EXT;\n\n\t\t}\n\n\t}\n\n\tconst factorToGL = {\n\t\t[ ZeroFactor ]: 0,\n\t\t[ OneFactor ]: 1,\n\t\t[ SrcColorFactor ]: 768,\n\t\t[ SrcAlphaFactor ]: 770,\n\t\t[ SrcAlphaSaturateFactor ]: 776,\n\t\t[ DstColorFactor ]: 774,\n\t\t[ DstAlphaFactor ]: 772,\n\t\t[ OneMinusSrcColorFactor ]: 769,\n\t\t[ OneMinusSrcAlphaFactor ]: 771,\n\t\t[ OneMinusDstColorFactor ]: 775,\n\t\t[ OneMinusDstAlphaFactor ]: 773\n\t};\n\n\tfunction setBlending( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\n\n\t\tif ( blending === NoBlending ) {\n\n\t\t\tif ( currentBlendingEnabled === true ) {\n\n\t\t\t\tdisable( 3042 );\n\t\t\t\tcurrentBlendingEnabled = false;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( currentBlendingEnabled === false ) {\n\n\t\t\tenable( 3042 );\n\t\t\tcurrentBlendingEnabled = true;\n\n\t\t}\n\n\t\tif ( blending !== CustomBlending ) {\n\n\t\t\tif ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\n\n\t\t\t\tif ( currentBlendEquation !== AddEquation || currentBlendEquationAlpha !== AddEquation ) {\n\n\t\t\t\t\tgl.blendEquation( 32774 );\n\n\t\t\t\t\tcurrentBlendEquation = AddEquation;\n\t\t\t\t\tcurrentBlendEquationAlpha = AddEquation;\n\n\t\t\t\t}\n\n\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 1, 771, 1, 771 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 1, 1 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 0, 769, 0, 1 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 0, 768, 0, 770 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 770, 771, 1, 771 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 770, 1 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 0, 769, 0, 1 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 0, 768 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tcurrentBlendSrc = null;\n\t\t\t\tcurrentBlendDst = null;\n\t\t\t\tcurrentBlendSrcAlpha = null;\n\t\t\t\tcurrentBlendDstAlpha = null;\n\n\t\t\t\tcurrentBlending = blending;\n\t\t\t\tcurrentPremultipledAlpha = premultipliedAlpha;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// custom blending\n\n\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\n\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\n\t\tblendDstAlpha = blendDstAlpha || blendDst;\n\n\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\n\n\t\t\tgl.blendEquationSeparate( equationToGL[ blendEquation ], equationToGL[ blendEquationAlpha ] );\n\n\t\t\tcurrentBlendEquation = blendEquation;\n\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\n\n\t\t}\n\n\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\n\n\t\t\tgl.blendFuncSeparate( factorToGL[ blendSrc ], factorToGL[ blendDst ], factorToGL[ blendSrcAlpha ], factorToGL[ blendDstAlpha ] );\n\n\t\t\tcurrentBlendSrc = blendSrc;\n\t\t\tcurrentBlendDst = blendDst;\n\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\n\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\n\n\t\t}\n\n\t\tcurrentBlending = blending;\n\t\tcurrentPremultipledAlpha = false;\n\n\t}\n\n\tfunction setMaterial( material, frontFaceCW ) {\n\n\t\tmaterial.side === DoubleSide\n\t\t\t? disable( 2884 )\n\t\t\t: enable( 2884 );\n\n\t\tlet flipSided = ( material.side === BackSide );\n\t\tif ( frontFaceCW ) flipSided = ! flipSided;\n\n\t\tsetFlipSided( flipSided );\n\n\t\t( material.blending === NormalBlending && material.transparent === false )\n\t\t\t? setBlending( NoBlending )\n\t\t\t: setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha );\n\n\t\tdepthBuffer.setFunc( material.depthFunc );\n\t\tdepthBuffer.setTest( material.depthTest );\n\t\tdepthBuffer.setMask( material.depthWrite );\n\t\tcolorBuffer.setMask( material.colorWrite );\n\n\t\tconst stencilWrite = material.stencilWrite;\n\t\tstencilBuffer.setTest( stencilWrite );\n\t\tif ( stencilWrite ) {\n\n\t\t\tstencilBuffer.setMask( material.stencilWriteMask );\n\t\t\tstencilBuffer.setFunc( material.stencilFunc, material.stencilRef, material.stencilFuncMask );\n\t\t\tstencilBuffer.setOp( material.stencilFail, material.stencilZFail, material.stencilZPass );\n\n\t\t}\n\n\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t\tmaterial.alphaToCoverage === true\n\t\t\t? enable( 32926 )\n\t\t\t: disable( 32926 );\n\n\t}\n\n\t//\n\n\tfunction setFlipSided( flipSided ) {\n\n\t\tif ( currentFlipSided !== flipSided ) {\n\n\t\t\tif ( flipSided ) {\n\n\t\t\t\tgl.frontFace( 2304 );\n\n\t\t\t} else {\n\n\t\t\t\tgl.frontFace( 2305 );\n\n\t\t\t}\n\n\t\t\tcurrentFlipSided = flipSided;\n\n\t\t}\n\n\t}\n\n\tfunction setCullFace( cullFace ) {\n\n\t\tif ( cullFace !== CullFaceNone ) {\n\n\t\t\tenable( 2884 );\n\n\t\t\tif ( cullFace !== currentCullFace ) {\n\n\t\t\t\tif ( cullFace === CullFaceBack ) {\n\n\t\t\t\t\tgl.cullFace( 1029 );\n\n\t\t\t\t} else if ( cullFace === CullFaceFront ) {\n\n\t\t\t\t\tgl.cullFace( 1028 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.cullFace( 1032 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( 2884 );\n\n\t\t}\n\n\t\tcurrentCullFace = cullFace;\n\n\t}\n\n\tfunction setLineWidth( width ) {\n\n\t\tif ( width !== currentLineWidth ) {\n\n\t\t\tif ( lineWidthAvailable ) gl.lineWidth( width );\n\n\t\t\tcurrentLineWidth = width;\n\n\t\t}\n\n\t}\n\n\tfunction setPolygonOffset( polygonOffset, factor, units ) {\n\n\t\tif ( polygonOffset ) {\n\n\t\t\tenable( 32823 );\n\n\t\t\tif ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\n\n\t\t\t\tgl.polygonOffset( factor, units );\n\n\t\t\t\tcurrentPolygonOffsetFactor = factor;\n\t\t\t\tcurrentPolygonOffsetUnits = units;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( 32823 );\n\n\t\t}\n\n\t}\n\n\tfunction setScissorTest( scissorTest ) {\n\n\t\tif ( scissorTest ) {\n\n\t\t\tenable( 3089 );\n\n\t\t} else {\n\n\t\t\tdisable( 3089 );\n\n\t\t}\n\n\t}\n\n\t// texture\n\n\tfunction activeTexture( webglSlot ) {\n\n\t\tif ( webglSlot === undefined ) webglSlot = 33984 + maxTextures - 1;\n\n\t\tif ( currentTextureSlot !== webglSlot ) {\n\n\t\t\tgl.activeTexture( webglSlot );\n\t\t\tcurrentTextureSlot = webglSlot;\n\n\t\t}\n\n\t}\n\n\tfunction bindTexture( webglType, webglTexture, webglSlot ) {\n\n\t\tif ( webglSlot === undefined ) {\n\n\t\t\tif ( currentTextureSlot === null ) {\n\n\t\t\t\twebglSlot = 33984 + maxTextures - 1;\n\n\t\t\t} else {\n\n\t\t\t\twebglSlot = currentTextureSlot;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet boundTexture = currentBoundTextures[ webglSlot ];\n\n\t\tif ( boundTexture === undefined ) {\n\n\t\t\tboundTexture = { type: undefined, texture: undefined };\n\t\t\tcurrentBoundTextures[ webglSlot ] = boundTexture;\n\n\t\t}\n\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\n\n\t\t\tif ( currentTextureSlot !== webglSlot ) {\n\n\t\t\t\tgl.activeTexture( webglSlot );\n\t\t\t\tcurrentTextureSlot = webglSlot;\n\n\t\t\t}\n\n\t\t\tgl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\n\n\t\t\tboundTexture.type = webglType;\n\t\t\tboundTexture.texture = webglTexture;\n\n\t\t}\n\n\t}\n\n\tfunction unbindTexture() {\n\n\t\tconst boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture !== undefined && boundTexture.type !== undefined ) {\n\n\t\t\tgl.bindTexture( boundTexture.type, null );\n\n\t\t\tboundTexture.type = undefined;\n\t\t\tboundTexture.texture = undefined;\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexImage3D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexImage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texSubImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texSubImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texSubImage3D() {\n\n\t\ttry {\n\n\t\t\tgl.texSubImage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexSubImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexSubImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexSubImage3D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexSubImage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texStorage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texStorage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texStorage3D() {\n\n\t\ttry {\n\n\t\t\tgl.texStorage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage3D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction scissor( scissor ) {\n\n\t\tif ( currentScissor.equals( scissor ) === false ) {\n\n\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\n\t\t\tcurrentScissor.copy( scissor );\n\n\t\t}\n\n\t}\n\n\tfunction viewport( viewport ) {\n\n\t\tif ( currentViewport.equals( viewport ) === false ) {\n\n\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\n\t\t\tcurrentViewport.copy( viewport );\n\n\t\t}\n\n\t}\n\n\tfunction updateUBOMapping( uniformsGroup, program ) {\n\n\t\tlet mapping = uboProgramMap.get( program );\n\n\t\tif ( mapping === undefined ) {\n\n\t\t\tmapping = new WeakMap();\n\n\t\t\tuboProgramMap.set( program, mapping );\n\n\t\t}\n\n\t\tlet blockIndex = mapping.get( uniformsGroup );\n\n\t\tif ( blockIndex === undefined ) {\n\n\t\t\tblockIndex = gl.getUniformBlockIndex( program, uniformsGroup.name );\n\n\t\t\tmapping.set( uniformsGroup, blockIndex );\n\n\t\t}\n\n\t}\n\n\tfunction uniformBlockBinding( uniformsGroup, program ) {\n\n\t\tconst mapping = uboProgramMap.get( program );\n\t\tconst blockIndex = mapping.get( uniformsGroup );\n\n\t\tif ( uboBindings.get( program ) !== blockIndex ) {\n\n\t\t\t// bind shader specific block index to global block point\n\t\t\tgl.uniformBlockBinding( program, blockIndex, uniformsGroup.__bindingPointIndex );\n\n\t\t\tuboBindings.set( program, blockIndex );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction reset() {\n\n\t\t// reset state\n\n\t\tgl.disable( 3042 );\n\t\tgl.disable( 2884 );\n\t\tgl.disable( 2929 );\n\t\tgl.disable( 32823 );\n\t\tgl.disable( 3089 );\n\t\tgl.disable( 2960 );\n\t\tgl.disable( 32926 );\n\n\t\tgl.blendEquation( 32774 );\n\t\tgl.blendFunc( 1, 0 );\n\t\tgl.blendFuncSeparate( 1, 0, 1, 0 );\n\n\t\tgl.colorMask( true, true, true, true );\n\t\tgl.clearColor( 0, 0, 0, 0 );\n\n\t\tgl.depthMask( true );\n\t\tgl.depthFunc( 513 );\n\t\tgl.clearDepth( 1 );\n\n\t\tgl.stencilMask( 0xffffffff );\n\t\tgl.stencilFunc( 519, 0, 0xffffffff );\n\t\tgl.stencilOp( 7680, 7680, 7680 );\n\t\tgl.clearStencil( 0 );\n\n\t\tgl.cullFace( 1029 );\n\t\tgl.frontFace( 2305 );\n\n\t\tgl.polygonOffset( 0, 0 );\n\n\t\tgl.activeTexture( 33984 );\n\n\t\tgl.bindFramebuffer( 36160, null );\n\n\t\tif ( isWebGL2 === true ) {\n\n\t\t\tgl.bindFramebuffer( 36009, null );\n\t\t\tgl.bindFramebuffer( 36008, null );\n\n\t\t}\n\n\t\tgl.useProgram( null );\n\n\t\tgl.lineWidth( 1 );\n\n\t\tgl.scissor( 0, 0, gl.canvas.width, gl.canvas.height );\n\t\tgl.viewport( 0, 0, gl.canvas.width, gl.canvas.height );\n\n\t\t// reset internals\n\n\t\tenabledCapabilities = {};\n\n\t\tcurrentTextureSlot = null;\n\t\tcurrentBoundTextures = {};\n\n\t\tcurrentBoundFramebuffers = {};\n\t\tcurrentDrawbuffers = new WeakMap();\n\t\tdefaultDrawbuffers = [];\n\n\t\tcurrentProgram = null;\n\n\t\tcurrentBlendingEnabled = false;\n\t\tcurrentBlending = null;\n\t\tcurrentBlendEquation = null;\n\t\tcurrentBlendSrc = null;\n\t\tcurrentBlendDst = null;\n\t\tcurrentBlendEquationAlpha = null;\n\t\tcurrentBlendSrcAlpha = null;\n\t\tcurrentBlendDstAlpha = null;\n\t\tcurrentPremultipledAlpha = false;\n\n\t\tcurrentFlipSided = null;\n\t\tcurrentCullFace = null;\n\n\t\tcurrentLineWidth = null;\n\n\t\tcurrentPolygonOffsetFactor = null;\n\t\tcurrentPolygonOffsetUnits = null;\n\n\t\tcurrentScissor.set( 0, 0, gl.canvas.width, gl.canvas.height );\n\t\tcurrentViewport.set( 0, 0, gl.canvas.width, gl.canvas.height );\n\n\t\tcolorBuffer.reset();\n\t\tdepthBuffer.reset();\n\t\tstencilBuffer.reset();\n\n\t}\n\n\treturn {\n\n\t\tbuffers: {\n\t\t\tcolor: colorBuffer,\n\t\t\tdepth: depthBuffer,\n\t\t\tstencil: stencilBuffer\n\t\t},\n\n\t\tenable: enable,\n\t\tdisable: disable,\n\n\t\tbindFramebuffer: bindFramebuffer,\n\t\tdrawBuffers: drawBuffers,\n\n\t\tuseProgram: useProgram,\n\n\t\tsetBlending: setBlending,\n\t\tsetMaterial: setMaterial,\n\n\t\tsetFlipSided: setFlipSided,\n\t\tsetCullFace: setCullFace,\n\n\t\tsetLineWidth: setLineWidth,\n\t\tsetPolygonOffset: setPolygonOffset,\n\n\t\tsetScissorTest: setScissorTest,\n\n\t\tactiveTexture: activeTexture,\n\t\tbindTexture: bindTexture,\n\t\tunbindTexture: unbindTexture,\n\t\tcompressedTexImage2D: compressedTexImage2D,\n\t\tcompressedTexImage3D: compressedTexImage3D,\n\t\ttexImage2D: texImage2D,\n\t\ttexImage3D: texImage3D,\n\n\t\tupdateUBOMapping: updateUBOMapping,\n\t\tuniformBlockBinding: uniformBlockBinding,\n\n\t\ttexStorage2D: texStorage2D,\n\t\ttexStorage3D: texStorage3D,\n\t\ttexSubImage2D: texSubImage2D,\n\t\ttexSubImage3D: texSubImage3D,\n\t\tcompressedTexSubImage2D: compressedTexSubImage2D,\n\t\tcompressedTexSubImage3D: compressedTexSubImage3D,\n\n\t\tscissor: scissor,\n\t\tviewport: viewport,\n\n\t\treset: reset\n\n\t};\n\n}\n\nfunction WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\tconst maxTextures = capabilities.maxTextures;\n\tconst maxCubemapSize = capabilities.maxCubemapSize;\n\tconst maxTextureSize = capabilities.maxTextureSize;\n\tconst maxSamples = capabilities.maxSamples;\n\tconst multisampledRTTExt = extensions.has( 'WEBGL_multisampled_render_to_texture' ) ? extensions.get( 'WEBGL_multisampled_render_to_texture' ) : null;\n\tconst supportsInvalidateFramebuffer = typeof navigator === 'undefined' ? false : /OculusBrowser/g.test( navigator.userAgent );\n\n\tconst _videoTextures = new WeakMap();\n\tlet _canvas;\n\n\tconst _sources = new WeakMap(); // maps WebglTexture objects to instances of Source\n\n\t// cordova iOS (as of 5.0) still uses UIWebView, which provides OffscreenCanvas,\n\t// also OffscreenCanvas.getContext(\"webgl\"), but not OffscreenCanvas.getContext(\"2d\")!\n\t// Some implementations may only implement OffscreenCanvas partially (e.g. lacking 2d).\n\n\tlet useOffscreenCanvas = false;\n\n\ttry {\n\n\t\tuseOffscreenCanvas = typeof OffscreenCanvas !== 'undefined'\n\t\t\t// eslint-disable-next-line compat/compat\n\t\t\t&& ( new OffscreenCanvas( 1, 1 ).getContext( '2d' ) ) !== null;\n\n\t} catch ( err ) {\n\n\t\t// Ignore any errors\n\n\t}\n\n\tfunction createCanvas( width, height ) {\n\n\t\t// Use OffscreenCanvas when available. Specially needed in web workers\n\n\t\treturn useOffscreenCanvas ?\n\t\t\t// eslint-disable-next-line compat/compat\n\t\t\tnew OffscreenCanvas( width, height ) : createElementNS( 'canvas' );\n\n\t}\n\n\tfunction resizeImage( image, needsPowerOfTwo, needsNewCanvas, maxSize ) {\n\n\t\tlet scale = 1;\n\n\t\t// handle case if texture exceeds max size\n\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\n\n\t\t\tscale = maxSize / Math.max( image.width, image.height );\n\n\t\t}\n\n\t\t// only perform resize if necessary\n\n\t\tif ( scale < 1 || needsPowerOfTwo === true ) {\n\n\t\t\t// only perform resize for certain image types\n\n\t\t\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t\t\tconst floor = needsPowerOfTwo ? floorPowerOfTwo : Math.floor;\n\n\t\t\t\tconst width = floor( scale * image.width );\n\t\t\t\tconst height = floor( scale * image.height );\n\n\t\t\t\tif ( _canvas === undefined ) _canvas = createCanvas( width, height );\n\n\t\t\t\t// cube textures can't reuse the same canvas\n\n\t\t\t\tconst canvas = needsNewCanvas ? createCanvas( width, height ) : _canvas;\n\n\t\t\t\tcanvas.width = width;\n\t\t\t\tcanvas.height = height;\n\n\t\t\t\tconst context = canvas.getContext( '2d' );\n\t\t\t\tcontext.drawImage( image, 0, 0, width, height );\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture has been resized from (' + image.width + 'x' + image.height + ') to (' + width + 'x' + height + ').' );\n\n\t\t\t\treturn canvas;\n\n\t\t\t} else {\n\n\t\t\t\tif ( 'data' in image ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Image in DataTexture is too big (' + image.width + 'x' + image.height + ').' );\n\n\t\t\t\t}\n\n\t\t\t\treturn image;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction isPowerOfTwo$1( image ) {\n\n\t\treturn isPowerOfTwo( image.width ) && isPowerOfTwo( image.height );\n\n\t}\n\n\tfunction textureNeedsPowerOfTwo( texture ) {\n\n\t\tif ( isWebGL2 ) return false;\n\n\t\treturn ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) ||\n\t\t\t( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter );\n\n\t}\n\n\tfunction textureNeedsGenerateMipmaps( texture, supportsMips ) {\n\n\t\treturn texture.generateMipmaps && supportsMips &&\n\t\t\ttexture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n\n\t}\n\n\tfunction generateMipmap( target ) {\n\n\t\t_gl.generateMipmap( target );\n\n\t}\n\n\tfunction getInternalFormat( internalFormatName, glFormat, glType, encoding, forceLinearEncoding = false ) {\n\n\t\tif ( isWebGL2 === false ) return glFormat;\n\n\t\tif ( internalFormatName !== null ) {\n\n\t\t\tif ( _gl[ internalFormatName ] !== undefined ) return _gl[ internalFormatName ];\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format \\'' + internalFormatName + '\\'' );\n\n\t\t}\n\n\t\tlet internalFormat = glFormat;\n\n\t\tif ( glFormat === 6403 ) {\n\n\t\t\tif ( glType === 5126 ) internalFormat = 33326;\n\t\t\tif ( glType === 5131 ) internalFormat = 33325;\n\t\t\tif ( glType === 5121 ) internalFormat = 33321;\n\n\t\t}\n\n\t\tif ( glFormat === 33319 ) {\n\n\t\t\tif ( glType === 5126 ) internalFormat = 33328;\n\t\t\tif ( glType === 5131 ) internalFormat = 33327;\n\t\t\tif ( glType === 5121 ) internalFormat = 33323;\n\n\t\t}\n\n\t\tif ( glFormat === 6408 ) {\n\n\t\t\tif ( glType === 5126 ) internalFormat = 34836;\n\t\t\tif ( glType === 5131 ) internalFormat = 34842;\n\t\t\tif ( glType === 5121 ) internalFormat = ( encoding === sRGBEncoding && forceLinearEncoding === false ) ? 35907 : 32856;\n\t\t\tif ( glType === 32819 ) internalFormat = 32854;\n\t\t\tif ( glType === 32820 ) internalFormat = 32855;\n\n\t\t}\n\n\t\tif ( internalFormat === 33325 || internalFormat === 33326 ||\n\t\t\tinternalFormat === 33327 || internalFormat === 33328 ||\n\t\t\tinternalFormat === 34842 || internalFormat === 34836 ) {\n\n\t\t\textensions.get( 'EXT_color_buffer_float' );\n\n\t\t}\n\n\t\treturn internalFormat;\n\n\t}\n\n\tfunction getMipLevels( texture, image, supportsMips ) {\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) === true || ( texture.isFramebufferTexture && texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) ) {\n\n\t\t\treturn Math.log2( Math.max( image.width, image.height ) ) + 1;\n\n\t\t} else if ( texture.mipmaps !== undefined && texture.mipmaps.length > 0 ) {\n\n\t\t\t// user-defined mipmaps\n\n\t\t\treturn texture.mipmaps.length;\n\n\t\t} else if ( texture.isCompressedTexture && Array.isArray( texture.image ) ) {\n\n\t\t\treturn image.mipmaps.length;\n\n\t\t} else {\n\n\t\t\t// texture without mipmaps (only base level)\n\n\t\t\treturn 1;\n\n\t\t}\n\n\t}\n\n\t// Fallback filters for non-power-of-2 textures\n\n\tfunction filterFallback( f ) {\n\n\t\tif ( f === NearestFilter || f === NearestMipmapNearestFilter || f === NearestMipmapLinearFilter ) {\n\n\t\t\treturn 9728;\n\n\t\t}\n\n\t\treturn 9729;\n\n\t}\n\n\t//\n\n\tfunction onTextureDispose( event ) {\n\n\t\tconst texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tdeallocateTexture( texture );\n\n\t\tif ( texture.isVideoTexture ) {\n\n\t\t\t_videoTextures.delete( texture );\n\n\t\t}\n\n\t}\n\n\tfunction onRenderTargetDispose( event ) {\n\n\t\tconst renderTarget = event.target;\n\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tdeallocateRenderTarget( renderTarget );\n\n\t}\n\n\t//\n\n\tfunction deallocateTexture( texture ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( textureProperties.__webglInit === undefined ) return;\n\n\t\t// check if it's necessary to remove the WebGLTexture object\n\n\t\tconst source = texture.source;\n\t\tconst webglTextures = _sources.get( source );\n\n\t\tif ( webglTextures ) {\n\n\t\t\tconst webglTexture = webglTextures[ textureProperties.__cacheKey ];\n\t\t\twebglTexture.usedTimes --;\n\n\t\t\t// the WebGLTexture object is not used anymore, remove it\n\n\t\t\tif ( webglTexture.usedTimes === 0 ) {\n\n\t\t\t\tdeleteTexture( texture );\n\n\t\t\t}\n\n\t\t\t// remove the weak map entry if no WebGLTexture uses the source anymore\n\n\t\t\tif ( Object.keys( webglTextures ).length === 0 ) {\n\n\t\t\t\t_sources.delete( source );\n\n\t\t\t}\n\n\t\t}\n\n\t\tproperties.remove( texture );\n\n\t}\n\n\tfunction deleteTexture( texture ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\tconst source = texture.source;\n\t\tconst webglTextures = _sources.get( source );\n\t\tdelete webglTextures[ textureProperties.__cacheKey ];\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\tfunction deallocateRenderTarget( renderTarget ) {\n\n\t\tconst texture = renderTarget.texture;\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( textureProperties.__webglTexture !== undefined ) {\n\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t\tinfo.memory.textures --;\n\n\t\t}\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\trenderTarget.depthTexture.dispose();\n\n\t\t}\n\n\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\n\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\n\t\t\tif ( renderTargetProperties.__webglMultisampledFramebuffer ) _gl.deleteFramebuffer( renderTargetProperties.__webglMultisampledFramebuffer );\n\n\t\t\tif ( renderTargetProperties.__webglColorRenderbuffer ) {\n\n\t\t\t\tfor ( let i = 0; i < renderTargetProperties.__webglColorRenderbuffer.length; i ++ ) {\n\n\t\t\t\t\tif ( renderTargetProperties.__webglColorRenderbuffer[ i ] ) _gl.deleteRenderbuffer( renderTargetProperties.__webglColorRenderbuffer[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( renderTargetProperties.__webglDepthRenderbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthRenderbuffer );\n\n\t\t}\n\n\t\tif ( renderTarget.isWebGLMultipleRenderTargets ) {\n\n\t\t\tfor ( let i = 0, il = texture.length; i < il; i ++ ) {\n\n\t\t\t\tconst attachmentProperties = properties.get( texture[ i ] );\n\n\t\t\t\tif ( attachmentProperties.__webglTexture ) {\n\n\t\t\t\t\t_gl.deleteTexture( attachmentProperties.__webglTexture );\n\n\t\t\t\t\tinfo.memory.textures --;\n\n\t\t\t\t}\n\n\t\t\t\tproperties.remove( texture[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tproperties.remove( texture );\n\t\tproperties.remove( renderTarget );\n\n\t}\n\n\t//\n\n\tlet textureUnits = 0;\n\n\tfunction resetTextureUnits() {\n\n\t\ttextureUnits = 0;\n\n\t}\n\n\tfunction allocateTextureUnit() {\n\n\t\tconst textureUnit = textureUnits;\n\n\t\tif ( textureUnit >= maxTextures ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLTextures: Trying to use ' + textureUnit + ' texture units while this GPU supports only ' + maxTextures );\n\n\t\t}\n\n\t\ttextureUnits += 1;\n\n\t\treturn textureUnit;\n\n\t}\n\n\tfunction getTextureCacheKey( texture ) {\n\n\t\tconst array = [];\n\n\t\tarray.push( texture.wrapS );\n\t\tarray.push( texture.wrapT );\n\t\tarray.push( texture.wrapR || 0 );\n\t\tarray.push( texture.magFilter );\n\t\tarray.push( texture.minFilter );\n\t\tarray.push( texture.anisotropy );\n\t\tarray.push( texture.internalFormat );\n\t\tarray.push( texture.format );\n\t\tarray.push( texture.type );\n\t\tarray.push( texture.generateMipmaps );\n\t\tarray.push( texture.premultiplyAlpha );\n\t\tarray.push( texture.flipY );\n\t\tarray.push( texture.unpackAlignment );\n\t\tarray.push( texture.encoding );\n\n\t\treturn array.join();\n\n\t}\n\n\t//\n\n\tfunction setTexture2D( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.isVideoTexture ) updateVideoTexture( texture );\n\n\t\tif ( texture.isRenderTargetTexture === false && texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tconst image = texture.image;\n\n\t\t\tif ( image === null ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but no image data found.' );\n\n\t\t\t} else if ( image.complete === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete' );\n\n\t\t\t} else {\n\n\t\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.bindTexture( 3553, textureProperties.__webglTexture, 33984 + slot );\n\n\t}\n\n\tfunction setTexture2DArray( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.bindTexture( 35866, textureProperties.__webglTexture, 33984 + slot );\n\n\t}\n\n\tfunction setTexture3D( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.bindTexture( 32879, textureProperties.__webglTexture, 33984 + slot );\n\n\t}\n\n\tfunction setTextureCube( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadCubeTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.bindTexture( 34067, textureProperties.__webglTexture, 33984 + slot );\n\n\t}\n\n\tconst wrappingToGL = {\n\t\t[ RepeatWrapping ]: 10497,\n\t\t[ ClampToEdgeWrapping ]: 33071,\n\t\t[ MirroredRepeatWrapping ]: 33648\n\t};\n\n\tconst filterToGL = {\n\t\t[ NearestFilter ]: 9728,\n\t\t[ NearestMipmapNearestFilter ]: 9984,\n\t\t[ NearestMipmapLinearFilter ]: 9986,\n\n\t\t[ LinearFilter ]: 9729,\n\t\t[ LinearMipmapNearestFilter ]: 9985,\n\t\t[ LinearMipmapLinearFilter ]: 9987\n\t};\n\n\tfunction setTextureParameters( textureType, texture, supportsMips ) {\n\n\t\tif ( supportsMips ) {\n\n\t\t\t_gl.texParameteri( textureType, 10242, wrappingToGL[ texture.wrapS ] );\n\t\t\t_gl.texParameteri( textureType, 10243, wrappingToGL[ texture.wrapT ] );\n\n\t\t\tif ( textureType === 32879 || textureType === 35866 ) {\n\n\t\t\t\t_gl.texParameteri( textureType, 32882, wrappingToGL[ texture.wrapR ] );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, 10240, filterToGL[ texture.magFilter ] );\n\t\t\t_gl.texParameteri( textureType, 10241, filterToGL[ texture.minFilter ] );\n\n\t\t} else {\n\n\t\t\t_gl.texParameteri( textureType, 10242, 33071 );\n\t\t\t_gl.texParameteri( textureType, 10243, 33071 );\n\n\t\t\tif ( textureType === 32879 || textureType === 35866 ) {\n\n\t\t\t\t_gl.texParameteri( textureType, 32882, 33071 );\n\n\t\t\t}\n\n\t\t\tif ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.' );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, 10240, filterFallback( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, 10241, filterFallback( texture.minFilter ) );\n\n\t\t\tif ( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( extensions.has( 'EXT_texture_filter_anisotropic' ) === true ) {\n\n\t\t\tconst extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\t\tif ( texture.magFilter === NearestFilter ) return;\n\t\t\tif ( texture.minFilter !== NearestMipmapLinearFilter && texture.minFilter !== LinearMipmapLinearFilter ) return;\n\t\t\tif ( texture.type === FloatType && extensions.has( 'OES_texture_float_linear' ) === false ) return; // verify extension for WebGL 1 and WebGL 2\n\t\t\tif ( isWebGL2 === false && ( texture.type === HalfFloatType && extensions.has( 'OES_texture_half_float_linear' ) === false ) ) return; // verify extension for WebGL 1 only\n\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\n\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, capabilities.getMaxAnisotropy() ) );\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction initTexture( textureProperties, texture ) {\n\n\t\tlet forceUpload = false;\n\n\t\tif ( textureProperties.__webglInit === undefined ) {\n\n\t\t\ttextureProperties.__webglInit = true;\n\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t}\n\n\t\t// create Source <-> WebGLTextures mapping if necessary\n\n\t\tconst source = texture.source;\n\t\tlet webglTextures = _sources.get( source );\n\n\t\tif ( webglTextures === undefined ) {\n\n\t\t\twebglTextures = {};\n\t\t\t_sources.set( source, webglTextures );\n\n\t\t}\n\n\t\t// check if there is already a WebGLTexture object for the given texture parameters\n\n\t\tconst textureCacheKey = getTextureCacheKey( texture );\n\n\t\tif ( textureCacheKey !== textureProperties.__cacheKey ) {\n\n\t\t\t// if not, create a new instance of WebGLTexture\n\n\t\t\tif ( webglTextures[ textureCacheKey ] === undefined ) {\n\n\t\t\t\t// create new entry\n\n\t\t\t\twebglTextures[ textureCacheKey ] = {\n\t\t\t\t\ttexture: _gl.createTexture(),\n\t\t\t\t\tusedTimes: 0\n\t\t\t\t};\n\n\t\t\t\tinfo.memory.textures ++;\n\n\t\t\t\t// when a new instance of WebGLTexture was created, a texture upload is required\n\t\t\t\t// even if the image contents are identical\n\n\t\t\t\tforceUpload = true;\n\n\t\t\t}\n\n\t\t\twebglTextures[ textureCacheKey ].usedTimes ++;\n\n\t\t\t// every time the texture cache key changes, it's necessary to check if an instance of\n\t\t\t// WebGLTexture can be deleted in order to avoid a memory leak.\n\n\t\t\tconst webglTexture = webglTextures[ textureProperties.__cacheKey ];\n\n\t\t\tif ( webglTexture !== undefined ) {\n\n\t\t\t\twebglTextures[ textureProperties.__cacheKey ].usedTimes --;\n\n\t\t\t\tif ( webglTexture.usedTimes === 0 ) {\n\n\t\t\t\t\tdeleteTexture( texture );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// store references to cache key and WebGLTexture object\n\n\t\t\ttextureProperties.__cacheKey = textureCacheKey;\n\t\t\ttextureProperties.__webglTexture = webglTextures[ textureCacheKey ].texture;\n\n\t\t}\n\n\t\treturn forceUpload;\n\n\t}\n\n\tfunction uploadTexture( textureProperties, texture, slot ) {\n\n\t\tlet textureType = 3553;\n\n\t\tif ( texture.isDataArrayTexture || texture.isCompressedArrayTexture ) textureType = 35866;\n\t\tif ( texture.isData3DTexture ) textureType = 32879;\n\n\t\tconst forceUpload = initTexture( textureProperties, texture );\n\t\tconst source = texture.source;\n\n\t\tstate.bindTexture( textureType, textureProperties.__webglTexture, 33984 + slot );\n\n\t\tconst sourceProperties = properties.get( source );\n\n\t\tif ( source.version !== sourceProperties.__version || forceUpload === true ) {\n\n\t\t\tstate.activeTexture( 33984 + slot );\n\n\t\t\t_gl.pixelStorei( 37440, texture.flipY );\n\t\t\t_gl.pixelStorei( 37441, texture.premultiplyAlpha );\n\t\t\t_gl.pixelStorei( 3317, texture.unpackAlignment );\n\t\t\t_gl.pixelStorei( 37443, 0 );\n\n\t\t\tconst needsPowerOfTwo = textureNeedsPowerOfTwo( texture ) && isPowerOfTwo$1( texture.image ) === false;\n\t\t\tlet image = resizeImage( texture.image, needsPowerOfTwo, false, maxTextureSize );\n\t\t\timage = verifyColorSpace( texture, image );\n\n\t\t\tconst supportsMips = isPowerOfTwo$1( image ) || isWebGL2,\n\t\t\t\tglFormat = utils.convert( texture.format, texture.encoding );\n\n\t\t\tlet glType = utils.convert( texture.type ),\n\t\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType, texture.encoding, texture.isVideoTexture );\n\n\t\t\tsetTextureParameters( textureType, texture, supportsMips );\n\n\t\t\tlet mipmap;\n\t\t\tconst mipmaps = texture.mipmaps;\n\n\t\t\tconst useTexStorage = ( isWebGL2 && texture.isVideoTexture !== true );\n\t\t\tconst allocateMemory = ( sourceProperties.__version === undefined ) || ( forceUpload === true );\n\t\t\tconst levels = getMipLevels( texture, image, supportsMips );\n\n\t\t\tif ( texture.isDepthTexture ) {\n\n\t\t\t\t// populate depth texture with dummy data\n\n\t\t\t\tglInternalFormat = 6402;\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\t\t\tglInternalFormat = 36012;\n\n\t\t\t\t\t} else if ( texture.type === UnsignedIntType ) {\n\n\t\t\t\t\t\tglInternalFormat = 33190;\n\n\t\t\t\t\t} else if ( texture.type === UnsignedInt248Type ) {\n\n\t\t\t\t\t\tglInternalFormat = 35056;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tglInternalFormat = 33189; // WebGL2 requires sized internalformat for glTexImage2D\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\t\t\tconsole.error( 'WebGLRenderer: Floating point depth texture requires WebGL2.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// validation checks for WebGL 1\n\n\t\t\t\tif ( texture.format === DepthFormat && glInternalFormat === 6402 ) {\n\n\t\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t\t// DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\n\t\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\t\tif ( texture.type !== UnsignedShortType && texture.type !== UnsignedIntType ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.' );\n\n\t\t\t\t\t\ttexture.type = UnsignedIntType;\n\t\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( texture.format === DepthStencilFormat && glInternalFormat === 6402 ) {\n\n\t\t\t\t\t// Depth stencil textures need the DEPTH_STENCIL internal format\n\t\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\t\tglInternalFormat = 34041;\n\n\t\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t\t// DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\n\t\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\t\tif ( texture.type !== UnsignedInt248Type ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.' );\n\n\t\t\t\t\t\ttexture.type = UnsignedInt248Type;\n\t\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t//\n\n\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\tstate.texStorage2D( 3553, 1, glInternalFormat, image.width, image.height );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( texture.isDataTexture ) {\n\n\t\t\t\t// use manually created mipmaps if available\n\t\t\t\t// if there are no manual mipmaps\n\t\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\t\tif ( useTexStorage && allocateMemory ) {\n\n\t\t\t\t\t\tstate.texStorage2D( 3553, levels, glInternalFormat, mipmaps[ 0 ].width, mipmaps[ 0 ].height );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\tstate.texSubImage2D( 3553, i, 0, 0, mipmap.width, mipmap.height, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\t\t\tstate.texStorage2D( 3553, levels, glInternalFormat, image.width, image.height );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstate.texSubImage2D( 3553, 0, 0, 0, image.width, image.height, glFormat, glType, image.data );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, image.data );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( texture.isCompressedTexture ) {\n\n\t\t\t\tif ( texture.isCompressedArrayTexture ) {\n\n\t\t\t\t\tif ( useTexStorage && allocateMemory ) {\n\n\t\t\t\t\t\tstate.texStorage3D( 35866, levels, glInternalFormat, mipmaps[ 0 ].width, mipmaps[ 0 ].height, image.depth );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\t\t\tif ( texture.format !== RGBAFormat ) {\n\n\t\t\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\t\tstate.compressedTexSubImage3D( 35866, i, 0, 0, 0, mipmap.width, mipmap.height, image.depth, glFormat, mipmap.data, 0, 0 );\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tstate.compressedTexImage3D( 35866, i, glInternalFormat, mipmap.width, mipmap.height, image.depth, 0, mipmap.data, 0, 0 );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()' );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\tstate.texSubImage3D( 35866, i, 0, 0, 0, mipmap.width, mipmap.height, image.depth, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.texImage3D( 35866, i, glInternalFormat, mipmap.width, mipmap.height, image.depth, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( useTexStorage && allocateMemory ) {\n\n\t\t\t\t\t\tstate.texStorage2D( 3553, levels, glInternalFormat, mipmaps[ 0 ].width, mipmaps[ 0 ].height );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\t\t\tif ( texture.format !== RGBAFormat ) {\n\n\t\t\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\t\tstate.compressedTexSubImage2D( 3553, i, 0, 0, mipmap.width, mipmap.height, glFormat, mipmap.data );\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tstate.compressedTexImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()' );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\tstate.texSubImage2D( 3553, i, 0, 0, mipmap.width, mipmap.height, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( texture.isDataArrayTexture ) {\n\n\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\t\tstate.texStorage3D( 35866, levels, glInternalFormat, image.width, image.height, image.depth );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tstate.texSubImage3D( 35866, 0, 0, 0, 0, image.width, image.height, image.depth, glFormat, glType, image.data );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage3D( 35866, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\n\t\t\t\t}\n\n\t\t\t} else if ( texture.isData3DTexture ) {\n\n\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\t\tstate.texStorage3D( 32879, levels, glInternalFormat, image.width, image.height, image.depth );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tstate.texSubImage3D( 32879, 0, 0, 0, 0, image.width, image.height, image.depth, glFormat, glType, image.data );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage3D( 32879, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\n\t\t\t\t}\n\n\t\t\t} else if ( texture.isFramebufferTexture ) {\n\n\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\tstate.texStorage2D( 3553, levels, glInternalFormat, image.width, image.height );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tlet width = image.width, height = image.height;\n\n\t\t\t\t\t\tfor ( let i = 0; i < levels; i ++ ) {\n\n\t\t\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, width, height, 0, glFormat, glType, null );\n\n\t\t\t\t\t\t\twidth >>= 1;\n\t\t\t\t\t\t\theight >>= 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// regular Texture (image, video, canvas)\n\n\t\t\t\t// use manually created mipmaps if available\n\t\t\t\t// if there are no manual mipmaps\n\t\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\t\tif ( useTexStorage && allocateMemory ) {\n\n\t\t\t\t\t\tstate.texStorage2D( 3553, levels, glInternalFormat, mipmaps[ 0 ].width, mipmaps[ 0 ].height );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\tstate.texSubImage2D( 3553, i, 0, 0, glFormat, glType, mipmap );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, glFormat, glType, mipmap );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\t\t\tstate.texStorage2D( 3553, levels, glInternalFormat, image.width, image.height );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstate.texSubImage2D( 3553, 0, 0, 0, glFormat, glType, image );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, glFormat, glType, image );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( textureType );\n\n\t\t\t}\n\n\t\t\tsourceProperties.__version = source.version;\n\n\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t\t}\n\n\t\ttextureProperties.__version = texture.version;\n\n\t}\n\n\tfunction uploadCubeTexture( textureProperties, texture, slot ) {\n\n\t\tif ( texture.image.length !== 6 ) return;\n\n\t\tconst forceUpload = initTexture( textureProperties, texture );\n\t\tconst source = texture.source;\n\n\t\tstate.bindTexture( 34067, textureProperties.__webglTexture, 33984 + slot );\n\n\t\tconst sourceProperties = properties.get( source );\n\n\t\tif ( source.version !== sourceProperties.__version || forceUpload === true ) {\n\n\t\t\tstate.activeTexture( 33984 + slot );\n\n\t\t\t_gl.pixelStorei( 37440, texture.flipY );\n\t\t\t_gl.pixelStorei( 37441, texture.premultiplyAlpha );\n\t\t\t_gl.pixelStorei( 3317, texture.unpackAlignment );\n\t\t\t_gl.pixelStorei( 37443, 0 );\n\n\t\t\tconst isCompressed = ( texture.isCompressedTexture || texture.image[ 0 ].isCompressedTexture );\n\t\t\tconst isDataTexture = ( texture.image[ 0 ] && texture.image[ 0 ].isDataTexture );\n\n\t\t\tconst cubeImage = [];\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tif ( ! isCompressed && ! isDataTexture ) {\n\n\t\t\t\t\tcubeImage[ i ] = resizeImage( texture.image[ i ], false, true, maxCubemapSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\n\n\t\t\t\t}\n\n\t\t\t\tcubeImage[ i ] = verifyColorSpace( texture, cubeImage[ i ] );\n\n\t\t\t}\n\n\t\t\tconst image = cubeImage[ 0 ],\n\t\t\t\tsupportsMips = isPowerOfTwo$1( image ) || isWebGL2,\n\t\t\t\tglFormat = utils.convert( texture.format, texture.encoding ),\n\t\t\t\tglType = utils.convert( texture.type ),\n\t\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType, texture.encoding );\n\n\t\t\tconst useTexStorage = ( isWebGL2 && texture.isVideoTexture !== true );\n\t\t\tconst allocateMemory = ( sourceProperties.__version === undefined ) || ( forceUpload === true );\n\t\t\tlet levels = getMipLevels( texture, image, supportsMips );\n\n\t\t\tsetTextureParameters( 34067, texture, supportsMips );\n\n\t\t\tlet mipmaps;\n\n\t\t\tif ( isCompressed ) {\n\n\t\t\t\tif ( useTexStorage && allocateMemory ) {\n\n\t\t\t\t\tstate.texStorage2D( 34067, levels, glInternalFormat, image.width, image.height );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tmipmaps = cubeImage[ i ].mipmaps;\n\n\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\n\t\t\t\t\t\tif ( texture.format !== RGBAFormat ) {\n\n\t\t\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\t\tstate.compressedTexSubImage2D( 34069 + i, j, 0, 0, mipmap.width, mipmap.height, glFormat, mipmap.data );\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tstate.compressedTexImage2D( 34069 + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()' );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\tstate.texSubImage2D( 34069 + i, j, 0, 0, mipmap.width, mipmap.height, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tmipmaps = texture.mipmaps;\n\n\t\t\t\tif ( useTexStorage && allocateMemory ) {\n\n\t\t\t\t\t// TODO: Uniformly handle mipmap definitions\n\t\t\t\t\t// Normal textures and compressed cube textures define base level + mips with their mipmap array\n\t\t\t\t\t// Uncompressed cube textures use their mipmap array only for mips (no base level)\n\n\t\t\t\t\tif ( mipmaps.length > 0 ) levels ++;\n\n\t\t\t\t\tstate.texStorage2D( 34067, levels, glInternalFormat, cubeImage[ 0 ].width, cubeImage[ 0 ].height );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tif ( isDataTexture ) {\n\n\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\tstate.texSubImage2D( 34069 + i, 0, 0, 0, cubeImage[ i ].width, cubeImage[ i ].height, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, 0, glInternalFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\t\t\t\t\t\t\tconst mipmapImage = mipmap.image[ i ].image;\n\n\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\tstate.texSubImage2D( 34069 + i, j + 1, 0, 0, mipmapImage.width, mipmapImage.height, glFormat, glType, mipmapImage.data );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, j + 1, glInternalFormat, mipmapImage.width, mipmapImage.height, 0, glFormat, glType, mipmapImage.data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\tstate.texSubImage2D( 34069 + i, 0, 0, 0, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, 0, glInternalFormat, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\n\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\tstate.texSubImage2D( 34069 + i, j + 1, 0, 0, glFormat, glType, mipmap.image[ i ] );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, j + 1, glInternalFormat, glFormat, glType, mipmap.image[ i ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\t// We assume images for cube map have the same size.\n\t\t\t\tgenerateMipmap( 34067 );\n\n\t\t\t}\n\n\t\t\tsourceProperties.__version = source.version;\n\n\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t\t}\n\n\t\ttextureProperties.__version = texture.version;\n\n\t}\n\n\t// Render targets\n\n\t// Setup storage for target texture and bind it to correct framebuffer\n\tfunction setupFrameBufferTexture( framebuffer, renderTarget, texture, attachment, textureTarget ) {\n\n\t\tconst glFormat = utils.convert( texture.format, texture.encoding );\n\t\tconst glType = utils.convert( texture.type );\n\t\tconst glInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType, texture.encoding );\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\tif ( ! renderTargetProperties.__hasExternalTextures ) {\n\n\t\t\tif ( textureTarget === 32879 || textureTarget === 35866 ) {\n\n\t\t\t\tstate.texImage3D( textureTarget, 0, glInternalFormat, renderTarget.width, renderTarget.height, renderTarget.depth, 0, glFormat, glType, null );\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( textureTarget, 0, glInternalFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.bindFramebuffer( 36160, framebuffer );\n\n\t\tif ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\tmultisampledRTTExt.framebufferTexture2DMultisampleEXT( 36160, attachment, textureTarget, properties.get( texture ).__webglTexture, 0, getRenderTargetSamples( renderTarget ) );\n\n\t\t} else if ( textureTarget === 3553 || ( textureTarget >= 34069 && textureTarget <= 34074 ) ) { // see #24753\n\n\t\t\t_gl.framebufferTexture2D( 36160, attachment, textureTarget, properties.get( texture ).__webglTexture, 0 );\n\n\t\t}\n\n\t\tstate.bindFramebuffer( 36160, null );\n\n\t}\n\n\n\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\n\tfunction setupRenderBufferStorage( renderbuffer, renderTarget, isMultisample ) {\n\n\t\t_gl.bindRenderbuffer( 36161, renderbuffer );\n\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\n\n\t\t\tlet glInternalFormat = 33189;\n\n\t\t\tif ( isMultisample || useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\tconst depthTexture = renderTarget.depthTexture;\n\n\t\t\t\tif ( depthTexture && depthTexture.isDepthTexture ) {\n\n\t\t\t\t\tif ( depthTexture.type === FloatType ) {\n\n\t\t\t\t\t\tglInternalFormat = 36012;\n\n\t\t\t\t\t} else if ( depthTexture.type === UnsignedIntType ) {\n\n\t\t\t\t\t\tglInternalFormat = 33190;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\tif ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\t\tmultisampledRTTExt.renderbufferStorageMultisampleEXT( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( 36161, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\t_gl.framebufferRenderbuffer( 36160, 36096, 36161, renderbuffer );\n\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\tif ( isMultisample && useMultisampledRTT( renderTarget ) === false ) {\n\n\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, 35056, renderTarget.width, renderTarget.height );\n\n\t\t\t} else if ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\tmultisampledRTTExt.renderbufferStorageMultisampleEXT( 36161, samples, 35056, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( 36161, 34041, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\n\t\t\t_gl.framebufferRenderbuffer( 36160, 33306, 36161, renderbuffer );\n\n\t\t} else {\n\n\t\t\tconst textures = renderTarget.isWebGLMultipleRenderTargets === true ? renderTarget.texture : [ renderTarget.texture ];\n\n\t\t\tfor ( let i = 0; i < textures.length; i ++ ) {\n\n\t\t\t\tconst texture = textures[ i ];\n\n\t\t\t\tconst glFormat = utils.convert( texture.format, texture.encoding );\n\t\t\t\tconst glType = utils.convert( texture.type );\n\t\t\t\tconst glInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType, texture.encoding );\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\tif ( isMultisample && useMultisampledRTT( renderTarget ) === false ) {\n\n\t\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t} else if ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\t\tmultisampledRTTExt.renderbufferStorageMultisampleEXT( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_gl.renderbufferStorage( 36161, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindRenderbuffer( 36161, null );\n\n\t}\n\n\t// Setup resources for a Depth Texture for a FBO (needs an extension)\n\tfunction setupDepthTexture( framebuffer, renderTarget ) {\n\n\t\tconst isCube = ( renderTarget && renderTarget.isWebGLCubeRenderTarget );\n\t\tif ( isCube ) throw new Error( 'Depth Texture with cube render targets is not supported' );\n\n\t\tstate.bindFramebuffer( 36160, framebuffer );\n\n\t\tif ( ! ( renderTarget.depthTexture && renderTarget.depthTexture.isDepthTexture ) ) {\n\n\t\t\tthrow new Error( 'renderTarget.depthTexture must be an instance of THREE.DepthTexture' );\n\n\t\t}\n\n\t\t// upload an empty depth texture with framebuffer size\n\t\tif ( ! properties.get( renderTarget.depthTexture ).__webglTexture ||\n\t\t\t\trenderTarget.depthTexture.image.width !== renderTarget.width ||\n\t\t\t\trenderTarget.depthTexture.image.height !== renderTarget.height ) {\n\n\t\t\trenderTarget.depthTexture.image.width = renderTarget.width;\n\t\t\trenderTarget.depthTexture.image.height = renderTarget.height;\n\t\t\trenderTarget.depthTexture.needsUpdate = true;\n\n\t\t}\n\n\t\tsetTexture2D( renderTarget.depthTexture, 0 );\n\n\t\tconst webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\n\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\tif ( renderTarget.depthTexture.format === DepthFormat ) {\n\n\t\t\tif ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\tmultisampledRTTExt.framebufferTexture2DMultisampleEXT( 36160, 36096, 3553, webglDepthTexture, 0, samples );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.framebufferTexture2D( 36160, 36096, 3553, webglDepthTexture, 0 );\n\n\t\t\t}\n\n\t\t} else if ( renderTarget.depthTexture.format === DepthStencilFormat ) {\n\n\t\t\tif ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\tmultisampledRTTExt.framebufferTexture2DMultisampleEXT( 36160, 33306, 3553, webglDepthTexture, 0, samples );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.framebufferTexture2D( 36160, 33306, 3553, webglDepthTexture, 0 );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'Unknown depthTexture format' );\n\n\t\t}\n\n\t}\n\n\t// Setup GL resources for a non-texture depth buffer\n\tfunction setupDepthRenderbuffer( renderTarget ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\tconst isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\n\n\t\tif ( renderTarget.depthTexture && ! renderTargetProperties.__autoAllocateDepthBuffer ) {\n\n\t\t\tif ( isCube ) throw new Error( 'target.depthTexture not supported in Cube render targets' );\n\n\t\t\tsetupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\n\n\t\t} else {\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = [];\n\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tstate.bindFramebuffer( 36160, renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\t\trenderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget, false );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tstate.bindFramebuffer( 36160, renderTargetProperties.__webglFramebuffer );\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\n\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget, false );\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.bindFramebuffer( 36160, null );\n\n\t}\n\n\t// rebind framebuffer with external textures\n\tfunction rebindTextures( renderTarget, colorTexture, depthTexture ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\tif ( colorTexture !== undefined ) {\n\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, renderTarget.texture, 36064, 3553 );\n\n\t\t}\n\n\t\tif ( depthTexture !== undefined ) {\n\n\t\t\tsetupDepthRenderbuffer( renderTarget );\n\n\t\t}\n\n\t}\n\n\t// Set up GL resources for the render target\n\tfunction setupRenderTarget( renderTarget ) {\n\n\t\tconst texture = renderTarget.texture;\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\tconst textureProperties = properties.get( texture );\n\n\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tif ( renderTarget.isWebGLMultipleRenderTargets !== true ) {\n\n\t\t\tif ( textureProperties.__webglTexture === undefined ) {\n\n\t\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\t\t}\n\n\t\t\ttextureProperties.__version = texture.version;\n\t\t\tinfo.memory.textures ++;\n\n\t\t}\n\n\t\tconst isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\n\t\tconst isMultipleRenderTargets = ( renderTarget.isWebGLMultipleRenderTargets === true );\n\t\tconst supportsMips = isPowerOfTwo$1( renderTarget ) || isWebGL2;\n\n\t\t// Setup framebuffer\n\n\t\tif ( isCube ) {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = [];\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\n\n\t\t\tif ( isMultipleRenderTargets ) {\n\n\t\t\t\tif ( capabilities.drawBuffers ) {\n\n\t\t\t\t\tconst textures = renderTarget.texture;\n\n\t\t\t\t\tfor ( let i = 0, il = textures.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst attachmentProperties = properties.get( textures[ i ] );\n\n\t\t\t\t\t\tif ( attachmentProperties.__webglTexture === undefined ) {\n\n\t\t\t\t\t\t\tattachmentProperties.__webglTexture = _gl.createTexture();\n\n\t\t\t\t\t\t\tinfo.memory.textures ++;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( ( isWebGL2 && renderTarget.samples > 0 ) && useMultisampledRTT( renderTarget ) === false ) {\n\n\t\t\t\tconst textures = isMultipleRenderTargets ? texture : [ texture ];\n\n\t\t\t\trenderTargetProperties.__webglMultisampledFramebuffer = _gl.createFramebuffer();\n\t\t\t\trenderTargetProperties.__webglColorRenderbuffer = [];\n\n\t\t\t\tstate.bindFramebuffer( 36160, renderTargetProperties.__webglMultisampledFramebuffer );\n\n\t\t\t\tfor ( let i = 0; i < textures.length; i ++ ) {\n\n\t\t\t\t\tconst texture = textures[ i ];\n\t\t\t\t\trenderTargetProperties.__webglColorRenderbuffer[ i ] = _gl.createRenderbuffer();\n\n\t\t\t\t\t_gl.bindRenderbuffer( 36161, renderTargetProperties.__webglColorRenderbuffer[ i ] );\n\n\t\t\t\t\tconst glFormat = utils.convert( texture.format, texture.encoding );\n\t\t\t\t\tconst glType = utils.convert( texture.type );\n\t\t\t\t\tconst glInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType, texture.encoding, renderTarget.isXRRenderTarget === true );\n\t\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\t\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t\t_gl.framebufferRenderbuffer( 36160, 36064 + i, 36161, renderTargetProperties.__webglColorRenderbuffer[ i ] );\n\n\t\t\t\t}\n\n\t\t\t\t_gl.bindRenderbuffer( 36161, null );\n\n\t\t\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\t\t\trenderTargetProperties.__webglDepthRenderbuffer = _gl.createRenderbuffer();\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthRenderbuffer, renderTarget, true );\n\n\t\t\t\t}\n\n\t\t\t\tstate.bindFramebuffer( 36160, null );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Setup color buffer\n\n\t\tif ( isCube ) {\n\n\t\t\tstate.bindTexture( 34067, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( 34067, texture, supportsMips );\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, texture, 36064, 34069 + i );\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( 34067 );\n\n\t\t\t}\n\n\t\t\tstate.unbindTexture();\n\n\t\t} else if ( isMultipleRenderTargets ) {\n\n\t\t\tconst textures = renderTarget.texture;\n\n\t\t\tfor ( let i = 0, il = textures.length; i < il; i ++ ) {\n\n\t\t\t\tconst attachment = textures[ i ];\n\t\t\t\tconst attachmentProperties = properties.get( attachment );\n\n\t\t\t\tstate.bindTexture( 3553, attachmentProperties.__webglTexture );\n\t\t\t\tsetTextureParameters( 3553, attachment, supportsMips );\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, attachment, 36064 + i, 3553 );\n\n\t\t\t\tif ( textureNeedsGenerateMipmaps( attachment, supportsMips ) ) {\n\n\t\t\t\t\tgenerateMipmap( 3553 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.unbindTexture();\n\n\t\t} else {\n\n\t\t\tlet glTextureType = 3553;\n\n\t\t\tif ( renderTarget.isWebGL3DRenderTarget || renderTarget.isWebGLArrayRenderTarget ) {\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\tglTextureType = renderTarget.isWebGL3DRenderTarget ? 32879 : 35866;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( glTextureType, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( glTextureType, texture, supportsMips );\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, texture, 36064, glTextureType );\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( glTextureType );\n\n\t\t\t}\n\n\t\t\tstate.unbindTexture();\n\n\t\t}\n\n\t\t// Setup depth and stencil buffers\n\n\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\tsetupDepthRenderbuffer( renderTarget );\n\n\t\t}\n\n\t}\n\n\tfunction updateRenderTargetMipmap( renderTarget ) {\n\n\t\tconst supportsMips = isPowerOfTwo$1( renderTarget ) || isWebGL2;\n\n\t\tconst textures = renderTarget.isWebGLMultipleRenderTargets === true ? renderTarget.texture : [ renderTarget.texture ];\n\n\t\tfor ( let i = 0, il = textures.length; i < il; i ++ ) {\n\n\t\t\tconst texture = textures[ i ];\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\tconst target = renderTarget.isWebGLCubeRenderTarget ? 34067 : 3553;\n\t\t\t\tconst webglTexture = properties.get( texture ).__webglTexture;\n\n\t\t\t\tstate.bindTexture( target, webglTexture );\n\t\t\t\tgenerateMipmap( target );\n\t\t\t\tstate.unbindTexture();\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction updateMultisampleRenderTarget( renderTarget ) {\n\n\t\tif ( ( isWebGL2 && renderTarget.samples > 0 ) && useMultisampledRTT( renderTarget ) === false ) {\n\n\t\t\tconst textures = renderTarget.isWebGLMultipleRenderTargets ? renderTarget.texture : [ renderTarget.texture ];\n\t\t\tconst width = renderTarget.width;\n\t\t\tconst height = renderTarget.height;\n\t\t\tlet mask = 16384;\n\t\t\tconst invalidationArray = [];\n\t\t\tconst depthStyle = renderTarget.stencilBuffer ? 33306 : 36096;\n\t\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\t\tconst isMultipleRenderTargets = ( renderTarget.isWebGLMultipleRenderTargets === true );\n\n\t\t\t// If MRT we need to remove FBO attachments\n\t\t\tif ( isMultipleRenderTargets ) {\n\n\t\t\t\tfor ( let i = 0; i < textures.length; i ++ ) {\n\n\t\t\t\t\tstate.bindFramebuffer( 36160, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t\t_gl.framebufferRenderbuffer( 36160, 36064 + i, 36161, null );\n\n\t\t\t\t\tstate.bindFramebuffer( 36160, renderTargetProperties.__webglFramebuffer );\n\t\t\t\t\t_gl.framebufferTexture2D( 36009, 36064 + i, 3553, null, 0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.bindFramebuffer( 36008, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\tstate.bindFramebuffer( 36009, renderTargetProperties.__webglFramebuffer );\n\n\t\t\tfor ( let i = 0; i < textures.length; i ++ ) {\n\n\t\t\t\tinvalidationArray.push( 36064 + i );\n\n\t\t\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\t\t\tinvalidationArray.push( depthStyle );\n\n\t\t\t\t}\n\n\t\t\t\tconst ignoreDepthValues = ( renderTargetProperties.__ignoreDepthValues !== undefined ) ? renderTargetProperties.__ignoreDepthValues : false;\n\n\t\t\t\tif ( ignoreDepthValues === false ) {\n\n\t\t\t\t\tif ( renderTarget.depthBuffer ) mask |= 256;\n\t\t\t\t\tif ( renderTarget.stencilBuffer ) mask |= 1024;\n\n\t\t\t\t}\n\n\t\t\t\tif ( isMultipleRenderTargets ) {\n\n\t\t\t\t\t_gl.framebufferRenderbuffer( 36008, 36064, 36161, renderTargetProperties.__webglColorRenderbuffer[ i ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( ignoreDepthValues === true ) {\n\n\t\t\t\t\t_gl.invalidateFramebuffer( 36008, [ depthStyle ] );\n\t\t\t\t\t_gl.invalidateFramebuffer( 36009, [ depthStyle ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( isMultipleRenderTargets ) {\n\n\t\t\t\t\tconst webglTexture = properties.get( textures[ i ] ).__webglTexture;\n\t\t\t\t\t_gl.framebufferTexture2D( 36009, 36064, 3553, webglTexture, 0 );\n\n\t\t\t\t}\n\n\t\t\t\t_gl.blitFramebuffer( 0, 0, width, height, 0, 0, width, height, mask, 9728 );\n\n\t\t\t\tif ( supportsInvalidateFramebuffer ) {\n\n\t\t\t\t\t_gl.invalidateFramebuffer( 36008, invalidationArray );\n\n\t\t\t\t}\n\n\n\t\t\t}\n\n\t\t\tstate.bindFramebuffer( 36008, null );\n\t\t\tstate.bindFramebuffer( 36009, null );\n\n\t\t\t// If MRT since pre-blit we removed the FBO we need to reconstruct the attachments\n\t\t\tif ( isMultipleRenderTargets ) {\n\n\t\t\t\tfor ( let i = 0; i < textures.length; i ++ ) {\n\n\t\t\t\t\tstate.bindFramebuffer( 36160, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t\t_gl.framebufferRenderbuffer( 36160, 36064 + i, 36161, renderTargetProperties.__webglColorRenderbuffer[ i ] );\n\n\t\t\t\t\tconst webglTexture = properties.get( textures[ i ] ).__webglTexture;\n\n\t\t\t\t\tstate.bindFramebuffer( 36160, renderTargetProperties.__webglFramebuffer );\n\t\t\t\t\t_gl.framebufferTexture2D( 36009, 36064 + i, 3553, webglTexture, 0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.bindFramebuffer( 36009, renderTargetProperties.__webglMultisampledFramebuffer );\n\n\t\t}\n\n\t}\n\n\tfunction getRenderTargetSamples( renderTarget ) {\n\n\t\treturn Math.min( maxSamples, renderTarget.samples );\n\n\t}\n\n\tfunction useMultisampledRTT( renderTarget ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\treturn isWebGL2 && renderTarget.samples > 0 && extensions.has( 'WEBGL_multisampled_render_to_texture' ) === true && renderTargetProperties.__useRenderToTexture !== false;\n\n\t}\n\n\tfunction updateVideoTexture( texture ) {\n\n\t\tconst frame = info.render.frame;\n\n\t\t// Check the last frame we updated the VideoTexture\n\n\t\tif ( _videoTextures.get( texture ) !== frame ) {\n\n\t\t\t_videoTextures.set( texture, frame );\n\t\t\ttexture.update();\n\n\t\t}\n\n\t}\n\n\tfunction verifyColorSpace( texture, image ) {\n\n\t\tconst encoding = texture.encoding;\n\t\tconst format = texture.format;\n\t\tconst type = texture.type;\n\n\t\tif ( texture.isCompressedTexture === true || texture.isVideoTexture === true || texture.format === _SRGBAFormat ) return image;\n\n\t\tif ( encoding !== LinearEncoding ) {\n\n\t\t\t// sRGB\n\n\t\t\tif ( encoding === sRGBEncoding ) {\n\n\t\t\t\tif ( isWebGL2 === false ) {\n\n\t\t\t\t\t// in WebGL 1, try to use EXT_sRGB extension and unsized formats\n\n\t\t\t\t\tif ( extensions.has( 'EXT_sRGB' ) === true && format === RGBAFormat ) {\n\n\t\t\t\t\t\ttexture.format = _SRGBAFormat;\n\n\t\t\t\t\t\t// it's not possible to generate mips in WebGL 1 with this extension\n\n\t\t\t\t\t\ttexture.minFilter = LinearFilter;\n\t\t\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// slow fallback (CPU decode)\n\n\t\t\t\t\t\timage = ImageUtils.sRGBToLinear( image );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// in WebGL 2 uncompressed textures can only be sRGB encoded if they have the RGBA8 format\n\n\t\t\t\t\tif ( format !== RGBAFormat || type !== UnsignedByteType ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.WebGLTextures: Unsupported texture encoding:', encoding );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\t//\n\n\tthis.allocateTextureUnit = allocateTextureUnit;\n\tthis.resetTextureUnits = resetTextureUnits;\n\n\tthis.setTexture2D = setTexture2D;\n\tthis.setTexture2DArray = setTexture2DArray;\n\tthis.setTexture3D = setTexture3D;\n\tthis.setTextureCube = setTextureCube;\n\tthis.rebindTextures = rebindTextures;\n\tthis.setupRenderTarget = setupRenderTarget;\n\tthis.updateRenderTargetMipmap = updateRenderTargetMipmap;\n\tthis.updateMultisampleRenderTarget = updateMultisampleRenderTarget;\n\tthis.setupDepthRenderbuffer = setupDepthRenderbuffer;\n\tthis.setupFrameBufferTexture = setupFrameBufferTexture;\n\tthis.useMultisampledRTT = useMultisampledRTT;\n\n}\n\nfunction WebGLUtils( gl, extensions, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tfunction convert( p, encoding = null ) {\n\n\t\tlet extension;\n\n\t\tif ( p === UnsignedByteType ) return 5121;\n\t\tif ( p === UnsignedShort4444Type ) return 32819;\n\t\tif ( p === UnsignedShort5551Type ) return 32820;\n\n\t\tif ( p === ByteType ) return 5120;\n\t\tif ( p === ShortType ) return 5122;\n\t\tif ( p === UnsignedShortType ) return 5123;\n\t\tif ( p === IntType ) return 5124;\n\t\tif ( p === UnsignedIntType ) return 5125;\n\t\tif ( p === FloatType ) return 5126;\n\n\t\tif ( p === HalfFloatType ) {\n\n\t\t\tif ( isWebGL2 ) return 5131;\n\n\t\t\textension = extensions.get( 'OES_texture_half_float' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.HALF_FLOAT_OES;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === AlphaFormat ) return 6406;\n\t\tif ( p === RGBAFormat ) return 6408;\n\t\tif ( p === LuminanceFormat ) return 6409;\n\t\tif ( p === LuminanceAlphaFormat ) return 6410;\n\t\tif ( p === DepthFormat ) return 6402;\n\t\tif ( p === DepthStencilFormat ) return 34041;\n\n\t\t// @deprecated since r137\n\n\t\tif ( p === RGBFormat ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228' );\n\t\t\treturn 6408;\n\n\t\t}\n\n\t\t// WebGL 1 sRGB fallback\n\n\t\tif ( p === _SRGBAFormat ) {\n\n\t\t\textension = extensions.get( 'EXT_sRGB' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.SRGB_ALPHA_EXT;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// WebGL2 formats.\n\n\t\tif ( p === RedFormat ) return 6403;\n\t\tif ( p === RedIntegerFormat ) return 36244;\n\t\tif ( p === RGFormat ) return 33319;\n\t\tif ( p === RGIntegerFormat ) return 33320;\n\t\tif ( p === RGBAIntegerFormat ) return 36249;\n\n\t\t// S3TC\n\n\t\tif ( p === RGB_S3TC_DXT1_Format || p === RGBA_S3TC_DXT1_Format || p === RGBA_S3TC_DXT3_Format || p === RGBA_S3TC_DXT5_Format ) {\n\n\t\t\tif ( encoding === sRGBEncoding ) {\n\n\t\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc_srgb' );\n\n\t\t\t\tif ( extension !== null ) {\n\n\t\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_SRGB_S3TC_DXT1_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t\t\t\tif ( extension !== null ) {\n\n\t\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// PVRTC\n\n\t\tif ( p === RGB_PVRTC_4BPPV1_Format || p === RGB_PVRTC_2BPPV1_Format || p === RGBA_PVRTC_4BPPV1_Format || p === RGBA_PVRTC_2BPPV1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// ETC1\n\n\t\tif ( p === RGB_ETC1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.COMPRESSED_RGB_ETC1_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// ETC2\n\n\t\tif ( p === RGB_ETC2_Format || p === RGBA_ETC2_EAC_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_ETC2_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ETC2 : extension.COMPRESSED_RGB8_ETC2;\n\t\t\t\tif ( p === RGBA_ETC2_EAC_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC : extension.COMPRESSED_RGBA8_ETC2_EAC;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// ASTC\n\n\t\tif ( p === RGBA_ASTC_4x4_Format || p === RGBA_ASTC_5x4_Format || p === RGBA_ASTC_5x5_Format ||\n\t\t\tp === RGBA_ASTC_6x5_Format || p === RGBA_ASTC_6x6_Format || p === RGBA_ASTC_8x5_Format ||\n\t\t\tp === RGBA_ASTC_8x6_Format || p === RGBA_ASTC_8x8_Format || p === RGBA_ASTC_10x5_Format ||\n\t\t\tp === RGBA_ASTC_10x6_Format || p === RGBA_ASTC_10x8_Format || p === RGBA_ASTC_10x10_Format ||\n\t\t\tp === RGBA_ASTC_12x10_Format || p === RGBA_ASTC_12x12_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_astc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGBA_ASTC_4x4_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR : extension.COMPRESSED_RGBA_ASTC_4x4_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_5x4_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR : extension.COMPRESSED_RGBA_ASTC_5x4_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_5x5_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR : extension.COMPRESSED_RGBA_ASTC_5x5_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_6x5_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR : extension.COMPRESSED_RGBA_ASTC_6x5_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_6x6_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR : extension.COMPRESSED_RGBA_ASTC_6x6_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_8x5_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR : extension.COMPRESSED_RGBA_ASTC_8x5_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_8x6_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR : extension.COMPRESSED_RGBA_ASTC_8x6_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_8x8_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR : extension.COMPRESSED_RGBA_ASTC_8x8_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_10x5_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR : extension.COMPRESSED_RGBA_ASTC_10x5_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_10x6_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR : extension.COMPRESSED_RGBA_ASTC_10x6_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_10x8_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR : extension.COMPRESSED_RGBA_ASTC_10x8_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_10x10_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR : extension.COMPRESSED_RGBA_ASTC_10x10_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_12x10_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR : extension.COMPRESSED_RGBA_ASTC_12x10_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_12x12_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR : extension.COMPRESSED_RGBA_ASTC_12x12_KHR;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// BPTC\n\n\t\tif ( p === RGBA_BPTC_Format ) {\n\n\t\t\textension = extensions.get( 'EXT_texture_compression_bptc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGBA_BPTC_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT : extension.COMPRESSED_RGBA_BPTC_UNORM_EXT;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( p === UnsignedInt248Type ) {\n\n\t\t\tif ( isWebGL2 ) return 34042;\n\n\t\t\textension = extensions.get( 'WEBGL_depth_texture' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.UNSIGNED_INT_24_8_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// if \"p\" can't be resolved, assume the user defines a WebGL constant as a string (fallback/workaround for packed RGB formats)\n\n\t\treturn ( gl[ p ] !== undefined ) ? gl[ p ] : null;\n\n\t}\n\n\treturn { convert: convert };\n\n}\n\nclass ArrayCamera extends PerspectiveCamera {\n\n\tconstructor( array = [] ) {\n\n\t\tsuper();\n\n\t\tthis.isArrayCamera = true;\n\n\t\tthis.cameras = array;\n\n\t}\n\n}\n\nclass Group extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isGroup = true;\n\n\t\tthis.type = 'Group';\n\n\t}\n\n}\n\nconst _moveEvent = { type: 'move' };\n\nclass WebXRController {\n\n\tconstructor() {\n\n\t\tthis._targetRay = null;\n\t\tthis._grip = null;\n\t\tthis._hand = null;\n\n\t}\n\n\tgetHandSpace() {\n\n\t\tif ( this._hand === null ) {\n\n\t\t\tthis._hand = new Group();\n\t\t\tthis._hand.matrixAutoUpdate = false;\n\t\t\tthis._hand.visible = false;\n\n\t\t\tthis._hand.joints = {};\n\t\t\tthis._hand.inputState = { pinching: false };\n\n\t\t}\n\n\t\treturn this._hand;\n\n\t}\n\n\tgetTargetRaySpace() {\n\n\t\tif ( this._targetRay === null ) {\n\n\t\t\tthis._targetRay = new Group();\n\t\t\tthis._targetRay.matrixAutoUpdate = false;\n\t\t\tthis._targetRay.visible = false;\n\t\t\tthis._targetRay.hasLinearVelocity = false;\n\t\t\tthis._targetRay.linearVelocity = new Vector3();\n\t\t\tthis._targetRay.hasAngularVelocity = false;\n\t\t\tthis._targetRay.angularVelocity = new Vector3();\n\n\t\t}\n\n\t\treturn this._targetRay;\n\n\t}\n\n\tgetGripSpace() {\n\n\t\tif ( this._grip === null ) {\n\n\t\t\tthis._grip = new Group();\n\t\t\tthis._grip.matrixAutoUpdate = false;\n\t\t\tthis._grip.visible = false;\n\t\t\tthis._grip.hasLinearVelocity = false;\n\t\t\tthis._grip.linearVelocity = new Vector3();\n\t\t\tthis._grip.hasAngularVelocity = false;\n\t\t\tthis._grip.angularVelocity = new Vector3();\n\n\t\t}\n\n\t\treturn this._grip;\n\n\t}\n\n\tdispatchEvent( event ) {\n\n\t\tif ( this._targetRay !== null ) {\n\n\t\t\tthis._targetRay.dispatchEvent( event );\n\n\t\t}\n\n\t\tif ( this._grip !== null ) {\n\n\t\t\tthis._grip.dispatchEvent( event );\n\n\t\t}\n\n\t\tif ( this._hand !== null ) {\n\n\t\t\tthis._hand.dispatchEvent( event );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tconnect( inputSource ) {\n\n\t\tif ( inputSource && inputSource.hand ) {\n\n\t\t\tconst hand = this._hand;\n\n\t\t\tif ( hand ) {\n\n\t\t\t\tfor ( const inputjoint of inputSource.hand.values() ) {\n\n\t\t\t\t\t// Initialize hand with joints when connected\n\t\t\t\t\tthis._getHandJoint( hand, inputjoint );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.dispatchEvent( { type: 'connected', data: inputSource } );\n\n\t\treturn this;\n\n\t}\n\n\tdisconnect( inputSource ) {\n\n\t\tthis.dispatchEvent( { type: 'disconnected', data: inputSource } );\n\n\t\tif ( this._targetRay !== null ) {\n\n\t\t\tthis._targetRay.visible = false;\n\n\t\t}\n\n\t\tif ( this._grip !== null ) {\n\n\t\t\tthis._grip.visible = false;\n\n\t\t}\n\n\t\tif ( this._hand !== null ) {\n\n\t\t\tthis._hand.visible = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tupdate( inputSource, frame, referenceSpace ) {\n\n\t\tlet inputPose = null;\n\t\tlet gripPose = null;\n\t\tlet handPose = null;\n\n\t\tconst targetRay = this._targetRay;\n\t\tconst grip = this._grip;\n\t\tconst hand = this._hand;\n\n\t\tif ( inputSource && frame.session.visibilityState !== 'visible-blurred' ) {\n\n\t\t\tif ( hand && inputSource.hand ) {\n\n\t\t\t\thandPose = true;\n\n\t\t\t\tfor ( const inputjoint of inputSource.hand.values() ) {\n\n\t\t\t\t\t// Update the joints groups with the XRJoint poses\n\t\t\t\t\tconst jointPose = frame.getJointPose( inputjoint, referenceSpace );\n\n\t\t\t\t\t// The transform of this joint will be updated with the joint pose on each frame\n\t\t\t\t\tconst joint = this._getHandJoint( hand, inputjoint );\n\n\t\t\t\t\tif ( jointPose !== null ) {\n\n\t\t\t\t\t\tjoint.matrix.fromArray( jointPose.transform.matrix );\n\t\t\t\t\t\tjoint.matrix.decompose( joint.position, joint.rotation, joint.scale );\n\t\t\t\t\t\tjoint.jointRadius = jointPose.radius;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tjoint.visible = jointPose !== null;\n\n\t\t\t\t}\n\n\t\t\t\t// Custom events\n\n\t\t\t\t// Check pinchz\n\t\t\t\tconst indexTip = hand.joints[ 'index-finger-tip' ];\n\t\t\t\tconst thumbTip = hand.joints[ 'thumb-tip' ];\n\t\t\t\tconst distance = indexTip.position.distanceTo( thumbTip.position );\n\n\t\t\t\tconst distanceToPinch = 0.02;\n\t\t\t\tconst threshold = 0.005;\n\n\t\t\t\tif ( hand.inputState.pinching && distance > distanceToPinch + threshold ) {\n\n\t\t\t\t\thand.inputState.pinching = false;\n\t\t\t\t\tthis.dispatchEvent( {\n\t\t\t\t\t\ttype: 'pinchend',\n\t\t\t\t\t\thandedness: inputSource.handedness,\n\t\t\t\t\t\ttarget: this\n\t\t\t\t\t} );\n\n\t\t\t\t} else if ( ! hand.inputState.pinching && distance <= distanceToPinch - threshold ) {\n\n\t\t\t\t\thand.inputState.pinching = true;\n\t\t\t\t\tthis.dispatchEvent( {\n\t\t\t\t\t\ttype: 'pinchstart',\n\t\t\t\t\t\thandedness: inputSource.handedness,\n\t\t\t\t\t\ttarget: this\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( grip !== null && inputSource.gripSpace ) {\n\n\t\t\t\t\tgripPose = frame.getPose( inputSource.gripSpace, referenceSpace );\n\n\t\t\t\t\tif ( gripPose !== null ) {\n\n\t\t\t\t\t\tgrip.matrix.fromArray( gripPose.transform.matrix );\n\t\t\t\t\t\tgrip.matrix.decompose( grip.position, grip.rotation, grip.scale );\n\n\t\t\t\t\t\tif ( gripPose.linearVelocity ) {\n\n\t\t\t\t\t\t\tgrip.hasLinearVelocity = true;\n\t\t\t\t\t\t\tgrip.linearVelocity.copy( gripPose.linearVelocity );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tgrip.hasLinearVelocity = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( gripPose.angularVelocity ) {\n\n\t\t\t\t\t\t\tgrip.hasAngularVelocity = true;\n\t\t\t\t\t\t\tgrip.angularVelocity.copy( gripPose.angularVelocity );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tgrip.hasAngularVelocity = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( targetRay !== null ) {\n\n\t\t\t\tinputPose = frame.getPose( inputSource.targetRaySpace, referenceSpace );\n\n\t\t\t\t// Some runtimes (namely Vive Cosmos with Vive OpenXR Runtime) have only grip space and ray space is equal to it\n\t\t\t\tif ( inputPose === null && gripPose !== null ) {\n\n\t\t\t\t\tinputPose = gripPose;\n\n\t\t\t\t}\n\n\t\t\t\tif ( inputPose !== null ) {\n\n\t\t\t\t\ttargetRay.matrix.fromArray( inputPose.transform.matrix );\n\t\t\t\t\ttargetRay.matrix.decompose( targetRay.position, targetRay.rotation, targetRay.scale );\n\n\t\t\t\t\tif ( inputPose.linearVelocity ) {\n\n\t\t\t\t\t\ttargetRay.hasLinearVelocity = true;\n\t\t\t\t\t\ttargetRay.linearVelocity.copy( inputPose.linearVelocity );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttargetRay.hasLinearVelocity = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( inputPose.angularVelocity ) {\n\n\t\t\t\t\t\ttargetRay.hasAngularVelocity = true;\n\t\t\t\t\t\ttargetRay.angularVelocity.copy( inputPose.angularVelocity );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttargetRay.hasAngularVelocity = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.dispatchEvent( _moveEvent );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t}\n\n\t\tif ( targetRay !== null ) {\n\n\t\t\ttargetRay.visible = ( inputPose !== null );\n\n\t\t}\n\n\t\tif ( grip !== null ) {\n\n\t\t\tgrip.visible = ( gripPose !== null );\n\n\t\t}\n\n\t\tif ( hand !== null ) {\n\n\t\t\thand.visible = ( handPose !== null );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// private method\n\n\t_getHandJoint( hand, inputjoint ) {\n\n\t\tif ( hand.joints[ inputjoint.jointName ] === undefined ) {\n\n\t\t\tconst joint = new Group();\n\t\t\tjoint.matrixAutoUpdate = false;\n\t\t\tjoint.visible = false;\n\t\t\thand.joints[ inputjoint.jointName ] = joint;\n\n\t\t\thand.add( joint );\n\n\t\t}\n\n\t\treturn hand.joints[ inputjoint.jointName ];\n\n\t}\n\n}\n\nclass DepthTexture extends Texture {\n\n\tconstructor( width, height, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, format ) {\n\n\t\tformat = format !== undefined ? format : DepthFormat;\n\n\t\tif ( format !== DepthFormat && format !== DepthStencilFormat ) {\n\n\t\t\tthrow new Error( 'DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat' );\n\n\t\t}\n\n\t\tif ( type === undefined && format === DepthFormat ) type = UnsignedIntType;\n\t\tif ( type === undefined && format === DepthStencilFormat ) type = UnsignedInt248Type;\n\n\t\tsuper( null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\t\tthis.isDepthTexture = true;\n\n\t\tthis.image = { width: width, height: height };\n\n\t\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n\t\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n\n\t\tthis.flipY = false;\n\t\tthis.generateMipmaps = false;\n\n\t}\n\n\n}\n\nclass WebXRManager extends EventDispatcher {\n\n\tconstructor( renderer, gl ) {\n\n\t\tsuper();\n\n\t\tconst scope = this;\n\n\t\tlet session = null;\n\t\tlet framebufferScaleFactor = 1.0;\n\n\t\tlet referenceSpace = null;\n\t\tlet referenceSpaceType = 'local-floor';\n\t\tlet customReferenceSpace = null;\n\n\t\tlet pose = null;\n\t\tlet glBinding = null;\n\t\tlet glProjLayer = null;\n\t\tlet glBaseLayer = null;\n\t\tlet xrFrame = null;\n\t\tconst attributes = gl.getContextAttributes();\n\t\tlet initialRenderTarget = null;\n\t\tlet newRenderTarget = null;\n\n\t\tconst controllers = [];\n\t\tconst controllerInputSources = [];\n\n\t\tconst planes = new Set();\n\t\tconst planesLastChangedTimes = new Map();\n\n\t\t//\n\n\t\tconst cameraL = new PerspectiveCamera();\n\t\tcameraL.layers.enable( 1 );\n\t\tcameraL.viewport = new Vector4();\n\n\t\tconst cameraR = new PerspectiveCamera();\n\t\tcameraR.layers.enable( 2 );\n\t\tcameraR.viewport = new Vector4();\n\n\t\tconst cameras = [ cameraL, cameraR ];\n\n\t\tconst cameraVR = new ArrayCamera();\n\t\tcameraVR.layers.enable( 1 );\n\t\tcameraVR.layers.enable( 2 );\n\n\t\tlet _currentDepthNear = null;\n\t\tlet _currentDepthFar = null;\n\n\t\t//\n\n\t\tthis.cameraAutoUpdate = true;\n\t\tthis.enabled = false;\n\n\t\tthis.isPresenting = false;\n\n\t\tthis.getController = function ( index ) {\n\n\t\t\tlet controller = controllers[ index ];\n\n\t\t\tif ( controller === undefined ) {\n\n\t\t\t\tcontroller = new WebXRController();\n\t\t\t\tcontrollers[ index ] = controller;\n\n\t\t\t}\n\n\t\t\treturn controller.getTargetRaySpace();\n\n\t\t};\n\n\t\tthis.getControllerGrip = function ( index ) {\n\n\t\t\tlet controller = controllers[ index ];\n\n\t\t\tif ( controller === undefined ) {\n\n\t\t\t\tcontroller = new WebXRController();\n\t\t\t\tcontrollers[ index ] = controller;\n\n\t\t\t}\n\n\t\t\treturn controller.getGripSpace();\n\n\t\t};\n\n\t\tthis.getHand = function ( index ) {\n\n\t\t\tlet controller = controllers[ index ];\n\n\t\t\tif ( controller === undefined ) {\n\n\t\t\t\tcontroller = new WebXRController();\n\t\t\t\tcontrollers[ index ] = controller;\n\n\t\t\t}\n\n\t\t\treturn controller.getHandSpace();\n\n\t\t};\n\n\t\t//\n\n\t\tfunction onSessionEvent( event ) {\n\n\t\t\tconst controllerIndex = controllerInputSources.indexOf( event.inputSource );\n\n\t\t\tif ( controllerIndex === - 1 ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tconst controller = controllers[ controllerIndex ];\n\n\t\t\tif ( controller !== undefined ) {\n\n\t\t\t\tcontroller.dispatchEvent( { type: event.type, data: event.inputSource } );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onSessionEnd() {\n\n\t\t\tsession.removeEventListener( 'select', onSessionEvent );\n\t\t\tsession.removeEventListener( 'selectstart', onSessionEvent );\n\t\t\tsession.removeEventListener( 'selectend', onSessionEvent );\n\t\t\tsession.removeEventListener( 'squeeze', onSessionEvent );\n\t\t\tsession.removeEventListener( 'squeezestart', onSessionEvent );\n\t\t\tsession.removeEventListener( 'squeezeend', onSessionEvent );\n\t\t\tsession.removeEventListener( 'end', onSessionEnd );\n\t\t\tsession.removeEventListener( 'inputsourceschange', onInputSourcesChange );\n\n\t\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\n\n\t\t\t\tconst inputSource = controllerInputSources[ i ];\n\n\t\t\t\tif ( inputSource === null ) continue;\n\n\t\t\t\tcontrollerInputSources[ i ] = null;\n\n\t\t\t\tcontrollers[ i ].disconnect( inputSource );\n\n\t\t\t}\n\n\t\t\t_currentDepthNear = null;\n\t\t\t_currentDepthFar = null;\n\n\t\t\t// restore framebuffer/rendering state\n\n\t\t\trenderer.setRenderTarget( initialRenderTarget );\n\n\t\t\tglBaseLayer = null;\n\t\t\tglProjLayer = null;\n\t\t\tglBinding = null;\n\t\t\tsession = null;\n\t\t\tnewRenderTarget = null;\n\n\t\t\t//\n\n\t\t\tanimation.stop();\n\n\t\t\tscope.isPresenting = false;\n\n\t\t\tscope.dispatchEvent( { type: 'sessionend' } );\n\n\t\t}\n\n\t\tthis.setFramebufferScaleFactor = function ( value ) {\n\n\t\t\tframebufferScaleFactor = value;\n\n\t\t\tif ( scope.isPresenting === true ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebXRManager: Cannot change framebuffer scale while presenting.' );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setReferenceSpaceType = function ( value ) {\n\n\t\t\treferenceSpaceType = value;\n\n\t\t\tif ( scope.isPresenting === true ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebXRManager: Cannot change reference space type while presenting.' );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.getReferenceSpace = function () {\n\n\t\t\treturn customReferenceSpace || referenceSpace;\n\n\t\t};\n\n\t\tthis.setReferenceSpace = function ( space ) {\n\n\t\t\tcustomReferenceSpace = space;\n\n\t\t};\n\n\t\tthis.getBaseLayer = function () {\n\n\t\t\treturn glProjLayer !== null ? glProjLayer : glBaseLayer;\n\n\t\t};\n\n\t\tthis.getBinding = function () {\n\n\t\t\treturn glBinding;\n\n\t\t};\n\n\t\tthis.getFrame = function () {\n\n\t\t\treturn xrFrame;\n\n\t\t};\n\n\t\tthis.getSession = function () {\n\n\t\t\treturn session;\n\n\t\t};\n\n\t\tthis.setSession = async function ( value ) {\n\n\t\t\tsession = value;\n\n\t\t\tif ( session !== null ) {\n\n\t\t\t\tinitialRenderTarget = renderer.getRenderTarget();\n\n\t\t\t\tsession.addEventListener( 'select', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'selectstart', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'selectend', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'squeeze', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'squeezestart', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'squeezeend', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'end', onSessionEnd );\n\t\t\t\tsession.addEventListener( 'inputsourceschange', onInputSourcesChange );\n\n\t\t\t\tif ( attributes.xrCompatible !== true ) {\n\n\t\t\t\t\tawait gl.makeXRCompatible();\n\n\t\t\t\t}\n\n\t\t\t\tif ( ( session.renderState.layers === undefined ) || ( renderer.capabilities.isWebGL2 === false ) ) {\n\n\t\t\t\t\tconst layerInit = {\n\t\t\t\t\t\tantialias: ( session.renderState.layers === undefined ) ? attributes.antialias : true,\n\t\t\t\t\t\talpha: attributes.alpha,\n\t\t\t\t\t\tdepth: attributes.depth,\n\t\t\t\t\t\tstencil: attributes.stencil,\n\t\t\t\t\t\tframebufferScaleFactor: framebufferScaleFactor\n\t\t\t\t\t};\n\n\t\t\t\t\tglBaseLayer = new XRWebGLLayer( session, gl, layerInit );\n\n\t\t\t\t\tsession.updateRenderState( { baseLayer: glBaseLayer } );\n\n\t\t\t\t\tnewRenderTarget = new WebGLRenderTarget(\n\t\t\t\t\t\tglBaseLayer.framebufferWidth,\n\t\t\t\t\t\tglBaseLayer.framebufferHeight,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tformat: RGBAFormat,\n\t\t\t\t\t\t\ttype: UnsignedByteType,\n\t\t\t\t\t\t\tencoding: renderer.outputEncoding,\n\t\t\t\t\t\t\tstencilBuffer: attributes.stencil\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tlet depthFormat = null;\n\t\t\t\t\tlet depthType = null;\n\t\t\t\t\tlet glDepthFormat = null;\n\n\t\t\t\t\tif ( attributes.depth ) {\n\n\t\t\t\t\t\tglDepthFormat = attributes.stencil ? 35056 : 33190;\n\t\t\t\t\t\tdepthFormat = attributes.stencil ? DepthStencilFormat : DepthFormat;\n\t\t\t\t\t\tdepthType = attributes.stencil ? UnsignedInt248Type : UnsignedIntType;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst projectionlayerInit = {\n\t\t\t\t\t\tcolorFormat: 32856,\n\t\t\t\t\t\tdepthFormat: glDepthFormat,\n\t\t\t\t\t\tscaleFactor: framebufferScaleFactor\n\t\t\t\t\t};\n\n\t\t\t\t\tglBinding = new XRWebGLBinding( session, gl );\n\n\t\t\t\t\tglProjLayer = glBinding.createProjectionLayer( projectionlayerInit );\n\n\t\t\t\t\tsession.updateRenderState( { layers: [ glProjLayer ] } );\n\n\t\t\t\t\tnewRenderTarget = new WebGLRenderTarget(\n\t\t\t\t\t\tglProjLayer.textureWidth,\n\t\t\t\t\t\tglProjLayer.textureHeight,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tformat: RGBAFormat,\n\t\t\t\t\t\t\ttype: UnsignedByteType,\n\t\t\t\t\t\t\tdepthTexture: new DepthTexture( glProjLayer.textureWidth, glProjLayer.textureHeight, depthType, undefined, undefined, undefined, undefined, undefined, undefined, depthFormat ),\n\t\t\t\t\t\t\tstencilBuffer: attributes.stencil,\n\t\t\t\t\t\t\tencoding: renderer.outputEncoding,\n\t\t\t\t\t\t\tsamples: attributes.antialias ? 4 : 0\n\t\t\t\t\t\t} );\n\n\t\t\t\t\tconst renderTargetProperties = renderer.properties.get( newRenderTarget );\n\t\t\t\t\trenderTargetProperties.__ignoreDepthValues = glProjLayer.ignoreDepthValues;\n\n\t\t\t\t}\n\n\t\t\t\tnewRenderTarget.isXRRenderTarget = true; // TODO Remove this when possible, see #23278\n\n\t\t\t\t// Set foveation to maximum.\n\t\t\t\tthis.setFoveation( 1.0 );\n\n\t\t\t\tcustomReferenceSpace = null;\n\t\t\t\treferenceSpace = await session.requestReferenceSpace( referenceSpaceType );\n\n\t\t\t\tanimation.setContext( session );\n\t\t\t\tanimation.start();\n\n\t\t\t\tscope.isPresenting = true;\n\n\t\t\t\tscope.dispatchEvent( { type: 'sessionstart' } );\n\n\t\t\t}\n\n\t\t};\n\n\t\tfunction onInputSourcesChange( event ) {\n\n\t\t\t// Notify disconnected\n\n\t\t\tfor ( let i = 0; i < event.removed.length; i ++ ) {\n\n\t\t\t\tconst inputSource = event.removed[ i ];\n\t\t\t\tconst index = controllerInputSources.indexOf( inputSource );\n\n\t\t\t\tif ( index >= 0 ) {\n\n\t\t\t\t\tcontrollerInputSources[ index ] = null;\n\t\t\t\t\tcontrollers[ index ].disconnect( inputSource );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Notify connected\n\n\t\t\tfor ( let i = 0; i < event.added.length; i ++ ) {\n\n\t\t\t\tconst inputSource = event.added[ i ];\n\n\t\t\t\tlet controllerIndex = controllerInputSources.indexOf( inputSource );\n\n\t\t\t\tif ( controllerIndex === - 1 ) {\n\n\t\t\t\t\t// Assign input source a controller that currently has no input source\n\n\t\t\t\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\n\n\t\t\t\t\t\tif ( i >= controllerInputSources.length ) {\n\n\t\t\t\t\t\t\tcontrollerInputSources.push( inputSource );\n\t\t\t\t\t\t\tcontrollerIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t} else if ( controllerInputSources[ i ] === null ) {\n\n\t\t\t\t\t\t\tcontrollerInputSources[ i ] = inputSource;\n\t\t\t\t\t\t\tcontrollerIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// If all controllers do currently receive input we ignore new ones\n\n\t\t\t\t\tif ( controllerIndex === - 1 ) break;\n\n\t\t\t\t}\n\n\t\t\t\tconst controller = controllers[ controllerIndex ];\n\n\t\t\t\tif ( controller ) {\n\n\t\t\t\t\tcontroller.connect( inputSource );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tconst cameraLPos = new Vector3();\n\t\tconst cameraRPos = new Vector3();\n\n\t\t/**\n\t\t * Assumes 2 cameras that are parallel and share an X-axis, and that\n\t\t * the cameras' projection and world matrices have already been set.\n\t\t * And that near and far planes are identical for both cameras.\n\t\t * Visualization of this technique: https://computergraphics.stackexchange.com/a/4765\n\t\t */\n\t\tfunction setProjectionFromUnion( camera, cameraL, cameraR ) {\n\n\t\t\tcameraLPos.setFromMatrixPosition( cameraL.matrixWorld );\n\t\t\tcameraRPos.setFromMatrixPosition( cameraR.matrixWorld );\n\n\t\t\tconst ipd = cameraLPos.distanceTo( cameraRPos );\n\n\t\t\tconst projL = cameraL.projectionMatrix.elements;\n\t\t\tconst projR = cameraR.projectionMatrix.elements;\n\n\t\t\t// VR systems will have identical far and near planes, and\n\t\t\t// most likely identical top and bottom frustum extents.\n\t\t\t// Use the left camera for these values.\n\t\t\tconst near = projL[ 14 ] / ( projL[ 10 ] - 1 );\n\t\t\tconst far = projL[ 14 ] / ( projL[ 10 ] + 1 );\n\t\t\tconst topFov = ( projL[ 9 ] + 1 ) / projL[ 5 ];\n\t\t\tconst bottomFov = ( projL[ 9 ] - 1 ) / projL[ 5 ];\n\n\t\t\tconst leftFov = ( projL[ 8 ] - 1 ) / projL[ 0 ];\n\t\t\tconst rightFov = ( projR[ 8 ] + 1 ) / projR[ 0 ];\n\t\t\tconst left = near * leftFov;\n\t\t\tconst right = near * rightFov;\n\n\t\t\t// Calculate the new camera's position offset from the\n\t\t\t// left camera. xOffset should be roughly half `ipd`.\n\t\t\tconst zOffset = ipd / ( - leftFov + rightFov );\n\t\t\tconst xOffset = zOffset * - leftFov;\n\n\t\t\t// TODO: Better way to apply this offset?\n\t\t\tcameraL.matrixWorld.decompose( camera.position, camera.quaternion, camera.scale );\n\t\t\tcamera.translateX( xOffset );\n\t\t\tcamera.translateZ( zOffset );\n\t\t\tcamera.matrixWorld.compose( camera.position, camera.quaternion, camera.scale );\n\t\t\tcamera.matrixWorldInverse.copy( camera.matrixWorld ).invert();\n\n\t\t\t// Find the union of the frustum values of the cameras and scale\n\t\t\t// the values so that the near plane's position does not change in world space,\n\t\t\t// although must now be relative to the new union camera.\n\t\t\tconst near2 = near + zOffset;\n\t\t\tconst far2 = far + zOffset;\n\t\t\tconst left2 = left - xOffset;\n\t\t\tconst right2 = right + ( ipd - xOffset );\n\t\t\tconst top2 = topFov * far / far2 * near2;\n\t\t\tconst bottom2 = bottomFov * far / far2 * near2;\n\n\t\t\tcamera.projectionMatrix.makePerspective( left2, right2, top2, bottom2, near2, far2 );\n\n\t\t}\n\n\t\tfunction updateCamera( camera, parent ) {\n\n\t\t\tif ( parent === null ) {\n\n\t\t\t\tcamera.matrixWorld.copy( camera.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tcamera.matrixWorld.multiplyMatrices( parent.matrixWorld, camera.matrix );\n\n\t\t\t}\n\n\t\t\tcamera.matrixWorldInverse.copy( camera.matrixWorld ).invert();\n\n\t\t}\n\n\t\tthis.updateCamera = function ( camera ) {\n\n\t\t\tif ( session === null ) return;\n\n\t\t\tcameraVR.near = cameraR.near = cameraL.near = camera.near;\n\t\t\tcameraVR.far = cameraR.far = cameraL.far = camera.far;\n\n\t\t\tif ( _currentDepthNear !== cameraVR.near || _currentDepthFar !== cameraVR.far ) {\n\n\t\t\t\t// Note that the new renderState won't apply until the next frame. See #18320\n\n\t\t\t\tsession.updateRenderState( {\n\t\t\t\t\tdepthNear: cameraVR.near,\n\t\t\t\t\tdepthFar: cameraVR.far\n\t\t\t\t} );\n\n\t\t\t\t_currentDepthNear = cameraVR.near;\n\t\t\t\t_currentDepthFar = cameraVR.far;\n\n\t\t\t}\n\n\t\t\tconst parent = camera.parent;\n\t\t\tconst cameras = cameraVR.cameras;\n\n\t\t\tupdateCamera( cameraVR, parent );\n\n\t\t\tfor ( let i = 0; i < cameras.length; i ++ ) {\n\n\t\t\t\tupdateCamera( cameras[ i ], parent );\n\n\t\t\t}\n\n\t\t\tcameraVR.matrixWorld.decompose( cameraVR.position, cameraVR.quaternion, cameraVR.scale );\n\n\t\t\t// update user camera and its children\n\n\t\t\tcamera.matrix.copy( cameraVR.matrix );\n\t\t\tcamera.matrix.decompose( camera.position, camera.quaternion, camera.scale );\n\n\t\t\tconst children = camera.children;\n\n\t\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tchildren[ i ].updateMatrixWorld( true );\n\n\t\t\t}\n\n\t\t\t// update projection matrix for proper view frustum culling\n\n\t\t\tif ( cameras.length === 2 ) {\n\n\t\t\t\tsetProjectionFromUnion( cameraVR, cameraL, cameraR );\n\n\t\t\t} else {\n\n\t\t\t\t// assume single camera setup (AR)\n\n\t\t\t\tcameraVR.projectionMatrix.copy( cameraL.projectionMatrix );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.getCamera = function () {\n\n\t\t\treturn cameraVR;\n\n\t\t};\n\n\t\tthis.getFoveation = function () {\n\n\t\t\tif ( glProjLayer !== null ) {\n\n\t\t\t\treturn glProjLayer.fixedFoveation;\n\n\t\t\t}\n\n\t\t\tif ( glBaseLayer !== null ) {\n\n\t\t\t\treturn glBaseLayer.fixedFoveation;\n\n\t\t\t}\n\n\t\t\treturn undefined;\n\n\t\t};\n\n\t\tthis.setFoveation = function ( foveation ) {\n\n\t\t\t// 0 = no foveation = full resolution\n\t\t\t// 1 = maximum foveation = the edges render at lower resolution\n\n\t\t\tif ( glProjLayer !== null ) {\n\n\t\t\t\tglProjLayer.fixedFoveation = foveation;\n\n\t\t\t}\n\n\t\t\tif ( glBaseLayer !== null && glBaseLayer.fixedFoveation !== undefined ) {\n\n\t\t\t\tglBaseLayer.fixedFoveation = foveation;\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.getPlanes = function () {\n\n\t\t\treturn planes;\n\n\t\t};\n\n\t\t// Animation Loop\n\n\t\tlet onAnimationFrameCallback = null;\n\n\t\tfunction onAnimationFrame( time, frame ) {\n\n\t\t\tpose = frame.getViewerPose( customReferenceSpace || referenceSpace );\n\t\t\txrFrame = frame;\n\n\t\t\tif ( pose !== null ) {\n\n\t\t\t\tconst views = pose.views;\n\n\t\t\t\tif ( glBaseLayer !== null ) {\n\n\t\t\t\t\trenderer.setRenderTargetFramebuffer( newRenderTarget, glBaseLayer.framebuffer );\n\t\t\t\t\trenderer.setRenderTarget( newRenderTarget );\n\n\t\t\t\t}\n\n\t\t\t\tlet cameraVRNeedsUpdate = false;\n\n\t\t\t\t// check if it's necessary to rebuild cameraVR's camera list\n\n\t\t\t\tif ( views.length !== cameraVR.cameras.length ) {\n\n\t\t\t\t\tcameraVR.cameras.length = 0;\n\t\t\t\t\tcameraVRNeedsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0; i < views.length; i ++ ) {\n\n\t\t\t\t\tconst view = views[ i ];\n\n\t\t\t\t\tlet viewport = null;\n\n\t\t\t\t\tif ( glBaseLayer !== null ) {\n\n\t\t\t\t\t\tviewport = glBaseLayer.getViewport( view );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst glSubImage = glBinding.getViewSubImage( glProjLayer, view );\n\t\t\t\t\t\tviewport = glSubImage.viewport;\n\n\t\t\t\t\t\t// For side-by-side projection, we only produce a single texture for both eyes.\n\t\t\t\t\t\tif ( i === 0 ) {\n\n\t\t\t\t\t\t\trenderer.setRenderTargetTextures(\n\t\t\t\t\t\t\t\tnewRenderTarget,\n\t\t\t\t\t\t\t\tglSubImage.colorTexture,\n\t\t\t\t\t\t\t\tglProjLayer.ignoreDepthValues ? undefined : glSubImage.depthStencilTexture );\n\n\t\t\t\t\t\t\trenderer.setRenderTarget( newRenderTarget );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tlet camera = cameras[ i ];\n\n\t\t\t\t\tif ( camera === undefined ) {\n\n\t\t\t\t\t\tcamera = new PerspectiveCamera();\n\t\t\t\t\t\tcamera.layers.enable( i );\n\t\t\t\t\t\tcamera.viewport = new Vector4();\n\t\t\t\t\t\tcameras[ i ] = camera;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcamera.matrix.fromArray( view.transform.matrix );\n\t\t\t\t\tcamera.projectionMatrix.fromArray( view.projectionMatrix );\n\t\t\t\t\tcamera.viewport.set( viewport.x, viewport.y, viewport.width, viewport.height );\n\n\t\t\t\t\tif ( i === 0 ) {\n\n\t\t\t\t\t\tcameraVR.matrix.copy( camera.matrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( cameraVRNeedsUpdate === true ) {\n\n\t\t\t\t\t\tcameraVR.cameras.push( camera );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\n\n\t\t\t\tconst inputSource = controllerInputSources[ i ];\n\t\t\t\tconst controller = controllers[ i ];\n\n\t\t\t\tif ( inputSource !== null && controller !== undefined ) {\n\n\t\t\t\t\tcontroller.update( inputSource, frame, customReferenceSpace || referenceSpace );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time, frame );\n\n\t\t\tif ( frame.detectedPlanes ) {\n\n\t\t\t\tscope.dispatchEvent( { type: 'planesdetected', data: frame.detectedPlanes } );\n\n\t\t\t\tlet planesToRemove = null;\n\n\t\t\t\tfor ( const plane of planes ) {\n\n\t\t\t\t\tif ( ! frame.detectedPlanes.has( plane ) ) {\n\n\t\t\t\t\t\tif ( planesToRemove === null ) {\n\n\t\t\t\t\t\t\tplanesToRemove = [];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tplanesToRemove.push( plane );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( planesToRemove !== null ) {\n\n\t\t\t\t\tfor ( const plane of planesToRemove ) {\n\n\t\t\t\t\t\tplanes.delete( plane );\n\t\t\t\t\t\tplanesLastChangedTimes.delete( plane );\n\t\t\t\t\t\tscope.dispatchEvent( { type: 'planeremoved', data: plane } );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tfor ( const plane of frame.detectedPlanes ) {\n\n\t\t\t\t\tif ( ! planes.has( plane ) ) {\n\n\t\t\t\t\t\tplanes.add( plane );\n\t\t\t\t\t\tplanesLastChangedTimes.set( plane, frame.lastChangedTime );\n\t\t\t\t\t\tscope.dispatchEvent( { type: 'planeadded', data: plane } );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst lastKnownTime = planesLastChangedTimes.get( plane );\n\n\t\t\t\t\t\tif ( plane.lastChangedTime > lastKnownTime ) {\n\n\t\t\t\t\t\t\tplanesLastChangedTimes.set( plane, plane.lastChangedTime );\n\t\t\t\t\t\t\tscope.dispatchEvent( { type: 'planechanged', data: plane } );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\txrFrame = null;\n\n\t\t}\n\n\t\tconst animation = new WebGLAnimation();\n\n\t\tanimation.setAnimationLoop( onAnimationFrame );\n\n\t\tthis.setAnimationLoop = function ( callback ) {\n\n\t\t\tonAnimationFrameCallback = callback;\n\n\t\t};\n\n\t\tthis.dispose = function () {};\n\n\t}\n\n}\n\nfunction WebGLMaterials( renderer, properties ) {\n\n\tfunction refreshFogUniforms( uniforms, fog ) {\n\n\t\tfog.color.getRGB( uniforms.fogColor.value, getUnlitUniformColorSpace( renderer ) );\n\n\t\tif ( fog.isFog ) {\n\n\t\t\tuniforms.fogNear.value = fog.near;\n\t\t\tuniforms.fogFar.value = fog.far;\n\n\t\t} else if ( fog.isFogExp2 ) {\n\n\t\t\tuniforms.fogDensity.value = fog.density;\n\n\t\t}\n\n\t}\n\n\tfunction refreshMaterialUniforms( uniforms, material, pixelRatio, height, transmissionRenderTarget ) {\n\n\t\tif ( material.isMeshBasicMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t} else if ( material.isMeshLambertMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t} else if ( material.isMeshToonMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsToon( uniforms, material );\n\n\t\t} else if ( material.isMeshPhongMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsPhong( uniforms, material );\n\n\t\t} else if ( material.isMeshStandardMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsStandard( uniforms, material );\n\n\t\t\tif ( material.isMeshPhysicalMaterial ) {\n\n\t\t\t\trefreshUniformsPhysical( uniforms, material, transmissionRenderTarget );\n\n\t\t\t}\n\n\t\t} else if ( material.isMeshMatcapMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsMatcap( uniforms, material );\n\n\t\t} else if ( material.isMeshDepthMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t} else if ( material.isMeshDistanceMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsDistance( uniforms, material );\n\n\t\t} else if ( material.isMeshNormalMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t} else if ( material.isLineBasicMaterial ) {\n\n\t\t\trefreshUniformsLine( uniforms, material );\n\n\t\t\tif ( material.isLineDashedMaterial ) {\n\n\t\t\t\trefreshUniformsDash( uniforms, material );\n\n\t\t\t}\n\n\t\t} else if ( material.isPointsMaterial ) {\n\n\t\t\trefreshUniformsPoints( uniforms, material, pixelRatio, height );\n\n\t\t} else if ( material.isSpriteMaterial ) {\n\n\t\t\trefreshUniformsSprites( uniforms, material );\n\n\t\t} else if ( material.isShadowMaterial ) {\n\n\t\t\tuniforms.color.value.copy( material.color );\n\t\t\tuniforms.opacity.value = material.opacity;\n\n\t\t} else if ( material.isShaderMaterial ) {\n\n\t\t\tmaterial.uniformsNeedUpdate = false; // #15581\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsCommon( uniforms, material ) {\n\n\t\tuniforms.opacity.value = material.opacity;\n\n\t\tif ( material.color ) {\n\n\t\t\tuniforms.diffuse.value.copy( material.color );\n\n\t\t}\n\n\t\tif ( material.emissive ) {\n\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\n\n\t\t}\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.specularMap ) {\n\n\t\t\tuniforms.specularMap.value = material.specularMap;\n\n\t\t}\n\n\t\tif ( material.alphaTest > 0 ) {\n\n\t\t\tuniforms.alphaTest.value = material.alphaTest;\n\n\t\t}\n\n\t\tconst envMap = properties.get( material ).envMap;\n\n\t\tif ( envMap ) {\n\n\t\t\tuniforms.envMap.value = envMap;\n\n\t\t\tuniforms.flipEnvMap.value = ( envMap.isCubeTexture && envMap.isRenderTargetTexture === false ) ? - 1 : 1;\n\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\n\t\t\tuniforms.ior.value = material.ior;\n\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\n\n\t\t}\n\n\t\tif ( material.lightMap ) {\n\n\t\t\tuniforms.lightMap.value = material.lightMap;\n\n\t\t\t// artist-friendly light intensity scaling factor\n\t\t\tconst scaleFactor = ( renderer.physicallyCorrectLights !== true ) ? Math.PI : 1;\n\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity * scaleFactor;\n\n\t\t}\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuniforms.aoMap.value = material.aoMap;\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. specular map\n\t\t// 3. displacementMap map\n\t\t// 4. normal map\n\t\t// 5. bump map\n\t\t// 6. roughnessMap map\n\t\t// 7. metalnessMap map\n\t\t// 8. alphaMap map\n\t\t// 9. emissiveMap map\n\t\t// 10. clearcoat map\n\t\t// 11. clearcoat normal map\n\t\t// 12. clearcoat roughnessMap map\n\t\t// 13. iridescence map\n\t\t// 14. iridescence thickness map\n\t\t// 15. specular intensity map\n\t\t// 16. specular tint map\n\t\t// 17. transmission map\n\t\t// 18. thickness map\n\n\t\tlet uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.specularMap ) {\n\n\t\t\tuvScaleMap = material.specularMap;\n\n\t\t} else if ( material.displacementMap ) {\n\n\t\t\tuvScaleMap = material.displacementMap;\n\n\t\t} else if ( material.normalMap ) {\n\n\t\t\tuvScaleMap = material.normalMap;\n\n\t\t} else if ( material.bumpMap ) {\n\n\t\t\tuvScaleMap = material.bumpMap;\n\n\t\t} else if ( material.roughnessMap ) {\n\n\t\t\tuvScaleMap = material.roughnessMap;\n\n\t\t} else if ( material.metalnessMap ) {\n\n\t\t\tuvScaleMap = material.metalnessMap;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t} else if ( material.emissiveMap ) {\n\n\t\t\tuvScaleMap = material.emissiveMap;\n\n\t\t} else if ( material.clearcoatMap ) {\n\n\t\t\tuvScaleMap = material.clearcoatMap;\n\n\t\t} else if ( material.clearcoatNormalMap ) {\n\n\t\t\tuvScaleMap = material.clearcoatNormalMap;\n\n\t\t} else if ( material.clearcoatRoughnessMap ) {\n\n\t\t\tuvScaleMap = material.clearcoatRoughnessMap;\n\n\t\t} else if ( material.iridescenceMap ) {\n\n\t\t\tuvScaleMap = material.iridescenceMap;\n\n\t\t} else if ( material.iridescenceThicknessMap ) {\n\n\t\t\tuvScaleMap = material.iridescenceThicknessMap;\n\n\t\t} else if ( material.specularIntensityMap ) {\n\n\t\t\tuvScaleMap = material.specularIntensityMap;\n\n\t\t} else if ( material.specularColorMap ) {\n\n\t\t\tuvScaleMap = material.specularColorMap;\n\n\t\t} else if ( material.transmissionMap ) {\n\n\t\t\tuvScaleMap = material.transmissionMap;\n\n\t\t} else if ( material.thicknessMap ) {\n\n\t\t\tuvScaleMap = material.thicknessMap;\n\n\t\t} else if ( material.sheenColorMap ) {\n\n\t\t\tuvScaleMap = material.sheenColorMap;\n\n\t\t} else if ( material.sheenRoughnessMap ) {\n\n\t\t\tuvScaleMap = material.sheenRoughnessMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uvScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuvScaleMap = uvScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities for uv2\n\t\t// 1. ao map\n\t\t// 2. light map\n\n\t\tlet uv2ScaleMap;\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuv2ScaleMap = material.aoMap;\n\n\t\t} else if ( material.lightMap ) {\n\n\t\t\tuv2ScaleMap = material.lightMap;\n\n\t\t}\n\n\t\tif ( uv2ScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uv2ScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuv2ScaleMap = uv2ScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif ( uv2ScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuv2ScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uv2Transform.value.copy( uv2ScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLine( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\n\t}\n\n\tfunction refreshUniformsDash( uniforms, material ) {\n\n\t\tuniforms.dashSize.value = material.dashSize;\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\n\t\tuniforms.scale.value = material.scale;\n\n\t}\n\n\tfunction refreshUniformsPoints( uniforms, material, pixelRatio, height ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.size.value = material.size * pixelRatio;\n\t\tuniforms.scale.value = height * 0.5;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\tif ( material.alphaTest > 0 ) {\n\n\t\t\tuniforms.alphaTest.value = material.alphaTest;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. alpha map\n\n\t\tlet uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsSprites( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.rotation.value = material.rotation;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\tif ( material.alphaTest > 0 ) {\n\n\t\t\tuniforms.alphaTest.value = material.alphaTest;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. alpha map\n\n\t\tlet uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhong( uniforms, material ) {\n\n\t\tuniforms.specular.value.copy( material.specular );\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\n\n\t}\n\n\tfunction refreshUniformsToon( uniforms, material ) {\n\n\t\tif ( material.gradientMap ) {\n\n\t\t\tuniforms.gradientMap.value = material.gradientMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsStandard( uniforms, material ) {\n\n\t\tuniforms.roughness.value = material.roughness;\n\t\tuniforms.metalness.value = material.metalness;\n\n\t\tif ( material.roughnessMap ) {\n\n\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\n\n\t\t}\n\n\t\tif ( material.metalnessMap ) {\n\n\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\n\n\t\t}\n\n\t\tconst envMap = properties.get( material ).envMap;\n\n\t\tif ( envMap ) {\n\n\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhysical( uniforms, material, transmissionRenderTarget ) {\n\n\t\tuniforms.ior.value = material.ior; // also part of uniforms common\n\n\t\tif ( material.sheen > 0 ) {\n\n\t\t\tuniforms.sheenColor.value.copy( material.sheenColor ).multiplyScalar( material.sheen );\n\n\t\t\tuniforms.sheenRoughness.value = material.sheenRoughness;\n\n\t\t\tif ( material.sheenColorMap ) {\n\n\t\t\t\tuniforms.sheenColorMap.value = material.sheenColorMap;\n\n\t\t\t}\n\n\t\t\tif ( material.sheenRoughnessMap ) {\n\n\t\t\t\tuniforms.sheenRoughnessMap.value = material.sheenRoughnessMap;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.clearcoat > 0 ) {\n\n\t\t\tuniforms.clearcoat.value = material.clearcoat;\n\t\t\tuniforms.clearcoatRoughness.value = material.clearcoatRoughness;\n\n\t\t\tif ( material.clearcoatMap ) {\n\n\t\t\t\tuniforms.clearcoatMap.value = material.clearcoatMap;\n\n\t\t\t}\n\n\t\t\tif ( material.clearcoatRoughnessMap ) {\n\n\t\t\t\tuniforms.clearcoatRoughnessMap.value = material.clearcoatRoughnessMap;\n\n\t\t\t}\n\n\t\t\tif ( material.clearcoatNormalMap ) {\n\n\t\t\t\tuniforms.clearcoatNormalScale.value.copy( material.clearcoatNormalScale );\n\t\t\t\tuniforms.clearcoatNormalMap.value = material.clearcoatNormalMap;\n\n\t\t\t\tif ( material.side === BackSide ) {\n\n\t\t\t\t\tuniforms.clearcoatNormalScale.value.negate();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.iridescence > 0 ) {\n\n\t\t\tuniforms.iridescence.value = material.iridescence;\n\t\t\tuniforms.iridescenceIOR.value = material.iridescenceIOR;\n\t\t\tuniforms.iridescenceThicknessMinimum.value = material.iridescenceThicknessRange[ 0 ];\n\t\t\tuniforms.iridescenceThicknessMaximum.value = material.iridescenceThicknessRange[ 1 ];\n\n\t\t\tif ( material.iridescenceMap ) {\n\n\t\t\t\tuniforms.iridescenceMap.value = material.iridescenceMap;\n\n\t\t\t}\n\n\t\t\tif ( material.iridescenceThicknessMap ) {\n\n\t\t\t\tuniforms.iridescenceThicknessMap.value = material.iridescenceThicknessMap;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.transmission > 0 ) {\n\n\t\t\tuniforms.transmission.value = material.transmission;\n\t\t\tuniforms.transmissionSamplerMap.value = transmissionRenderTarget.texture;\n\t\t\tuniforms.transmissionSamplerSize.value.set( transmissionRenderTarget.width, transmissionRenderTarget.height );\n\n\t\t\tif ( material.transmissionMap ) {\n\n\t\t\t\tuniforms.transmissionMap.value = material.transmissionMap;\n\n\t\t\t}\n\n\t\t\tuniforms.thickness.value = material.thickness;\n\n\t\t\tif ( material.thicknessMap ) {\n\n\t\t\t\tuniforms.thicknessMap.value = material.thicknessMap;\n\n\t\t\t}\n\n\t\t\tuniforms.attenuationDistance.value = material.attenuationDistance;\n\t\t\tuniforms.attenuationColor.value.copy( material.attenuationColor );\n\n\t\t}\n\n\t\tuniforms.specularIntensity.value = material.specularIntensity;\n\t\tuniforms.specularColor.value.copy( material.specularColor );\n\n\t\tif ( material.specularIntensityMap ) {\n\n\t\t\tuniforms.specularIntensityMap.value = material.specularIntensityMap;\n\n\t\t}\n\n\t\tif ( material.specularColorMap ) {\n\n\t\t\tuniforms.specularColorMap.value = material.specularColorMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsMatcap( uniforms, material ) {\n\n\t\tif ( material.matcap ) {\n\n\t\t\tuniforms.matcap.value = material.matcap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDistance( uniforms, material ) {\n\n\t\tuniforms.referencePosition.value.copy( material.referencePosition );\n\t\tuniforms.nearDistance.value = material.nearDistance;\n\t\tuniforms.farDistance.value = material.farDistance;\n\n\t}\n\n\treturn {\n\t\trefreshFogUniforms: refreshFogUniforms,\n\t\trefreshMaterialUniforms: refreshMaterialUniforms\n\t};\n\n}\n\nfunction WebGLUniformsGroups( gl, info, capabilities, state ) {\n\n\tlet buffers = {};\n\tlet updateList = {};\n\tlet allocatedBindingPoints = [];\n\n\tconst maxBindingPoints = ( capabilities.isWebGL2 ) ? gl.getParameter( 35375 ) : 0; // binding points are global whereas block indices are per shader program\n\n\tfunction bind( uniformsGroup, program ) {\n\n\t\tconst webglProgram = program.program;\n\t\tstate.uniformBlockBinding( uniformsGroup, webglProgram );\n\n\t}\n\n\tfunction update( uniformsGroup, program ) {\n\n\t\tlet buffer = buffers[ uniformsGroup.id ];\n\n\t\tif ( buffer === undefined ) {\n\n\t\t\tprepareUniformsGroup( uniformsGroup );\n\n\t\t\tbuffer = createBuffer( uniformsGroup );\n\t\t\tbuffers[ uniformsGroup.id ] = buffer;\n\n\t\t\tuniformsGroup.addEventListener( 'dispose', onUniformsGroupsDispose );\n\n\t\t}\n\n\t\t// ensure to update the binding points/block indices mapping for this program\n\n\t\tconst webglProgram = program.program;\n\t\tstate.updateUBOMapping( uniformsGroup, webglProgram );\n\n\t\t// update UBO once per frame\n\n\t\tconst frame = info.render.frame;\n\n\t\tif ( updateList[ uniformsGroup.id ] !== frame ) {\n\n\t\t\tupdateBufferData( uniformsGroup );\n\n\t\t\tupdateList[ uniformsGroup.id ] = frame;\n\n\t\t}\n\n\t}\n\n\tfunction createBuffer( uniformsGroup ) {\n\n\t\t// the setup of an UBO is independent of a particular shader program but global\n\n\t\tconst bindingPointIndex = allocateBindingPointIndex();\n\t\tuniformsGroup.__bindingPointIndex = bindingPointIndex;\n\n\t\tconst buffer = gl.createBuffer();\n\t\tconst size = uniformsGroup.__size;\n\t\tconst usage = uniformsGroup.usage;\n\n\t\tgl.bindBuffer( 35345, buffer );\n\t\tgl.bufferData( 35345, size, usage );\n\t\tgl.bindBuffer( 35345, null );\n\t\tgl.bindBufferBase( 35345, bindingPointIndex, buffer );\n\n\t\treturn buffer;\n\n\t}\n\n\tfunction allocateBindingPointIndex() {\n\n\t\tfor ( let i = 0; i < maxBindingPoints; i ++ ) {\n\n\t\t\tif ( allocatedBindingPoints.indexOf( i ) === - 1 ) {\n\n\t\t\t\tallocatedBindingPoints.push( i );\n\t\t\t\treturn i;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconsole.error( 'THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached.' );\n\n\t\treturn 0;\n\n\t}\n\n\tfunction updateBufferData( uniformsGroup ) {\n\n\t\tconst buffer = buffers[ uniformsGroup.id ];\n\t\tconst uniforms = uniformsGroup.uniforms;\n\t\tconst cache = uniformsGroup.__cache;\n\n\t\tgl.bindBuffer( 35345, buffer );\n\n\t\tfor ( let i = 0, il = uniforms.length; i < il; i ++ ) {\n\n\t\t\tconst uniform = uniforms[ i ];\n\n\t\t\t// partly update the buffer if necessary\n\n\t\t\tif ( hasUniformChanged( uniform, i, cache ) === true ) {\n\n\t\t\t\tconst offset = uniform.__offset;\n\n\t\t\t\tconst values = Array.isArray( uniform.value ) ? uniform.value : [ uniform.value ];\n\n\t\t\t\tlet arrayOffset = 0;\n\n\t\t\t\tfor ( let i = 0; i < values.length; i ++ ) {\n\n\t\t\t\t\tconst value = values[ i ];\n\n\t\t\t\t\tconst info = getUniformSize( value );\n\n\t\t\t\t\tif ( typeof value === 'number' ) {\n\n\t\t\t\t\t\tuniform.__data[ 0 ] = value;\n\t\t\t\t\t\tgl.bufferSubData( 35345, offset + arrayOffset, uniform.__data );\n\n\t\t\t\t\t} else if ( value.isMatrix3 ) {\n\n\t\t\t\t\t\t// manually converting 3x3 to 3x4\n\n\t\t\t\t\t\tuniform.__data[ 0 ] = value.elements[ 0 ];\n\t\t\t\t\t\tuniform.__data[ 1 ] = value.elements[ 1 ];\n\t\t\t\t\t\tuniform.__data[ 2 ] = value.elements[ 2 ];\n\t\t\t\t\t\tuniform.__data[ 3 ] = value.elements[ 0 ];\n\t\t\t\t\t\tuniform.__data[ 4 ] = value.elements[ 3 ];\n\t\t\t\t\t\tuniform.__data[ 5 ] = value.elements[ 4 ];\n\t\t\t\t\t\tuniform.__data[ 6 ] = value.elements[ 5 ];\n\t\t\t\t\t\tuniform.__data[ 7 ] = value.elements[ 0 ];\n\t\t\t\t\t\tuniform.__data[ 8 ] = value.elements[ 6 ];\n\t\t\t\t\t\tuniform.__data[ 9 ] = value.elements[ 7 ];\n\t\t\t\t\t\tuniform.__data[ 10 ] = value.elements[ 8 ];\n\t\t\t\t\t\tuniform.__data[ 11 ] = value.elements[ 0 ];\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvalue.toArray( uniform.__data, arrayOffset );\n\n\t\t\t\t\t\tarrayOffset += info.storage / Float32Array.BYTES_PER_ELEMENT;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tgl.bufferSubData( 35345, offset, uniform.__data );\n\n\t\t\t}\n\n\t\t}\n\n\t\tgl.bindBuffer( 35345, null );\n\n\t}\n\n\tfunction hasUniformChanged( uniform, index, cache ) {\n\n\t\tconst value = uniform.value;\n\n\t\tif ( cache[ index ] === undefined ) {\n\n\t\t\t// cache entry does not exist so far\n\n\t\t\tif ( typeof value === 'number' ) {\n\n\t\t\t\tcache[ index ] = value;\n\n\t\t\t} else {\n\n\t\t\t\tconst values = Array.isArray( value ) ? value : [ value ];\n\n\t\t\t\tconst tempValues = [];\n\n\t\t\t\tfor ( let i = 0; i < values.length; i ++ ) {\n\n\t\t\t\t\ttempValues.push( values[ i ].clone() );\n\n\t\t\t\t}\n\n\t\t\t\tcache[ index ] = tempValues;\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t} else {\n\n\t\t\t// compare current value with cached entry\n\n\t\t\tif ( typeof value === 'number' ) {\n\n\t\t\t\tif ( cache[ index ] !== value ) {\n\n\t\t\t\t\tcache[ index ] = value;\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconst cachedObjects = Array.isArray( cache[ index ] ) ? cache[ index ] : [ cache[ index ] ];\n\t\t\t\tconst values = Array.isArray( value ) ? value : [ value ];\n\n\t\t\t\tfor ( let i = 0; i < cachedObjects.length; i ++ ) {\n\n\t\t\t\t\tconst cachedObject = cachedObjects[ i ];\n\n\t\t\t\t\tif ( cachedObject.equals( values[ i ] ) === false ) {\n\n\t\t\t\t\t\tcachedObject.copy( values[ i ] );\n\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tfunction prepareUniformsGroup( uniformsGroup ) {\n\n\t\t// determine total buffer size according to the STD140 layout\n\t\t// Hint: STD140 is the only supported layout in WebGL 2\n\n\t\tconst uniforms = uniformsGroup.uniforms;\n\n\t\tlet offset = 0; // global buffer offset in bytes\n\t\tconst chunkSize = 16; // size of a chunk in bytes\n\t\tlet chunkOffset = 0; // offset within a single chunk in bytes\n\n\t\tfor ( let i = 0, l = uniforms.length; i < l; i ++ ) {\n\n\t\t\tconst uniform = uniforms[ i ];\n\n\t\t\tconst infos = {\n\t\t\t\tboundary: 0, // bytes\n\t\t\t\tstorage: 0 // bytes\n\t\t\t};\n\n\t\t\tconst values = Array.isArray( uniform.value ) ? uniform.value : [ uniform.value ];\n\n\t\t\tfor ( let j = 0, jl = values.length; j < jl; j ++ ) {\n\n\t\t\t\tconst value = values[ j ];\n\n\t\t\t\tconst info = getUniformSize( value );\n\n\t\t\t\tinfos.boundary += info.boundary;\n\t\t\t\tinfos.storage += info.storage;\n\n\t\t\t}\n\n\t\t\t// the following two properties will be used for partial buffer updates\n\n\t\t\tuniform.__data = new Float32Array( infos.storage / Float32Array.BYTES_PER_ELEMENT );\n\t\t\tuniform.__offset = offset;\n\n\t\t\t//\n\n\t\t\tif ( i > 0 ) {\n\n\t\t\t\tchunkOffset = offset % chunkSize;\n\n\t\t\t\tconst remainingSizeInChunk = chunkSize - chunkOffset;\n\n\t\t\t\t// check for chunk overflow\n\n\t\t\t\tif ( chunkOffset !== 0 && ( remainingSizeInChunk - infos.boundary ) < 0 ) {\n\n\t\t\t\t\t// add padding and adjust offset\n\n\t\t\t\t\toffset += ( chunkSize - chunkOffset );\n\t\t\t\t\tuniform.__offset = offset;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\toffset += infos.storage;\n\n\t\t}\n\n\t\t// ensure correct final padding\n\n\t\tchunkOffset = offset % chunkSize;\n\n\t\tif ( chunkOffset > 0 ) offset += ( chunkSize - chunkOffset );\n\n\t\t//\n\n\t\tuniformsGroup.__size = offset;\n\t\tuniformsGroup.__cache = {};\n\n\t\treturn this;\n\n\t}\n\n\tfunction getUniformSize( value ) {\n\n\t\tconst info = {\n\t\t\tboundary: 0, // bytes\n\t\t\tstorage: 0 // bytes\n\t\t};\n\n\t\t// determine sizes according to STD140\n\n\t\tif ( typeof value === 'number' ) {\n\n\t\t\t// float/int\n\n\t\t\tinfo.boundary = 4;\n\t\t\tinfo.storage = 4;\n\n\t\t} else if ( value.isVector2 ) {\n\n\t\t\t// vec2\n\n\t\t\tinfo.boundary = 8;\n\t\t\tinfo.storage = 8;\n\n\t\t} else if ( value.isVector3 || value.isColor ) {\n\n\t\t\t// vec3\n\n\t\t\tinfo.boundary = 16;\n\t\t\tinfo.storage = 12; // evil: vec3 must start on a 16-byte boundary but it only consumes 12 bytes\n\n\t\t} else if ( value.isVector4 ) {\n\n\t\t\t// vec4\n\n\t\t\tinfo.boundary = 16;\n\t\t\tinfo.storage = 16;\n\n\t\t} else if ( value.isMatrix3 ) {\n\n\t\t\t// mat3 (in STD140 a 3x3 matrix is represented as 3x4)\n\n\t\t\tinfo.boundary = 48;\n\t\t\tinfo.storage = 48;\n\n\t\t} else if ( value.isMatrix4 ) {\n\n\t\t\t// mat4\n\n\t\t\tinfo.boundary = 64;\n\t\t\tinfo.storage = 64;\n\n\t\t} else if ( value.isTexture ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group.' );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Unsupported uniform value type.', value );\n\n\t\t}\n\n\t\treturn info;\n\n\t}\n\n\tfunction onUniformsGroupsDispose( event ) {\n\n\t\tconst uniformsGroup = event.target;\n\n\t\tuniformsGroup.removeEventListener( 'dispose', onUniformsGroupsDispose );\n\n\t\tconst index = allocatedBindingPoints.indexOf( uniformsGroup.__bindingPointIndex );\n\t\tallocatedBindingPoints.splice( index, 1 );\n\n\t\tgl.deleteBuffer( buffers[ uniformsGroup.id ] );\n\n\t\tdelete buffers[ uniformsGroup.id ];\n\t\tdelete updateList[ uniformsGroup.id ];\n\n\t}\n\n\tfunction dispose() {\n\n\t\tfor ( const id in buffers ) {\n\n\t\t\tgl.deleteBuffer( buffers[ id ] );\n\n\t\t}\n\n\t\tallocatedBindingPoints = [];\n\t\tbuffers = {};\n\t\tupdateList = {};\n\n\t}\n\n\treturn {\n\n\t\tbind: bind,\n\t\tupdate: update,\n\n\t\tdispose: dispose\n\n\t};\n\n}\n\nfunction createCanvasElement() {\n\n\tconst canvas = createElementNS( 'canvas' );\n\tcanvas.style.display = 'block';\n\treturn canvas;\n\n}\n\nfunction WebGLRenderer( parameters = {} ) {\n\n\tthis.isWebGLRenderer = true;\n\n\tconst _canvas = parameters.canvas !== undefined ? parameters.canvas : createCanvasElement(),\n\t\t_context = parameters.context !== undefined ? parameters.context : null,\n\n\t\t_depth = parameters.depth !== undefined ? parameters.depth : true,\n\t\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\n\t\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\n\t\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\n\t\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\n\t\t_powerPreference = parameters.powerPreference !== undefined ? parameters.powerPreference : 'default',\n\t\t_failIfMajorPerformanceCaveat = parameters.failIfMajorPerformanceCaveat !== undefined ? parameters.failIfMajorPerformanceCaveat : false;\n\n\tlet _alpha;\n\n\tif ( _context !== null ) {\n\n\t\t_alpha = _context.getContextAttributes().alpha;\n\n\t} else {\n\n\t\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false;\n\n\t}\n\n\tlet currentRenderList = null;\n\tlet currentRenderState = null;\n\n\t// render() can be called from within a callback triggered by another render.\n\t// We track this so that the nested render call gets its list and state isolated from the parent render call.\n\n\tconst renderListStack = [];\n\tconst renderStateStack = [];\n\n\t// public properties\n\n\tthis.domElement = _canvas;\n\n\t// Debug configuration container\n\tthis.debug = {\n\n\t\t/**\n\t\t * Enables error checking and reporting when shader programs are being compiled\n\t\t * @type {boolean}\n\t\t */\n\t\tcheckShaderErrors: true\n\t};\n\n\t// clearing\n\n\tthis.autoClear = true;\n\tthis.autoClearColor = true;\n\tthis.autoClearDepth = true;\n\tthis.autoClearStencil = true;\n\n\t// scene graph\n\n\tthis.sortObjects = true;\n\n\t// user-defined clipping\n\n\tthis.clippingPlanes = [];\n\tthis.localClippingEnabled = false;\n\n\t// physically based shading\n\n\tthis.outputEncoding = LinearEncoding;\n\n\t// physical lights\n\n\tthis.physicallyCorrectLights = false;\n\n\t// tone mapping\n\n\tthis.toneMapping = NoToneMapping;\n\tthis.toneMappingExposure = 1.0;\n\n\t// internal properties\n\n\tconst _this = this;\n\n\tlet _isContextLost = false;\n\n\t// internal state cache\n\n\tlet _currentActiveCubeFace = 0;\n\tlet _currentActiveMipmapLevel = 0;\n\tlet _currentRenderTarget = null;\n\tlet _currentMaterialId = - 1;\n\n\tlet _currentCamera = null;\n\n\tconst _currentViewport = new Vector4();\n\tconst _currentScissor = new Vector4();\n\tlet _currentScissorTest = null;\n\n\t//\n\n\tlet _width = _canvas.width;\n\tlet _height = _canvas.height;\n\n\tlet _pixelRatio = 1;\n\tlet _opaqueSort = null;\n\tlet _transparentSort = null;\n\n\tconst _viewport = new Vector4( 0, 0, _width, _height );\n\tconst _scissor = new Vector4( 0, 0, _width, _height );\n\tlet _scissorTest = false;\n\n\t// frustum\n\n\tconst _frustum = new Frustum();\n\n\t// clipping\n\n\tlet _clippingEnabled = false;\n\tlet _localClippingEnabled = false;\n\n\t// transmission\n\n\tlet _transmissionRenderTarget = null;\n\n\t// camera matrices cache\n\n\tconst _projScreenMatrix = new Matrix4();\n\n\tconst _vector2 = new Vector2();\n\tconst _vector3 = new Vector3();\n\n\tconst _emptyScene = { background: null, fog: null, environment: null, overrideMaterial: null, isScene: true };\n\n\tfunction getTargetPixelRatio() {\n\n\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\n\n\t}\n\n\t// initialize\n\n\tlet _gl = _context;\n\n\tfunction getContext( contextNames, contextAttributes ) {\n\n\t\tfor ( let i = 0; i < contextNames.length; i ++ ) {\n\n\t\t\tconst contextName = contextNames[ i ];\n\t\t\tconst context = _canvas.getContext( contextName, contextAttributes );\n\t\t\tif ( context !== null ) return context;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\ttry {\n\n\t\tconst contextAttributes = {\n\t\t\talpha: true,\n\t\t\tdepth: _depth,\n\t\t\tstencil: _stencil,\n\t\t\tantialias: _antialias,\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer,\n\t\t\tpowerPreference: _powerPreference,\n\t\t\tfailIfMajorPerformanceCaveat: _failIfMajorPerformanceCaveat\n\t\t};\n\n\t\t// OffscreenCanvas does not have setAttribute, see #22811\n\t\tif ( 'setAttribute' in _canvas ) _canvas.setAttribute( 'data-engine', `three.js r${REVISION}` );\n\n\t\t// event listeners must be registered before WebGL context is created, see #12753\n\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.addEventListener( 'webglcontextrestored', onContextRestore, false );\n\t\t_canvas.addEventListener( 'webglcontextcreationerror', onContextCreationError, false );\n\n\t\tif ( _gl === null ) {\n\n\t\t\tconst contextNames = [ 'webgl2', 'webgl', 'experimental-webgl' ];\n\n\t\t\tif ( _this.isWebGL1Renderer === true ) {\n\n\t\t\t\tcontextNames.shift();\n\n\t\t\t}\n\n\t\t\t_gl = getContext( contextNames, contextAttributes );\n\n\t\t\tif ( _gl === null ) {\n\n\t\t\t\tif ( getContext( contextNames ) ) {\n\n\t\t\t\t\tthrow new Error( 'Error creating WebGL context with your selected attributes.' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'Error creating WebGL context.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Some experimental-webgl implementations do not have getShaderPrecisionFormat\n\n\t\tif ( _gl.getShaderPrecisionFormat === undefined ) {\n\n\t\t\t_gl.getShaderPrecisionFormat = function () {\n\n\t\t\t\treturn { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\n\n\t\t\t};\n\n\t\t}\n\n\t} catch ( error ) {\n\n\t\tconsole.error( 'THREE.WebGLRenderer: ' + error.message );\n\t\tthrow error;\n\n\t}\n\n\tlet extensions, capabilities, state, info;\n\tlet properties, textures, cubemaps, cubeuvmaps, attributes, geometries, objects;\n\tlet programCache, materials, renderLists, renderStates, clipping, shadowMap;\n\n\tlet background, morphtargets, bufferRenderer, indexedBufferRenderer;\n\n\tlet utils, bindingStates, uniformsGroups;\n\n\tfunction initGLContext() {\n\n\t\textensions = new WebGLExtensions( _gl );\n\n\t\tcapabilities = new WebGLCapabilities( _gl, extensions, parameters );\n\n\t\textensions.init( capabilities );\n\n\t\tutils = new WebGLUtils( _gl, extensions, capabilities );\n\n\t\tstate = new WebGLState( _gl, extensions, capabilities );\n\n\t\tinfo = new WebGLInfo();\n\t\tproperties = new WebGLProperties();\n\t\ttextures = new WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info );\n\t\tcubemaps = new WebGLCubeMaps( _this );\n\t\tcubeuvmaps = new WebGLCubeUVMaps( _this );\n\t\tattributes = new WebGLAttributes( _gl, capabilities );\n\t\tbindingStates = new WebGLBindingStates( _gl, extensions, attributes, capabilities );\n\t\tgeometries = new WebGLGeometries( _gl, attributes, info, bindingStates );\n\t\tobjects = new WebGLObjects( _gl, geometries, attributes, info );\n\t\tmorphtargets = new WebGLMorphtargets( _gl, capabilities, textures );\n\t\tclipping = new WebGLClipping( properties );\n\t\tprogramCache = new WebGLPrograms( _this, cubemaps, cubeuvmaps, extensions, capabilities, bindingStates, clipping );\n\t\tmaterials = new WebGLMaterials( _this, properties );\n\t\trenderLists = new WebGLRenderLists();\n\t\trenderStates = new WebGLRenderStates( extensions, capabilities );\n\t\tbackground = new WebGLBackground( _this, cubemaps, cubeuvmaps, state, objects, _alpha, _premultipliedAlpha );\n\t\tshadowMap = new WebGLShadowMap( _this, objects, capabilities );\n\t\tuniformsGroups = new WebGLUniformsGroups( _gl, info, capabilities, state );\n\n\t\tbufferRenderer = new WebGLBufferRenderer( _gl, extensions, info, capabilities );\n\t\tindexedBufferRenderer = new WebGLIndexedBufferRenderer( _gl, extensions, info, capabilities );\n\n\t\tinfo.programs = programCache.programs;\n\n\t\t_this.capabilities = capabilities;\n\t\t_this.extensions = extensions;\n\t\t_this.properties = properties;\n\t\t_this.renderLists = renderLists;\n\t\t_this.shadowMap = shadowMap;\n\t\t_this.state = state;\n\t\t_this.info = info;\n\n\t}\n\n\tinitGLContext();\n\n\t// xr\n\n\tconst xr = new WebXRManager( _this, _gl );\n\n\tthis.xr = xr;\n\n\t// API\n\n\tthis.getContext = function () {\n\n\t\treturn _gl;\n\n\t};\n\n\tthis.getContextAttributes = function () {\n\n\t\treturn _gl.getContextAttributes();\n\n\t};\n\n\tthis.forceContextLoss = function () {\n\n\t\tconst extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.loseContext();\n\n\t};\n\n\tthis.forceContextRestore = function () {\n\n\t\tconst extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.restoreContext();\n\n\t};\n\n\tthis.getPixelRatio = function () {\n\n\t\treturn _pixelRatio;\n\n\t};\n\n\tthis.setPixelRatio = function ( value ) {\n\n\t\tif ( value === undefined ) return;\n\n\t\t_pixelRatio = value;\n\n\t\tthis.setSize( _width, _height, false );\n\n\t};\n\n\tthis.getSize = function ( target ) {\n\n\t\treturn target.set( _width, _height );\n\n\t};\n\n\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\tif ( xr.isPresenting ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Can\\'t change size while VR device is presenting.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_canvas.width = Math.floor( width * _pixelRatio );\n\t\t_canvas.height = Math.floor( height * _pixelRatio );\n\n\t\tif ( updateStyle !== false ) {\n\n\t\t\t_canvas.style.width = width + 'px';\n\t\t\t_canvas.style.height = height + 'px';\n\n\t\t}\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getDrawingBufferSize = function ( target ) {\n\n\t\treturn target.set( _width * _pixelRatio, _height * _pixelRatio ).floor();\n\n\t};\n\n\tthis.setDrawingBufferSize = function ( width, height, pixelRatio ) {\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_pixelRatio = pixelRatio;\n\n\t\t_canvas.width = Math.floor( width * pixelRatio );\n\t\t_canvas.height = Math.floor( height * pixelRatio );\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getCurrentViewport = function ( target ) {\n\n\t\treturn target.copy( _currentViewport );\n\n\t};\n\n\tthis.getViewport = function ( target ) {\n\n\t\treturn target.copy( _viewport );\n\n\t};\n\n\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\tif ( x.isVector4 ) {\n\n\t\t\t_viewport.set( x.x, x.y, x.z, x.w );\n\n\t\t} else {\n\n\t\t\t_viewport.set( x, y, width, height );\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\n\n\t};\n\n\tthis.getScissor = function ( target ) {\n\n\t\treturn target.copy( _scissor );\n\n\t};\n\n\tthis.setScissor = function ( x, y, width, height ) {\n\n\t\tif ( x.isVector4 ) {\n\n\t\t\t_scissor.set( x.x, x.y, x.z, x.w );\n\n\t\t} else {\n\n\t\t\t_scissor.set( x, y, width, height );\n\n\t\t}\n\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\n\n\t};\n\n\tthis.getScissorTest = function () {\n\n\t\treturn _scissorTest;\n\n\t};\n\n\tthis.setScissorTest = function ( boolean ) {\n\n\t\tstate.setScissorTest( _scissorTest = boolean );\n\n\t};\n\n\tthis.setOpaqueSort = function ( method ) {\n\n\t\t_opaqueSort = method;\n\n\t};\n\n\tthis.setTransparentSort = function ( method ) {\n\n\t\t_transparentSort = method;\n\n\t};\n\n\t// Clearing\n\n\tthis.getClearColor = function ( target ) {\n\n\t\treturn target.copy( background.getClearColor() );\n\n\t};\n\n\tthis.setClearColor = function () {\n\n\t\tbackground.setClearColor.apply( background, arguments );\n\n\t};\n\n\tthis.getClearAlpha = function () {\n\n\t\treturn background.getClearAlpha();\n\n\t};\n\n\tthis.setClearAlpha = function () {\n\n\t\tbackground.setClearAlpha.apply( background, arguments );\n\n\t};\n\n\tthis.clear = function ( color = true, depth = true, stencil = true ) {\n\n\t\tlet bits = 0;\n\n\t\tif ( color ) bits |= 16384;\n\t\tif ( depth ) bits |= 256;\n\t\tif ( stencil ) bits |= 1024;\n\n\t\t_gl.clear( bits );\n\n\t};\n\n\tthis.clearColor = function () {\n\n\t\tthis.clear( true, false, false );\n\n\t};\n\n\tthis.clearDepth = function () {\n\n\t\tthis.clear( false, true, false );\n\n\t};\n\n\tthis.clearStencil = function () {\n\n\t\tthis.clear( false, false, true );\n\n\t};\n\n\t//\n\n\tthis.dispose = function () {\n\n\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.removeEventListener( 'webglcontextrestored', onContextRestore, false );\n\t\t_canvas.removeEventListener( 'webglcontextcreationerror', onContextCreationError, false );\n\n\t\trenderLists.dispose();\n\t\trenderStates.dispose();\n\t\tproperties.dispose();\n\t\tcubemaps.dispose();\n\t\tcubeuvmaps.dispose();\n\t\tobjects.dispose();\n\t\tbindingStates.dispose();\n\t\tuniformsGroups.dispose();\n\t\tprogramCache.dispose();\n\n\t\txr.dispose();\n\n\t\txr.removeEventListener( 'sessionstart', onXRSessionStart );\n\t\txr.removeEventListener( 'sessionend', onXRSessionEnd );\n\n\t\tif ( _transmissionRenderTarget ) {\n\n\t\t\t_transmissionRenderTarget.dispose();\n\t\t\t_transmissionRenderTarget = null;\n\n\t\t}\n\n\t\tanimation.stop();\n\n\t};\n\n\t// Events\n\n\tfunction onContextLost( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Lost.' );\n\n\t\t_isContextLost = true;\n\n\t}\n\n\tfunction onContextRestore( /* event */ ) {\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Restored.' );\n\n\t\t_isContextLost = false;\n\n\t\tconst infoAutoReset = info.autoReset;\n\t\tconst shadowMapEnabled = shadowMap.enabled;\n\t\tconst shadowMapAutoUpdate = shadowMap.autoUpdate;\n\t\tconst shadowMapNeedsUpdate = shadowMap.needsUpdate;\n\t\tconst shadowMapType = shadowMap.type;\n\n\t\tinitGLContext();\n\n\t\tinfo.autoReset = infoAutoReset;\n\t\tshadowMap.enabled = shadowMapEnabled;\n\t\tshadowMap.autoUpdate = shadowMapAutoUpdate;\n\t\tshadowMap.needsUpdate = shadowMapNeedsUpdate;\n\t\tshadowMap.type = shadowMapType;\n\n\t}\n\n\tfunction onContextCreationError( event ) {\n\n\t\tconsole.error( 'THREE.WebGLRenderer: A WebGL context could not be created. Reason: ', event.statusMessage );\n\n\t}\n\n\tfunction onMaterialDispose( event ) {\n\n\t\tconst material = event.target;\n\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\n\n\t\tdeallocateMaterial( material );\n\n\t}\n\n\t// Buffer deallocation\n\n\tfunction deallocateMaterial( material ) {\n\n\t\treleaseMaterialProgramReferences( material );\n\n\t\tproperties.remove( material );\n\n\t}\n\n\n\tfunction releaseMaterialProgramReferences( material ) {\n\n\t\tconst programs = properties.get( material ).programs;\n\n\t\tif ( programs !== undefined ) {\n\n\t\t\tprograms.forEach( function ( program ) {\n\n\t\t\t\tprogramCache.releaseProgram( program );\n\n\t\t\t} );\n\n\t\t\tif ( material.isShaderMaterial ) {\n\n\t\t\t\tprogramCache.releaseShaderCache( material );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// Buffer rendering\n\n\tthis.renderBufferDirect = function ( camera, scene, geometry, material, object, group ) {\n\n\t\tif ( scene === null ) scene = _emptyScene; // renderBufferDirect second parameter used to be fog (could be null)\n\n\t\tconst frontFaceCW = ( object.isMesh && object.matrixWorld.determinant() < 0 );\n\n\t\tconst program = setProgram( camera, scene, geometry, material, object );\n\n\t\tstate.setMaterial( material, frontFaceCW );\n\n\t\t//\n\n\t\tlet index = geometry.index;\n\t\tlet rangeFactor = 1;\n\n\t\tif ( material.wireframe === true ) {\n\n\t\t\tindex = geometries.getWireframeAttribute( geometry );\n\t\t\trangeFactor = 2;\n\n\t\t}\n\n\t\t//\n\n\t\tconst drawRange = geometry.drawRange;\n\t\tconst position = geometry.attributes.position;\n\n\t\tlet drawStart = drawRange.start * rangeFactor;\n\t\tlet drawEnd = ( drawRange.start + drawRange.count ) * rangeFactor;\n\n\t\tif ( group !== null ) {\n\n\t\t\tdrawStart = Math.max( drawStart, group.start * rangeFactor );\n\t\t\tdrawEnd = Math.min( drawEnd, ( group.start + group.count ) * rangeFactor );\n\n\t\t}\n\n\t\tif ( index !== null ) {\n\n\t\t\tdrawStart = Math.max( drawStart, 0 );\n\t\t\tdrawEnd = Math.min( drawEnd, index.count );\n\n\t\t} else if ( position !== undefined && position !== null ) {\n\n\t\t\tdrawStart = Math.max( drawStart, 0 );\n\t\t\tdrawEnd = Math.min( drawEnd, position.count );\n\n\t\t}\n\n\t\tconst drawCount = drawEnd - drawStart;\n\n\t\tif ( drawCount < 0 || drawCount === Infinity ) return;\n\n\t\t//\n\n\t\tbindingStates.setup( object, material, program, geometry, index );\n\n\t\tlet attribute;\n\t\tlet renderer = bufferRenderer;\n\n\t\tif ( index !== null ) {\n\n\t\t\tattribute = attributes.get( index );\n\n\t\t\trenderer = indexedBufferRenderer;\n\t\t\trenderer.setIndex( attribute );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tif ( material.wireframe === true ) {\n\n\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\n\t\t\t\trenderer.setMode( 1 );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( 4 );\n\n\t\t\t}\n\n\t\t} else if ( object.isLine ) {\n\n\t\t\tlet lineWidth = material.linewidth;\n\n\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\n\n\t\t\tstate.setLineWidth( lineWidth * getTargetPixelRatio() );\n\n\t\t\tif ( object.isLineSegments ) {\n\n\t\t\t\trenderer.setMode( 1 );\n\n\t\t\t} else if ( object.isLineLoop ) {\n\n\t\t\t\trenderer.setMode( 2 );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( 3 );\n\n\t\t\t}\n\n\t\t} else if ( object.isPoints ) {\n\n\t\t\trenderer.setMode( 0 );\n\n\t\t} else if ( object.isSprite ) {\n\n\t\t\trenderer.setMode( 4 );\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh ) {\n\n\t\t\trenderer.renderInstances( drawStart, drawCount, object.count );\n\n\t\t} else if ( geometry.isInstancedBufferGeometry ) {\n\n\t\t\tconst maxInstanceCount = geometry._maxInstanceCount !== undefined ? geometry._maxInstanceCount : Infinity;\n\t\t\tconst instanceCount = Math.min( geometry.instanceCount, maxInstanceCount );\n\n\t\t\trenderer.renderInstances( drawStart, drawCount, instanceCount );\n\n\t\t} else {\n\n\t\t\trenderer.render( drawStart, drawCount );\n\n\t\t}\n\n\t};\n\n\t// Compile\n\n\tthis.compile = function ( scene, camera ) {\n\n\t\tfunction prepare( material, scene, object ) {\n\n\t\t\tif ( material.transparent === true && material.side === TwoPassDoubleSide ) {\n\n\t\t\t\tmaterial.side = BackSide;\n\t\t\t\tmaterial.needsUpdate = true;\n\t\t\t\tgetProgram( material, scene, object );\n\n\t\t\t\tmaterial.side = FrontSide;\n\t\t\t\tmaterial.needsUpdate = true;\n\t\t\t\tgetProgram( material, scene, object );\n\n\t\t\t\tmaterial.side = TwoPassDoubleSide;\n\n\t\t\t} else {\n\n\t\t\t\tgetProgram( material, scene, object );\n\n\t\t\t}\n\n\t\t}\n\n\t\tcurrentRenderState = renderStates.get( scene );\n\t\tcurrentRenderState.init();\n\n\t\trenderStateStack.push( currentRenderState );\n\n\t\tscene.traverseVisible( function ( object ) {\n\n\t\t\tif ( object.isLight && object.layers.test( camera.layers ) ) {\n\n\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\tcurrentRenderState.setupLights( _this.physicallyCorrectLights );\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tconst material = object.material;\n\n\t\t\tif ( material ) {\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( let i = 0; i < material.length; i ++ ) {\n\n\t\t\t\t\t\tconst material2 = material[ i ];\n\n\t\t\t\t\t\tprepare( material2, scene, object );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tprepare( material, scene, object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\trenderStateStack.pop();\n\t\tcurrentRenderState = null;\n\n\t};\n\n\t// Animation Loop\n\n\tlet onAnimationFrameCallback = null;\n\n\tfunction onAnimationFrame( time ) {\n\n\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time );\n\n\t}\n\n\tfunction onXRSessionStart() {\n\n\t\tanimation.stop();\n\n\t}\n\n\tfunction onXRSessionEnd() {\n\n\t\tanimation.start();\n\n\t}\n\n\tconst animation = new WebGLAnimation();\n\tanimation.setAnimationLoop( onAnimationFrame );\n\n\tif ( typeof self !== 'undefined' ) animation.setContext( self );\n\n\tthis.setAnimationLoop = function ( callback ) {\n\n\t\tonAnimationFrameCallback = callback;\n\t\txr.setAnimationLoop( callback );\n\n\t\t( callback === null ) ? animation.stop() : animation.start();\n\n\t};\n\n\txr.addEventListener( 'sessionstart', onXRSessionStart );\n\txr.addEventListener( 'sessionend', onXRSessionEnd );\n\n\t// Rendering\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tif ( camera !== undefined && camera.isCamera !== true ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( _isContextLost === true ) return;\n\n\t\t// update scene graph\n\n\t\tif ( scene.matrixWorldAutoUpdate === true ) scene.updateMatrixWorld();\n\n\t\t// update camera matrices and frustum\n\n\t\tif ( camera.parent === null && camera.matrixWorldAutoUpdate === true ) camera.updateMatrixWorld();\n\n\t\tif ( xr.enabled === true && xr.isPresenting === true ) {\n\n\t\t\tif ( xr.cameraAutoUpdate === true ) xr.updateCamera( camera );\n\n\t\t\tcamera = xr.getCamera(); // use XR camera for rendering\n\n\t\t}\n\n\t\t//\n\t\tif ( scene.isScene === true ) scene.onBeforeRender( _this, scene, camera, _currentRenderTarget );\n\n\t\tcurrentRenderState = renderStates.get( scene, renderStateStack.length );\n\t\tcurrentRenderState.init();\n\n\t\trenderStateStack.push( currentRenderState );\n\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\t_frustum.setFromProjectionMatrix( _projScreenMatrix );\n\n\t\t_localClippingEnabled = this.localClippingEnabled;\n\t\t_clippingEnabled = clipping.init( this.clippingPlanes, _localClippingEnabled, camera );\n\n\t\tcurrentRenderList = renderLists.get( scene, renderListStack.length );\n\t\tcurrentRenderList.init();\n\n\t\trenderListStack.push( currentRenderList );\n\n\t\tprojectObject( scene, camera, 0, _this.sortObjects );\n\n\t\tcurrentRenderList.finish();\n\n\t\tif ( _this.sortObjects === true ) {\n\n\t\t\tcurrentRenderList.sort( _opaqueSort, _transparentSort );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( _clippingEnabled === true ) clipping.beginShadows();\n\n\t\tconst shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tshadowMap.render( shadowsArray, scene, camera );\n\n\t\tif ( _clippingEnabled === true ) clipping.endShadows();\n\n\t\t//\n\n\t\tif ( this.info.autoReset === true ) this.info.reset();\n\n\t\t//\n\n\t\tbackground.render( currentRenderList, scene );\n\n\t\t// render scene\n\n\t\tcurrentRenderState.setupLights( _this.physicallyCorrectLights );\n\n\t\tif ( camera.isArrayCamera ) {\n\n\t\t\tconst cameras = camera.cameras;\n\n\t\t\tfor ( let i = 0, l = cameras.length; i < l; i ++ ) {\n\n\t\t\t\tconst camera2 = cameras[ i ];\n\n\t\t\t\trenderScene( currentRenderList, scene, camera2, camera2.viewport );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\trenderScene( currentRenderList, scene, camera );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( _currentRenderTarget !== null ) {\n\n\t\t\t// resolve multisample renderbuffers to a single-sample texture if necessary\n\n\t\t\ttextures.updateMultisampleRenderTarget( _currentRenderTarget );\n\n\t\t\t// Generate mipmap if we're using any kind of mipmap filtering\n\n\t\t\ttextures.updateRenderTargetMipmap( _currentRenderTarget );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( scene.isScene === true ) scene.onAfterRender( _this, scene, camera );\n\n\t\t// _gl.finish();\n\n\t\tbindingStates.resetDefaultState();\n\t\t_currentMaterialId = - 1;\n\t\t_currentCamera = null;\n\n\t\trenderStateStack.pop();\n\n\t\tif ( renderStateStack.length > 0 ) {\n\n\t\t\tcurrentRenderState = renderStateStack[ renderStateStack.length - 1 ];\n\n\t\t} else {\n\n\t\t\tcurrentRenderState = null;\n\n\t\t}\n\n\t\trenderListStack.pop();\n\n\t\tif ( renderListStack.length > 0 ) {\n\n\t\t\tcurrentRenderList = renderListStack[ renderListStack.length - 1 ];\n\n\t\t} else {\n\n\t\t\tcurrentRenderList = null;\n\n\t\t}\n\n\t};\n\n\tfunction projectObject( object, camera, groupOrder, sortObjects ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tconst visible = object.layers.test( camera.layers );\n\n\t\tif ( visible ) {\n\n\t\t\tif ( object.isGroup ) {\n\n\t\t\t\tgroupOrder = object.renderOrder;\n\n\t\t\t} else if ( object.isLOD ) {\n\n\t\t\t\tif ( object.autoUpdate === true ) object.update( camera );\n\n\t\t\t} else if ( object.isLight ) {\n\n\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isSprite ) {\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsSprite( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst geometry = objects.update( object );\n\t\t\t\t\tconst material = object.material;\n\n\t\t\t\t\tif ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isMesh || object.isLine || object.isPoints ) {\n\n\t\t\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\t\t\t// update skeleton only once in a frame\n\n\t\t\t\t\tif ( object.skeleton.frame !== info.render.frame ) {\n\n\t\t\t\t\t\tobject.skeleton.update();\n\t\t\t\t\t\tobject.skeleton.frame = info.render.frame;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst geometry = objects.update( object );\n\t\t\t\t\tconst material = object.material;\n\n\t\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\t\tconst groups = geometry.groups;\n\n\t\t\t\t\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\t\tcurrentRenderList.push( object, geometry, groupMaterial, groupOrder, _vector3.z, group );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tprojectObject( children[ i ], camera, groupOrder, sortObjects );\n\n\t\t}\n\n\t}\n\n\tfunction renderScene( currentRenderList, scene, camera, viewport ) {\n\n\t\tconst opaqueObjects = currentRenderList.opaque;\n\t\tconst transmissiveObjects = currentRenderList.transmissive;\n\t\tconst transparentObjects = currentRenderList.transparent;\n\n\t\tcurrentRenderState.setupLightsView( camera );\n\n\t\tif ( transmissiveObjects.length > 0 ) renderTransmissionPass( opaqueObjects, scene, camera );\n\n\t\tif ( viewport ) state.viewport( _currentViewport.copy( viewport ) );\n\n\t\tif ( opaqueObjects.length > 0 ) renderObjects( opaqueObjects, scene, camera );\n\t\tif ( transmissiveObjects.length > 0 ) renderObjects( transmissiveObjects, scene, camera );\n\t\tif ( transparentObjects.length > 0 ) renderObjects( transparentObjects, scene, camera );\n\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\n\n\t\tstate.buffers.depth.setTest( true );\n\t\tstate.buffers.depth.setMask( true );\n\t\tstate.buffers.color.setMask( true );\n\n\t\tstate.setPolygonOffset( false );\n\n\t}\n\n\tfunction renderTransmissionPass( opaqueObjects, scene, camera ) {\n\n\t\tconst isWebGL2 = capabilities.isWebGL2;\n\n\t\tif ( _transmissionRenderTarget === null ) {\n\n\t\t\t_transmissionRenderTarget = new WebGLRenderTarget( 1, 1, {\n\t\t\t\tgenerateMipmaps: true,\n\t\t\t\ttype: extensions.has( 'EXT_color_buffer_half_float' ) ? HalfFloatType : UnsignedByteType,\n\t\t\t\tminFilter: LinearMipmapLinearFilter,\n\t\t\t\tsamples: ( isWebGL2 && _antialias === true ) ? 4 : 0\n\t\t\t} );\n\n\t\t}\n\n\t\t_this.getDrawingBufferSize( _vector2 );\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\t_transmissionRenderTarget.setSize( _vector2.x, _vector2.y );\n\n\t\t} else {\n\n\t\t\t_transmissionRenderTarget.setSize( floorPowerOfTwo( _vector2.x ), floorPowerOfTwo( _vector2.y ) );\n\n\t\t}\n\n\t\t//\n\n\t\tconst currentRenderTarget = _this.getRenderTarget();\n\t\t_this.setRenderTarget( _transmissionRenderTarget );\n\t\t_this.clear();\n\n\t\t// Turn off the features which can affect the frag color for opaque objects pass.\n\t\t// Otherwise they are applied twice in opaque objects pass and transmission objects pass.\n\t\tconst currentToneMapping = _this.toneMapping;\n\t\t_this.toneMapping = NoToneMapping;\n\n\t\trenderObjects( opaqueObjects, scene, camera );\n\n\t\t_this.toneMapping = currentToneMapping;\n\n\t\ttextures.updateMultisampleRenderTarget( _transmissionRenderTarget );\n\t\ttextures.updateRenderTargetMipmap( _transmissionRenderTarget );\n\n\t\t_this.setRenderTarget( currentRenderTarget );\n\n\t}\n\n\tfunction renderObjects( renderList, scene, camera ) {\n\n\t\tconst overrideMaterial = scene.isScene === true ? scene.overrideMaterial : null;\n\n\t\tfor ( let i = 0, l = renderList.length; i < l; i ++ ) {\n\n\t\t\tconst renderItem = renderList[ i ];\n\n\t\t\tconst object = renderItem.object;\n\t\t\tconst geometry = renderItem.geometry;\n\t\t\tconst material = overrideMaterial === null ? renderItem.material : overrideMaterial;\n\t\t\tconst group = renderItem.group;\n\n\t\t\tif ( object.layers.test( camera.layers ) ) {\n\n\t\t\t\trenderObject( object, scene, camera, geometry, material, group );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction renderObject( object, scene, camera, geometry, material, group ) {\n\n\t\tobject.onBeforeRender( _this, scene, camera, geometry, material, group );\n\n\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\n\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\n\n\t\tmaterial.onBeforeRender( _this, scene, camera, geometry, object, group );\n\n\t\tif ( material.transparent === true && material.side === TwoPassDoubleSide ) {\n\n\t\t\tmaterial.side = BackSide;\n\t\t\tmaterial.needsUpdate = true;\n\t\t\t_this.renderBufferDirect( camera, scene, geometry, material, object, group );\n\n\t\t\tmaterial.side = FrontSide;\n\t\t\tmaterial.needsUpdate = true;\n\t\t\t_this.renderBufferDirect( camera, scene, geometry, material, object, group );\n\n\t\t\tmaterial.side = TwoPassDoubleSide;\n\n\t\t} else {\n\n\t\t\t_this.renderBufferDirect( camera, scene, geometry, material, object, group );\n\n\t\t}\n\n\t\tobject.onAfterRender( _this, scene, camera, geometry, material, group );\n\n\t}\n\n\tfunction getProgram( material, scene, object ) {\n\n\t\tif ( scene.isScene !== true ) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\n\n\t\tconst materialProperties = properties.get( material );\n\n\t\tconst lights = currentRenderState.state.lights;\n\t\tconst shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tconst lightsStateVersion = lights.state.version;\n\n\t\tconst parameters = programCache.getParameters( material, lights.state, shadowsArray, scene, object );\n\t\tconst programCacheKey = programCache.getProgramCacheKey( parameters );\n\n\t\tlet programs = materialProperties.programs;\n\n\t\t// always update environment and fog - changing these trigger an getProgram call, but it's possible that the program doesn't change\n\n\t\tmaterialProperties.environment = material.isMeshStandardMaterial ? scene.environment : null;\n\t\tmaterialProperties.fog = scene.fog;\n\t\tmaterialProperties.envMap = ( material.isMeshStandardMaterial ? cubeuvmaps : cubemaps ).get( material.envMap || materialProperties.environment );\n\n\t\tif ( programs === undefined ) {\n\n\t\t\t// new material\n\n\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\n\n\t\t\tprograms = new Map();\n\t\t\tmaterialProperties.programs = programs;\n\n\t\t}\n\n\t\tlet program = programs.get( programCacheKey );\n\n\t\tif ( program !== undefined ) {\n\n\t\t\t// early out if program and light state is identical\n\n\t\t\tif ( materialProperties.currentProgram === program && materialProperties.lightsStateVersion === lightsStateVersion ) {\n\n\t\t\t\tupdateCommonMaterialProperties( material, parameters );\n\n\t\t\t\treturn program;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tparameters.uniforms = programCache.getUniforms( material );\n\n\t\t\tmaterial.onBuild( object, parameters, _this );\n\n\t\t\tmaterial.onBeforeCompile( parameters, _this );\n\n\t\t\tprogram = programCache.acquireProgram( parameters, programCacheKey );\n\t\t\tprograms.set( programCacheKey, program );\n\n\t\t\tmaterialProperties.uniforms = parameters.uniforms;\n\n\t\t}\n\n\t\tconst uniforms = materialProperties.uniforms;\n\n\t\tif ( ( ! material.isShaderMaterial && ! material.isRawShaderMaterial ) || material.clipping === true ) {\n\n\t\t\tuniforms.clippingPlanes = clipping.uniform;\n\n\t\t}\n\n\t\tupdateCommonMaterialProperties( material, parameters );\n\n\t\t// store the light setup it was created for\n\n\t\tmaterialProperties.needsLights = materialNeedsLights( material );\n\t\tmaterialProperties.lightsStateVersion = lightsStateVersion;\n\n\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t// wire up the material to this renderer's lighting state\n\n\t\t\tuniforms.ambientLightColor.value = lights.state.ambient;\n\t\t\tuniforms.lightProbe.value = lights.state.probe;\n\t\t\tuniforms.directionalLights.value = lights.state.directional;\n\t\t\tuniforms.directionalLightShadows.value = lights.state.directionalShadow;\n\t\t\tuniforms.spotLights.value = lights.state.spot;\n\t\t\tuniforms.spotLightShadows.value = lights.state.spotShadow;\n\t\t\tuniforms.rectAreaLights.value = lights.state.rectArea;\n\t\t\tuniforms.ltc_1.value = lights.state.rectAreaLTC1;\n\t\t\tuniforms.ltc_2.value = lights.state.rectAreaLTC2;\n\t\t\tuniforms.pointLights.value = lights.state.point;\n\t\t\tuniforms.pointLightShadows.value = lights.state.pointShadow;\n\t\t\tuniforms.hemisphereLights.value = lights.state.hemi;\n\n\t\t\tuniforms.directionalShadowMap.value = lights.state.directionalShadowMap;\n\t\t\tuniforms.directionalShadowMatrix.value = lights.state.directionalShadowMatrix;\n\t\t\tuniforms.spotShadowMap.value = lights.state.spotShadowMap;\n\t\t\tuniforms.spotLightMatrix.value = lights.state.spotLightMatrix;\n\t\t\tuniforms.spotLightMap.value = lights.state.spotLightMap;\n\t\t\tuniforms.pointShadowMap.value = lights.state.pointShadowMap;\n\t\t\tuniforms.pointShadowMatrix.value = lights.state.pointShadowMatrix;\n\t\t\t// TODO (abelnation): add area lights shadow info to uniforms\n\n\t\t}\n\n\t\tconst progUniforms = program.getUniforms();\n\t\tconst uniformsList = WebGLUniforms.seqWithValue( progUniforms.seq, uniforms );\n\n\t\tmaterialProperties.currentProgram = program;\n\t\tmaterialProperties.uniformsList = uniformsList;\n\n\t\treturn program;\n\n\t}\n\n\tfunction updateCommonMaterialProperties( material, parameters ) {\n\n\t\tconst materialProperties = properties.get( material );\n\n\t\tmaterialProperties.outputEncoding = parameters.outputEncoding;\n\t\tmaterialProperties.instancing = parameters.instancing;\n\t\tmaterialProperties.skinning = parameters.skinning;\n\t\tmaterialProperties.morphTargets = parameters.morphTargets;\n\t\tmaterialProperties.morphNormals = parameters.morphNormals;\n\t\tmaterialProperties.morphColors = parameters.morphColors;\n\t\tmaterialProperties.morphTargetsCount = parameters.morphTargetsCount;\n\t\tmaterialProperties.numClippingPlanes = parameters.numClippingPlanes;\n\t\tmaterialProperties.numIntersection = parameters.numClipIntersection;\n\t\tmaterialProperties.vertexAlphas = parameters.vertexAlphas;\n\t\tmaterialProperties.vertexTangents = parameters.vertexTangents;\n\t\tmaterialProperties.toneMapping = parameters.toneMapping;\n\n\t}\n\n\tfunction setProgram( camera, scene, geometry, material, object ) {\n\n\t\tif ( scene.isScene !== true ) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\n\n\t\ttextures.resetTextureUnits();\n\n\t\tconst fog = scene.fog;\n\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\n\t\tconst encoding = ( _currentRenderTarget === null ) ? _this.outputEncoding : ( _currentRenderTarget.isXRRenderTarget === true ? _currentRenderTarget.texture.encoding : LinearEncoding );\n\t\tconst envMap = ( material.isMeshStandardMaterial ? cubeuvmaps : cubemaps ).get( material.envMap || environment );\n\t\tconst vertexAlphas = material.vertexColors === true && !! geometry.attributes.color && geometry.attributes.color.itemSize === 4;\n\t\tconst vertexTangents = !! material.normalMap && !! geometry.attributes.tangent;\n\t\tconst morphTargets = !! geometry.morphAttributes.position;\n\t\tconst morphNormals = !! geometry.morphAttributes.normal;\n\t\tconst morphColors = !! geometry.morphAttributes.color;\n\t\tconst toneMapping = material.toneMapped ? _this.toneMapping : NoToneMapping;\n\n\t\tconst morphAttribute = geometry.morphAttributes.position || geometry.morphAttributes.normal || geometry.morphAttributes.color;\n\t\tconst morphTargetsCount = ( morphAttribute !== undefined ) ? morphAttribute.length : 0;\n\n\t\tconst materialProperties = properties.get( material );\n\t\tconst lights = currentRenderState.state.lights;\n\n\t\tif ( _clippingEnabled === true ) {\n\n\t\t\tif ( _localClippingEnabled === true || camera !== _currentCamera ) {\n\n\t\t\t\tconst useCache =\n\t\t\t\t\tcamera === _currentCamera &&\n\t\t\t\t\tmaterial.id === _currentMaterialId;\n\n\t\t\t\t// we might want to call this function with some ClippingGroup\n\t\t\t\t// object instead of the material, once it becomes feasible\n\t\t\t\t// (#8465, #8379)\n\t\t\t\tclipping.setState( material, camera, useCache );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tlet needsProgramChange = false;\n\n\t\tif ( material.version === materialProperties.__version ) {\n\n\t\t\tif ( materialProperties.needsLights && ( materialProperties.lightsStateVersion !== lights.state.version ) ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( materialProperties.outputEncoding !== encoding ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( object.isInstancedMesh && materialProperties.instancing === false ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( ! object.isInstancedMesh && materialProperties.instancing === true ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( object.isSkinnedMesh && materialProperties.skinning === false ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( ! object.isSkinnedMesh && materialProperties.skinning === true ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( materialProperties.envMap !== envMap ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( material.fog === true && materialProperties.fog !== fog ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( materialProperties.numClippingPlanes !== undefined &&\n\t\t\t\t( materialProperties.numClippingPlanes !== clipping.numPlanes ||\n\t\t\t\tmaterialProperties.numIntersection !== clipping.numIntersection ) ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( materialProperties.vertexAlphas !== vertexAlphas ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( materialProperties.vertexTangents !== vertexTangents ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( materialProperties.morphTargets !== morphTargets ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( materialProperties.morphNormals !== morphNormals ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( materialProperties.morphColors !== morphColors ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( materialProperties.toneMapping !== toneMapping ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( capabilities.isWebGL2 === true && materialProperties.morphTargetsCount !== morphTargetsCount ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tneedsProgramChange = true;\n\t\t\tmaterialProperties.__version = material.version;\n\n\t\t}\n\n\t\t//\n\n\t\tlet program = materialProperties.currentProgram;\n\n\t\tif ( needsProgramChange === true ) {\n\n\t\t\tprogram = getProgram( material, scene, object );\n\n\t\t}\n\n\t\tlet refreshProgram = false;\n\t\tlet refreshMaterial = false;\n\t\tlet refreshLights = false;\n\n\t\tconst p_uniforms = program.getUniforms(),\n\t\t\tm_uniforms = materialProperties.uniforms;\n\n\t\tif ( state.useProgram( program.program ) ) {\n\n\t\t\trefreshProgram = true;\n\t\t\trefreshMaterial = true;\n\t\t\trefreshLights = true;\n\n\t\t}\n\n\t\tif ( material.id !== _currentMaterialId ) {\n\n\t\t\t_currentMaterialId = material.id;\n\n\t\t\trefreshMaterial = true;\n\n\t\t}\n\n\t\tif ( refreshProgram || _currentCamera !== camera ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'projectionMatrix', camera.projectionMatrix );\n\n\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'logDepthBufFC',\n\t\t\t\t\t2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\n\n\t\t\t}\n\n\t\t\tif ( _currentCamera !== camera ) {\n\n\t\t\t\t_currentCamera = camera;\n\n\t\t\t\t// lighting uniforms depend on the camera so enforce an update\n\t\t\t\t// now, in case this material supports lights - or later, when\n\t\t\t\t// the next material that does gets activated:\n\n\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\n\t\t\t\trefreshLights = true;\t\t// remains set until update done\n\n\t\t\t}\n\n\t\t\t// load material specific uniforms\n\t\t\t// (shader material also gets them for the sake of genericity)\n\n\t\t\tif ( material.isShaderMaterial ||\n\t\t\t\tmaterial.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.envMap ) {\n\n\t\t\t\tconst uCamPos = p_uniforms.map.cameraPosition;\n\n\t\t\t\tif ( uCamPos !== undefined ) {\n\n\t\t\t\t\tuCamPos.setValue( _gl,\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'isOrthographic', camera.isOrthographicCamera === true );\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ||\n\t\t\t\tmaterial.isShadowMaterial ||\n\t\t\t\tobject.isSkinnedMesh ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// skinning and morph target uniforms must be set even if material didn't change\n\t\t// auto-setting of texture unit for bone and morph texture must go before other textures\n\t\t// otherwise textures used for skinning and morphing can take over texture units reserved for other material textures\n\n\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrix' );\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\n\n\t\t\tconst skeleton = object.skeleton;\n\n\t\t\tif ( skeleton ) {\n\n\t\t\t\tif ( capabilities.floatVertexTextures ) {\n\n\t\t\t\t\tif ( skeleton.boneTexture === null ) skeleton.computeBoneTexture();\n\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTexture', skeleton.boneTexture, textures );\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTextureSize', skeleton.boneTextureSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\n\t\tif ( morphAttributes.position !== undefined || morphAttributes.normal !== undefined || ( morphAttributes.color !== undefined && capabilities.isWebGL2 === true ) ) {\n\n\t\t\tmorphtargets.update( object, geometry, material, program );\n\n\t\t}\n\n\t\tif ( refreshMaterial || materialProperties.receiveShadow !== object.receiveShadow ) {\n\n\t\t\tmaterialProperties.receiveShadow = object.receiveShadow;\n\t\t\tp_uniforms.setValue( _gl, 'receiveShadow', object.receiveShadow );\n\n\t\t}\n\n\t\t// https://github.com/mrdoob/three.js/pull/24467#issuecomment-1209031512\n\n\t\tif ( material.isMeshGouraudMaterial && material.envMap !== null ) {\n\n\t\t\tm_uniforms.envMap.value = envMap;\n\n\t\t\tm_uniforms.flipEnvMap.value = ( envMap.isCubeTexture && envMap.isRenderTargetTexture === false ) ? - 1 : 1;\n\n\t\t}\n\n\t\tif ( refreshMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'toneMappingExposure', _this.toneMappingExposure );\n\n\t\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t\t// the current material requires lighting info\n\n\t\t\t\t// note: all lighting uniforms are always set correctly\n\t\t\t\t// they simply reference the renderer's state for their\n\t\t\t\t// values\n\t\t\t\t//\n\t\t\t\t// use the current material's .needsUpdate flags to set\n\t\t\t\t// the GL state when required\n\n\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\n\n\t\t\t}\n\n\t\t\t// refresh uniforms common to several materials\n\n\t\t\tif ( fog && material.fog === true ) {\n\n\t\t\t\tmaterials.refreshFogUniforms( m_uniforms, fog );\n\n\t\t\t}\n\n\t\t\tmaterials.refreshMaterialUniforms( m_uniforms, material, _pixelRatio, _height, _transmissionRenderTarget );\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\n\n\t\t}\n\n\t\tif ( material.isShaderMaterial && material.uniformsNeedUpdate === true ) {\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\n\t\t\tmaterial.uniformsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( material.isSpriteMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'center', object.center );\n\n\t\t}\n\n\t\t// common matrices\n\n\t\tp_uniforms.setValue( _gl, 'modelViewMatrix', object.modelViewMatrix );\n\t\tp_uniforms.setValue( _gl, 'normalMatrix', object.normalMatrix );\n\t\tp_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\n\n\t\t// UBOs\n\n\t\tif ( material.isShaderMaterial || material.isRawShaderMaterial ) {\n\n\t\t\tconst groups = material.uniformsGroups;\n\n\t\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\tif ( capabilities.isWebGL2 ) {\n\n\t\t\t\t\tconst group = groups[ i ];\n\n\t\t\t\t\tuniformsGroups.update( group, program );\n\t\t\t\t\tuniformsGroups.bind( group, program );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn program;\n\n\t}\n\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\n\n\tfunction markUniformsLightsNeedsUpdate( uniforms, value ) {\n\n\t\tuniforms.ambientLightColor.needsUpdate = value;\n\t\tuniforms.lightProbe.needsUpdate = value;\n\n\t\tuniforms.directionalLights.needsUpdate = value;\n\t\tuniforms.directionalLightShadows.needsUpdate = value;\n\t\tuniforms.pointLights.needsUpdate = value;\n\t\tuniforms.pointLightShadows.needsUpdate = value;\n\t\tuniforms.spotLights.needsUpdate = value;\n\t\tuniforms.spotLightShadows.needsUpdate = value;\n\t\tuniforms.rectAreaLights.needsUpdate = value;\n\t\tuniforms.hemisphereLights.needsUpdate = value;\n\n\t}\n\n\tfunction materialNeedsLights( material ) {\n\n\t\treturn material.isMeshLambertMaterial || material.isMeshToonMaterial || material.isMeshPhongMaterial ||\n\t\t\tmaterial.isMeshStandardMaterial || material.isShadowMaterial ||\n\t\t\t( material.isShaderMaterial && material.lights === true );\n\n\t}\n\n\tthis.getActiveCubeFace = function () {\n\n\t\treturn _currentActiveCubeFace;\n\n\t};\n\n\tthis.getActiveMipmapLevel = function () {\n\n\t\treturn _currentActiveMipmapLevel;\n\n\t};\n\n\tthis.getRenderTarget = function () {\n\n\t\treturn _currentRenderTarget;\n\n\t};\n\n\tthis.setRenderTargetTextures = function ( renderTarget, colorTexture, depthTexture ) {\n\n\t\tproperties.get( renderTarget.texture ).__webglTexture = colorTexture;\n\t\tproperties.get( renderTarget.depthTexture ).__webglTexture = depthTexture;\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\trenderTargetProperties.__hasExternalTextures = true;\n\n\t\tif ( renderTargetProperties.__hasExternalTextures ) {\n\n\t\t\trenderTargetProperties.__autoAllocateDepthBuffer = depthTexture === undefined;\n\n\t\t\tif ( ! renderTargetProperties.__autoAllocateDepthBuffer ) {\n\n\t\t\t\t// The multisample_render_to_texture extension doesn't work properly if there\n\t\t\t\t// are midframe flushes and an external depth buffer. Disable use of the extension.\n\t\t\t\tif ( extensions.has( 'WEBGL_multisampled_render_to_texture' ) === true ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided' );\n\t\t\t\t\trenderTargetProperties.__useRenderToTexture = false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.setRenderTargetFramebuffer = function ( renderTarget, defaultFramebuffer ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\trenderTargetProperties.__webglFramebuffer = defaultFramebuffer;\n\t\trenderTargetProperties.__useDefaultFramebuffer = defaultFramebuffer === undefined;\n\n\t};\n\n\tthis.setRenderTarget = function ( renderTarget, activeCubeFace = 0, activeMipmapLevel = 0 ) {\n\n\t\t_currentRenderTarget = renderTarget;\n\t\t_currentActiveCubeFace = activeCubeFace;\n\t\t_currentActiveMipmapLevel = activeMipmapLevel;\n\n\t\tlet useDefaultFramebuffer = true;\n\t\tlet framebuffer = null;\n\t\tlet isCube = false;\n\t\tlet isRenderTarget3D = false;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\t\tif ( renderTargetProperties.__useDefaultFramebuffer !== undefined ) {\n\n\t\t\t\t// We need to make sure to rebind the framebuffer.\n\t\t\t\tstate.bindFramebuffer( 36160, null );\n\t\t\t\tuseDefaultFramebuffer = false;\n\n\t\t\t} else if ( renderTargetProperties.__webglFramebuffer === undefined ) {\n\n\t\t\t\ttextures.setupRenderTarget( renderTarget );\n\n\t\t\t} else if ( renderTargetProperties.__hasExternalTextures ) {\n\n\t\t\t\t// Color and depth texture must be rebound in order for the swapchain to update.\n\t\t\t\ttextures.rebindTextures( renderTarget, properties.get( renderTarget.texture ).__webglTexture, properties.get( renderTarget.depthTexture ).__webglTexture );\n\n\t\t\t}\n\n\t\t\tconst texture = renderTarget.texture;\n\n\t\t\tif ( texture.isData3DTexture || texture.isDataArrayTexture || texture.isCompressedArrayTexture ) {\n\n\t\t\t\tisRenderTarget3D = true;\n\n\t\t\t}\n\n\t\t\tconst __webglFramebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\n\n\t\t\t\tframebuffer = __webglFramebuffer[ activeCubeFace ];\n\t\t\t\tisCube = true;\n\n\t\t\t} else if ( ( capabilities.isWebGL2 && renderTarget.samples > 0 ) && textures.useMultisampledRTT( renderTarget ) === false ) {\n\n\t\t\t\tframebuffer = properties.get( renderTarget ).__webglMultisampledFramebuffer;\n\n\t\t\t} else {\n\n\t\t\t\tframebuffer = __webglFramebuffer;\n\n\t\t\t}\n\n\t\t\t_currentViewport.copy( renderTarget.viewport );\n\t\t\t_currentScissor.copy( renderTarget.scissor );\n\t\t\t_currentScissorTest = renderTarget.scissorTest;\n\n\t\t} else {\n\n\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t_currentScissorTest = _scissorTest;\n\n\t\t}\n\n\t\tconst framebufferBound = state.bindFramebuffer( 36160, framebuffer );\n\n\t\tif ( framebufferBound && capabilities.drawBuffers && useDefaultFramebuffer ) {\n\n\t\t\tstate.drawBuffers( renderTarget, framebuffer );\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport );\n\t\tstate.scissor( _currentScissor );\n\t\tstate.setScissorTest( _currentScissorTest );\n\n\t\tif ( isCube ) {\n\n\t\t\tconst textureProperties = properties.get( renderTarget.texture );\n\t\t\t_gl.framebufferTexture2D( 36160, 36064, 34069 + activeCubeFace, textureProperties.__webglTexture, activeMipmapLevel );\n\n\t\t} else if ( isRenderTarget3D ) {\n\n\t\t\tconst textureProperties = properties.get( renderTarget.texture );\n\t\t\tconst layer = activeCubeFace || 0;\n\t\t\t_gl.framebufferTextureLayer( 36160, 36064, textureProperties.__webglTexture, activeMipmapLevel || 0, layer );\n\n\t\t}\n\n\t\t_currentMaterialId = - 1; // reset current material to ensure correct uniform bindings\n\n\t};\n\n\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer, activeCubeFaceIndex ) {\n\n\t\tif ( ! ( renderTarget && renderTarget.isWebGLRenderTarget ) ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tlet framebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\tif ( renderTarget.isWebGLCubeRenderTarget && activeCubeFaceIndex !== undefined ) {\n\n\t\t\tframebuffer = framebuffer[ activeCubeFaceIndex ];\n\n\t\t}\n\n\t\tif ( framebuffer ) {\n\n\t\t\tstate.bindFramebuffer( 36160, framebuffer );\n\n\t\t\ttry {\n\n\t\t\t\tconst texture = renderTarget.texture;\n\t\t\t\tconst textureFormat = texture.format;\n\t\t\t\tconst textureType = texture.type;\n\n\t\t\t\tif ( textureFormat !== RGBAFormat && utils.convert( textureFormat ) !== _gl.getParameter( 35739 ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tconst halfFloatSupportedByExt = ( textureType === HalfFloatType ) && ( extensions.has( 'EXT_color_buffer_half_float' ) || ( capabilities.isWebGL2 && extensions.has( 'EXT_color_buffer_float' ) ) );\n\n\t\t\t\tif ( textureType !== UnsignedByteType && utils.convert( textureType ) !== _gl.getParameter( 35738 ) && // Edge and Chrome Mac < 52 (#9513)\n\t\t\t\t\t! ( textureType === FloatType && ( capabilities.isWebGL2 || extensions.has( 'OES_texture_float' ) || extensions.has( 'WEBGL_color_buffer_float' ) ) ) && // Chrome Mac >= 52 and Firefox\n\t\t\t\t\t! halfFloatSupportedByExt ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\t// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\n\n\t\t\t\tif ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\n\n\t\t\t\t\t_gl.readPixels( x, y, width, height, utils.convert( textureFormat ), utils.convert( textureType ), buffer );\n\n\t\t\t\t}\n\n\t\t\t} finally {\n\n\t\t\t\t// restore framebuffer of current render target if necessary\n\n\t\t\t\tconst framebuffer = ( _currentRenderTarget !== null ) ? properties.get( _currentRenderTarget ).__webglFramebuffer : null;\n\t\t\t\tstate.bindFramebuffer( 36160, framebuffer );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.copyFramebufferToTexture = function ( position, texture, level = 0 ) {\n\n\t\tconst levelScale = Math.pow( 2, - level );\n\t\tconst width = Math.floor( texture.image.width * levelScale );\n\t\tconst height = Math.floor( texture.image.height * levelScale );\n\n\t\ttextures.setTexture2D( texture, 0 );\n\n\t\t_gl.copyTexSubImage2D( 3553, level, 0, 0, position.x, position.y, width, height );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.copyTextureToTexture = function ( position, srcTexture, dstTexture, level = 0 ) {\n\n\t\tconst width = srcTexture.image.width;\n\t\tconst height = srcTexture.image.height;\n\t\tconst glFormat = utils.convert( dstTexture.format );\n\t\tconst glType = utils.convert( dstTexture.type );\n\n\t\ttextures.setTexture2D( dstTexture, 0 );\n\n\t\t// As another texture upload may have changed pixelStorei\n\t\t// parameters, make sure they are correct for the dstTexture\n\t\t_gl.pixelStorei( 37440, dstTexture.flipY );\n\t\t_gl.pixelStorei( 37441, dstTexture.premultiplyAlpha );\n\t\t_gl.pixelStorei( 3317, dstTexture.unpackAlignment );\n\n\t\tif ( srcTexture.isDataTexture ) {\n\n\t\t\t_gl.texSubImage2D( 3553, level, position.x, position.y, width, height, glFormat, glType, srcTexture.image.data );\n\n\t\t} else {\n\n\t\t\tif ( srcTexture.isCompressedTexture ) {\n\n\t\t\t\t_gl.compressedTexSubImage2D( 3553, level, position.x, position.y, srcTexture.mipmaps[ 0 ].width, srcTexture.mipmaps[ 0 ].height, glFormat, srcTexture.mipmaps[ 0 ].data );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.texSubImage2D( 3553, level, position.x, position.y, glFormat, glType, srcTexture.image );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Generate mipmaps only when copying level 0\n\t\tif ( level === 0 && dstTexture.generateMipmaps ) _gl.generateMipmap( 3553 );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.copyTextureToTexture3D = function ( sourceBox, position, srcTexture, dstTexture, level = 0 ) {\n\n\t\tif ( _this.isWebGL1Renderer ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst width = sourceBox.max.x - sourceBox.min.x + 1;\n\t\tconst height = sourceBox.max.y - sourceBox.min.y + 1;\n\t\tconst depth = sourceBox.max.z - sourceBox.min.z + 1;\n\t\tconst glFormat = utils.convert( dstTexture.format );\n\t\tconst glType = utils.convert( dstTexture.type );\n\t\tlet glTarget;\n\n\t\tif ( dstTexture.isData3DTexture ) {\n\n\t\t\ttextures.setTexture3D( dstTexture, 0 );\n\t\t\tglTarget = 32879;\n\n\t\t} else if ( dstTexture.isDataArrayTexture ) {\n\n\t\t\ttextures.setTexture2DArray( dstTexture, 0 );\n\t\t\tglTarget = 35866;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\t_gl.pixelStorei( 37440, dstTexture.flipY );\n\t\t_gl.pixelStorei( 37441, dstTexture.premultiplyAlpha );\n\t\t_gl.pixelStorei( 3317, dstTexture.unpackAlignment );\n\n\t\tconst unpackRowLen = _gl.getParameter( 3314 );\n\t\tconst unpackImageHeight = _gl.getParameter( 32878 );\n\t\tconst unpackSkipPixels = _gl.getParameter( 3316 );\n\t\tconst unpackSkipRows = _gl.getParameter( 3315 );\n\t\tconst unpackSkipImages = _gl.getParameter( 32877 );\n\n\t\tconst image = srcTexture.isCompressedTexture ? srcTexture.mipmaps[ 0 ] : srcTexture.image;\n\n\t\t_gl.pixelStorei( 3314, image.width );\n\t\t_gl.pixelStorei( 32878, image.height );\n\t\t_gl.pixelStorei( 3316, sourceBox.min.x );\n\t\t_gl.pixelStorei( 3315, sourceBox.min.y );\n\t\t_gl.pixelStorei( 32877, sourceBox.min.z );\n\n\t\tif ( srcTexture.isDataTexture || srcTexture.isData3DTexture ) {\n\n\t\t\t_gl.texSubImage3D( glTarget, level, position.x, position.y, position.z, width, height, depth, glFormat, glType, image.data );\n\n\t\t} else {\n\n\t\t\tif ( srcTexture.isCompressedArrayTexture ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture.' );\n\t\t\t\t_gl.compressedTexSubImage3D( glTarget, level, position.x, position.y, position.z, width, height, depth, glFormat, image.data );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.texSubImage3D( glTarget, level, position.x, position.y, position.z, width, height, depth, glFormat, glType, image );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.pixelStorei( 3314, unpackRowLen );\n\t\t_gl.pixelStorei( 32878, unpackImageHeight );\n\t\t_gl.pixelStorei( 3316, unpackSkipPixels );\n\t\t_gl.pixelStorei( 3315, unpackSkipRows );\n\t\t_gl.pixelStorei( 32877, unpackSkipImages );\n\n\t\t// Generate mipmaps only when copying level 0\n\t\tif ( level === 0 && dstTexture.generateMipmaps ) _gl.generateMipmap( glTarget );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.initTexture = function ( texture ) {\n\n\t\tif ( texture.isCubeTexture ) {\n\n\t\t\ttextures.setTextureCube( texture, 0 );\n\n\t\t} else if ( texture.isData3DTexture ) {\n\n\t\t\ttextures.setTexture3D( texture, 0 );\n\n\t\t} else if ( texture.isDataArrayTexture || texture.isCompressedArrayTexture ) {\n\n\t\t\ttextures.setTexture2DArray( texture, 0 );\n\n\t\t} else {\n\n\t\t\ttextures.setTexture2D( texture, 0 );\n\n\t\t}\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.resetState = function () {\n\n\t\t_currentActiveCubeFace = 0;\n\t\t_currentActiveMipmapLevel = 0;\n\t\t_currentRenderTarget = null;\n\n\t\tstate.reset();\n\t\tbindingStates.reset();\n\n\t};\n\n\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) );\n\n\t}\n\n}\n\nclass WebGL1Renderer extends WebGLRenderer {}\n\nWebGL1Renderer.prototype.isWebGL1Renderer = true;\n\nclass FogExp2 {\n\n\tconstructor( color, density = 0.00025 ) {\n\n\t\tthis.isFogExp2 = true;\n\n\t\tthis.name = '';\n\n\t\tthis.color = new Color( color );\n\t\tthis.density = density;\n\n\t}\n\n\tclone() {\n\n\t\treturn new FogExp2( this.color, this.density );\n\n\t}\n\n\ttoJSON( /* meta */ ) {\n\n\t\treturn {\n\t\t\ttype: 'FogExp2',\n\t\t\tcolor: this.color.getHex(),\n\t\t\tdensity: this.density\n\t\t};\n\n\t}\n\n}\n\nclass Fog {\n\n\tconstructor( color, near = 1, far = 1000 ) {\n\n\t\tthis.isFog = true;\n\n\t\tthis.name = '';\n\n\t\tthis.color = new Color( color );\n\n\t\tthis.near = near;\n\t\tthis.far = far;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Fog( this.color, this.near, this.far );\n\n\t}\n\n\ttoJSON( /* meta */ ) {\n\n\t\treturn {\n\t\t\ttype: 'Fog',\n\t\t\tcolor: this.color.getHex(),\n\t\t\tnear: this.near,\n\t\t\tfar: this.far\n\t\t};\n\n\t}\n\n}\n\nclass Scene extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isScene = true;\n\n\t\tthis.type = 'Scene';\n\n\t\tthis.background = null;\n\t\tthis.environment = null;\n\t\tthis.fog = null;\n\n\t\tthis.backgroundBlurriness = 0;\n\t\tthis.backgroundIntensity = 1;\n\n\t\tthis.overrideMaterial = null;\n\n\t\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) );\n\n\t\t}\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tif ( source.background !== null ) this.background = source.background.clone();\n\t\tif ( source.environment !== null ) this.environment = source.environment.clone();\n\t\tif ( source.fog !== null ) this.fog = source.fog.clone();\n\n\t\tthis.backgroundBlurriness = source.backgroundBlurriness;\n\t\tthis.backgroundIntensity = source.backgroundIntensity;\n\n\t\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tif ( this.fog !== null ) data.object.fog = this.fog.toJSON();\n\t\tif ( this.backgroundBlurriness > 0 ) data.backgroundBlurriness = this.backgroundBlurriness;\n\t\tif ( this.backgroundIntensity !== 1 ) data.backgroundIntensity = this.backgroundIntensity;\n\n\t\treturn data;\n\n\t}\n\n\t// @deprecated\n\n\tget autoUpdate() {\n\n\t\tconsole.warn( 'THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144.' );\n\t\treturn this.matrixWorldAutoUpdate;\n\n\t}\n\n\tset autoUpdate( value ) {\n\n\t\tconsole.warn( 'THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144.' );\n\t\tthis.matrixWorldAutoUpdate = value;\n\n\t}\n\n}\n\nclass InterleavedBuffer {\n\n\tconstructor( array, stride ) {\n\n\t\tthis.isInterleavedBuffer = true;\n\n\t\tthis.array = array;\n\t\tthis.stride = stride;\n\t\tthis.count = array !== undefined ? array.length / stride : 0;\n\n\t\tthis.usage = StaticDrawUsage;\n\t\tthis.updateRange = { offset: 0, count: - 1 };\n\n\t\tthis.version = 0;\n\n\t\tthis.uuid = generateUUID();\n\n\t}\n\n\tonUploadCallback() {}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n\tsetUsage( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.count = source.count;\n\t\tthis.stride = source.stride;\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t}\n\n\tcopyAt( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.stride;\n\t\tindex2 *= attribute.stride;\n\n\t\tfor ( let i = 0, l = this.stride; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tset( value, offset = 0 ) {\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t}\n\n\tclone( data ) {\n\n\t\tif ( data.arrayBuffers === undefined ) {\n\n\t\t\tdata.arrayBuffers = {};\n\n\t\t}\n\n\t\tif ( this.array.buffer._uuid === undefined ) {\n\n\t\t\tthis.array.buffer._uuid = generateUUID();\n\n\t\t}\n\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\n\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = this.array.slice( 0 ).buffer;\n\n\t\t}\n\n\t\tconst array = new this.array.constructor( data.arrayBuffers[ this.array.buffer._uuid ] );\n\n\t\tconst ib = new this.constructor( array, this.stride );\n\t\tib.setUsage( this.usage );\n\n\t\treturn ib;\n\n\t}\n\n\tonUpload( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( data ) {\n\n\t\tif ( data.arrayBuffers === undefined ) {\n\n\t\t\tdata.arrayBuffers = {};\n\n\t\t}\n\n\t\t// generate UUID for array buffer if necessary\n\n\t\tif ( this.array.buffer._uuid === undefined ) {\n\n\t\t\tthis.array.buffer._uuid = generateUUID();\n\n\t\t}\n\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\n\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = Array.from( new Uint32Array( this.array.buffer ) );\n\n\t\t}\n\n\t\t//\n\n\t\treturn {\n\t\t\tuuid: this.uuid,\n\t\t\tbuffer: this.array.buffer._uuid,\n\t\t\ttype: this.array.constructor.name,\n\t\t\tstride: this.stride\n\t\t};\n\n\t}\n\n}\n\nconst _vector$6 = /*@__PURE__*/ new Vector3();\n\nclass InterleavedBufferAttribute {\n\n\tconstructor( interleavedBuffer, itemSize, offset, normalized = false ) {\n\n\t\tthis.isInterleavedBufferAttribute = true;\n\n\t\tthis.name = '';\n\n\t\tthis.data = interleavedBuffer;\n\t\tthis.itemSize = itemSize;\n\t\tthis.offset = offset;\n\n\t\tthis.normalized = normalized;\n\n\t}\n\n\tget count() {\n\n\t\treturn this.data.count;\n\n\t}\n\n\tget array() {\n\n\t\treturn this.data.array;\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tthis.data.needsUpdate = value;\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tfor ( let i = 0, l = this.data.count; i < l; i ++ ) {\n\n\t\t\t_vector$6.fromBufferAttribute( this, i );\n\n\t\t\t_vector$6.applyMatrix4( m );\n\n\t\t\tthis.setXYZ( i, _vector$6.x, _vector$6.y, _vector$6.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tapplyNormalMatrix( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$6.fromBufferAttribute( this, i );\n\n\t\t\t_vector$6.applyNormalMatrix( m );\n\n\t\t\tthis.setXYZ( i, _vector$6.x, _vector$6.y, _vector$6.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttransformDirection( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$6.fromBufferAttribute( this, i );\n\n\t\t\t_vector$6.transformDirection( m );\n\n\t\t\tthis.setXYZ( i, _vector$6.x, _vector$6.y, _vector$6.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetX( index, x ) {\n\n\t\tif ( this.normalized ) x = normalize( x, this.array );\n\n\t\tthis.data.array[ index * this.data.stride + this.offset ] = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( index, y ) {\n\n\t\tif ( this.normalized ) y = normalize( y, this.array );\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 1 ] = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( index, z ) {\n\n\t\tif ( this.normalized ) z = normalize( z, this.array );\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 2 ] = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetW( index, w ) {\n\n\t\tif ( this.normalized ) w = normalize( w, this.array );\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 3 ] = w;\n\n\t\treturn this;\n\n\t}\n\n\tgetX( index ) {\n\n\t\tlet x = this.data.array[ index * this.data.stride + this.offset ];\n\n\t\tif ( this.normalized ) x = denormalize( x, this.array );\n\n\t\treturn x;\n\n\t}\n\n\tgetY( index ) {\n\n\t\tlet y = this.data.array[ index * this.data.stride + this.offset + 1 ];\n\n\t\tif ( this.normalized ) y = denormalize( y, this.array );\n\n\t\treturn y;\n\n\t}\n\n\tgetZ( index ) {\n\n\t\tlet z = this.data.array[ index * this.data.stride + this.offset + 2 ];\n\n\t\tif ( this.normalized ) z = denormalize( z, this.array );\n\n\t\treturn z;\n\n\t}\n\n\tgetW( index ) {\n\n\t\tlet w = this.data.array[ index * this.data.stride + this.offset + 3 ];\n\n\t\tif ( this.normalized ) w = denormalize( w, this.array );\n\n\t\treturn w;\n\n\t}\n\n\tsetXY( index, x, y ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\n\t\t}\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetXYZ( index, x, y, z ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\t\t\tz = normalize( z, this.array );\n\n\t\t}\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\t\tthis.data.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetXYZW( index, x, y, z, w ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\t\t\tz = normalize( z, this.array );\n\t\t\tw = normalize( w, this.array );\n\n\t\t}\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\t\tthis.data.array[ index + 2 ] = z;\n\t\tthis.data.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t}\n\n\tclone( data ) {\n\n\t\tif ( data === undefined ) {\n\n\t\t\tconsole.log( 'THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.' );\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0; i < this.count; i ++ ) {\n\n\t\t\t\tconst index = i * this.data.stride + this.offset;\n\n\t\t\t\tfor ( let j = 0; j < this.itemSize; j ++ ) {\n\n\t\t\t\t\tarray.push( this.data.array[ index + j ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new BufferAttribute( new this.array.constructor( array ), this.itemSize, this.normalized );\n\n\t\t} else {\n\n\t\t\tif ( data.interleavedBuffers === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers = {};\n\n\t\t\t}\n\n\t\t\tif ( data.interleavedBuffers[ this.data.uuid ] === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers[ this.data.uuid ] = this.data.clone( data );\n\n\t\t\t}\n\n\t\t\treturn new InterleavedBufferAttribute( data.interleavedBuffers[ this.data.uuid ], this.itemSize, this.offset, this.normalized );\n\n\t\t}\n\n\t}\n\n\ttoJSON( data ) {\n\n\t\tif ( data === undefined ) {\n\n\t\t\tconsole.log( 'THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.' );\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0; i < this.count; i ++ ) {\n\n\t\t\t\tconst index = i * this.data.stride + this.offset;\n\n\t\t\t\tfor ( let j = 0; j < this.itemSize; j ++ ) {\n\n\t\t\t\t\tarray.push( this.data.array[ index + j ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// de-interleave data and save it as an ordinary buffer attribute for now\n\n\t\t\treturn {\n\t\t\t\titemSize: this.itemSize,\n\t\t\t\ttype: this.array.constructor.name,\n\t\t\t\tarray: array,\n\t\t\t\tnormalized: this.normalized\n\t\t\t};\n\n\t\t} else {\n\n\t\t\t// save as true interleaved attribute\n\n\t\t\tif ( data.interleavedBuffers === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers = {};\n\n\t\t\t}\n\n\t\t\tif ( data.interleavedBuffers[ this.data.uuid ] === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers[ this.data.uuid ] = this.data.toJSON( data );\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tisInterleavedBufferAttribute: true,\n\t\t\t\titemSize: this.itemSize,\n\t\t\t\tdata: this.data.uuid,\n\t\t\t\toffset: this.offset,\n\t\t\t\tnormalized: this.normalized\n\t\t\t};\n\n\t\t}\n\n\t}\n\n}\n\nclass SpriteMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isSpriteMaterial = true;\n\n\t\tthis.type = 'SpriteMaterial';\n\n\t\tthis.color = new Color( 0xffffff );\n\n\t\tthis.map = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.rotation = 0;\n\n\t\tthis.sizeAttenuation = true;\n\n\t\tthis.transparent = true;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.rotation = source.rotation;\n\n\t\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nlet _geometry;\n\nconst _intersectPoint = /*@__PURE__*/ new Vector3();\nconst _worldScale = /*@__PURE__*/ new Vector3();\nconst _mvPosition = /*@__PURE__*/ new Vector3();\n\nconst _alignedPosition = /*@__PURE__*/ new Vector2();\nconst _rotatedPosition = /*@__PURE__*/ new Vector2();\nconst _viewWorldMatrix = /*@__PURE__*/ new Matrix4();\n\nconst _vA = /*@__PURE__*/ new Vector3();\nconst _vB = /*@__PURE__*/ new Vector3();\nconst _vC = /*@__PURE__*/ new Vector3();\n\nconst _uvA = /*@__PURE__*/ new Vector2();\nconst _uvB = /*@__PURE__*/ new Vector2();\nconst _uvC = /*@__PURE__*/ new Vector2();\n\nclass Sprite extends Object3D {\n\n\tconstructor( material ) {\n\n\t\tsuper();\n\n\t\tthis.isSprite = true;\n\n\t\tthis.type = 'Sprite';\n\n\t\tif ( _geometry === undefined ) {\n\n\t\t\t_geometry = new BufferGeometry();\n\n\t\t\tconst float32Array = new Float32Array( [\n\t\t\t\t- 0.5, - 0.5, 0, 0, 0,\n\t\t\t\t0.5, - 0.5, 0, 1, 0,\n\t\t\t\t0.5, 0.5, 0, 1, 1,\n\t\t\t\t- 0.5, 0.5, 0, 0, 1\n\t\t\t] );\n\n\t\t\tconst interleavedBuffer = new InterleavedBuffer( float32Array, 5 );\n\n\t\t\t_geometry.setIndex( [ 0, 1, 2,\t0, 2, 3 ] );\n\t\t\t_geometry.setAttribute( 'position', new InterleavedBufferAttribute( interleavedBuffer, 3, 0, false ) );\n\t\t\t_geometry.setAttribute( 'uv', new InterleavedBufferAttribute( interleavedBuffer, 2, 3, false ) );\n\n\t\t}\n\n\t\tthis.geometry = _geometry;\n\t\tthis.material = ( material !== undefined ) ? material : new SpriteMaterial();\n\n\t\tthis.center = new Vector2( 0.5, 0.5 );\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tif ( raycaster.camera === null ) {\n\n\t\t\tconsole.error( 'THREE.Sprite: \"Raycaster.camera\" needs to be set in order to raycast against sprites.' );\n\n\t\t}\n\n\t\t_worldScale.setFromMatrixScale( this.matrixWorld );\n\n\t\t_viewWorldMatrix.copy( raycaster.camera.matrixWorld );\n\t\tthis.modelViewMatrix.multiplyMatrices( raycaster.camera.matrixWorldInverse, this.matrixWorld );\n\n\t\t_mvPosition.setFromMatrixPosition( this.modelViewMatrix );\n\n\t\tif ( raycaster.camera.isPerspectiveCamera && this.material.sizeAttenuation === false ) {\n\n\t\t\t_worldScale.multiplyScalar( - _mvPosition.z );\n\n\t\t}\n\n\t\tconst rotation = this.material.rotation;\n\t\tlet sin, cos;\n\n\t\tif ( rotation !== 0 ) {\n\n\t\t\tcos = Math.cos( rotation );\n\t\t\tsin = Math.sin( rotation );\n\n\t\t}\n\n\t\tconst center = this.center;\n\n\t\ttransformVertex( _vA.set( - 0.5, - 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\ttransformVertex( _vB.set( 0.5, - 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\ttransformVertex( _vC.set( 0.5, 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\n\t\t_uvA.set( 0, 0 );\n\t\t_uvB.set( 1, 0 );\n\t\t_uvC.set( 1, 1 );\n\n\t\t// check first triangle\n\t\tlet intersect = raycaster.ray.intersectTriangle( _vA, _vB, _vC, false, _intersectPoint );\n\n\t\tif ( intersect === null ) {\n\n\t\t\t// check second triangle\n\t\t\ttransformVertex( _vB.set( - 0.5, 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\t\t_uvB.set( 0, 1 );\n\n\t\t\tintersect = raycaster.ray.intersectTriangle( _vA, _vC, _vB, false, _intersectPoint );\n\t\t\tif ( intersect === null ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst distance = raycaster.ray.origin.distanceTo( _intersectPoint );\n\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\tintersects.push( {\n\n\t\t\tdistance: distance,\n\t\t\tpoint: _intersectPoint.clone(),\n\t\t\tuv: Triangle.getUV( _intersectPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() ),\n\t\t\tface: null,\n\t\t\tobject: this\n\n\t\t} );\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tif ( source.center !== undefined ) this.center.copy( source.center );\n\n\t\tthis.material = source.material;\n\n\t\treturn this;\n\n\t}\n\n}\n\nfunction transformVertex( vertexPosition, mvPosition, center, scale, sin, cos ) {\n\n\t// compute position in camera space\n\t_alignedPosition.subVectors( vertexPosition, center ).addScalar( 0.5 ).multiply( scale );\n\n\t// to check if rotation is not zero\n\tif ( sin !== undefined ) {\n\n\t\t_rotatedPosition.x = ( cos * _alignedPosition.x ) - ( sin * _alignedPosition.y );\n\t\t_rotatedPosition.y = ( sin * _alignedPosition.x ) + ( cos * _alignedPosition.y );\n\n\t} else {\n\n\t\t_rotatedPosition.copy( _alignedPosition );\n\n\t}\n\n\n\tvertexPosition.copy( mvPosition );\n\tvertexPosition.x += _rotatedPosition.x;\n\tvertexPosition.y += _rotatedPosition.y;\n\n\t// transform to world space\n\tvertexPosition.applyMatrix4( _viewWorldMatrix );\n\n}\n\nconst _v1$2 = /*@__PURE__*/ new Vector3();\nconst _v2$1 = /*@__PURE__*/ new Vector3();\n\nclass LOD extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis._currentLevel = 0;\n\n\t\tthis.type = 'LOD';\n\n\t\tObject.defineProperties( this, {\n\t\t\tlevels: {\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: []\n\t\t\t},\n\t\t\tisLOD: {\n\t\t\t\tvalue: true,\n\t\t\t}\n\t\t} );\n\n\t\tthis.autoUpdate = true;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source, false );\n\n\t\tconst levels = source.levels;\n\n\t\tfor ( let i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tconst level = levels[ i ];\n\n\t\t\tthis.addLevel( level.object.clone(), level.distance, level.hysteresis );\n\n\t\t}\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\n\t\treturn this;\n\n\t}\n\n\taddLevel( object, distance = 0, hysteresis = 0 ) {\n\n\t\tdistance = Math.abs( distance );\n\n\t\tconst levels = this.levels;\n\n\t\tlet l;\n\n\t\tfor ( l = 0; l < levels.length; l ++ ) {\n\n\t\t\tif ( distance < levels[ l ].distance ) {\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlevels.splice( l, 0, { distance: distance, hysteresis: hysteresis, object: object } );\n\n\t\tthis.add( object );\n\n\t\treturn this;\n\n\t}\n\n\tgetCurrentLevel() {\n\n\t\treturn this._currentLevel;\n\n\t}\n\n\n\n\tgetObjectForDistance( distance ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 0 ) {\n\n\t\t\tlet i, l;\n\n\t\t\tfor ( i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tlet levelDistance = levels[ i ].distance;\n\n\t\t\t\tif ( levels[ i ].object.visible ) {\n\n\t\t\t\t\tlevelDistance -= levelDistance * levels[ i ].hysteresis;\n\n\t\t\t\t}\n\n\t\t\t\tif ( distance < levelDistance ) {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn levels[ i - 1 ].object;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 0 ) {\n\n\t\t\t_v1$2.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tconst distance = raycaster.ray.origin.distanceTo( _v1$2 );\n\n\t\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\n\n\t\t}\n\n\t}\n\n\tupdate( camera ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 1 ) {\n\n\t\t\t_v1$2.setFromMatrixPosition( camera.matrixWorld );\n\t\t\t_v2$1.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tconst distance = _v1$2.distanceTo( _v2$1 ) / camera.zoom;\n\n\t\t\tlevels[ 0 ].object.visible = true;\n\n\t\t\tlet i, l;\n\n\t\t\tfor ( i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tlet levelDistance = levels[ i ].distance;\n\n\t\t\t\tif ( levels[ i ].object.visible ) {\n\n\t\t\t\t\tlevelDistance -= levelDistance * levels[ i ].hysteresis;\n\n\t\t\t\t}\n\n\t\t\t\tif ( distance >= levelDistance ) {\n\n\t\t\t\t\tlevels[ i - 1 ].object.visible = false;\n\t\t\t\t\tlevels[ i ].object.visible = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._currentLevel = i - 1;\n\n\t\t\tfor ( ; i < l; i ++ ) {\n\n\t\t\t\tlevels[ i ].object.visible = false;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tif ( this.autoUpdate === false ) data.object.autoUpdate = false;\n\n\t\tdata.object.levels = [];\n\n\t\tconst levels = this.levels;\n\n\t\tfor ( let i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tconst level = levels[ i ];\n\n\t\t\tdata.object.levels.push( {\n\t\t\t\tobject: level.object.uuid,\n\t\t\t\tdistance: level.distance,\n\t\t\t\thysteresis: level.hysteresis\n\t\t\t} );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n}\n\nconst _basePosition = /*@__PURE__*/ new Vector3();\n\nconst _skinIndex = /*@__PURE__*/ new Vector4();\nconst _skinWeight = /*@__PURE__*/ new Vector4();\n\nconst _vector$5 = /*@__PURE__*/ new Vector3();\nconst _matrix = /*@__PURE__*/ new Matrix4();\n\nclass SkinnedMesh extends Mesh {\n\n\tconstructor( geometry, material ) {\n\n\t\tsuper( geometry, material );\n\n\t\tthis.isSkinnedMesh = true;\n\n\t\tthis.type = 'SkinnedMesh';\n\n\t\tthis.bindMode = 'attached';\n\t\tthis.bindMatrix = new Matrix4();\n\t\tthis.bindMatrixInverse = new Matrix4();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.bindMode = source.bindMode;\n\t\tthis.bindMatrix.copy( source.bindMatrix );\n\t\tthis.bindMatrixInverse.copy( source.bindMatrixInverse );\n\n\t\tthis.skeleton = source.skeleton;\n\n\t\treturn this;\n\n\t}\n\n\tbind( skeleton, bindMatrix ) {\n\n\t\tthis.skeleton = skeleton;\n\n\t\tif ( bindMatrix === undefined ) {\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.skeleton.calculateInverses();\n\n\t\t\tbindMatrix = this.matrixWorld;\n\n\t\t}\n\n\t\tthis.bindMatrix.copy( bindMatrix );\n\t\tthis.bindMatrixInverse.copy( bindMatrix ).invert();\n\n\t}\n\n\tpose() {\n\n\t\tthis.skeleton.pose();\n\n\t}\n\n\tnormalizeSkinWeights() {\n\n\t\tconst vector = new Vector4();\n\n\t\tconst skinWeight = this.geometry.attributes.skinWeight;\n\n\t\tfor ( let i = 0, l = skinWeight.count; i < l; i ++ ) {\n\n\t\t\tvector.fromBufferAttribute( skinWeight, i );\n\n\t\t\tconst scale = 1.0 / vector.manhattanLength();\n\n\t\t\tif ( scale !== Infinity ) {\n\n\t\t\t\tvector.multiplyScalar( scale );\n\n\t\t\t} else {\n\n\t\t\t\tvector.set( 1, 0, 0, 0 ); // do something reasonable\n\n\t\t\t}\n\n\t\t\tskinWeight.setXYZW( i, vector.x, vector.y, vector.z, vector.w );\n\n\t\t}\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t\tif ( this.bindMode === 'attached' ) {\n\n\t\t\tthis.bindMatrixInverse.copy( this.matrixWorld ).invert();\n\n\t\t} else if ( this.bindMode === 'detached' ) {\n\n\t\t\tthis.bindMatrixInverse.copy( this.bindMatrix ).invert();\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.SkinnedMesh: Unrecognized bindMode: ' + this.bindMode );\n\n\t\t}\n\n\t}\n\n\tboneTransform( index, target ) {\n\n\t\tconst skeleton = this.skeleton;\n\t\tconst geometry = this.geometry;\n\n\t\t_skinIndex.fromBufferAttribute( geometry.attributes.skinIndex, index );\n\t\t_skinWeight.fromBufferAttribute( geometry.attributes.skinWeight, index );\n\n\t\t_basePosition.copy( target ).applyMatrix4( this.bindMatrix );\n\n\t\ttarget.set( 0, 0, 0 );\n\n\t\tfor ( let i = 0; i < 4; i ++ ) {\n\n\t\t\tconst weight = _skinWeight.getComponent( i );\n\n\t\t\tif ( weight !== 0 ) {\n\n\t\t\t\tconst boneIndex = _skinIndex.getComponent( i );\n\n\t\t\t\t_matrix.multiplyMatrices( skeleton.bones[ boneIndex ].matrixWorld, skeleton.boneInverses[ boneIndex ] );\n\n\t\t\t\ttarget.addScaledVector( _vector$5.copy( _basePosition ).applyMatrix4( _matrix ), weight );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn target.applyMatrix4( this.bindMatrixInverse );\n\n\t}\n\n}\n\nclass Bone extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isBone = true;\n\n\t\tthis.type = 'Bone';\n\n\t}\n\n}\n\nclass DataTexture extends Texture {\n\n\tconstructor( data = null, width = 1, height = 1, format, type, mapping, wrapS, wrapT, magFilter = NearestFilter, minFilter = NearestFilter, anisotropy, encoding ) {\n\n\t\tsuper( null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\t\tthis.isDataTexture = true;\n\n\t\tthis.image = { data: data, width: width, height: height };\n\n\t\tthis.generateMipmaps = false;\n\t\tthis.flipY = false;\n\t\tthis.unpackAlignment = 1;\n\n\t}\n\n}\n\nconst _offsetMatrix = /*@__PURE__*/ new Matrix4();\nconst _identityMatrix = /*@__PURE__*/ new Matrix4();\n\nclass Skeleton {\n\n\tconstructor( bones = [], boneInverses = [] ) {\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.bones = bones.slice( 0 );\n\t\tthis.boneInverses = boneInverses;\n\t\tthis.boneMatrices = null;\n\n\t\tthis.boneTexture = null;\n\t\tthis.boneTextureSize = 0;\n\n\t\tthis.frame = - 1;\n\n\t\tthis.init();\n\n\t}\n\n\tinit() {\n\n\t\tconst bones = this.bones;\n\t\tconst boneInverses = this.boneInverses;\n\n\t\tthis.boneMatrices = new Float32Array( bones.length * 16 );\n\n\t\t// calculate inverse bone matrices if necessary\n\n\t\tif ( boneInverses.length === 0 ) {\n\n\t\t\tthis.calculateInverses();\n\n\t\t} else {\n\n\t\t\t// handle special case\n\n\t\t\tif ( bones.length !== boneInverses.length ) {\n\n\t\t\t\tconsole.warn( 'THREE.Skeleton: Number of inverse bone matrices does not match amount of bones.' );\n\n\t\t\t\tthis.boneInverses = [];\n\n\t\t\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\t\t\tthis.boneInverses.push( new Matrix4() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tcalculateInverses() {\n\n\t\tthis.boneInverses.length = 0;\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst inverse = new Matrix4();\n\n\t\t\tif ( this.bones[ i ] ) {\n\n\t\t\t\tinverse.copy( this.bones[ i ].matrixWorld ).invert();\n\n\t\t\t}\n\n\t\t\tthis.boneInverses.push( inverse );\n\n\t\t}\n\n\t}\n\n\tpose() {\n\n\t\t// recover the bind-time world matrices\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tbone.matrixWorld.copy( this.boneInverses[ i ] ).invert();\n\n\t\t\t}\n\n\t\t}\n\n\t\t// compute the local matrices, positions, rotations and scales\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\t\tbone.matrix.copy( bone.parent.matrixWorld ).invert();\n\t\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbone.matrix.copy( bone.matrixWorld );\n\n\t\t\t\t}\n\n\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tupdate() {\n\n\t\tconst bones = this.bones;\n\t\tconst boneInverses = this.boneInverses;\n\t\tconst boneMatrices = this.boneMatrices;\n\t\tconst boneTexture = this.boneTexture;\n\n\t\t// flatten bone matrices to array\n\n\t\tfor ( let i = 0, il = bones.length; i < il; i ++ ) {\n\n\t\t\t// compute the offset between the current and the original transform\n\n\t\t\tconst matrix = bones[ i ] ? bones[ i ].matrixWorld : _identityMatrix;\n\n\t\t\t_offsetMatrix.multiplyMatrices( matrix, boneInverses[ i ] );\n\t\t\t_offsetMatrix.toArray( boneMatrices, i * 16 );\n\n\t\t}\n\n\t\tif ( boneTexture !== null ) {\n\n\t\t\tboneTexture.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new Skeleton( this.bones, this.boneInverses );\n\n\t}\n\n\tcomputeBoneTexture() {\n\n\t\t// layout (1 matrix = 4 pixels)\n\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\n\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\n\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\n\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\n\n\t\tlet size = Math.sqrt( this.bones.length * 4 ); // 4 pixels needed for 1 matrix\n\t\tsize = ceilPowerOfTwo( size );\n\t\tsize = Math.max( size, 4 );\n\n\t\tconst boneMatrices = new Float32Array( size * size * 4 ); // 4 floats per RGBA pixel\n\t\tboneMatrices.set( this.boneMatrices ); // copy current values\n\n\t\tconst boneTexture = new DataTexture( boneMatrices, size, size, RGBAFormat, FloatType );\n\t\tboneTexture.needsUpdate = true;\n\n\t\tthis.boneMatrices = boneMatrices;\n\t\tthis.boneTexture = boneTexture;\n\t\tthis.boneTextureSize = size;\n\n\t\treturn this;\n\n\t}\n\n\tgetBoneByName( name ) {\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone.name === name ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t}\n\n\tdispose( ) {\n\n\t\tif ( this.boneTexture !== null ) {\n\n\t\t\tthis.boneTexture.dispose();\n\n\t\t\tthis.boneTexture = null;\n\n\t\t}\n\n\t}\n\n\tfromJSON( json, bones ) {\n\n\t\tthis.uuid = json.uuid;\n\n\t\tfor ( let i = 0, l = json.bones.length; i < l; i ++ ) {\n\n\t\t\tconst uuid = json.bones[ i ];\n\t\t\tlet bone = bones[ uuid ];\n\n\t\t\tif ( bone === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Skeleton: No bone found with UUID:', uuid );\n\t\t\t\tbone = new Bone();\n\n\t\t\t}\n\n\t\t\tthis.bones.push( bone );\n\t\t\tthis.boneInverses.push( new Matrix4().fromArray( json.boneInverses[ i ] ) );\n\n\t\t}\n\n\t\tthis.init();\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Skeleton',\n\t\t\t\tgenerator: 'Skeleton.toJSON'\n\t\t\t},\n\t\t\tbones: [],\n\t\t\tboneInverses: []\n\t\t};\n\n\t\tdata.uuid = this.uuid;\n\n\t\tconst bones = this.bones;\n\t\tconst boneInverses = this.boneInverses;\n\n\t\tfor ( let i = 0, l = bones.length; i < l; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\t\t\tdata.bones.push( bone.uuid );\n\n\t\t\tconst boneInverse = boneInverses[ i ];\n\t\t\tdata.boneInverses.push( boneInverse.toArray() );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass InstancedBufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized, meshPerAttribute = 1 ) {\n\n\t\tsuper( array, itemSize, normalized );\n\n\t\tthis.isInstancedBufferAttribute = true;\n\n\t\tthis.meshPerAttribute = meshPerAttribute;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.meshPerAttribute = this.meshPerAttribute;\n\n\t\tdata.isInstancedBufferAttribute = true;\n\n\t\treturn data;\n\n\t}\n\n}\n\nconst _instanceLocalMatrix = /*@__PURE__*/ new Matrix4();\nconst _instanceWorldMatrix = /*@__PURE__*/ new Matrix4();\n\nconst _instanceIntersects = [];\n\nconst _identity = /*@__PURE__*/ new Matrix4();\nconst _mesh = /*@__PURE__*/ new Mesh();\n\nclass InstancedMesh extends Mesh {\n\n\tconstructor( geometry, material, count ) {\n\n\t\tsuper( geometry, material );\n\n\t\tthis.isInstancedMesh = true;\n\n\t\tthis.instanceMatrix = new InstancedBufferAttribute( new Float32Array( count * 16 ), 16 );\n\t\tthis.instanceColor = null;\n\n\t\tthis.count = count;\n\n\t\tthis.frustumCulled = false;\n\n\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\tthis.setMatrixAt( i, _identity );\n\n\t\t}\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.instanceMatrix.copy( source.instanceMatrix );\n\n\t\tif ( source.instanceColor !== null ) this.instanceColor = source.instanceColor.clone();\n\n\t\tthis.count = source.count;\n\n\t\treturn this;\n\n\t}\n\n\tgetColorAt( index, color ) {\n\n\t\tcolor.fromArray( this.instanceColor.array, index * 3 );\n\n\t}\n\n\tgetMatrixAt( index, matrix ) {\n\n\t\tmatrix.fromArray( this.instanceMatrix.array, index * 16 );\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst raycastTimes = this.count;\n\n\t\t_mesh.geometry = this.geometry;\n\t\t_mesh.material = this.material;\n\n\t\tif ( _mesh.material === undefined ) return;\n\n\t\tfor ( let instanceId = 0; instanceId < raycastTimes; instanceId ++ ) {\n\n\t\t\t// calculate the world matrix for each instance\n\n\t\t\tthis.getMatrixAt( instanceId, _instanceLocalMatrix );\n\n\t\t\t_instanceWorldMatrix.multiplyMatrices( matrixWorld, _instanceLocalMatrix );\n\n\t\t\t// the mesh represents this single instance\n\n\t\t\t_mesh.matrixWorld = _instanceWorldMatrix;\n\n\t\t\t_mesh.raycast( raycaster, _instanceIntersects );\n\n\t\t\t// process the result of raycast\n\n\t\t\tfor ( let i = 0, l = _instanceIntersects.length; i < l; i ++ ) {\n\n\t\t\t\tconst intersect = _instanceIntersects[ i ];\n\t\t\t\tintersect.instanceId = instanceId;\n\t\t\t\tintersect.object = this;\n\t\t\t\tintersects.push( intersect );\n\n\t\t\t}\n\n\t\t\t_instanceIntersects.length = 0;\n\n\t\t}\n\n\t}\n\n\tsetColorAt( index, color ) {\n\n\t\tif ( this.instanceColor === null ) {\n\n\t\t\tthis.instanceColor = new InstancedBufferAttribute( new Float32Array( this.instanceMatrix.count * 3 ), 3 );\n\n\t\t}\n\n\t\tcolor.toArray( this.instanceColor.array, index * 3 );\n\n\t}\n\n\tsetMatrixAt( index, matrix ) {\n\n\t\tmatrix.toArray( this.instanceMatrix.array, index * 16 );\n\n\t}\n\n\tupdateMorphTargets() {\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n}\n\nclass LineBasicMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isLineBasicMaterial = true;\n\n\t\tthis.type = 'LineBasicMaterial';\n\n\t\tthis.color = new Color( 0xffffff );\n\n\t\tthis.linewidth = 1;\n\t\tthis.linecap = 'round';\n\t\tthis.linejoin = 'round';\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.linewidth = source.linewidth;\n\t\tthis.linecap = source.linecap;\n\t\tthis.linejoin = source.linejoin;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _start$1 = /*@__PURE__*/ new Vector3();\nconst _end$1 = /*@__PURE__*/ new Vector3();\nconst _inverseMatrix$1 = /*@__PURE__*/ new Matrix4();\nconst _ray$1 = /*@__PURE__*/ new Ray();\nconst _sphere$1 = /*@__PURE__*/ new Sphere();\n\nclass Line extends Object3D {\n\n\tconstructor( geometry = new BufferGeometry(), material = new LineBasicMaterial() ) {\n\n\t\tsuper();\n\n\t\tthis.isLine = true;\n\n\t\tthis.type = 'Line';\n\n\t\tthis.geometry = geometry;\n\t\tthis.material = material;\n\n\t\tthis.updateMorphTargets();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.material = source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t}\n\n\tcomputeLineDistances() {\n\n\t\tconst geometry = this.geometry;\n\n\t\t// we assume non-indexed geometry\n\n\t\tif ( geometry.index === null ) {\n\n\t\t\tconst positionAttribute = geometry.attributes.position;\n\t\t\tconst lineDistances = [ 0 ];\n\n\t\t\tfor ( let i = 1, l = positionAttribute.count; i < l; i ++ ) {\n\n\t\t\t\t_start$1.fromBufferAttribute( positionAttribute, i - 1 );\n\t\t\t\t_end$1.fromBufferAttribute( positionAttribute, i );\n\n\t\t\t\tlineDistances[ i ] = lineDistances[ i - 1 ];\n\t\t\t\tlineDistances[ i ] += _start$1.distanceTo( _end$1 );\n\n\t\t\t}\n\n\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst threshold = raycaster.params.Line.threshold;\n\t\tconst drawRange = geometry.drawRange;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere$1.copy( geometry.boundingSphere );\n\t\t_sphere$1.applyMatrix4( matrixWorld );\n\t\t_sphere$1.radius += threshold;\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere$1 ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix$1.copy( matrixWorld ).invert();\n\t\t_ray$1.copy( raycaster.ray ).applyMatrix4( _inverseMatrix$1 );\n\n\t\tconst localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\tconst localThresholdSq = localThreshold * localThreshold;\n\n\t\tconst vStart = new Vector3();\n\t\tconst vEnd = new Vector3();\n\t\tconst interSegment = new Vector3();\n\t\tconst interRay = new Vector3();\n\t\tconst step = this.isLineSegments ? 2 : 1;\n\n\t\tconst index = geometry.index;\n\t\tconst attributes = geometry.attributes;\n\t\tconst positionAttribute = attributes.position;\n\n\t\tif ( index !== null ) {\n\n\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\tconst end = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( let i = start, l = end - 1; i < l; i += step ) {\n\n\t\t\t\tconst a = index.getX( i );\n\t\t\t\tconst b = index.getX( i + 1 );\n\n\t\t\t\tvStart.fromBufferAttribute( positionAttribute, a );\n\t\t\t\tvEnd.fromBufferAttribute( positionAttribute, b );\n\n\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\tif ( distSq > localThresholdSq ) continue;\n\n\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\tintersects.push( {\n\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\tindex: i,\n\t\t\t\t\tface: null,\n\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\tobject: this\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\tconst end = Math.min( positionAttribute.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( let i = start, l = end - 1; i < l; i += step ) {\n\n\t\t\t\tvStart.fromBufferAttribute( positionAttribute, i );\n\t\t\t\tvEnd.fromBufferAttribute( positionAttribute, i + 1 );\n\n\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\tif ( distSq > localThresholdSq ) continue;\n\n\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\tintersects.push( {\n\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\tindex: i,\n\t\t\t\t\tface: null,\n\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\tobject: this\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tupdateMorphTargets() {\n\n\t\tconst geometry = this.geometry;\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\t\tconst keys = Object.keys( morphAttributes );\n\n\t\tif ( keys.length > 0 ) {\n\n\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nconst _start = /*@__PURE__*/ new Vector3();\nconst _end = /*@__PURE__*/ new Vector3();\n\nclass LineSegments extends Line {\n\n\tconstructor( geometry, material ) {\n\n\t\tsuper( geometry, material );\n\n\t\tthis.isLineSegments = true;\n\n\t\tthis.type = 'LineSegments';\n\n\t}\n\n\tcomputeLineDistances() {\n\n\t\tconst geometry = this.geometry;\n\n\t\t// we assume non-indexed geometry\n\n\t\tif ( geometry.index === null ) {\n\n\t\t\tconst positionAttribute = geometry.attributes.position;\n\t\t\tconst lineDistances = [];\n\n\t\t\tfor ( let i = 0, l = positionAttribute.count; i < l; i += 2 ) {\n\n\t\t\t\t_start.fromBufferAttribute( positionAttribute, i );\n\t\t\t\t_end.fromBufferAttribute( positionAttribute, i + 1 );\n\n\t\t\t\tlineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\n\t\t\t\tlineDistances[ i + 1 ] = lineDistances[ i ] + _start.distanceTo( _end );\n\n\t\t\t}\n\n\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass LineLoop extends Line {\n\n\tconstructor( geometry, material ) {\n\n\t\tsuper( geometry, material );\n\n\t\tthis.isLineLoop = true;\n\n\t\tthis.type = 'LineLoop';\n\n\t}\n\n}\n\nclass PointsMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isPointsMaterial = true;\n\n\t\tthis.type = 'PointsMaterial';\n\n\t\tthis.color = new Color( 0xffffff );\n\n\t\tthis.map = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.size = 1;\n\t\tthis.sizeAttenuation = true;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.size = source.size;\n\t\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _inverseMatrix = /*@__PURE__*/ new Matrix4();\nconst _ray = /*@__PURE__*/ new Ray();\nconst _sphere = /*@__PURE__*/ new Sphere();\nconst _position$2 = /*@__PURE__*/ new Vector3();\n\nclass Points extends Object3D {\n\n\tconstructor( geometry = new BufferGeometry(), material = new PointsMaterial() ) {\n\n\t\tsuper();\n\n\t\tthis.isPoints = true;\n\n\t\tthis.type = 'Points';\n\n\t\tthis.geometry = geometry;\n\t\tthis.material = material;\n\n\t\tthis.updateMorphTargets();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.material = source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst threshold = raycaster.params.Points.threshold;\n\t\tconst drawRange = geometry.drawRange;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere );\n\t\t_sphere.applyMatrix4( matrixWorld );\n\t\t_sphere.radius += threshold;\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix.copy( matrixWorld ).invert();\n\t\t_ray.copy( raycaster.ray ).applyMatrix4( _inverseMatrix );\n\n\t\tconst localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\tconst localThresholdSq = localThreshold * localThreshold;\n\n\t\tconst index = geometry.index;\n\t\tconst attributes = geometry.attributes;\n\t\tconst positionAttribute = attributes.position;\n\n\t\tif ( index !== null ) {\n\n\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\tconst end = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( let i = start, il = end; i < il; i ++ ) {\n\n\t\t\t\tconst a = index.getX( i );\n\n\t\t\t\t_position$2.fromBufferAttribute( positionAttribute, a );\n\n\t\t\t\ttestPoint( _position$2, a, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\tconst end = Math.min( positionAttribute.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( let i = start, l = end; i < l; i ++ ) {\n\n\t\t\t\t_position$2.fromBufferAttribute( positionAttribute, i );\n\n\t\t\t\ttestPoint( _position$2, i, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tupdateMorphTargets() {\n\n\t\tconst geometry = this.geometry;\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\t\tconst keys = Object.keys( morphAttributes );\n\n\t\tif ( keys.length > 0 ) {\n\n\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nfunction testPoint( point, index, localThresholdSq, matrixWorld, raycaster, intersects, object ) {\n\n\tconst rayPointDistanceSq = _ray.distanceSqToPoint( point );\n\n\tif ( rayPointDistanceSq < localThresholdSq ) {\n\n\t\tconst intersectPoint = new Vector3();\n\n\t\t_ray.closestPointToPoint( point, intersectPoint );\n\t\tintersectPoint.applyMatrix4( matrixWorld );\n\n\t\tconst distance = raycaster.ray.origin.distanceTo( intersectPoint );\n\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\tintersects.push( {\n\n\t\t\tdistance: distance,\n\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\n\t\t\tpoint: intersectPoint,\n\t\t\tindex: index,\n\t\t\tface: null,\n\t\t\tobject: object\n\n\t\t} );\n\n\t}\n\n}\n\nclass VideoTexture extends Texture {\n\n\tconstructor( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\t\tsuper( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\t\tthis.isVideoTexture = true;\n\n\t\tthis.minFilter = minFilter !== undefined ? minFilter : LinearFilter;\n\t\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\n\n\t\tthis.generateMipmaps = false;\n\n\t\tconst scope = this;\n\n\t\tfunction updateVideo() {\n\n\t\t\tscope.needsUpdate = true;\n\t\t\tvideo.requestVideoFrameCallback( updateVideo );\n\n\t\t}\n\n\t\tif ( 'requestVideoFrameCallback' in video ) {\n\n\t\t\tvideo.requestVideoFrameCallback( updateVideo );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.image ).copy( this );\n\n\t}\n\n\tupdate() {\n\n\t\tconst video = this.image;\n\t\tconst hasVideoFrameCallback = 'requestVideoFrameCallback' in video;\n\n\t\tif ( hasVideoFrameCallback === false && video.readyState >= video.HAVE_CURRENT_DATA ) {\n\n\t\t\tthis.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n}\n\nclass FramebufferTexture extends Texture {\n\n\tconstructor( width, height, format ) {\n\n\t\tsuper( { width, height } );\n\n\t\tthis.isFramebufferTexture = true;\n\n\t\tthis.format = format;\n\n\t\tthis.magFilter = NearestFilter;\n\t\tthis.minFilter = NearestFilter;\n\n\t\tthis.generateMipmaps = false;\n\n\t\tthis.needsUpdate = true;\n\n\t}\n\n}\n\nclass CompressedTexture extends Texture {\n\n\tconstructor( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\t\tsuper( null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\t\tthis.isCompressedTexture = true;\n\n\t\tthis.image = { width: width, height: height };\n\t\tthis.mipmaps = mipmaps;\n\n\t\t// no flipping for cube textures\n\t\t// (also flipping doesn't work for compressed textures )\n\n\t\tthis.flipY = false;\n\n\t\t// can't generate mipmaps for compressed textures\n\t\t// mips must be embedded in DDS files\n\n\t\tthis.generateMipmaps = false;\n\n\t}\n\n}\n\nclass CompressedArrayTexture extends CompressedTexture {\n\n\tconstructor( mipmaps, width, height, depth, format, type ) {\n\n\t\tsuper( mipmaps, width, height, format, type );\n\n\t\tthis.isCompressedArrayTexture = true;\n\t\tthis.image.depth = depth;\n\t\tthis.wrapR = ClampToEdgeWrapping;\n\n\t}\n\n}\n\nclass CanvasTexture extends Texture {\n\n\tconstructor( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\t\tsuper( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\t\tthis.isCanvasTexture = true;\n\n\t\tthis.needsUpdate = true;\n\n\t}\n\n}\n\n/**\n * Extensible curve object.\n *\n * Some common of curve methods:\n * .getPoint( t, optionalTarget ), .getTangent( t, optionalTarget )\n * .getPointAt( u, optionalTarget ), .getTangentAt( u, optionalTarget )\n * .getPoints(), .getSpacedPoints()\n * .getLength()\n * .updateArcLengths()\n *\n * This following curves inherit from THREE.Curve:\n *\n * -- 2D curves --\n * THREE.ArcCurve\n * THREE.CubicBezierCurve\n * THREE.EllipseCurve\n * THREE.LineCurve\n * THREE.QuadraticBezierCurve\n * THREE.SplineCurve\n *\n * -- 3D curves --\n * THREE.CatmullRomCurve3\n * THREE.CubicBezierCurve3\n * THREE.LineCurve3\n * THREE.QuadraticBezierCurve3\n *\n * A series of curves can be represented as a THREE.CurvePath.\n *\n **/\n\nclass Curve {\n\n\tconstructor() {\n\n\t\tthis.type = 'Curve';\n\n\t\tthis.arcLengthDivisions = 200;\n\n\t}\n\n\t// Virtual base class method to overwrite and implement in subclasses\n\t//\t- t [0 .. 1]\n\n\tgetPoint( /* t, optionalTarget */ ) {\n\n\t\tconsole.warn( 'THREE.Curve: .getPoint() not implemented.' );\n\t\treturn null;\n\n\t}\n\n\t// Get point at relative position in curve according to arc length\n\t// - u [0 .. 1]\n\n\tgetPointAt( u, optionalTarget ) {\n\n\t\tconst t = this.getUtoTmapping( u );\n\t\treturn this.getPoint( t, optionalTarget );\n\n\t}\n\n\t// Get sequence of points using getPoint( t )\n\n\tgetPoints( divisions = 5 ) {\n\n\t\tconst points = [];\n\n\t\tfor ( let d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPoint( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t}\n\n\t// Get sequence of points using getPointAt( u )\n\n\tgetSpacedPoints( divisions = 5 ) {\n\n\t\tconst points = [];\n\n\t\tfor ( let d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPointAt( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t}\n\n\t// Get total curve arc length\n\n\tgetLength() {\n\n\t\tconst lengths = this.getLengths();\n\t\treturn lengths[ lengths.length - 1 ];\n\n\t}\n\n\t// Get list of cumulative segment lengths\n\n\tgetLengths( divisions = this.arcLengthDivisions ) {\n\n\t\tif ( this.cacheArcLengths &&\n\t\t\t( this.cacheArcLengths.length === divisions + 1 ) &&\n\t\t\t! this.needsUpdate ) {\n\n\t\t\treturn this.cacheArcLengths;\n\n\t\t}\n\n\t\tthis.needsUpdate = false;\n\n\t\tconst cache = [];\n\t\tlet current, last = this.getPoint( 0 );\n\t\tlet sum = 0;\n\n\t\tcache.push( 0 );\n\n\t\tfor ( let p = 1; p <= divisions; p ++ ) {\n\n\t\t\tcurrent = this.getPoint( p / divisions );\n\t\t\tsum += current.distanceTo( last );\n\t\t\tcache.push( sum );\n\t\t\tlast = current;\n\n\t\t}\n\n\t\tthis.cacheArcLengths = cache;\n\n\t\treturn cache; // { sums: cache, sum: sum }; Sum is in the last element.\n\n\t}\n\n\tupdateArcLengths() {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.getLengths();\n\n\t}\n\n\t// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\n\n\tgetUtoTmapping( u, distance ) {\n\n\t\tconst arcLengths = this.getLengths();\n\n\t\tlet i = 0;\n\t\tconst il = arcLengths.length;\n\n\t\tlet targetArcLength; // The targeted u distance value to get\n\n\t\tif ( distance ) {\n\n\t\t\ttargetArcLength = distance;\n\n\t\t} else {\n\n\t\t\ttargetArcLength = u * arcLengths[ il - 1 ];\n\n\t\t}\n\n\t\t// binary search for the index with largest value smaller than target u distance\n\n\t\tlet low = 0, high = il - 1, comparison;\n\n\t\twhile ( low <= high ) {\n\n\t\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\n\n\t\t\tcomparison = arcLengths[ i ] - targetArcLength;\n\n\t\t\tif ( comparison < 0 ) {\n\n\t\t\t\tlow = i + 1;\n\n\t\t\t} else if ( comparison > 0 ) {\n\n\t\t\t\thigh = i - 1;\n\n\t\t\t} else {\n\n\t\t\t\thigh = i;\n\t\t\t\tbreak;\n\n\t\t\t\t// DONE\n\n\t\t\t}\n\n\t\t}\n\n\t\ti = high;\n\n\t\tif ( arcLengths[ i ] === targetArcLength ) {\n\n\t\t\treturn i / ( il - 1 );\n\n\t\t}\n\n\t\t// we could get finer grain at lengths, or use simple interpolation between two points\n\n\t\tconst lengthBefore = arcLengths[ i ];\n\t\tconst lengthAfter = arcLengths[ i + 1 ];\n\n\t\tconst segmentLength = lengthAfter - lengthBefore;\n\n\t\t// determine where we are between the 'before' and 'after' points\n\n\t\tconst segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\n\n\t\t// add that fractional amount to t\n\n\t\tconst t = ( i + segmentFraction ) / ( il - 1 );\n\n\t\treturn t;\n\n\t}\n\n\t// Returns a unit vector tangent at t\n\t// In case any sub curve does not implement its tangent derivation,\n\t// 2 points a small delta apart will be used to find its gradient\n\t// which seems to give a reasonable approximation\n\n\tgetTangent( t, optionalTarget ) {\n\n\t\tconst delta = 0.0001;\n\t\tlet t1 = t - delta;\n\t\tlet t2 = t + delta;\n\n\t\t// Capping in case of danger\n\n\t\tif ( t1 < 0 ) t1 = 0;\n\t\tif ( t2 > 1 ) t2 = 1;\n\n\t\tconst pt1 = this.getPoint( t1 );\n\t\tconst pt2 = this.getPoint( t2 );\n\n\t\tconst tangent = optionalTarget || ( ( pt1.isVector2 ) ? new Vector2() : new Vector3() );\n\n\t\ttangent.copy( pt2 ).sub( pt1 ).normalize();\n\n\t\treturn tangent;\n\n\t}\n\n\tgetTangentAt( u, optionalTarget ) {\n\n\t\tconst t = this.getUtoTmapping( u );\n\t\treturn this.getTangent( t, optionalTarget );\n\n\t}\n\n\tcomputeFrenetFrames( segments, closed ) {\n\n\t\t// see http://www.cs.indiana.edu/pub/techreports/TR425.pdf\n\n\t\tconst normal = new Vector3();\n\n\t\tconst tangents = [];\n\t\tconst normals = [];\n\t\tconst binormals = [];\n\n\t\tconst vec = new Vector3();\n\t\tconst mat = new Matrix4();\n\n\t\t// compute the tangent vectors for each segment on the curve\n\n\t\tfor ( let i = 0; i <= segments; i ++ ) {\n\n\t\t\tconst u = i / segments;\n\n\t\t\ttangents[ i ] = this.getTangentAt( u, new Vector3() );\n\n\t\t}\n\n\t\t// select an initial normal vector perpendicular to the first tangent vector,\n\t\t// and in the direction of the minimum tangent xyz component\n\n\t\tnormals[ 0 ] = new Vector3();\n\t\tbinormals[ 0 ] = new Vector3();\n\t\tlet min = Number.MAX_VALUE;\n\t\tconst tx = Math.abs( tangents[ 0 ].x );\n\t\tconst ty = Math.abs( tangents[ 0 ].y );\n\t\tconst tz = Math.abs( tangents[ 0 ].z );\n\n\t\tif ( tx <= min ) {\n\n\t\t\tmin = tx;\n\t\t\tnormal.set( 1, 0, 0 );\n\n\t\t}\n\n\t\tif ( ty <= min ) {\n\n\t\t\tmin = ty;\n\t\t\tnormal.set( 0, 1, 0 );\n\n\t\t}\n\n\t\tif ( tz <= min ) {\n\n\t\t\tnormal.set( 0, 0, 1 );\n\n\t\t}\n\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\n\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\n\n\n\t\t// compute the slowly-varying normal and binormal vectors for each segment on the curve\n\n\t\tfor ( let i = 1; i <= segments; i ++ ) {\n\n\t\t\tnormals[ i ] = normals[ i - 1 ].clone();\n\n\t\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\n\n\t\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\n\n\t\t\tif ( vec.length() > Number.EPSILON ) {\n\n\t\t\t\tvec.normalize();\n\n\t\t\t\tconst theta = Math.acos( clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\n\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\n\n\t\t\t}\n\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t}\n\n\t\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\n\n\t\tif ( closed === true ) {\n\n\t\t\tlet theta = Math.acos( clamp( normals[ 0 ].dot( normals[ segments ] ), - 1, 1 ) );\n\t\t\ttheta /= segments;\n\n\t\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ segments ] ) ) > 0 ) {\n\n\t\t\t\ttheta = - theta;\n\n\t\t\t}\n\n\t\t\tfor ( let i = 1; i <= segments; i ++ ) {\n\n\t\t\t\t// twist a little...\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\n\t\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\ttangents: tangents,\n\t\t\tnormals: normals,\n\t\t\tbinormals: binormals\n\t\t};\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.arcLengthDivisions = source.arcLengthDivisions;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Curve',\n\t\t\t\tgenerator: 'Curve.toJSON'\n\t\t\t}\n\t\t};\n\n\t\tdata.arcLengthDivisions = this.arcLengthDivisions;\n\t\tdata.type = this.type;\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tthis.arcLengthDivisions = json.arcLengthDivisions;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass EllipseCurve extends Curve {\n\n\tconstructor( aX = 0, aY = 0, xRadius = 1, yRadius = 1, aStartAngle = 0, aEndAngle = Math.PI * 2, aClockwise = false, aRotation = 0 ) {\n\n\t\tsuper();\n\n\t\tthis.isEllipseCurve = true;\n\n\t\tthis.type = 'EllipseCurve';\n\n\t\tthis.aX = aX;\n\t\tthis.aY = aY;\n\n\t\tthis.xRadius = xRadius;\n\t\tthis.yRadius = yRadius;\n\n\t\tthis.aStartAngle = aStartAngle;\n\t\tthis.aEndAngle = aEndAngle;\n\n\t\tthis.aClockwise = aClockwise;\n\n\t\tthis.aRotation = aRotation;\n\n\t}\n\n\tgetPoint( t, optionalTarget ) {\n\n\t\tconst point = optionalTarget || new Vector2();\n\n\t\tconst twoPi = Math.PI * 2;\n\t\tlet deltaAngle = this.aEndAngle - this.aStartAngle;\n\t\tconst samePoints = Math.abs( deltaAngle ) < Number.EPSILON;\n\n\t\t// ensures that deltaAngle is 0 .. 2 PI\n\t\twhile ( deltaAngle < 0 ) deltaAngle += twoPi;\n\t\twhile ( deltaAngle > twoPi ) deltaAngle -= twoPi;\n\n\t\tif ( deltaAngle < Number.EPSILON ) {\n\n\t\t\tif ( samePoints ) {\n\n\t\t\t\tdeltaAngle = 0;\n\n\t\t\t} else {\n\n\t\t\t\tdeltaAngle = twoPi;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.aClockwise === true && ! samePoints ) {\n\n\t\t\tif ( deltaAngle === twoPi ) {\n\n\t\t\t\tdeltaAngle = - twoPi;\n\n\t\t\t} else {\n\n\t\t\t\tdeltaAngle = deltaAngle - twoPi;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst angle = this.aStartAngle + t * deltaAngle;\n\t\tlet x = this.aX + this.xRadius * Math.cos( angle );\n\t\tlet y = this.aY + this.yRadius * Math.sin( angle );\n\n\t\tif ( this.aRotation !== 0 ) {\n\n\t\t\tconst cos = Math.cos( this.aRotation );\n\t\t\tconst sin = Math.sin( this.aRotation );\n\n\t\t\tconst tx = x - this.aX;\n\t\t\tconst ty = y - this.aY;\n\n\t\t\t// Rotate the point about the center of the ellipse.\n\t\t\tx = tx * cos - ty * sin + this.aX;\n\t\t\ty = tx * sin + ty * cos + this.aY;\n\n\t\t}\n\n\t\treturn point.set( x, y );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.aX = source.aX;\n\t\tthis.aY = source.aY;\n\n\t\tthis.xRadius = source.xRadius;\n\t\tthis.yRadius = source.yRadius;\n\n\t\tthis.aStartAngle = source.aStartAngle;\n\t\tthis.aEndAngle = source.aEndAngle;\n\n\t\tthis.aClockwise = source.aClockwise;\n\n\t\tthis.aRotation = source.aRotation;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.aX = this.aX;\n\t\tdata.aY = this.aY;\n\n\t\tdata.xRadius = this.xRadius;\n\t\tdata.yRadius = this.yRadius;\n\n\t\tdata.aStartAngle = this.aStartAngle;\n\t\tdata.aEndAngle = this.aEndAngle;\n\n\t\tdata.aClockwise = this.aClockwise;\n\n\t\tdata.aRotation = this.aRotation;\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.aX = json.aX;\n\t\tthis.aY = json.aY;\n\n\t\tthis.xRadius = json.xRadius;\n\t\tthis.yRadius = json.yRadius;\n\n\t\tthis.aStartAngle = json.aStartAngle;\n\t\tthis.aEndAngle = json.aEndAngle;\n\n\t\tthis.aClockwise = json.aClockwise;\n\n\t\tthis.aRotation = json.aRotation;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass ArcCurve extends EllipseCurve {\n\n\tconstructor( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tsuper( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\t\tthis.isArcCurve = true;\n\n\t\tthis.type = 'ArcCurve';\n\n\t}\n\n}\n\n/**\n * Centripetal CatmullRom Curve - which is useful for avoiding\n * cusps and self-intersections in non-uniform catmull rom curves.\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\n *\n * curve.type accepts centripetal(default), chordal and catmullrom\n * curve.tension is used for catmullrom which defaults to 0.5\n */\n\n\n/*\nBased on an optimized c++ solution in\n - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\n - http://ideone.com/NoEbVM\n\nThis CubicPoly class could be used for reusing some variables and calculations,\nbut for three.js curve use, it could be possible inlined and flatten into a single function call\nwhich can be placed in CurveUtils.\n*/\n\nfunction CubicPoly() {\n\n\tlet c0 = 0, c1 = 0, c2 = 0, c3 = 0;\n\n\t/*\n\t * Compute coefficients for a cubic polynomial\n\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\n\t * such that\n\t *   p(0) = x0, p(1) = x1\n\t *  and\n\t *   p'(0) = t0, p'(1) = t1.\n\t */\n\tfunction init( x0, x1, t0, t1 ) {\n\n\t\tc0 = x0;\n\t\tc1 = t0;\n\t\tc2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\n\t\tc3 = 2 * x0 - 2 * x1 + t0 + t1;\n\n\t}\n\n\treturn {\n\n\t\tinitCatmullRom: function ( x0, x1, x2, x3, tension ) {\n\n\t\t\tinit( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\n\n\t\t},\n\n\t\tinitNonuniformCatmullRom: function ( x0, x1, x2, x3, dt0, dt1, dt2 ) {\n\n\t\t\t// compute tangents when parameterized in [t1,t2]\n\t\t\tlet t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\n\t\t\tlet t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\n\n\t\t\t// rescale tangents for parametrization in [0,1]\n\t\t\tt1 *= dt1;\n\t\t\tt2 *= dt1;\n\n\t\t\tinit( x1, x2, t1, t2 );\n\n\t\t},\n\n\t\tcalc: function ( t ) {\n\n\t\t\tconst t2 = t * t;\n\t\t\tconst t3 = t2 * t;\n\t\t\treturn c0 + c1 * t + c2 * t2 + c3 * t3;\n\n\t\t}\n\n\t};\n\n}\n\n//\n\nconst tmp = /*@__PURE__*/ new Vector3();\nconst px = /*@__PURE__*/ new CubicPoly();\nconst py = /*@__PURE__*/ new CubicPoly();\nconst pz = /*@__PURE__*/ new CubicPoly();\n\nclass CatmullRomCurve3 extends Curve {\n\n\tconstructor( points = [], closed = false, curveType = 'centripetal', tension = 0.5 ) {\n\n\t\tsuper();\n\n\t\tthis.isCatmullRomCurve3 = true;\n\n\t\tthis.type = 'CatmullRomCurve3';\n\n\t\tthis.points = points;\n\t\tthis.closed = closed;\n\t\tthis.curveType = curveType;\n\t\tthis.tension = tension;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector3() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst points = this.points;\n\t\tconst l = points.length;\n\n\t\tconst p = ( l - ( this.closed ? 0 : 1 ) ) * t;\n\t\tlet intPoint = Math.floor( p );\n\t\tlet weight = p - intPoint;\n\n\t\tif ( this.closed ) {\n\n\t\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / l ) + 1 ) * l;\n\n\t\t} else if ( weight === 0 && intPoint === l - 1 ) {\n\n\t\t\tintPoint = l - 2;\n\t\t\tweight = 1;\n\n\t\t}\n\n\t\tlet p0, p3; // 4 points (p1 & p2 defined below)\n\n\t\tif ( this.closed || intPoint > 0 ) {\n\n\t\t\tp0 = points[ ( intPoint - 1 ) % l ];\n\n\t\t} else {\n\n\t\t\t// extrapolate first point\n\t\t\ttmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\n\t\t\tp0 = tmp;\n\n\t\t}\n\n\t\tconst p1 = points[ intPoint % l ];\n\t\tconst p2 = points[ ( intPoint + 1 ) % l ];\n\n\t\tif ( this.closed || intPoint + 2 < l ) {\n\n\t\t\tp3 = points[ ( intPoint + 2 ) % l ];\n\n\t\t} else {\n\n\t\t\t// extrapolate last point\n\t\t\ttmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 1 ] );\n\t\t\tp3 = tmp;\n\n\t\t}\n\n\t\tif ( this.curveType === 'centripetal' || this.curveType === 'chordal' ) {\n\n\t\t\t// init Centripetal / Chordal Catmull-Rom\n\t\t\tconst pow = this.curveType === 'chordal' ? 0.5 : 0.25;\n\t\t\tlet dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\n\t\t\tlet dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\n\t\t\tlet dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\n\n\t\t\t// safety check for repeated points\n\t\t\tif ( dt1 < 1e-4 ) dt1 = 1.0;\n\t\t\tif ( dt0 < 1e-4 ) dt0 = dt1;\n\t\t\tif ( dt2 < 1e-4 ) dt2 = dt1;\n\n\t\t\tpx.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\n\t\t\tpy.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\n\t\t\tpz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\n\n\t\t} else if ( this.curveType === 'catmullrom' ) {\n\n\t\t\tpx.initCatmullRom( p0.x, p1.x, p2.x, p3.x, this.tension );\n\t\t\tpy.initCatmullRom( p0.y, p1.y, p2.y, p3.y, this.tension );\n\t\t\tpz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, this.tension );\n\n\t\t}\n\n\t\tpoint.set(\n\t\t\tpx.calc( weight ),\n\t\t\tpy.calc( weight ),\n\t\t\tpz.calc( weight )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.points = [];\n\n\t\tfor ( let i = 0, l = source.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = source.points[ i ];\n\n\t\t\tthis.points.push( point.clone() );\n\n\t\t}\n\n\t\tthis.closed = source.closed;\n\t\tthis.curveType = source.curveType;\n\t\tthis.tension = source.tension;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.points = [];\n\n\t\tfor ( let i = 0, l = this.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = this.points[ i ];\n\t\t\tdata.points.push( point.toArray() );\n\n\t\t}\n\n\t\tdata.closed = this.closed;\n\t\tdata.curveType = this.curveType;\n\t\tdata.tension = this.tension;\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.points = [];\n\n\t\tfor ( let i = 0, l = json.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = json.points[ i ];\n\t\t\tthis.points.push( new Vector3().fromArray( point ) );\n\n\t\t}\n\n\t\tthis.closed = json.closed;\n\t\tthis.curveType = json.curveType;\n\t\tthis.tension = json.tension;\n\n\t\treturn this;\n\n\t}\n\n}\n\n/**\n * Bezier Curves formulas obtained from\n * https://en.wikipedia.org/wiki/B%C3%A9zier_curve\n */\n\nfunction CatmullRom( t, p0, p1, p2, p3 ) {\n\n\tconst v0 = ( p2 - p0 ) * 0.5;\n\tconst v1 = ( p3 - p1 ) * 0.5;\n\tconst t2 = t * t;\n\tconst t3 = t * t2;\n\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n}\n\n//\n\nfunction QuadraticBezierP0( t, p ) {\n\n\tconst k = 1 - t;\n\treturn k * k * p;\n\n}\n\nfunction QuadraticBezierP1( t, p ) {\n\n\treturn 2 * ( 1 - t ) * t * p;\n\n}\n\nfunction QuadraticBezierP2( t, p ) {\n\n\treturn t * t * p;\n\n}\n\nfunction QuadraticBezier( t, p0, p1, p2 ) {\n\n\treturn QuadraticBezierP0( t, p0 ) + QuadraticBezierP1( t, p1 ) +\n\t\tQuadraticBezierP2( t, p2 );\n\n}\n\n//\n\nfunction CubicBezierP0( t, p ) {\n\n\tconst k = 1 - t;\n\treturn k * k * k * p;\n\n}\n\nfunction CubicBezierP1( t, p ) {\n\n\tconst k = 1 - t;\n\treturn 3 * k * k * t * p;\n\n}\n\nfunction CubicBezierP2( t, p ) {\n\n\treturn 3 * ( 1 - t ) * t * t * p;\n\n}\n\nfunction CubicBezierP3( t, p ) {\n\n\treturn t * t * t * p;\n\n}\n\nfunction CubicBezier( t, p0, p1, p2, p3 ) {\n\n\treturn CubicBezierP0( t, p0 ) + CubicBezierP1( t, p1 ) + CubicBezierP2( t, p2 ) +\n\t\tCubicBezierP3( t, p3 );\n\n}\n\nclass CubicBezierCurve extends Curve {\n\n\tconstructor( v0 = new Vector2(), v1 = new Vector2(), v2 = new Vector2(), v3 = new Vector2() ) {\n\n\t\tsuper();\n\n\t\tthis.isCubicBezierCurve = true;\n\n\t\tthis.type = 'CubicBezierCurve';\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\t\tthis.v3 = v3;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector2() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\t\tpoint.set(\n\t\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v0.copy( source.v0 );\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\t\tthis.v3.copy( source.v3 );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v0 = this.v0.toArray();\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\t\tdata.v3 = this.v3.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v0.fromArray( json.v0 );\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\t\tthis.v3.fromArray( json.v3 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass CubicBezierCurve3 extends Curve {\n\n\tconstructor( v0 = new Vector3(), v1 = new Vector3(), v2 = new Vector3(), v3 = new Vector3() ) {\n\n\t\tsuper();\n\n\t\tthis.isCubicBezierCurve3 = true;\n\n\t\tthis.type = 'CubicBezierCurve3';\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\t\tthis.v3 = v3;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector3() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\t\tpoint.set(\n\t\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y ),\n\t\t\tCubicBezier( t, v0.z, v1.z, v2.z, v3.z )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v0.copy( source.v0 );\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\t\tthis.v3.copy( source.v3 );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v0 = this.v0.toArray();\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\t\tdata.v3 = this.v3.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v0.fromArray( json.v0 );\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\t\tthis.v3.fromArray( json.v3 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass LineCurve extends Curve {\n\n\tconstructor( v1 = new Vector2(), v2 = new Vector2() ) {\n\n\t\tsuper();\n\n\t\tthis.isLineCurve = true;\n\n\t\tthis.type = 'LineCurve';\n\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector2() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tif ( t === 1 ) {\n\n\t\t\tpoint.copy( this.v2 );\n\n\t\t} else {\n\n\t\t\tpoint.copy( this.v2 ).sub( this.v1 );\n\t\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t\t}\n\n\t\treturn point;\n\n\t}\n\n\t// Line curve is linear, so we can overwrite default getPointAt\n\tgetPointAt( u, optionalTarget ) {\n\n\t\treturn this.getPoint( u, optionalTarget );\n\n\t}\n\n\tgetTangent( t, optionalTarget ) {\n\n\t\tconst tangent = optionalTarget || new Vector2();\n\n\t\ttangent.copy( this.v2 ).sub( this.v1 ).normalize();\n\n\t\treturn tangent;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass LineCurve3 extends Curve {\n\n\tconstructor( v1 = new Vector3(), v2 = new Vector3() ) {\n\n\t\tsuper();\n\n\t\tthis.isLineCurve3 = true;\n\n\t\tthis.type = 'LineCurve3';\n\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t}\n\tgetPoint( t, optionalTarget = new Vector3() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tif ( t === 1 ) {\n\n\t\t\tpoint.copy( this.v2 );\n\n\t\t} else {\n\n\t\t\tpoint.copy( this.v2 ).sub( this.v1 );\n\t\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t\t}\n\n\t\treturn point;\n\n\t}\n\t// Line curve is linear, so we can overwrite default getPointAt\n\tgetPointAt( u, optionalTarget ) {\n\n\t\treturn this.getPoint( u, optionalTarget );\n\n\t}\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\n\t\treturn this;\n\n\t}\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\n\t\treturn data;\n\n\t}\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass QuadraticBezierCurve extends Curve {\n\n\tconstructor( v0 = new Vector2(), v1 = new Vector2(), v2 = new Vector2() ) {\n\n\t\tsuper();\n\n\t\tthis.isQuadraticBezierCurve = true;\n\n\t\tthis.type = 'QuadraticBezierCurve';\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector2() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\t\tpoint.set(\n\t\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\t\tQuadraticBezier( t, v0.y, v1.y, v2.y )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v0.copy( source.v0 );\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v0 = this.v0.toArray();\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v0.fromArray( json.v0 );\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass QuadraticBezierCurve3 extends Curve {\n\n\tconstructor( v0 = new Vector3(), v1 = new Vector3(), v2 = new Vector3() ) {\n\n\t\tsuper();\n\n\t\tthis.isQuadraticBezierCurve3 = true;\n\n\t\tthis.type = 'QuadraticBezierCurve3';\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector3() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\t\tpoint.set(\n\t\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\t\tQuadraticBezier( t, v0.y, v1.y, v2.y ),\n\t\t\tQuadraticBezier( t, v0.z, v1.z, v2.z )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v0.copy( source.v0 );\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v0 = this.v0.toArray();\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v0.fromArray( json.v0 );\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass SplineCurve extends Curve {\n\n\tconstructor( points = [] ) {\n\n\t\tsuper();\n\n\t\tthis.isSplineCurve = true;\n\n\t\tthis.type = 'SplineCurve';\n\n\t\tthis.points = points;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector2() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst points = this.points;\n\t\tconst p = ( points.length - 1 ) * t;\n\n\t\tconst intPoint = Math.floor( p );\n\t\tconst weight = p - intPoint;\n\n\t\tconst p0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\n\t\tconst p1 = points[ intPoint ];\n\t\tconst p2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\n\t\tconst p3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\n\n\t\tpoint.set(\n\t\t\tCatmullRom( weight, p0.x, p1.x, p2.x, p3.x ),\n\t\t\tCatmullRom( weight, p0.y, p1.y, p2.y, p3.y )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.points = [];\n\n\t\tfor ( let i = 0, l = source.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = source.points[ i ];\n\n\t\t\tthis.points.push( point.clone() );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.points = [];\n\n\t\tfor ( let i = 0, l = this.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = this.points[ i ];\n\t\t\tdata.points.push( point.toArray() );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.points = [];\n\n\t\tfor ( let i = 0, l = json.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = json.points[ i ];\n\t\t\tthis.points.push( new Vector2().fromArray( point ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nvar Curves = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tArcCurve: ArcCurve,\n\tCatmullRomCurve3: CatmullRomCurve3,\n\tCubicBezierCurve: CubicBezierCurve,\n\tCubicBezierCurve3: CubicBezierCurve3,\n\tEllipseCurve: EllipseCurve,\n\tLineCurve: LineCurve,\n\tLineCurve3: LineCurve3,\n\tQuadraticBezierCurve: QuadraticBezierCurve,\n\tQuadraticBezierCurve3: QuadraticBezierCurve3,\n\tSplineCurve: SplineCurve\n});\n\n/**************************************************************\n *\tCurved Path - a curve path is simply a array of connected\n *  curves, but retains the api of a curve\n **************************************************************/\n\nclass CurvePath extends Curve {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.type = 'CurvePath';\n\n\t\tthis.curves = [];\n\t\tthis.autoClose = false; // Automatically closes the path\n\n\t}\n\n\tadd( curve ) {\n\n\t\tthis.curves.push( curve );\n\n\t}\n\n\tclosePath() {\n\n\t\t// Add a line curve if start and end of lines are not connected\n\t\tconst startPoint = this.curves[ 0 ].getPoint( 0 );\n\t\tconst endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\n\n\t\tif ( ! startPoint.equals( endPoint ) ) {\n\n\t\t\tthis.curves.push( new LineCurve( endPoint, startPoint ) );\n\n\t\t}\n\n\t}\n\n\t// To get accurate point with reference to\n\t// entire path distance at time t,\n\t// following has to be done:\n\n\t// 1. Length of each sub path have to be known\n\t// 2. Locate and identify type of curve\n\t// 3. Get t for the curve\n\t// 4. Return curve.getPointAt(t')\n\n\tgetPoint( t, optionalTarget ) {\n\n\t\tconst d = t * this.getLength();\n\t\tconst curveLengths = this.getCurveLengths();\n\t\tlet i = 0;\n\n\t\t// To think about boundaries points.\n\n\t\twhile ( i < curveLengths.length ) {\n\n\t\t\tif ( curveLengths[ i ] >= d ) {\n\n\t\t\t\tconst diff = curveLengths[ i ] - d;\n\t\t\t\tconst curve = this.curves[ i ];\n\n\t\t\t\tconst segmentLength = curve.getLength();\n\t\t\t\tconst u = segmentLength === 0 ? 0 : 1 - diff / segmentLength;\n\n\t\t\t\treturn curve.getPointAt( u, optionalTarget );\n\n\t\t\t}\n\n\t\t\ti ++;\n\n\t\t}\n\n\t\treturn null;\n\n\t\t// loop where sum != 0, sum > d , sum+1 <d\n\n\t}\n\n\t// We cannot use the default THREE.Curve getPoint() with getLength() because in\n\t// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\n\t// getPoint() depends on getLength\n\n\tgetLength() {\n\n\t\tconst lens = this.getCurveLengths();\n\t\treturn lens[ lens.length - 1 ];\n\n\t}\n\n\t// cacheLengths must be recalculated.\n\tupdateArcLengths() {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.cacheLengths = null;\n\t\tthis.getCurveLengths();\n\n\t}\n\n\t// Compute lengths and cache them\n\t// We cannot overwrite getLengths() because UtoT mapping uses it.\n\n\tgetCurveLengths() {\n\n\t\t// We use cache values if curves and cache array are same length\n\n\t\tif ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\n\n\t\t\treturn this.cacheLengths;\n\n\t\t}\n\n\t\t// Get length of sub-curve\n\t\t// Push sums into cached array\n\n\t\tconst lengths = [];\n\t\tlet sums = 0;\n\n\t\tfor ( let i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tsums += this.curves[ i ].getLength();\n\t\t\tlengths.push( sums );\n\n\t\t}\n\n\t\tthis.cacheLengths = lengths;\n\n\t\treturn lengths;\n\n\t}\n\n\tgetSpacedPoints( divisions = 40 ) {\n\n\t\tconst points = [];\n\n\t\tfor ( let i = 0; i <= divisions; i ++ ) {\n\n\t\t\tpoints.push( this.getPoint( i / divisions ) );\n\n\t\t}\n\n\t\tif ( this.autoClose ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t}\n\n\tgetPoints( divisions = 12 ) {\n\n\t\tconst points = [];\n\t\tlet last;\n\n\t\tfor ( let i = 0, curves = this.curves; i < curves.length; i ++ ) {\n\n\t\t\tconst curve = curves[ i ];\n\t\t\tconst resolution = curve.isEllipseCurve ? divisions * 2\n\t\t\t\t: ( curve.isLineCurve || curve.isLineCurve3 ) ? 1\n\t\t\t\t\t: curve.isSplineCurve ? divisions * curve.points.length\n\t\t\t\t\t\t: divisions;\n\n\t\t\tconst pts = curve.getPoints( resolution );\n\n\t\t\tfor ( let j = 0; j < pts.length; j ++ ) {\n\n\t\t\t\tconst point = pts[ j ];\n\n\t\t\t\tif ( last && last.equals( point ) ) continue; // ensures no consecutive points are duplicates\n\n\t\t\t\tpoints.push( point );\n\t\t\t\tlast = point;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.autoClose && points.length > 1 && ! points[ points.length - 1 ].equals( points[ 0 ] ) ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.curves = [];\n\n\t\tfor ( let i = 0, l = source.curves.length; i < l; i ++ ) {\n\n\t\t\tconst curve = source.curves[ i ];\n\n\t\t\tthis.curves.push( curve.clone() );\n\n\t\t}\n\n\t\tthis.autoClose = source.autoClose;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.autoClose = this.autoClose;\n\t\tdata.curves = [];\n\n\t\tfor ( let i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tconst curve = this.curves[ i ];\n\t\t\tdata.curves.push( curve.toJSON() );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.autoClose = json.autoClose;\n\t\tthis.curves = [];\n\n\t\tfor ( let i = 0, l = json.curves.length; i < l; i ++ ) {\n\n\t\t\tconst curve = json.curves[ i ];\n\t\t\tthis.curves.push( new Curves[ curve.type ]().fromJSON( curve ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass Path extends CurvePath {\n\n\tconstructor( points ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'Path';\n\n\t\tthis.currentPoint = new Vector2();\n\n\t\tif ( points ) {\n\n\t\t\tthis.setFromPoints( points );\n\n\t\t}\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tthis.moveTo( points[ 0 ].x, points[ 0 ].y );\n\n\t\tfor ( let i = 1, l = points.length; i < l; i ++ ) {\n\n\t\t\tthis.lineTo( points[ i ].x, points[ i ].y );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tmoveTo( x, y ) {\n\n\t\tthis.currentPoint.set( x, y ); // TODO consider referencing vectors instead of copying?\n\n\t\treturn this;\n\n\t}\n\n\tlineTo( x, y ) {\n\n\t\tconst curve = new LineCurve( this.currentPoint.clone(), new Vector2( x, y ) );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( x, y );\n\n\t\treturn this;\n\n\t}\n\n\tquadraticCurveTo( aCPx, aCPy, aX, aY ) {\n\n\t\tconst curve = new QuadraticBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCPx, aCPy ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t\treturn this;\n\n\t}\n\n\tbezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tconst curve = new CubicBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCP1x, aCP1y ),\n\t\t\tnew Vector2( aCP2x, aCP2y ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t\treturn this;\n\n\t}\n\n\tsplineThru( pts /*Array of Vector*/ ) {\n\n\t\tconst npts = [ this.currentPoint.clone() ].concat( pts );\n\n\t\tconst curve = new SplineCurve( npts );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.copy( pts[ pts.length - 1 ] );\n\n\t\treturn this;\n\n\t}\n\n\tarc( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tconst x0 = this.currentPoint.x;\n\t\tconst y0 = this.currentPoint.y;\n\n\t\tthis.absarc( aX + x0, aY + y0, aRadius,\n\t\t\taStartAngle, aEndAngle, aClockwise );\n\n\t\treturn this;\n\n\t}\n\n\tabsarc( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tthis.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\t\treturn this;\n\n\t}\n\n\tellipse( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tconst x0 = this.currentPoint.x;\n\t\tconst y0 = this.currentPoint.y;\n\n\t\tthis.absellipse( aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\treturn this;\n\n\t}\n\n\tabsellipse( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tconst curve = new EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\tif ( this.curves.length > 0 ) {\n\n\t\t\t// if a previous curve is present, attempt to join\n\t\t\tconst firstPoint = curve.getPoint( 0 );\n\n\t\t\tif ( ! firstPoint.equals( this.currentPoint ) ) {\n\n\t\t\t\tthis.lineTo( firstPoint.x, firstPoint.y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.curves.push( curve );\n\n\t\tconst lastPoint = curve.getPoint( 1 );\n\t\tthis.currentPoint.copy( lastPoint );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.currentPoint.copy( source.currentPoint );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.currentPoint = this.currentPoint.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.currentPoint.fromArray( json.currentPoint );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass LatheGeometry extends BufferGeometry {\n\n\tconstructor( points = [ new Vector2( 0, - 0.5 ), new Vector2( 0.5, 0 ), new Vector2( 0, 0.5 ) ], segments = 12, phiStart = 0, phiLength = Math.PI * 2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'LatheGeometry';\n\n\t\tthis.parameters = {\n\t\t\tpoints: points,\n\t\t\tsegments: segments,\n\t\t\tphiStart: phiStart,\n\t\t\tphiLength: phiLength\n\t\t};\n\n\t\tsegments = Math.floor( segments );\n\n\t\t// clamp phiLength so it's in range of [ 0, 2PI ]\n\n\t\tphiLength = clamp( phiLength, 0, Math.PI * 2 );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst uvs = [];\n\t\tconst initNormals = [];\n\t\tconst normals = [];\n\n\t\t// helper variables\n\n\t\tconst inverseSegments = 1.0 / segments;\n\t\tconst vertex = new Vector3();\n\t\tconst uv = new Vector2();\n\t\tconst normal = new Vector3();\n\t\tconst curNormal = new Vector3();\n\t\tconst prevNormal = new Vector3();\n\t\tlet dx = 0;\n\t\tlet dy = 0;\n\n\t\t// pre-compute normals for initial \"meridian\"\n\n\t\tfor ( let j = 0; j <= ( points.length - 1 ); j ++ ) {\n\n\t\t\tswitch ( j ) {\n\n\t\t\t\tcase 0:\t\t\t\t// special handling for 1st vertex on path\n\n\t\t\t\t\tdx = points[ j + 1 ].x - points[ j ].x;\n\t\t\t\t\tdy = points[ j + 1 ].y - points[ j ].y;\n\n\t\t\t\t\tnormal.x = dy * 1.0;\n\t\t\t\t\tnormal.y = - dx;\n\t\t\t\t\tnormal.z = dy * 0.0;\n\n\t\t\t\t\tprevNormal.copy( normal );\n\n\t\t\t\t\tnormal.normalize();\n\n\t\t\t\t\tinitNormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ( points.length - 1 ):\t// special handling for last Vertex on path\n\n\t\t\t\t\tinitNormals.push( prevNormal.x, prevNormal.y, prevNormal.z );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\t\t\t// default handling for all vertices in between\n\n\t\t\t\t\tdx = points[ j + 1 ].x - points[ j ].x;\n\t\t\t\t\tdy = points[ j + 1 ].y - points[ j ].y;\n\n\t\t\t\t\tnormal.x = dy * 1.0;\n\t\t\t\t\tnormal.y = - dx;\n\t\t\t\t\tnormal.z = dy * 0.0;\n\n\t\t\t\t\tcurNormal.copy( normal );\n\n\t\t\t\t\tnormal.x += prevNormal.x;\n\t\t\t\t\tnormal.y += prevNormal.y;\n\t\t\t\t\tnormal.z += prevNormal.z;\n\n\t\t\t\t\tnormal.normalize();\n\n\t\t\t\t\tinitNormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t\tprevNormal.copy( curNormal );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate vertices, uvs and normals\n\n\t\tfor ( let i = 0; i <= segments; i ++ ) {\n\n\t\t\tconst phi = phiStart + i * inverseSegments * phiLength;\n\n\t\t\tconst sin = Math.sin( phi );\n\t\t\tconst cos = Math.cos( phi );\n\n\t\t\tfor ( let j = 0; j <= ( points.length - 1 ); j ++ ) {\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = points[ j ].x * sin;\n\t\t\t\tvertex.y = points[ j ].y;\n\t\t\t\tvertex.z = points[ j ].x * cos;\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuv.x = i / segments;\n\t\t\t\tuv.y = j / ( points.length - 1 );\n\n\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t\t// normal\n\n\t\t\t\tconst x = initNormals[ 3 * j + 0 ] * sin;\n\t\t\t\tconst y = initNormals[ 3 * j + 1 ];\n\t\t\t\tconst z = initNormals[ 3 * j + 0 ] * cos;\n\n\t\t\t\tnormals.push( x, y, z );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( let i = 0; i < segments; i ++ ) {\n\n\t\t\tfor ( let j = 0; j < ( points.length - 1 ); j ++ ) {\n\n\t\t\t\tconst base = j + i * points.length;\n\n\t\t\t\tconst a = base;\n\t\t\t\tconst b = base + points.length;\n\t\t\t\tconst c = base + points.length + 1;\n\t\t\t\tconst d = base + 1;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( c, d, b );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new LatheGeometry( data.points, data.segments, data.phiStart, data.phiLength );\n\n\t}\n\n}\n\nclass CapsuleGeometry extends LatheGeometry {\n\n\tconstructor( radius = 1, length = 1, capSegments = 4, radialSegments = 8 ) {\n\n\t\tconst path = new Path();\n\t\tpath.absarc( 0, - length / 2, radius, Math.PI * 1.5, 0 );\n\t\tpath.absarc( 0, length / 2, radius, 0, Math.PI * 0.5 );\n\n\t\tsuper( path.getPoints( capSegments ), radialSegments );\n\n\t\tthis.type = 'CapsuleGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\theight: length,\n\t\t\tcapSegments: capSegments,\n\t\t\tradialSegments: radialSegments,\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new CapsuleGeometry( data.radius, data.length, data.capSegments, data.radialSegments );\n\n\t}\n\n}\n\nclass CircleGeometry extends BufferGeometry {\n\n\tconstructor( radius = 1, segments = 32, thetaStart = 0, thetaLength = Math.PI * 2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'CircleGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tsegments: segments,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tsegments = Math.max( 3, segments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tconst vertex = new Vector3();\n\t\tconst uv = new Vector2();\n\n\t\t// center point\n\n\t\tvertices.push( 0, 0, 0 );\n\t\tnormals.push( 0, 0, 1 );\n\t\tuvs.push( 0.5, 0.5 );\n\n\t\tfor ( let s = 0, i = 3; s <= segments; s ++, i += 3 ) {\n\n\t\t\tconst segment = thetaStart + s / segments * thetaLength;\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = radius * Math.cos( segment );\n\t\t\tvertex.y = radius * Math.sin( segment );\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\n\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t// uvs\n\n\t\t\tuv.x = ( vertices[ i ] / radius + 1 ) / 2;\n\t\t\tuv.y = ( vertices[ i + 1 ] / radius + 1 ) / 2;\n\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( let i = 1; i <= segments; i ++ ) {\n\n\t\t\tindices.push( i, i + 1, 0 );\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new CircleGeometry( data.radius, data.segments, data.thetaStart, data.thetaLength );\n\n\t}\n\n}\n\nclass CylinderGeometry extends BufferGeometry {\n\n\tconstructor( radiusTop = 1, radiusBottom = 1, height = 1, radialSegments = 32, heightSegments = 1, openEnded = false, thetaStart = 0, thetaLength = Math.PI * 2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'CylinderGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradiusTop: radiusTop,\n\t\t\tradiusBottom: radiusBottom,\n\t\t\theight: height,\n\t\t\tradialSegments: radialSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\topenEnded: openEnded,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tconst scope = this;\n\n\t\tradialSegments = Math.floor( radialSegments );\n\t\theightSegments = Math.floor( heightSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tlet index = 0;\n\t\tconst indexArray = [];\n\t\tconst halfHeight = height / 2;\n\t\tlet groupStart = 0;\n\n\t\t// generate geometry\n\n\t\tgenerateTorso();\n\n\t\tif ( openEnded === false ) {\n\n\t\t\tif ( radiusTop > 0 ) generateCap( true );\n\t\t\tif ( radiusBottom > 0 ) generateCap( false );\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\tfunction generateTorso() {\n\n\t\t\tconst normal = new Vector3();\n\t\t\tconst vertex = new Vector3();\n\n\t\t\tlet groupCount = 0;\n\n\t\t\t// this will be used to calculate the normal\n\t\t\tconst slope = ( radiusBottom - radiusTop ) / height;\n\n\t\t\t// generate vertices, normals and uvs\n\n\t\t\tfor ( let y = 0; y <= heightSegments; y ++ ) {\n\n\t\t\t\tconst indexRow = [];\n\n\t\t\t\tconst v = y / heightSegments;\n\n\t\t\t\t// calculate the radius of the current row\n\n\t\t\t\tconst radius = v * ( radiusBottom - radiusTop ) + radiusTop;\n\n\t\t\t\tfor ( let x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\t\t\tconst u = x / radialSegments;\n\n\t\t\t\t\tconst theta = u * thetaLength + thetaStart;\n\n\t\t\t\t\tconst sinTheta = Math.sin( theta );\n\t\t\t\t\tconst cosTheta = Math.cos( theta );\n\n\t\t\t\t\t// vertex\n\n\t\t\t\t\tvertex.x = radius * sinTheta;\n\t\t\t\t\tvertex.y = - v * height + halfHeight;\n\t\t\t\t\tvertex.z = radius * cosTheta;\n\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t\t// normal\n\n\t\t\t\t\tnormal.set( sinTheta, slope, cosTheta ).normalize();\n\t\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t\t// uv\n\n\t\t\t\t\tuvs.push( u, 1 - v );\n\n\t\t\t\t\t// save index of vertex in respective row\n\n\t\t\t\t\tindexRow.push( index ++ );\n\n\t\t\t\t}\n\n\t\t\t\t// now save vertices of the row in our index array\n\n\t\t\t\tindexArray.push( indexRow );\n\n\t\t\t}\n\n\t\t\t// generate indices\n\n\t\t\tfor ( let x = 0; x < radialSegments; x ++ ) {\n\n\t\t\t\tfor ( let y = 0; y < heightSegments; y ++ ) {\n\n\t\t\t\t\t// we use the index array to access the correct indices\n\n\t\t\t\t\tconst a = indexArray[ y ][ x ];\n\t\t\t\t\tconst b = indexArray[ y + 1 ][ x ];\n\t\t\t\t\tconst c = indexArray[ y + 1 ][ x + 1 ];\n\t\t\t\t\tconst d = indexArray[ y ][ x + 1 ];\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t\t// update group counter\n\n\t\t\t\t\tgroupCount += 6;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, 0 );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t}\n\n\t\tfunction generateCap( top ) {\n\n\t\t\t// save the index of the first center vertex\n\t\t\tconst centerIndexStart = index;\n\n\t\t\tconst uv = new Vector2();\n\t\t\tconst vertex = new Vector3();\n\n\t\t\tlet groupCount = 0;\n\n\t\t\tconst radius = ( top === true ) ? radiusTop : radiusBottom;\n\t\t\tconst sign = ( top === true ) ? 1 : - 1;\n\n\t\t\t// first we generate the center vertex data of the cap.\n\t\t\t// because the geometry needs one set of uvs per face,\n\t\t\t// we must generate a center vertex per face/segment\n\n\t\t\tfor ( let x = 1; x <= radialSegments; x ++ ) {\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertices.push( 0, halfHeight * sign, 0 );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormals.push( 0, sign, 0 );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( 0.5, 0.5 );\n\n\t\t\t\t// increase index\n\n\t\t\t\tindex ++;\n\n\t\t\t}\n\n\t\t\t// save the index of the last center vertex\n\t\t\tconst centerIndexEnd = index;\n\n\t\t\t// now we generate the surrounding vertices, normals and uvs\n\n\t\t\tfor ( let x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\t\tconst u = x / radialSegments;\n\t\t\t\tconst theta = u * thetaLength + thetaStart;\n\n\t\t\t\tconst cosTheta = Math.cos( theta );\n\t\t\t\tconst sinTheta = Math.sin( theta );\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = radius * sinTheta;\n\t\t\t\tvertex.y = halfHeight * sign;\n\t\t\t\tvertex.z = radius * cosTheta;\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormals.push( 0, sign, 0 );\n\n\t\t\t\t// uv\n\n\t\t\t\tuv.x = ( cosTheta * 0.5 ) + 0.5;\n\t\t\t\tuv.y = ( sinTheta * 0.5 * sign ) + 0.5;\n\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t\t// increase index\n\n\t\t\t\tindex ++;\n\n\t\t\t}\n\n\t\t\t// generate indices\n\n\t\t\tfor ( let x = 0; x < radialSegments; x ++ ) {\n\n\t\t\t\tconst c = centerIndexStart + x;\n\t\t\t\tconst i = centerIndexEnd + x;\n\n\t\t\t\tif ( top === true ) {\n\n\t\t\t\t\t// face top\n\n\t\t\t\t\tindices.push( i, i + 1, c );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// face bottom\n\n\t\t\t\t\tindices.push( i + 1, i, c );\n\n\t\t\t\t}\n\n\t\t\t\tgroupCount += 3;\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, top === true ? 1 : 2 );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t}\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new CylinderGeometry( data.radiusTop, data.radiusBottom, data.height, data.radialSegments, data.heightSegments, data.openEnded, data.thetaStart, data.thetaLength );\n\n\t}\n\n}\n\nclass ConeGeometry extends CylinderGeometry {\n\n\tconstructor( radius = 1, height = 1, radialSegments = 32, heightSegments = 1, openEnded = false, thetaStart = 0, thetaLength = Math.PI * 2 ) {\n\n\t\tsuper( 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\n\n\t\tthis.type = 'ConeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\theight: height,\n\t\t\tradialSegments: radialSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\topenEnded: openEnded,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new ConeGeometry( data.radius, data.height, data.radialSegments, data.heightSegments, data.openEnded, data.thetaStart, data.thetaLength );\n\n\t}\n\n}\n\nclass PolyhedronGeometry extends BufferGeometry {\n\n\tconstructor( vertices = [], indices = [], radius = 1, detail = 0 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'PolyhedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tvertices: vertices,\n\t\t\tindices: indices,\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t\t// default buffer data\n\n\t\tconst vertexBuffer = [];\n\t\tconst uvBuffer = [];\n\n\t\t// the subdivision creates the vertex buffer data\n\n\t\tsubdivide( detail );\n\n\t\t// all vertices should lie on a conceptual sphere with a given radius\n\n\t\tapplyRadius( radius );\n\n\t\t// finally, create the uv data\n\n\t\tgenerateUVs();\n\n\t\t// build non-indexed geometry\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertexBuffer, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( vertexBuffer.slice(), 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvBuffer, 2 ) );\n\n\t\tif ( detail === 0 ) {\n\n\t\t\tthis.computeVertexNormals(); // flat normals\n\n\t\t} else {\n\n\t\t\tthis.normalizeNormals(); // smooth normals\n\n\t\t}\n\n\t\t// helper functions\n\n\t\tfunction subdivide( detail ) {\n\n\t\t\tconst a = new Vector3();\n\t\t\tconst b = new Vector3();\n\t\t\tconst c = new Vector3();\n\n\t\t\t// iterate over all faces and apply a subdivision with the given detail value\n\n\t\t\tfor ( let i = 0; i < indices.length; i += 3 ) {\n\n\t\t\t\t// get the vertices of the face\n\n\t\t\t\tgetVertexByIndex( indices[ i + 0 ], a );\n\t\t\t\tgetVertexByIndex( indices[ i + 1 ], b );\n\t\t\t\tgetVertexByIndex( indices[ i + 2 ], c );\n\n\t\t\t\t// perform subdivision\n\n\t\t\t\tsubdivideFace( a, b, c, detail );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction subdivideFace( a, b, c, detail ) {\n\n\t\t\tconst cols = detail + 1;\n\n\t\t\t// we use this multidimensional array as a data structure for creating the subdivision\n\n\t\t\tconst v = [];\n\n\t\t\t// construct all of the vertices for this subdivision\n\n\t\t\tfor ( let i = 0; i <= cols; i ++ ) {\n\n\t\t\t\tv[ i ] = [];\n\n\t\t\t\tconst aj = a.clone().lerp( c, i / cols );\n\t\t\t\tconst bj = b.clone().lerp( c, i / cols );\n\n\t\t\t\tconst rows = cols - i;\n\n\t\t\t\tfor ( let j = 0; j <= rows; j ++ ) {\n\n\t\t\t\t\tif ( j === 0 && i === cols ) {\n\n\t\t\t\t\t\tv[ i ][ j ] = aj;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tv[ i ][ j ] = aj.clone().lerp( bj, j / rows );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// construct all of the faces\n\n\t\t\tfor ( let i = 0; i < cols; i ++ ) {\n\n\t\t\t\tfor ( let j = 0; j < 2 * ( cols - i ) - 1; j ++ ) {\n\n\t\t\t\t\tconst k = Math.floor( j / 2 );\n\n\t\t\t\t\tif ( j % 2 === 0 ) {\n\n\t\t\t\t\t\tpushVertex( v[ i ][ k + 1 ] );\n\t\t\t\t\t\tpushVertex( v[ i + 1 ][ k ] );\n\t\t\t\t\t\tpushVertex( v[ i ][ k ] );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpushVertex( v[ i ][ k + 1 ] );\n\t\t\t\t\t\tpushVertex( v[ i + 1 ][ k + 1 ] );\n\t\t\t\t\t\tpushVertex( v[ i + 1 ][ k ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction applyRadius( radius ) {\n\n\t\t\tconst vertex = new Vector3();\n\n\t\t\t// iterate over the entire buffer and apply the radius to each vertex\n\n\t\t\tfor ( let i = 0; i < vertexBuffer.length; i += 3 ) {\n\n\t\t\t\tvertex.x = vertexBuffer[ i + 0 ];\n\t\t\t\tvertex.y = vertexBuffer[ i + 1 ];\n\t\t\t\tvertex.z = vertexBuffer[ i + 2 ];\n\n\t\t\t\tvertex.normalize().multiplyScalar( radius );\n\n\t\t\t\tvertexBuffer[ i + 0 ] = vertex.x;\n\t\t\t\tvertexBuffer[ i + 1 ] = vertex.y;\n\t\t\t\tvertexBuffer[ i + 2 ] = vertex.z;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction generateUVs() {\n\n\t\t\tconst vertex = new Vector3();\n\n\t\t\tfor ( let i = 0; i < vertexBuffer.length; i += 3 ) {\n\n\t\t\t\tvertex.x = vertexBuffer[ i + 0 ];\n\t\t\t\tvertex.y = vertexBuffer[ i + 1 ];\n\t\t\t\tvertex.z = vertexBuffer[ i + 2 ];\n\n\t\t\t\tconst u = azimuth( vertex ) / 2 / Math.PI + 0.5;\n\t\t\t\tconst v = inclination( vertex ) / Math.PI + 0.5;\n\t\t\t\tuvBuffer.push( u, 1 - v );\n\n\t\t\t}\n\n\t\t\tcorrectUVs();\n\n\t\t\tcorrectSeam();\n\n\t\t}\n\n\t\tfunction correctSeam() {\n\n\t\t\t// handle case when face straddles the seam, see #3269\n\n\t\t\tfor ( let i = 0; i < uvBuffer.length; i += 6 ) {\n\n\t\t\t\t// uv data of a single face\n\n\t\t\t\tconst x0 = uvBuffer[ i + 0 ];\n\t\t\t\tconst x1 = uvBuffer[ i + 2 ];\n\t\t\t\tconst x2 = uvBuffer[ i + 4 ];\n\n\t\t\t\tconst max = Math.max( x0, x1, x2 );\n\t\t\t\tconst min = Math.min( x0, x1, x2 );\n\n\t\t\t\t// 0.9 is somewhat arbitrary\n\n\t\t\t\tif ( max > 0.9 && min < 0.1 ) {\n\n\t\t\t\t\tif ( x0 < 0.2 ) uvBuffer[ i + 0 ] += 1;\n\t\t\t\t\tif ( x1 < 0.2 ) uvBuffer[ i + 2 ] += 1;\n\t\t\t\t\tif ( x2 < 0.2 ) uvBuffer[ i + 4 ] += 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction pushVertex( vertex ) {\n\n\t\t\tvertexBuffer.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t\tfunction getVertexByIndex( index, vertex ) {\n\n\t\t\tconst stride = index * 3;\n\n\t\t\tvertex.x = vertices[ stride + 0 ];\n\t\t\tvertex.y = vertices[ stride + 1 ];\n\t\t\tvertex.z = vertices[ stride + 2 ];\n\n\t\t}\n\n\t\tfunction correctUVs() {\n\n\t\t\tconst a = new Vector3();\n\t\t\tconst b = new Vector3();\n\t\t\tconst c = new Vector3();\n\n\t\t\tconst centroid = new Vector3();\n\n\t\t\tconst uvA = new Vector2();\n\t\t\tconst uvB = new Vector2();\n\t\t\tconst uvC = new Vector2();\n\n\t\t\tfor ( let i = 0, j = 0; i < vertexBuffer.length; i += 9, j += 6 ) {\n\n\t\t\t\ta.set( vertexBuffer[ i + 0 ], vertexBuffer[ i + 1 ], vertexBuffer[ i + 2 ] );\n\t\t\t\tb.set( vertexBuffer[ i + 3 ], vertexBuffer[ i + 4 ], vertexBuffer[ i + 5 ] );\n\t\t\t\tc.set( vertexBuffer[ i + 6 ], vertexBuffer[ i + 7 ], vertexBuffer[ i + 8 ] );\n\n\t\t\t\tuvA.set( uvBuffer[ j + 0 ], uvBuffer[ j + 1 ] );\n\t\t\t\tuvB.set( uvBuffer[ j + 2 ], uvBuffer[ j + 3 ] );\n\t\t\t\tuvC.set( uvBuffer[ j + 4 ], uvBuffer[ j + 5 ] );\n\n\t\t\t\tcentroid.copy( a ).add( b ).add( c ).divideScalar( 3 );\n\n\t\t\t\tconst azi = azimuth( centroid );\n\n\t\t\t\tcorrectUV( uvA, j + 0, a, azi );\n\t\t\t\tcorrectUV( uvB, j + 2, b, azi );\n\t\t\t\tcorrectUV( uvC, j + 4, c, azi );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction correctUV( uv, stride, vector, azimuth ) {\n\n\t\t\tif ( ( azimuth < 0 ) && ( uv.x === 1 ) ) {\n\n\t\t\t\tuvBuffer[ stride ] = uv.x - 1;\n\n\t\t\t}\n\n\t\t\tif ( ( vector.x === 0 ) && ( vector.z === 0 ) ) {\n\n\t\t\t\tuvBuffer[ stride ] = azimuth / 2 / Math.PI + 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Angle around the Y axis, counter-clockwise when looking from above.\n\n\t\tfunction azimuth( vector ) {\n\n\t\t\treturn Math.atan2( vector.z, - vector.x );\n\n\t\t}\n\n\n\t\t// Angle above the XZ plane.\n\n\t\tfunction inclination( vector ) {\n\n\t\t\treturn Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\n\n\t\t}\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new PolyhedronGeometry( data.vertices, data.indices, data.radius, data.details );\n\n\t}\n\n}\n\nclass DodecahedronGeometry extends PolyhedronGeometry {\n\n\tconstructor( radius = 1, detail = 0 ) {\n\n\t\tconst t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\t\tconst r = 1 / t;\n\n\t\tconst vertices = [\n\n\t\t\t// (±1, ±1, ±1)\n\t\t\t- 1, - 1, - 1,\t- 1, - 1, 1,\n\t\t\t- 1, 1, - 1, - 1, 1, 1,\n\t\t\t1, - 1, - 1, 1, - 1, 1,\n\t\t\t1, 1, - 1, 1, 1, 1,\n\n\t\t\t// (0, ±1/φ, ±φ)\n\t\t\t0, - r, - t, 0, - r, t,\n\t\t\t0, r, - t, 0, r, t,\n\n\t\t\t// (±1/φ, ±φ, 0)\n\t\t\t- r, - t, 0, - r, t, 0,\n\t\t\tr, - t, 0, r, t, 0,\n\n\t\t\t// (±φ, 0, ±1/φ)\n\t\t\t- t, 0, - r, t, 0, - r,\n\t\t\t- t, 0, r, t, 0, r\n\t\t];\n\n\t\tconst indices = [\n\t\t\t3, 11, 7, \t3, 7, 15, \t3, 15, 13,\n\t\t\t7, 19, 17, \t7, 17, 6, \t7, 6, 15,\n\t\t\t17, 4, 8, \t17, 8, 10, \t17, 10, 6,\n\t\t\t8, 0, 16, \t8, 16, 2, \t8, 2, 10,\n\t\t\t0, 12, 1, \t0, 1, 18, \t0, 18, 16,\n\t\t\t6, 10, 2, \t6, 2, 13, \t6, 13, 15,\n\t\t\t2, 16, 18, \t2, 18, 3, \t2, 3, 13,\n\t\t\t18, 1, 9, \t18, 9, 11, \t18, 11, 3,\n\t\t\t4, 14, 12, \t4, 12, 0, \t4, 0, 8,\n\t\t\t11, 9, 5, \t11, 5, 19, \t11, 19, 7,\n\t\t\t19, 5, 14, \t19, 14, 4, \t19, 4, 17,\n\t\t\t1, 12, 14, \t1, 14, 5, \t1, 5, 9\n\t\t];\n\n\t\tsuper( vertices, indices, radius, detail );\n\n\t\tthis.type = 'DodecahedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new DodecahedronGeometry( data.radius, data.detail );\n\n\t}\n\n}\n\nconst _v0 = /*@__PURE__*/ new Vector3();\nconst _v1$1 = /*@__PURE__*/ new Vector3();\nconst _normal = /*@__PURE__*/ new Vector3();\nconst _triangle = /*@__PURE__*/ new Triangle();\n\nclass EdgesGeometry extends BufferGeometry {\n\n\tconstructor( geometry = null, thresholdAngle = 1 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'EdgesGeometry';\n\n\t\tthis.parameters = {\n\t\t\tgeometry: geometry,\n\t\t\tthresholdAngle: thresholdAngle\n\t\t};\n\n\t\tif ( geometry !== null ) {\n\n\t\t\tconst precisionPoints = 4;\n\t\t\tconst precision = Math.pow( 10, precisionPoints );\n\t\t\tconst thresholdDot = Math.cos( DEG2RAD * thresholdAngle );\n\n\t\t\tconst indexAttr = geometry.getIndex();\n\t\t\tconst positionAttr = geometry.getAttribute( 'position' );\n\t\t\tconst indexCount = indexAttr ? indexAttr.count : positionAttr.count;\n\n\t\t\tconst indexArr = [ 0, 0, 0 ];\n\t\t\tconst vertKeys = [ 'a', 'b', 'c' ];\n\t\t\tconst hashes = new Array( 3 );\n\n\t\t\tconst edgeData = {};\n\t\t\tconst vertices = [];\n\t\t\tfor ( let i = 0; i < indexCount; i += 3 ) {\n\n\t\t\t\tif ( indexAttr ) {\n\n\t\t\t\t\tindexArr[ 0 ] = indexAttr.getX( i );\n\t\t\t\t\tindexArr[ 1 ] = indexAttr.getX( i + 1 );\n\t\t\t\t\tindexArr[ 2 ] = indexAttr.getX( i + 2 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tindexArr[ 0 ] = i;\n\t\t\t\t\tindexArr[ 1 ] = i + 1;\n\t\t\t\t\tindexArr[ 2 ] = i + 2;\n\n\t\t\t\t}\n\n\t\t\t\tconst { a, b, c } = _triangle;\n\t\t\t\ta.fromBufferAttribute( positionAttr, indexArr[ 0 ] );\n\t\t\t\tb.fromBufferAttribute( positionAttr, indexArr[ 1 ] );\n\t\t\t\tc.fromBufferAttribute( positionAttr, indexArr[ 2 ] );\n\t\t\t\t_triangle.getNormal( _normal );\n\n\t\t\t\t// create hashes for the edge from the vertices\n\t\t\t\thashes[ 0 ] = `${ Math.round( a.x * precision ) },${ Math.round( a.y * precision ) },${ Math.round( a.z * precision ) }`;\n\t\t\t\thashes[ 1 ] = `${ Math.round( b.x * precision ) },${ Math.round( b.y * precision ) },${ Math.round( b.z * precision ) }`;\n\t\t\t\thashes[ 2 ] = `${ Math.round( c.x * precision ) },${ Math.round( c.y * precision ) },${ Math.round( c.z * precision ) }`;\n\n\t\t\t\t// skip degenerate triangles\n\t\t\t\tif ( hashes[ 0 ] === hashes[ 1 ] || hashes[ 1 ] === hashes[ 2 ] || hashes[ 2 ] === hashes[ 0 ] ) {\n\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\t// iterate over every edge\n\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t// get the first and next vertex making up the edge\n\t\t\t\t\tconst jNext = ( j + 1 ) % 3;\n\t\t\t\t\tconst vecHash0 = hashes[ j ];\n\t\t\t\t\tconst vecHash1 = hashes[ jNext ];\n\t\t\t\t\tconst v0 = _triangle[ vertKeys[ j ] ];\n\t\t\t\t\tconst v1 = _triangle[ vertKeys[ jNext ] ];\n\n\t\t\t\t\tconst hash = `${ vecHash0 }_${ vecHash1 }`;\n\t\t\t\t\tconst reverseHash = `${ vecHash1 }_${ vecHash0 }`;\n\n\t\t\t\t\tif ( reverseHash in edgeData && edgeData[ reverseHash ] ) {\n\n\t\t\t\t\t\t// if we found a sibling edge add it into the vertex array if\n\t\t\t\t\t\t// it meets the angle threshold and delete the edge from the map.\n\t\t\t\t\t\tif ( _normal.dot( edgeData[ reverseHash ].normal ) <= thresholdDot ) {\n\n\t\t\t\t\t\t\tvertices.push( v0.x, v0.y, v0.z );\n\t\t\t\t\t\t\tvertices.push( v1.x, v1.y, v1.z );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tedgeData[ reverseHash ] = null;\n\n\t\t\t\t\t} else if ( ! ( hash in edgeData ) ) {\n\n\t\t\t\t\t\t// if we've already got an edge here then skip adding a new one\n\t\t\t\t\t\tedgeData[ hash ] = {\n\n\t\t\t\t\t\t\tindex0: indexArr[ j ],\n\t\t\t\t\t\t\tindex1: indexArr[ jNext ],\n\t\t\t\t\t\t\tnormal: _normal.clone(),\n\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// iterate over all remaining, unmatched edges and add them to the vertex array\n\t\t\tfor ( const key in edgeData ) {\n\n\t\t\t\tif ( edgeData[ key ] ) {\n\n\t\t\t\t\tconst { index0, index1 } = edgeData[ key ];\n\t\t\t\t\t_v0.fromBufferAttribute( positionAttr, index0 );\n\t\t\t\t\t_v1$1.fromBufferAttribute( positionAttr, index1 );\n\n\t\t\t\t\tvertices.push( _v0.x, _v0.y, _v0.z );\n\t\t\t\t\tvertices.push( _v1$1.x, _v1$1.y, _v1$1.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\n\t\t}\n\n\t}\n\n}\n\nclass Shape extends Path {\n\n\tconstructor( points ) {\n\n\t\tsuper( points );\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.type = 'Shape';\n\n\t\tthis.holes = [];\n\n\t}\n\n\tgetPointsHoles( divisions ) {\n\n\t\tconst holesPts = [];\n\n\t\tfor ( let i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tholesPts[ i ] = this.holes[ i ].getPoints( divisions );\n\n\t\t}\n\n\t\treturn holesPts;\n\n\t}\n\n\t// get points of shape and holes (keypoints based on segments parameter)\n\n\textractPoints( divisions ) {\n\n\t\treturn {\n\n\t\t\tshape: this.getPoints( divisions ),\n\t\t\tholes: this.getPointsHoles( divisions )\n\n\t\t};\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.holes = [];\n\n\t\tfor ( let i = 0, l = source.holes.length; i < l; i ++ ) {\n\n\t\t\tconst hole = source.holes[ i ];\n\n\t\t\tthis.holes.push( hole.clone() );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.holes = [];\n\n\t\tfor ( let i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tconst hole = this.holes[ i ];\n\t\t\tdata.holes.push( hole.toJSON() );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.uuid = json.uuid;\n\t\tthis.holes = [];\n\n\t\tfor ( let i = 0, l = json.holes.length; i < l; i ++ ) {\n\n\t\t\tconst hole = json.holes[ i ];\n\t\t\tthis.holes.push( new Path().fromJSON( hole ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\n/**\n * Port from https://github.com/mapbox/earcut (v2.2.4)\n */\n\nconst Earcut = {\n\n\ttriangulate: function ( data, holeIndices, dim = 2 ) {\n\n\t\tconst hasHoles = holeIndices && holeIndices.length;\n\t\tconst outerLen = hasHoles ? holeIndices[ 0 ] * dim : data.length;\n\t\tlet outerNode = linkedList( data, 0, outerLen, dim, true );\n\t\tconst triangles = [];\n\n\t\tif ( ! outerNode || outerNode.next === outerNode.prev ) return triangles;\n\n\t\tlet minX, minY, maxX, maxY, x, y, invSize;\n\n\t\tif ( hasHoles ) outerNode = eliminateHoles( data, holeIndices, outerNode, dim );\n\n\t\t// if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n\t\tif ( data.length > 80 * dim ) {\n\n\t\t\tminX = maxX = data[ 0 ];\n\t\t\tminY = maxY = data[ 1 ];\n\n\t\t\tfor ( let i = dim; i < outerLen; i += dim ) {\n\n\t\t\t\tx = data[ i ];\n\t\t\t\ty = data[ i + 1 ];\n\t\t\t\tif ( x < minX ) minX = x;\n\t\t\t\tif ( y < minY ) minY = y;\n\t\t\t\tif ( x > maxX ) maxX = x;\n\t\t\t\tif ( y > maxY ) maxY = y;\n\n\t\t\t}\n\n\t\t\t// minX, minY and invSize are later used to transform coords into integers for z-order calculation\n\t\t\tinvSize = Math.max( maxX - minX, maxY - minY );\n\t\t\tinvSize = invSize !== 0 ? 32767 / invSize : 0;\n\n\t\t}\n\n\t\tearcutLinked( outerNode, triangles, dim, minX, minY, invSize, 0 );\n\n\t\treturn triangles;\n\n\t}\n\n};\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList( data, start, end, dim, clockwise ) {\n\n\tlet i, last;\n\n\tif ( clockwise === ( signedArea( data, start, end, dim ) > 0 ) ) {\n\n\t\tfor ( i = start; i < end; i += dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t} else {\n\n\t\tfor ( i = end - dim; i >= start; i -= dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t}\n\n\tif ( last && equals( last, last.next ) ) {\n\n\t\tremoveNode( last );\n\t\tlast = last.next;\n\n\t}\n\n\treturn last;\n\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints( start, end ) {\n\n\tif ( ! start ) return start;\n\tif ( ! end ) end = start;\n\n\tlet p = start,\n\t\tagain;\n\tdo {\n\n\t\tagain = false;\n\n\t\tif ( ! p.steiner && ( equals( p, p.next ) || area( p.prev, p, p.next ) === 0 ) ) {\n\n\t\t\tremoveNode( p );\n\t\t\tp = end = p.prev;\n\t\t\tif ( p === p.next ) break;\n\t\t\tagain = true;\n\n\t\t} else {\n\n\t\t\tp = p.next;\n\n\t\t}\n\n\t} while ( again || p !== end );\n\n\treturn end;\n\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked( ear, triangles, dim, minX, minY, invSize, pass ) {\n\n\tif ( ! ear ) return;\n\n\t// interlink polygon nodes in z-order\n\tif ( ! pass && invSize ) indexCurve( ear, minX, minY, invSize );\n\n\tlet stop = ear,\n\t\tprev, next;\n\n\t// iterate through ears, slicing them one by one\n\twhile ( ear.prev !== ear.next ) {\n\n\t\tprev = ear.prev;\n\t\tnext = ear.next;\n\n\t\tif ( invSize ? isEarHashed( ear, minX, minY, invSize ) : isEar( ear ) ) {\n\n\t\t\t// cut off the triangle\n\t\t\ttriangles.push( prev.i / dim | 0 );\n\t\t\ttriangles.push( ear.i / dim | 0 );\n\t\t\ttriangles.push( next.i / dim | 0 );\n\n\t\t\tremoveNode( ear );\n\n\t\t\t// skipping the next vertex leads to less sliver triangles\n\t\t\tear = next.next;\n\t\t\tstop = next.next;\n\n\t\t\tcontinue;\n\n\t\t}\n\n\t\tear = next;\n\n\t\t// if we looped through the whole remaining polygon and can't find any more ears\n\t\tif ( ear === stop ) {\n\n\t\t\t// try filtering points and slicing again\n\t\t\tif ( ! pass ) {\n\n\t\t\t\tearcutLinked( filterPoints( ear ), triangles, dim, minX, minY, invSize, 1 );\n\n\t\t\t\t// if this didn't work, try curing all small self-intersections locally\n\n\t\t\t} else if ( pass === 1 ) {\n\n\t\t\t\tear = cureLocalIntersections( filterPoints( ear ), triangles, dim );\n\t\t\t\tearcutLinked( ear, triangles, dim, minX, minY, invSize, 2 );\n\n\t\t\t\t// as a last resort, try splitting the remaining polygon into two\n\n\t\t\t} else if ( pass === 2 ) {\n\n\t\t\t\tsplitEarcut( ear, triangles, dim, minX, minY, invSize );\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar( ear ) {\n\n\tconst a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\t// now make sure we don't have other points inside the potential ear\n\tconst ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n\t// triangle bbox; min & max are calculated like this for speed\n\tconst x0 = ax < bx ? ( ax < cx ? ax : cx ) : ( bx < cx ? bx : cx ),\n\t\ty0 = ay < by ? ( ay < cy ? ay : cy ) : ( by < cy ? by : cy ),\n\t\tx1 = ax > bx ? ( ax > cx ? ax : cx ) : ( bx > cx ? bx : cx ),\n\t\ty1 = ay > by ? ( ay > cy ? ay : cy ) : ( by > cy ? by : cy );\n\n\tlet p = c.next;\n\twhile ( p !== a ) {\n\n\t\tif ( p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 &&\n\t\t\tpointInTriangle( ax, ay, bx, by, cx, cy, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.next;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction isEarHashed( ear, minX, minY, invSize ) {\n\n\tconst a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\tconst ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n\t// triangle bbox; min & max are calculated like this for speed\n\tconst x0 = ax < bx ? ( ax < cx ? ax : cx ) : ( bx < cx ? bx : cx ),\n\t\ty0 = ay < by ? ( ay < cy ? ay : cy ) : ( by < cy ? by : cy ),\n\t\tx1 = ax > bx ? ( ax > cx ? ax : cx ) : ( bx > cx ? bx : cx ),\n\t\ty1 = ay > by ? ( ay > cy ? ay : cy ) : ( by > cy ? by : cy );\n\n\t// z-order range for the current triangle bbox;\n\tconst minZ = zOrder( x0, y0, minX, minY, invSize ),\n\t\tmaxZ = zOrder( x1, y1, minX, minY, invSize );\n\n\tlet p = ear.prevZ,\n\t\tn = ear.nextZ;\n\n\t// look for points inside the triangle in both directions\n\twhile ( p && p.z >= minZ && n && n.z <= maxZ ) {\n\n\t\tif ( p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n\t\t\tpointInTriangle( ax, ay, bx, by, cx, cy, p.x, p.y ) && area( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.prevZ;\n\n\t\tif ( n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n\t\t\tpointInTriangle( ax, ay, bx, by, cx, cy, n.x, n.y ) && area( n.prev, n, n.next ) >= 0 ) return false;\n\t\tn = n.nextZ;\n\n\t}\n\n\t// look for remaining points in decreasing z-order\n\twhile ( p && p.z >= minZ ) {\n\n\t\tif ( p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n\t\t\tpointInTriangle( ax, ay, bx, by, cx, cy, p.x, p.y ) && area( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.prevZ;\n\n\t}\n\n\t// look for remaining points in increasing z-order\n\twhile ( n && n.z <= maxZ ) {\n\n\t\tif ( n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n\t\t\tpointInTriangle( ax, ay, bx, by, cx, cy, n.x, n.y ) && area( n.prev, n, n.next ) >= 0 ) return false;\n\t\tn = n.nextZ;\n\n\t}\n\n\treturn true;\n\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections( start, triangles, dim ) {\n\n\tlet p = start;\n\tdo {\n\n\t\tconst a = p.prev,\n\t\t\tb = p.next.next;\n\n\t\tif ( ! equals( a, b ) && intersects( a, p, p.next, b ) && locallyInside( a, b ) && locallyInside( b, a ) ) {\n\n\t\t\ttriangles.push( a.i / dim | 0 );\n\t\t\ttriangles.push( p.i / dim | 0 );\n\t\t\ttriangles.push( b.i / dim | 0 );\n\n\t\t\t// remove two nodes involved\n\t\t\tremoveNode( p );\n\t\t\tremoveNode( p.next );\n\n\t\t\tp = start = b;\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn filterPoints( p );\n\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut( start, triangles, dim, minX, minY, invSize ) {\n\n\t// look for a valid diagonal that divides the polygon into two\n\tlet a = start;\n\tdo {\n\n\t\tlet b = a.next.next;\n\t\twhile ( b !== a.prev ) {\n\n\t\t\tif ( a.i !== b.i && isValidDiagonal( a, b ) ) {\n\n\t\t\t\t// split the polygon in two by the diagonal\n\t\t\t\tlet c = splitPolygon( a, b );\n\n\t\t\t\t// filter colinear points around the cuts\n\t\t\t\ta = filterPoints( a, a.next );\n\t\t\t\tc = filterPoints( c, c.next );\n\n\t\t\t\t// run earcut on each half\n\t\t\t\tearcutLinked( a, triangles, dim, minX, minY, invSize, 0 );\n\t\t\t\tearcutLinked( c, triangles, dim, minX, minY, invSize, 0 );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tb = b.next;\n\n\t\t}\n\n\t\ta = a.next;\n\n\t} while ( a !== start );\n\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles( data, holeIndices, outerNode, dim ) {\n\n\tconst queue = [];\n\tlet i, len, start, end, list;\n\n\tfor ( i = 0, len = holeIndices.length; i < len; i ++ ) {\n\n\t\tstart = holeIndices[ i ] * dim;\n\t\tend = i < len - 1 ? holeIndices[ i + 1 ] * dim : data.length;\n\t\tlist = linkedList( data, start, end, dim, false );\n\t\tif ( list === list.next ) list.steiner = true;\n\t\tqueue.push( getLeftmost( list ) );\n\n\t}\n\n\tqueue.sort( compareX );\n\n\t// process holes from left to right\n\tfor ( i = 0; i < queue.length; i ++ ) {\n\n\t\touterNode = eliminateHole( queue[ i ], outerNode );\n\n\t}\n\n\treturn outerNode;\n\n}\n\nfunction compareX( a, b ) {\n\n\treturn a.x - b.x;\n\n}\n\n// find a bridge between vertices that connects hole with an outer ring and link it\nfunction eliminateHole( hole, outerNode ) {\n\n\tconst bridge = findHoleBridge( hole, outerNode );\n\tif ( ! bridge ) {\n\n\t\treturn outerNode;\n\n\t}\n\n\tconst bridgeReverse = splitPolygon( bridge, hole );\n\n\t// filter collinear points around the cuts\n\tfilterPoints( bridgeReverse, bridgeReverse.next );\n\treturn filterPoints( bridge, bridge.next );\n\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge( hole, outerNode ) {\n\n\tlet p = outerNode,\n\t\tqx = - Infinity,\n\t\tm;\n\n\tconst hx = hole.x, hy = hole.y;\n\n\t// find a segment intersected by a ray from the hole's leftmost point to the left;\n\t// segment's endpoint with lesser x will be potential connection point\n\tdo {\n\n\t\tif ( hy <= p.y && hy >= p.next.y && p.next.y !== p.y ) {\n\n\t\t\tconst x = p.x + ( hy - p.y ) * ( p.next.x - p.x ) / ( p.next.y - p.y );\n\t\t\tif ( x <= hx && x > qx ) {\n\n\t\t\t\tqx = x;\n\t\t\t\tm = p.x < p.next.x ? p : p.next;\n\t\t\t\tif ( x === hx ) return m; // hole touches outer segment; pick leftmost endpoint\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== outerNode );\n\n\tif ( ! m ) return null;\n\n\t// look for points inside the triangle of hole point, segment intersection and endpoint;\n\t// if there are no points found, we have a valid connection;\n\t// otherwise choose the point of the minimum angle with the ray as connection point\n\n\tconst stop = m,\n\t\tmx = m.x,\n\t\tmy = m.y;\n\tlet tanMin = Infinity, tan;\n\n\tp = m;\n\n\tdo {\n\n\t\tif ( hx >= p.x && p.x >= mx && hx !== p.x &&\n\t\t\t\tpointInTriangle( hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y ) ) {\n\n\t\t\ttan = Math.abs( hy - p.y ) / ( hx - p.x ); // tangential\n\n\t\t\tif ( locallyInside( p, hole ) && ( tan < tanMin || ( tan === tanMin && ( p.x > m.x || ( p.x === m.x && sectorContainsSector( m, p ) ) ) ) ) ) {\n\n\t\t\t\tm = p;\n\t\t\t\ttanMin = tan;\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== stop );\n\n\treturn m;\n\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector( m, p ) {\n\n\treturn area( m.prev, m, p.prev ) < 0 && area( p.next, m, m.next ) < 0;\n\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve( start, minX, minY, invSize ) {\n\n\tlet p = start;\n\tdo {\n\n\t\tif ( p.z === 0 ) p.z = zOrder( p.x, p.y, minX, minY, invSize );\n\t\tp.prevZ = p.prev;\n\t\tp.nextZ = p.next;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\tp.prevZ.nextZ = null;\n\tp.prevZ = null;\n\n\tsortLinked( p );\n\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked( list ) {\n\n\tlet i, p, q, e, tail, numMerges, pSize, qSize,\n\t\tinSize = 1;\n\n\tdo {\n\n\t\tp = list;\n\t\tlist = null;\n\t\ttail = null;\n\t\tnumMerges = 0;\n\n\t\twhile ( p ) {\n\n\t\t\tnumMerges ++;\n\t\t\tq = p;\n\t\t\tpSize = 0;\n\t\t\tfor ( i = 0; i < inSize; i ++ ) {\n\n\t\t\t\tpSize ++;\n\t\t\t\tq = q.nextZ;\n\t\t\t\tif ( ! q ) break;\n\n\t\t\t}\n\n\t\t\tqSize = inSize;\n\n\t\t\twhile ( pSize > 0 || ( qSize > 0 && q ) ) {\n\n\t\t\t\tif ( pSize !== 0 && ( qSize === 0 || ! q || p.z <= q.z ) ) {\n\n\t\t\t\t\te = p;\n\t\t\t\t\tp = p.nextZ;\n\t\t\t\t\tpSize --;\n\n\t\t\t\t} else {\n\n\t\t\t\t\te = q;\n\t\t\t\t\tq = q.nextZ;\n\t\t\t\t\tqSize --;\n\n\t\t\t\t}\n\n\t\t\t\tif ( tail ) tail.nextZ = e;\n\t\t\t\telse list = e;\n\n\t\t\t\te.prevZ = tail;\n\t\t\t\ttail = e;\n\n\t\t\t}\n\n\t\t\tp = q;\n\n\t\t}\n\n\t\ttail.nextZ = null;\n\t\tinSize *= 2;\n\n\t} while ( numMerges > 1 );\n\n\treturn list;\n\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder( x, y, minX, minY, invSize ) {\n\n\t// coords are transformed into non-negative 15-bit integer range\n\tx = ( x - minX ) * invSize | 0;\n\ty = ( y - minY ) * invSize | 0;\n\n\tx = ( x | ( x << 8 ) ) & 0x00FF00FF;\n\tx = ( x | ( x << 4 ) ) & 0x0F0F0F0F;\n\tx = ( x | ( x << 2 ) ) & 0x33333333;\n\tx = ( x | ( x << 1 ) ) & 0x55555555;\n\n\ty = ( y | ( y << 8 ) ) & 0x00FF00FF;\n\ty = ( y | ( y << 4 ) ) & 0x0F0F0F0F;\n\ty = ( y | ( y << 2 ) ) & 0x33333333;\n\ty = ( y | ( y << 1 ) ) & 0x55555555;\n\n\treturn x | ( y << 1 );\n\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost( start ) {\n\n\tlet p = start,\n\t\tleftmost = start;\n\tdo {\n\n\t\tif ( p.x < leftmost.x || ( p.x === leftmost.x && p.y < leftmost.y ) ) leftmost = p;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn leftmost;\n\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle( ax, ay, bx, by, cx, cy, px, py ) {\n\n\treturn ( cx - px ) * ( ay - py ) >= ( ax - px ) * ( cy - py ) &&\n           ( ax - px ) * ( by - py ) >= ( bx - px ) * ( ay - py ) &&\n           ( bx - px ) * ( cy - py ) >= ( cx - px ) * ( by - py );\n\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal( a, b ) {\n\n\treturn a.next.i !== b.i && a.prev.i !== b.i && ! intersectsPolygon( a, b ) && // dones't intersect other edges\n           ( locallyInside( a, b ) && locallyInside( b, a ) && middleInside( a, b ) && // locally visible\n            ( area( a.prev, a, b.prev ) || area( a, b.prev, b ) ) || // does not create opposite-facing sectors\n            equals( a, b ) && area( a.prev, a, a.next ) > 0 && area( b.prev, b, b.next ) > 0 ); // special zero-length case\n\n}\n\n// signed area of a triangle\nfunction area( p, q, r ) {\n\n\treturn ( q.y - p.y ) * ( r.x - q.x ) - ( q.x - p.x ) * ( r.y - q.y );\n\n}\n\n// check if two points are equal\nfunction equals( p1, p2 ) {\n\n\treturn p1.x === p2.x && p1.y === p2.y;\n\n}\n\n// check if two segments intersect\nfunction intersects( p1, q1, p2, q2 ) {\n\n\tconst o1 = sign( area( p1, q1, p2 ) );\n\tconst o2 = sign( area( p1, q1, q2 ) );\n\tconst o3 = sign( area( p2, q2, p1 ) );\n\tconst o4 = sign( area( p2, q2, q1 ) );\n\n\tif ( o1 !== o2 && o3 !== o4 ) return true; // general case\n\n\tif ( o1 === 0 && onSegment( p1, p2, q1 ) ) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n\tif ( o2 === 0 && onSegment( p1, q2, q1 ) ) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n\tif ( o3 === 0 && onSegment( p2, p1, q2 ) ) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n\tif ( o4 === 0 && onSegment( p2, q1, q2 ) ) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n\treturn false;\n\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment( p, q, r ) {\n\n\treturn q.x <= Math.max( p.x, r.x ) && q.x >= Math.min( p.x, r.x ) && q.y <= Math.max( p.y, r.y ) && q.y >= Math.min( p.y, r.y );\n\n}\n\nfunction sign( num ) {\n\n\treturn num > 0 ? 1 : num < 0 ? - 1 : 0;\n\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon( a, b ) {\n\n\tlet p = a;\n\tdo {\n\n\t\tif ( p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n\t\t\tintersects( p, p.next, a, b ) ) return true;\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn false;\n\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside( a, b ) {\n\n\treturn area( a.prev, a, a.next ) < 0 ?\n\t\tarea( a, b, a.next ) >= 0 && area( a, a.prev, b ) >= 0 :\n\t\tarea( a, b, a.prev ) < 0 || area( a, a.next, b ) < 0;\n\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside( a, b ) {\n\n\tlet p = a,\n\t\tinside = false;\n\tconst px = ( a.x + b.x ) / 2,\n\t\tpy = ( a.y + b.y ) / 2;\n\tdo {\n\n\t\tif ( ( ( p.y > py ) !== ( p.next.y > py ) ) && p.next.y !== p.y &&\n\t\t\t( px < ( p.next.x - p.x ) * ( py - p.y ) / ( p.next.y - p.y ) + p.x ) )\n\t\t\tinside = ! inside;\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn inside;\n\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon( a, b ) {\n\n\tconst a2 = new Node( a.i, a.x, a.y ),\n\t\tb2 = new Node( b.i, b.x, b.y ),\n\t\tan = a.next,\n\t\tbp = b.prev;\n\n\ta.next = b;\n\tb.prev = a;\n\n\ta2.next = an;\n\tan.prev = a2;\n\n\tb2.next = a2;\n\ta2.prev = b2;\n\n\tbp.next = b2;\n\tb2.prev = bp;\n\n\treturn b2;\n\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode( i, x, y, last ) {\n\n\tconst p = new Node( i, x, y );\n\n\tif ( ! last ) {\n\n\t\tp.prev = p;\n\t\tp.next = p;\n\n\t} else {\n\n\t\tp.next = last.next;\n\t\tp.prev = last;\n\t\tlast.next.prev = p;\n\t\tlast.next = p;\n\n\t}\n\n\treturn p;\n\n}\n\nfunction removeNode( p ) {\n\n\tp.next.prev = p.prev;\n\tp.prev.next = p.next;\n\n\tif ( p.prevZ ) p.prevZ.nextZ = p.nextZ;\n\tif ( p.nextZ ) p.nextZ.prevZ = p.prevZ;\n\n}\n\nfunction Node( i, x, y ) {\n\n\t// vertex index in coordinates array\n\tthis.i = i;\n\n\t// vertex coordinates\n\tthis.x = x;\n\tthis.y = y;\n\n\t// previous and next vertex nodes in a polygon ring\n\tthis.prev = null;\n\tthis.next = null;\n\n\t// z-order curve value\n\tthis.z = 0;\n\n\t// previous and next nodes in z-order\n\tthis.prevZ = null;\n\tthis.nextZ = null;\n\n\t// indicates whether this is a steiner point\n\tthis.steiner = false;\n\n}\n\nfunction signedArea( data, start, end, dim ) {\n\n\tlet sum = 0;\n\tfor ( let i = start, j = end - dim; i < end; i += dim ) {\n\n\t\tsum += ( data[ j ] - data[ i ] ) * ( data[ i + 1 ] + data[ j + 1 ] );\n\t\tj = i;\n\n\t}\n\n\treturn sum;\n\n}\n\nclass ShapeUtils {\n\n\t// calculate area of the contour polygon\n\n\tstatic area( contour ) {\n\n\t\tconst n = contour.length;\n\t\tlet a = 0.0;\n\n\t\tfor ( let p = n - 1, q = 0; q < n; p = q ++ ) {\n\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\n\n\t\t}\n\n\t\treturn a * 0.5;\n\n\t}\n\n\tstatic isClockWise( pts ) {\n\n\t\treturn ShapeUtils.area( pts ) < 0;\n\n\t}\n\n\tstatic triangulateShape( contour, holes ) {\n\n\t\tconst vertices = []; // flat array of vertices like [ x0,y0, x1,y1, x2,y2, ... ]\n\t\tconst holeIndices = []; // array of hole indices\n\t\tconst faces = []; // final array of vertex indices like [ [ a,b,d ], [ b,c,d ] ]\n\n\t\tremoveDupEndPts( contour );\n\t\taddContour( vertices, contour );\n\n\t\t//\n\n\t\tlet holeIndex = contour.length;\n\n\t\tholes.forEach( removeDupEndPts );\n\n\t\tfor ( let i = 0; i < holes.length; i ++ ) {\n\n\t\t\tholeIndices.push( holeIndex );\n\t\t\tholeIndex += holes[ i ].length;\n\t\t\taddContour( vertices, holes[ i ] );\n\n\t\t}\n\n\t\t//\n\n\t\tconst triangles = Earcut.triangulate( vertices, holeIndices );\n\n\t\t//\n\n\t\tfor ( let i = 0; i < triangles.length; i += 3 ) {\n\n\t\t\tfaces.push( triangles.slice( i, i + 3 ) );\n\n\t\t}\n\n\t\treturn faces;\n\n\t}\n\n}\n\nfunction removeDupEndPts( points ) {\n\n\tconst l = points.length;\n\n\tif ( l > 2 && points[ l - 1 ].equals( points[ 0 ] ) ) {\n\n\t\tpoints.pop();\n\n\t}\n\n}\n\nfunction addContour( vertices, contour ) {\n\n\tfor ( let i = 0; i < contour.length; i ++ ) {\n\n\t\tvertices.push( contour[ i ].x );\n\t\tvertices.push( contour[ i ].y );\n\n\t}\n\n}\n\n/**\n * Creates extruded geometry from a path shape.\n *\n * parameters = {\n *\n *  curveSegments: <int>, // number of points on the curves\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\n *  depth: <float>, // Depth to extrude the shape\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\n *  bevelSize: <float>, // how far from shape outline (including bevelOffset) is bevel\n *  bevelOffset: <float>, // how far from shape outline does bevel start\n *  bevelSegments: <int>, // number of bevel layers\n *\n *  extrudePath: <THREE.Curve> // curve to extrude shape along\n *\n *  UVGenerator: <Object> // object that provides UV generator functions\n *\n * }\n */\n\nclass ExtrudeGeometry extends BufferGeometry {\n\n\tconstructor( shapes = new Shape( [ new Vector2( 0.5, 0.5 ), new Vector2( - 0.5, 0.5 ), new Vector2( - 0.5, - 0.5 ), new Vector2( 0.5, - 0.5 ) ] ), options = {} ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'ExtrudeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tshapes: shapes,\n\t\t\toptions: options\n\t\t};\n\n\t\tshapes = Array.isArray( shapes ) ? shapes : [ shapes ];\n\n\t\tconst scope = this;\n\n\t\tconst verticesArray = [];\n\t\tconst uvArray = [];\n\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tconst shape = shapes[ i ];\n\t\t\taddShape( shape );\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( verticesArray, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvArray, 2 ) );\n\n\t\tthis.computeVertexNormals();\n\n\t\t// functions\n\n\t\tfunction addShape( shape ) {\n\n\t\t\tconst placeholder = [];\n\n\t\t\t// options\n\n\t\t\tconst curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\n\t\t\tconst steps = options.steps !== undefined ? options.steps : 1;\n\t\t\tconst depth = options.depth !== undefined ? options.depth : 1;\n\n\t\t\tlet bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true;\n\t\t\tlet bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 0.2;\n\t\t\tlet bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 0.1;\n\t\t\tlet bevelOffset = options.bevelOffset !== undefined ? options.bevelOffset : 0;\n\t\t\tlet bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\n\n\t\t\tconst extrudePath = options.extrudePath;\n\n\t\t\tconst uvgen = options.UVGenerator !== undefined ? options.UVGenerator : WorldUVGenerator;\n\n\t\t\t//\n\n\t\t\tlet extrudePts, extrudeByPath = false;\n\t\t\tlet splineTube, binormal, normal, position2;\n\n\t\t\tif ( extrudePath ) {\n\n\t\t\t\textrudePts = extrudePath.getSpacedPoints( steps );\n\n\t\t\t\textrudeByPath = true;\n\t\t\t\tbevelEnabled = false; // bevels not supported for path extrusion\n\n\t\t\t\t// SETUP TNB variables\n\n\t\t\t\t// TODO1 - have a .isClosed in spline?\n\n\t\t\t\tsplineTube = extrudePath.computeFrenetFrames( steps, false );\n\n\t\t\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\n\n\t\t\t\tbinormal = new Vector3();\n\t\t\t\tnormal = new Vector3();\n\t\t\t\tposition2 = new Vector3();\n\n\t\t\t}\n\n\t\t\t// Safeguards if bevels are not enabled\n\n\t\t\tif ( ! bevelEnabled ) {\n\n\t\t\t\tbevelSegments = 0;\n\t\t\t\tbevelThickness = 0;\n\t\t\t\tbevelSize = 0;\n\t\t\t\tbevelOffset = 0;\n\n\t\t\t}\n\n\t\t\t// Variables initialization\n\n\t\t\tconst shapePoints = shape.extractPoints( curveSegments );\n\n\t\t\tlet vertices = shapePoints.shape;\n\t\t\tconst holes = shapePoints.holes;\n\n\t\t\tconst reverse = ! ShapeUtils.isClockWise( vertices );\n\n\t\t\tif ( reverse ) {\n\n\t\t\t\tvertices = vertices.reverse();\n\n\t\t\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\n\t\t\t\t\tif ( ShapeUtils.isClockWise( ahole ) ) {\n\n\t\t\t\t\t\tholes[ h ] = ahole.reverse();\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tconst faces = ShapeUtils.triangulateShape( vertices, holes );\n\n\t\t\t/* Vertices */\n\n\t\t\tconst contour = vertices; // vertices has all points but contour has only points of circumference\n\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tconst ahole = holes[ h ];\n\n\t\t\t\tvertices = vertices.concat( ahole );\n\n\t\t\t}\n\n\n\t\t\tfunction scalePt2( pt, vec, size ) {\n\n\t\t\t\tif ( ! vec ) console.error( 'THREE.ExtrudeGeometry: vec does not exist' );\n\n\t\t\t\treturn vec.clone().multiplyScalar( size ).add( pt );\n\n\t\t\t}\n\n\t\t\tconst vlen = vertices.length, flen = faces.length;\n\n\n\t\t\t// Find directions for point movement\n\n\n\t\t\tfunction getBevelVec( inPt, inPrev, inNext ) {\n\n\t\t\t\t// computes for inPt the corresponding point inPt' on a new contour\n\t\t\t\t//   shifted by 1 unit (length of normalized vector) to the left\n\t\t\t\t// if we walk along contour clockwise, this new contour is outside the old one\n\t\t\t\t//\n\t\t\t\t// inPt' is the intersection of the two lines parallel to the two\n\t\t\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\n\n\t\t\t\tlet v_trans_x, v_trans_y, shrink_by; // resulting translation vector for inPt\n\n\t\t\t\t// good reading for geometry algorithms (here: line-line intersection)\n\t\t\t\t// http://geomalgorithms.com/a05-_intersect-1.html\n\n\t\t\t\tconst v_prev_x = inPt.x - inPrev.x,\n\t\t\t\t\tv_prev_y = inPt.y - inPrev.y;\n\t\t\t\tconst v_next_x = inNext.x - inPt.x,\n\t\t\t\t\tv_next_y = inNext.y - inPt.y;\n\n\t\t\t\tconst v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\n\n\t\t\t\t// check for collinear edges\n\t\t\t\tconst collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\t\tif ( Math.abs( collinear0 ) > Number.EPSILON ) {\n\n\t\t\t\t\t// not collinear\n\n\t\t\t\t\t// length of vectors for normalizing\n\n\t\t\t\t\tconst v_prev_len = Math.sqrt( v_prev_lensq );\n\t\t\t\t\tconst v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\n\n\t\t\t\t\t// shift adjacent points by unit vectors to the left\n\n\t\t\t\t\tconst ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\n\t\t\t\t\tconst ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\n\n\t\t\t\t\tconst ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\n\t\t\t\t\tconst ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\n\n\t\t\t\t\t// scaling factor for v_prev to intersection point\n\n\t\t\t\t\tconst sf = ( ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\n\t\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x ) /\n\t\t\t\t\t\t( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\t\t\t// vector from inPt to intersection point\n\n\t\t\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\n\t\t\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\n\n\t\t\t\t\t// Don't normalize!, otherwise sharp corners become ugly\n\t\t\t\t\t//  but prevent crazy spikes\n\t\t\t\t\tconst v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\n\t\t\t\t\tif ( v_trans_lensq <= 2 ) {\n\n\t\t\t\t\t\treturn new Vector2( v_trans_x, v_trans_y );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// handle special case of collinear edges\n\n\t\t\t\t\tlet direction_eq = false; // assumes: opposite\n\n\t\t\t\t\tif ( v_prev_x > Number.EPSILON ) {\n\n\t\t\t\t\t\tif ( v_next_x > Number.EPSILON ) {\n\n\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( v_prev_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\t\tif ( v_next_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\n\n\t\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( direction_eq ) {\n\n\t\t\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\n\t\t\t\t\t\tv_trans_x = - v_prev_y;\n\t\t\t\t\t\tv_trans_y = v_prev_x;\n\t\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\n\t\t\t\t\t\tv_trans_x = v_prev_x;\n\t\t\t\t\t\tv_trans_y = v_prev_y;\n\t\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn new Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\n\n\t\t\t}\n\n\n\t\t\tconst contourMovements = [];\n\n\t\t\tfor ( let i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\t\tif ( j === il ) j = 0;\n\t\t\t\tif ( k === il ) k = 0;\n\n\t\t\t\t//  (j)---(i)---(k)\n\t\t\t\t// console.log('i,j,k', i, j , k)\n\n\t\t\t\tcontourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\n\n\t\t\t}\n\n\t\t\tconst holesMovements = [];\n\t\t\tlet oneHoleMovements, verticesMovements = contourMovements.concat();\n\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tconst ahole = holes[ h ];\n\n\t\t\t\toneHoleMovements = [];\n\n\t\t\t\tfor ( let i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\t\t\tif ( j === il ) j = 0;\n\t\t\t\t\tif ( k === il ) k = 0;\n\n\t\t\t\t\t//  (j)---(i)---(k)\n\t\t\t\t\toneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\n\n\t\t\t\t}\n\n\t\t\t\tholesMovements.push( oneHoleMovements );\n\t\t\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\n\n\t\t\t}\n\n\n\t\t\t// Loop bevelSegments, 1 for the front, 1 for the back\n\n\t\t\tfor ( let b = 0; b < bevelSegments; b ++ ) {\n\n\t\t\t\t//for ( b = bevelSegments; b > 0; b -- ) {\n\n\t\t\t\tconst t = b / bevelSegments;\n\t\t\t\tconst z = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\t\t\tconst bs = bevelSize * Math.sin( t * Math.PI / 2 ) + bevelOffset;\n\n\t\t\t\t// contract shape\n\n\t\t\t\tfor ( let i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst vert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\n\t\t\t\t\tv( vert.x, vert.y, - z );\n\n\t\t\t\t}\n\n\t\t\t\t// expand holes\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\t\t\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\t\t\tfor ( let i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst vert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\t\t\tv( vert.x, vert.y, - z );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst bs = bevelSize + bevelOffset;\n\n\t\t\t// Back facing vertices\n\n\t\t\tfor ( let i = 0; i < vlen; i ++ ) {\n\n\t\t\t\tconst vert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\tv( vert.x, vert.y, 0 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\n\n\t\t\t\t\tnormal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\n\t\t\t\t\tbinormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\n\n\t\t\t\t\tposition2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\n\n\t\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Add stepped vertices...\n\t\t\t// Including front facing vertices\n\n\t\t\tfor ( let s = 1; s <= steps; s ++ ) {\n\n\t\t\t\tfor ( let i = 0; i < vlen; i ++ ) {\n\n\t\t\t\t\tconst vert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\t\tv( vert.x, vert.y, depth / steps * s );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\n\n\t\t\t\t\t\tnormal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\n\t\t\t\t\t\tbinormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\n\n\t\t\t\t\t\tposition2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\n\n\t\t\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t// Add bevel segments planes\n\n\t\t\t//for ( b = 1; b <= bevelSegments; b ++ ) {\n\t\t\tfor ( let b = bevelSegments - 1; b >= 0; b -- ) {\n\n\t\t\t\tconst t = b / bevelSegments;\n\t\t\t\tconst z = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\t\t\tconst bs = bevelSize * Math.sin( t * Math.PI / 2 ) + bevelOffset;\n\n\t\t\t\t// contract shape\n\n\t\t\t\tfor ( let i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst vert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\t\t\t\t\tv( vert.x, vert.y, depth + z );\n\n\t\t\t\t}\n\n\t\t\t\t// expand holes\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\t\t\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\t\t\tfor ( let i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst vert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\t\t\tv( vert.x, vert.y, depth + z );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t/* Faces */\n\n\t\t\t// Top and bottom faces\n\n\t\t\tbuildLidFaces();\n\n\t\t\t// Sides faces\n\n\t\t\tbuildSideFaces();\n\n\n\t\t\t/////  Internal functions\n\n\t\t\tfunction buildLidFaces() {\n\n\t\t\t\tconst start = verticesArray.length / 3;\n\n\t\t\t\tif ( bevelEnabled ) {\n\n\t\t\t\t\tlet layer = 0; // steps + 1\n\t\t\t\t\tlet offset = vlen * layer;\n\n\t\t\t\t\t// Bottom faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tlayer = steps + bevelSegments * 2;\n\t\t\t\t\toffset = vlen * layer;\n\n\t\t\t\t\t// Top faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Bottom faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Top faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 0 );\n\n\t\t\t}\n\n\t\t\t// Create faces for the z-sides of the shape\n\n\t\t\tfunction buildSideFaces() {\n\n\t\t\t\tconst start = verticesArray.length / 3;\n\t\t\t\tlet layeroffset = 0;\n\t\t\t\tsidewalls( contour, layeroffset );\n\t\t\t\tlayeroffset += contour.length;\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\t\t\t\t\tsidewalls( ahole, layeroffset );\n\n\t\t\t\t\t//, true\n\t\t\t\t\tlayeroffset += ahole.length;\n\n\t\t\t\t}\n\n\n\t\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 1 );\n\n\n\t\t\t}\n\n\t\t\tfunction sidewalls( contour, layeroffset ) {\n\n\t\t\t\tlet i = contour.length;\n\n\t\t\t\twhile ( -- i >= 0 ) {\n\n\t\t\t\t\tconst j = i;\n\t\t\t\t\tlet k = i - 1;\n\t\t\t\t\tif ( k < 0 ) k = contour.length - 1;\n\n\t\t\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\n\n\t\t\t\t\tfor ( let s = 0, sl = ( steps + bevelSegments * 2 ); s < sl; s ++ ) {\n\n\t\t\t\t\t\tconst slen1 = vlen * s;\n\t\t\t\t\t\tconst slen2 = vlen * ( s + 1 );\n\n\t\t\t\t\t\tconst a = layeroffset + j + slen1,\n\t\t\t\t\t\t\tb = layeroffset + k + slen1,\n\t\t\t\t\t\t\tc = layeroffset + k + slen2,\n\t\t\t\t\t\t\td = layeroffset + j + slen2;\n\n\t\t\t\t\t\tf4( a, b, c, d );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction v( x, y, z ) {\n\n\t\t\t\tplaceholder.push( x );\n\t\t\t\tplaceholder.push( y );\n\t\t\t\tplaceholder.push( z );\n\n\t\t\t}\n\n\n\t\t\tfunction f3( a, b, c ) {\n\n\t\t\t\taddVertex( a );\n\t\t\t\taddVertex( b );\n\t\t\t\taddVertex( c );\n\n\t\t\t\tconst nextIndex = verticesArray.length / 3;\n\t\t\t\tconst uvs = uvgen.generateTopUV( scope, verticesArray, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\n\n\t\t\t\taddUV( uvs[ 0 ] );\n\t\t\t\taddUV( uvs[ 1 ] );\n\t\t\t\taddUV( uvs[ 2 ] );\n\n\t\t\t}\n\n\t\t\tfunction f4( a, b, c, d ) {\n\n\t\t\t\taddVertex( a );\n\t\t\t\taddVertex( b );\n\t\t\t\taddVertex( d );\n\n\t\t\t\taddVertex( b );\n\t\t\t\taddVertex( c );\n\t\t\t\taddVertex( d );\n\n\n\t\t\t\tconst nextIndex = verticesArray.length / 3;\n\t\t\t\tconst uvs = uvgen.generateSideWallUV( scope, verticesArray, nextIndex - 6, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\n\n\t\t\t\taddUV( uvs[ 0 ] );\n\t\t\t\taddUV( uvs[ 1 ] );\n\t\t\t\taddUV( uvs[ 3 ] );\n\n\t\t\t\taddUV( uvs[ 1 ] );\n\t\t\t\taddUV( uvs[ 2 ] );\n\t\t\t\taddUV( uvs[ 3 ] );\n\n\t\t\t}\n\n\t\t\tfunction addVertex( index ) {\n\n\t\t\t\tverticesArray.push( placeholder[ index * 3 + 0 ] );\n\t\t\t\tverticesArray.push( placeholder[ index * 3 + 1 ] );\n\t\t\t\tverticesArray.push( placeholder[ index * 3 + 2 ] );\n\n\t\t\t}\n\n\n\t\t\tfunction addUV( vector2 ) {\n\n\t\t\t\tuvArray.push( vector2.x );\n\t\t\t\tuvArray.push( vector2.y );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tconst shapes = this.parameters.shapes;\n\t\tconst options = this.parameters.options;\n\n\t\treturn toJSON$1( shapes, options, data );\n\n\t}\n\n\tstatic fromJSON( data, shapes ) {\n\n\t\tconst geometryShapes = [];\n\n\t\tfor ( let j = 0, jl = data.shapes.length; j < jl; j ++ ) {\n\n\t\t\tconst shape = shapes[ data.shapes[ j ] ];\n\n\t\t\tgeometryShapes.push( shape );\n\n\t\t}\n\n\t\tconst extrudePath = data.options.extrudePath;\n\n\t\tif ( extrudePath !== undefined ) {\n\n\t\t\tdata.options.extrudePath = new Curves[ extrudePath.type ]().fromJSON( extrudePath );\n\n\t\t}\n\n\t\treturn new ExtrudeGeometry( geometryShapes, data.options );\n\n\t}\n\n}\n\nconst WorldUVGenerator = {\n\n\tgenerateTopUV: function ( geometry, vertices, indexA, indexB, indexC ) {\n\n\t\tconst a_x = vertices[ indexA * 3 ];\n\t\tconst a_y = vertices[ indexA * 3 + 1 ];\n\t\tconst b_x = vertices[ indexB * 3 ];\n\t\tconst b_y = vertices[ indexB * 3 + 1 ];\n\t\tconst c_x = vertices[ indexC * 3 ];\n\t\tconst c_y = vertices[ indexC * 3 + 1 ];\n\n\t\treturn [\n\t\t\tnew Vector2( a_x, a_y ),\n\t\t\tnew Vector2( b_x, b_y ),\n\t\t\tnew Vector2( c_x, c_y )\n\t\t];\n\n\t},\n\n\tgenerateSideWallUV: function ( geometry, vertices, indexA, indexB, indexC, indexD ) {\n\n\t\tconst a_x = vertices[ indexA * 3 ];\n\t\tconst a_y = vertices[ indexA * 3 + 1 ];\n\t\tconst a_z = vertices[ indexA * 3 + 2 ];\n\t\tconst b_x = vertices[ indexB * 3 ];\n\t\tconst b_y = vertices[ indexB * 3 + 1 ];\n\t\tconst b_z = vertices[ indexB * 3 + 2 ];\n\t\tconst c_x = vertices[ indexC * 3 ];\n\t\tconst c_y = vertices[ indexC * 3 + 1 ];\n\t\tconst c_z = vertices[ indexC * 3 + 2 ];\n\t\tconst d_x = vertices[ indexD * 3 ];\n\t\tconst d_y = vertices[ indexD * 3 + 1 ];\n\t\tconst d_z = vertices[ indexD * 3 + 2 ];\n\n\t\tif ( Math.abs( a_y - b_y ) < Math.abs( a_x - b_x ) ) {\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a_x, 1 - a_z ),\n\t\t\t\tnew Vector2( b_x, 1 - b_z ),\n\t\t\t\tnew Vector2( c_x, 1 - c_z ),\n\t\t\t\tnew Vector2( d_x, 1 - d_z )\n\t\t\t];\n\n\t\t} else {\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a_y, 1 - a_z ),\n\t\t\t\tnew Vector2( b_y, 1 - b_z ),\n\t\t\t\tnew Vector2( c_y, 1 - c_z ),\n\t\t\t\tnew Vector2( d_y, 1 - d_z )\n\t\t\t];\n\n\t\t}\n\n\t}\n\n};\n\nfunction toJSON$1( shapes, options, data ) {\n\n\tdata.shapes = [];\n\n\tif ( Array.isArray( shapes ) ) {\n\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tconst shape = shapes[ i ];\n\n\t\t\tdata.shapes.push( shape.uuid );\n\n\t\t}\n\n\t} else {\n\n\t\tdata.shapes.push( shapes.uuid );\n\n\t}\n\n\tdata.options = Object.assign( {}, options );\n\n\tif ( options.extrudePath !== undefined ) data.options.extrudePath = options.extrudePath.toJSON();\n\n\treturn data;\n\n}\n\nclass IcosahedronGeometry extends PolyhedronGeometry {\n\n\tconstructor( radius = 1, detail = 0 ) {\n\n\t\tconst t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\n\t\tconst vertices = [\n\t\t\t- 1, t, 0, \t1, t, 0, \t- 1, - t, 0, \t1, - t, 0,\n\t\t\t0, - 1, t, \t0, 1, t,\t0, - 1, - t, \t0, 1, - t,\n\t\t\tt, 0, - 1, \tt, 0, 1, \t- t, 0, - 1, \t- t, 0, 1\n\t\t];\n\n\t\tconst indices = [\n\t\t\t0, 11, 5, \t0, 5, 1, \t0, 1, 7, \t0, 7, 10, \t0, 10, 11,\n\t\t\t1, 5, 9, \t5, 11, 4,\t11, 10, 2,\t10, 7, 6,\t7, 1, 8,\n\t\t\t3, 9, 4, \t3, 4, 2,\t3, 2, 6,\t3, 6, 8,\t3, 8, 9,\n\t\t\t4, 9, 5, \t2, 4, 11,\t6, 2, 10,\t8, 6, 7,\t9, 8, 1\n\t\t];\n\n\t\tsuper( vertices, indices, radius, detail );\n\n\t\tthis.type = 'IcosahedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new IcosahedronGeometry( data.radius, data.detail );\n\n\t}\n\n}\n\nclass OctahedronGeometry extends PolyhedronGeometry {\n\n\tconstructor( radius = 1, detail = 0 ) {\n\n\t\tconst vertices = [\n\t\t\t1, 0, 0, \t- 1, 0, 0,\t0, 1, 0,\n\t\t\t0, - 1, 0, \t0, 0, 1,\t0, 0, - 1\n\t\t];\n\n\t\tconst indices = [\n\t\t\t0, 2, 4,\t0, 4, 3,\t0, 3, 5,\n\t\t\t0, 5, 2,\t1, 2, 5,\t1, 5, 3,\n\t\t\t1, 3, 4,\t1, 4, 2\n\t\t];\n\n\t\tsuper( vertices, indices, radius, detail );\n\n\t\tthis.type = 'OctahedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new OctahedronGeometry( data.radius, data.detail );\n\n\t}\n\n}\n\nclass RingGeometry extends BufferGeometry {\n\n\tconstructor( innerRadius = 0.5, outerRadius = 1, thetaSegments = 32, phiSegments = 1, thetaStart = 0, thetaLength = Math.PI * 2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'RingGeometry';\n\n\t\tthis.parameters = {\n\t\t\tinnerRadius: innerRadius,\n\t\t\touterRadius: outerRadius,\n\t\t\tthetaSegments: thetaSegments,\n\t\t\tphiSegments: phiSegments,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tthetaSegments = Math.max( 3, thetaSegments );\n\t\tphiSegments = Math.max( 1, phiSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// some helper variables\n\n\t\tlet radius = innerRadius;\n\t\tconst radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\n\t\tconst vertex = new Vector3();\n\t\tconst uv = new Vector2();\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( let j = 0; j <= phiSegments; j ++ ) {\n\n\t\t\tfor ( let i = 0; i <= thetaSegments; i ++ ) {\n\n\t\t\t\t// values are generate from the inside of the ring to the outside\n\n\t\t\t\tconst segment = thetaStart + i / thetaSegments * thetaLength;\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = radius * Math.cos( segment );\n\t\t\t\tvertex.y = radius * Math.sin( segment );\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t\t// uv\n\n\t\t\t\tuv.x = ( vertex.x / outerRadius + 1 ) / 2;\n\t\t\t\tuv.y = ( vertex.y / outerRadius + 1 ) / 2;\n\n\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t}\n\n\t\t\t// increase the radius for next row of vertices\n\n\t\t\tradius += radiusStep;\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( let j = 0; j < phiSegments; j ++ ) {\n\n\t\t\tconst thetaSegmentLevel = j * ( thetaSegments + 1 );\n\n\t\t\tfor ( let i = 0; i < thetaSegments; i ++ ) {\n\n\t\t\t\tconst segment = i + thetaSegmentLevel;\n\n\t\t\t\tconst a = segment;\n\t\t\t\tconst b = segment + thetaSegments + 1;\n\t\t\t\tconst c = segment + thetaSegments + 2;\n\t\t\t\tconst d = segment + 1;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new RingGeometry( data.innerRadius, data.outerRadius, data.thetaSegments, data.phiSegments, data.thetaStart, data.thetaLength );\n\n\t}\n\n}\n\nclass ShapeGeometry extends BufferGeometry {\n\n\tconstructor( shapes = new Shape( [ new Vector2( 0, 0.5 ), new Vector2( - 0.5, - 0.5 ), new Vector2( 0.5, - 0.5 ) ] ), curveSegments = 12 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'ShapeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tshapes: shapes,\n\t\t\tcurveSegments: curveSegments\n\t\t};\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tlet groupStart = 0;\n\t\tlet groupCount = 0;\n\n\t\t// allow single and array values for \"shapes\" parameter\n\n\t\tif ( Array.isArray( shapes ) === false ) {\n\n\t\t\taddShape( shapes );\n\n\t\t} else {\n\n\t\t\tfor ( let i = 0; i < shapes.length; i ++ ) {\n\n\t\t\t\taddShape( shapes[ i ] );\n\n\t\t\t\tthis.addGroup( groupStart, groupCount, i ); // enables MultiMaterial support\n\n\t\t\t\tgroupStart += groupCount;\n\t\t\t\tgroupCount = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\n\t\t// helper functions\n\n\t\tfunction addShape( shape ) {\n\n\t\t\tconst indexOffset = vertices.length / 3;\n\t\t\tconst points = shape.extractPoints( curveSegments );\n\n\t\t\tlet shapeVertices = points.shape;\n\t\t\tconst shapeHoles = points.holes;\n\n\t\t\t// check direction of vertices\n\n\t\t\tif ( ShapeUtils.isClockWise( shapeVertices ) === false ) {\n\n\t\t\t\tshapeVertices = shapeVertices.reverse();\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, l = shapeHoles.length; i < l; i ++ ) {\n\n\t\t\t\tconst shapeHole = shapeHoles[ i ];\n\n\t\t\t\tif ( ShapeUtils.isClockWise( shapeHole ) === true ) {\n\n\t\t\t\t\tshapeHoles[ i ] = shapeHole.reverse();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst faces = ShapeUtils.triangulateShape( shapeVertices, shapeHoles );\n\n\t\t\t// join vertices of inner and outer paths to a single array\n\n\t\t\tfor ( let i = 0, l = shapeHoles.length; i < l; i ++ ) {\n\n\t\t\t\tconst shapeHole = shapeHoles[ i ];\n\t\t\t\tshapeVertices = shapeVertices.concat( shapeHole );\n\n\t\t\t}\n\n\t\t\t// vertices, normals, uvs\n\n\t\t\tfor ( let i = 0, l = shapeVertices.length; i < l; i ++ ) {\n\n\t\t\t\tconst vertex = shapeVertices[ i ];\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, 0 );\n\t\t\t\tnormals.push( 0, 0, 1 );\n\t\t\t\tuvs.push( vertex.x, vertex.y ); // world uvs\n\n\t\t\t}\n\n\t\t\t// indices\n\n\t\t\tfor ( let i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\t\tconst face = faces[ i ];\n\n\t\t\t\tconst a = face[ 0 ] + indexOffset;\n\t\t\t\tconst b = face[ 1 ] + indexOffset;\n\t\t\t\tconst c = face[ 2 ] + indexOffset;\n\n\t\t\t\tindices.push( a, b, c );\n\t\t\t\tgroupCount += 3;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tconst shapes = this.parameters.shapes;\n\n\t\treturn toJSON( shapes, data );\n\n\t}\n\n\tstatic fromJSON( data, shapes ) {\n\n\t\tconst geometryShapes = [];\n\n\t\tfor ( let j = 0, jl = data.shapes.length; j < jl; j ++ ) {\n\n\t\t\tconst shape = shapes[ data.shapes[ j ] ];\n\n\t\t\tgeometryShapes.push( shape );\n\n\t\t}\n\n\t\treturn new ShapeGeometry( geometryShapes, data.curveSegments );\n\n\t}\n\n}\n\nfunction toJSON( shapes, data ) {\n\n\tdata.shapes = [];\n\n\tif ( Array.isArray( shapes ) ) {\n\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tconst shape = shapes[ i ];\n\n\t\t\tdata.shapes.push( shape.uuid );\n\n\t\t}\n\n\t} else {\n\n\t\tdata.shapes.push( shapes.uuid );\n\n\t}\n\n\treturn data;\n\n}\n\nclass SphereGeometry extends BufferGeometry {\n\n\tconstructor( radius = 1, widthSegments = 32, heightSegments = 16, phiStart = 0, phiLength = Math.PI * 2, thetaStart = 0, thetaLength = Math.PI ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'SphereGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tphiStart: phiStart,\n\t\t\tphiLength: phiLength,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\twidthSegments = Math.max( 3, Math.floor( widthSegments ) );\n\t\theightSegments = Math.max( 2, Math.floor( heightSegments ) );\n\n\t\tconst thetaEnd = Math.min( thetaStart + thetaLength, Math.PI );\n\n\t\tlet index = 0;\n\t\tconst grid = [];\n\n\t\tconst vertex = new Vector3();\n\t\tconst normal = new Vector3();\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( let iy = 0; iy <= heightSegments; iy ++ ) {\n\n\t\t\tconst verticesRow = [];\n\n\t\t\tconst v = iy / heightSegments;\n\n\t\t\t// special case for the poles\n\n\t\t\tlet uOffset = 0;\n\n\t\t\tif ( iy == 0 && thetaStart == 0 ) {\n\n\t\t\t\tuOffset = 0.5 / widthSegments;\n\n\t\t\t} else if ( iy == heightSegments && thetaEnd == Math.PI ) {\n\n\t\t\t\tuOffset = - 0.5 / widthSegments;\n\n\t\t\t}\n\n\t\t\tfor ( let ix = 0; ix <= widthSegments; ix ++ ) {\n\n\t\t\t\tconst u = ix / widthSegments;\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\t\t\t\tvertex.y = radius * Math.cos( thetaStart + v * thetaLength );\n\t\t\t\tvertex.z = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormal.copy( vertex ).normalize();\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( u + uOffset, 1 - v );\n\n\t\t\t\tverticesRow.push( index ++ );\n\n\t\t\t}\n\n\t\t\tgrid.push( verticesRow );\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( let iy = 0; iy < heightSegments; iy ++ ) {\n\n\t\t\tfor ( let ix = 0; ix < widthSegments; ix ++ ) {\n\n\t\t\t\tconst a = grid[ iy ][ ix + 1 ];\n\t\t\t\tconst b = grid[ iy ][ ix ];\n\t\t\t\tconst c = grid[ iy + 1 ][ ix ];\n\t\t\t\tconst d = grid[ iy + 1 ][ ix + 1 ];\n\n\t\t\t\tif ( iy !== 0 || thetaStart > 0 ) indices.push( a, b, d );\n\t\t\t\tif ( iy !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new SphereGeometry( data.radius, data.widthSegments, data.heightSegments, data.phiStart, data.phiLength, data.thetaStart, data.thetaLength );\n\n\t}\n\n}\n\nclass TetrahedronGeometry extends PolyhedronGeometry {\n\n\tconstructor( radius = 1, detail = 0 ) {\n\n\t\tconst vertices = [\n\t\t\t1, 1, 1, \t- 1, - 1, 1, \t- 1, 1, - 1, \t1, - 1, - 1\n\t\t];\n\n\t\tconst indices = [\n\t\t\t2, 1, 0, \t0, 3, 2,\t1, 3, 0,\t2, 3, 1\n\t\t];\n\n\t\tsuper( vertices, indices, radius, detail );\n\n\t\tthis.type = 'TetrahedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new TetrahedronGeometry( data.radius, data.detail );\n\n\t}\n\n}\n\nclass TorusGeometry extends BufferGeometry {\n\n\tconstructor( radius = 1, tube = 0.4, radialSegments = 12, tubularSegments = 48, arc = Math.PI * 2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'TorusGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\ttube: tube,\n\t\t\tradialSegments: radialSegments,\n\t\t\ttubularSegments: tubularSegments,\n\t\t\tarc: arc\n\t\t};\n\n\t\tradialSegments = Math.floor( radialSegments );\n\t\ttubularSegments = Math.floor( tubularSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tconst center = new Vector3();\n\t\tconst vertex = new Vector3();\n\t\tconst normal = new Vector3();\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( let j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\tfor ( let i = 0; i <= tubularSegments; i ++ ) {\n\n\t\t\t\tconst u = i / tubularSegments * arc;\n\t\t\t\tconst v = j / radialSegments * Math.PI * 2;\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\n\t\t\t\tvertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\n\t\t\t\tvertex.z = tube * Math.sin( v );\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tcenter.x = radius * Math.cos( u );\n\t\t\t\tcenter.y = radius * Math.sin( u );\n\t\t\t\tnormal.subVectors( vertex, center ).normalize();\n\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( i / tubularSegments );\n\t\t\t\tuvs.push( j / radialSegments );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( let j = 1; j <= radialSegments; j ++ ) {\n\n\t\t\tfor ( let i = 1; i <= tubularSegments; i ++ ) {\n\n\t\t\t\t// indices\n\n\t\t\t\tconst a = ( tubularSegments + 1 ) * j + i - 1;\n\t\t\t\tconst b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\n\t\t\t\tconst c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\n\t\t\t\tconst d = ( tubularSegments + 1 ) * j + i;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new TorusGeometry( data.radius, data.tube, data.radialSegments, data.tubularSegments, data.arc );\n\n\t}\n\n}\n\nclass TorusKnotGeometry extends BufferGeometry {\n\n\tconstructor( radius = 1, tube = 0.4, tubularSegments = 64, radialSegments = 8, p = 2, q = 3 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'TorusKnotGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\ttube: tube,\n\t\t\ttubularSegments: tubularSegments,\n\t\t\tradialSegments: radialSegments,\n\t\t\tp: p,\n\t\t\tq: q\n\t\t};\n\n\t\ttubularSegments = Math.floor( tubularSegments );\n\t\tradialSegments = Math.floor( radialSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tconst vertex = new Vector3();\n\t\tconst normal = new Vector3();\n\n\t\tconst P1 = new Vector3();\n\t\tconst P2 = new Vector3();\n\n\t\tconst B = new Vector3();\n\t\tconst T = new Vector3();\n\t\tconst N = new Vector3();\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( let i = 0; i <= tubularSegments; ++ i ) {\n\n\t\t\t// the radian \"u\" is used to calculate the position on the torus curve of the current tubular segment\n\n\t\t\tconst u = i / tubularSegments * p * Math.PI * 2;\n\n\t\t\t// now we calculate two points. P1 is our current position on the curve, P2 is a little farther ahead.\n\t\t\t// these points are used to create a special \"coordinate space\", which is necessary to calculate the correct vertex positions\n\n\t\t\tcalculatePositionOnCurve( u, p, q, radius, P1 );\n\t\t\tcalculatePositionOnCurve( u + 0.01, p, q, radius, P2 );\n\n\t\t\t// calculate orthonormal basis\n\n\t\t\tT.subVectors( P2, P1 );\n\t\t\tN.addVectors( P2, P1 );\n\t\t\tB.crossVectors( T, N );\n\t\t\tN.crossVectors( B, T );\n\n\t\t\t// normalize B, N. T can be ignored, we don't use it\n\n\t\t\tB.normalize();\n\t\t\tN.normalize();\n\n\t\t\tfor ( let j = 0; j <= radialSegments; ++ j ) {\n\n\t\t\t\t// now calculate the vertices. they are nothing more than an extrusion of the torus curve.\n\t\t\t\t// because we extrude a shape in the xy-plane, there is no need to calculate a z-value.\n\n\t\t\t\tconst v = j / radialSegments * Math.PI * 2;\n\t\t\t\tconst cx = - tube * Math.cos( v );\n\t\t\t\tconst cy = tube * Math.sin( v );\n\n\t\t\t\t// now calculate the final vertex position.\n\t\t\t\t// first we orient the extrusion with our basis vectors, then we add it to the current position on the curve\n\n\t\t\t\tvertex.x = P1.x + ( cx * N.x + cy * B.x );\n\t\t\t\tvertex.y = P1.y + ( cx * N.y + cy * B.y );\n\t\t\t\tvertex.z = P1.z + ( cx * N.z + cy * B.z );\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal (P1 is always the center/origin of the extrusion, thus we can use it to calculate the normal)\n\n\t\t\t\tnormal.subVectors( vertex, P1 ).normalize();\n\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( i / tubularSegments );\n\t\t\t\tuvs.push( j / radialSegments );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( let j = 1; j <= tubularSegments; j ++ ) {\n\n\t\t\tfor ( let i = 1; i <= radialSegments; i ++ ) {\n\n\t\t\t\t// indices\n\n\t\t\t\tconst a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\n\t\t\t\tconst b = ( radialSegments + 1 ) * j + ( i - 1 );\n\t\t\t\tconst c = ( radialSegments + 1 ) * j + i;\n\t\t\t\tconst d = ( radialSegments + 1 ) * ( j - 1 ) + i;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\t// this function calculates the current position on the torus curve\n\n\t\tfunction calculatePositionOnCurve( u, p, q, radius, position ) {\n\n\t\t\tconst cu = Math.cos( u );\n\t\t\tconst su = Math.sin( u );\n\t\t\tconst quOverP = q / p * u;\n\t\t\tconst cs = Math.cos( quOverP );\n\n\t\t\tposition.x = radius * ( 2 + cs ) * 0.5 * cu;\n\t\t\tposition.y = radius * ( 2 + cs ) * su * 0.5;\n\t\t\tposition.z = radius * Math.sin( quOverP ) * 0.5;\n\n\t\t}\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new TorusKnotGeometry( data.radius, data.tube, data.tubularSegments, data.radialSegments, data.p, data.q );\n\n\t}\n\n}\n\nclass TubeGeometry extends BufferGeometry {\n\n\tconstructor( path = new QuadraticBezierCurve3( new Vector3( - 1, - 1, 0 ), new Vector3( - 1, 1, 0 ), new Vector3( 1, 1, 0 ) ), tubularSegments = 64, radius = 1, radialSegments = 8, closed = false ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'TubeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tpath: path,\n\t\t\ttubularSegments: tubularSegments,\n\t\t\tradius: radius,\n\t\t\tradialSegments: radialSegments,\n\t\t\tclosed: closed\n\t\t};\n\n\t\tconst frames = path.computeFrenetFrames( tubularSegments, closed );\n\n\t\t// expose internals\n\n\t\tthis.tangents = frames.tangents;\n\t\tthis.normals = frames.normals;\n\t\tthis.binormals = frames.binormals;\n\n\t\t// helper variables\n\n\t\tconst vertex = new Vector3();\n\t\tconst normal = new Vector3();\n\t\tconst uv = new Vector2();\n\t\tlet P = new Vector3();\n\n\t\t// buffer\n\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\t\tconst indices = [];\n\n\t\t// create buffer data\n\n\t\tgenerateBufferData();\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\t// functions\n\n\t\tfunction generateBufferData() {\n\n\t\t\tfor ( let i = 0; i < tubularSegments; i ++ ) {\n\n\t\t\t\tgenerateSegment( i );\n\n\t\t\t}\n\n\t\t\t// if the geometry is not closed, generate the last row of vertices and normals\n\t\t\t// at the regular position on the given path\n\t\t\t//\n\t\t\t// if the geometry is closed, duplicate the first row of vertices and normals (uvs will differ)\n\n\t\t\tgenerateSegment( ( closed === false ) ? tubularSegments : 0 );\n\n\t\t\t// uvs are generated in a separate function.\n\t\t\t// this makes it easy compute correct values for closed geometries\n\n\t\t\tgenerateUVs();\n\n\t\t\t// finally create faces\n\n\t\t\tgenerateIndices();\n\n\t\t}\n\n\t\tfunction generateSegment( i ) {\n\n\t\t\t// we use getPointAt to sample evenly distributed points from the given path\n\n\t\t\tP = path.getPointAt( i / tubularSegments, P );\n\n\t\t\t// retrieve corresponding normal and binormal\n\n\t\t\tconst N = frames.normals[ i ];\n\t\t\tconst B = frames.binormals[ i ];\n\n\t\t\t// generate normals and vertices for the current segment\n\n\t\t\tfor ( let j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\t\tconst v = j / radialSegments * Math.PI * 2;\n\n\t\t\t\tconst sin = Math.sin( v );\n\t\t\t\tconst cos = - Math.cos( v );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormal.x = ( cos * N.x + sin * B.x );\n\t\t\t\tnormal.y = ( cos * N.y + sin * B.y );\n\t\t\t\tnormal.z = ( cos * N.z + sin * B.z );\n\t\t\t\tnormal.normalize();\n\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = P.x + radius * normal.x;\n\t\t\t\tvertex.y = P.y + radius * normal.y;\n\t\t\t\tvertex.z = P.z + radius * normal.z;\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction generateIndices() {\n\n\t\t\tfor ( let j = 1; j <= tubularSegments; j ++ ) {\n\n\t\t\t\tfor ( let i = 1; i <= radialSegments; i ++ ) {\n\n\t\t\t\t\tconst a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\n\t\t\t\t\tconst b = ( radialSegments + 1 ) * j + ( i - 1 );\n\t\t\t\t\tconst c = ( radialSegments + 1 ) * j + i;\n\t\t\t\t\tconst d = ( radialSegments + 1 ) * ( j - 1 ) + i;\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction generateUVs() {\n\n\t\t\tfor ( let i = 0; i <= tubularSegments; i ++ ) {\n\n\t\t\t\tfor ( let j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\t\t\tuv.x = i / tubularSegments;\n\t\t\t\t\tuv.y = j / radialSegments;\n\n\t\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.path = this.parameters.path.toJSON();\n\n\t\treturn data;\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\t// This only works for built-in curves (e.g. CatmullRomCurve3).\n\t\t// User defined curves or instances of CurvePath will not be deserialized.\n\t\treturn new TubeGeometry(\n\t\t\tnew Curves[ data.path.type ]().fromJSON( data.path ),\n\t\t\tdata.tubularSegments,\n\t\t\tdata.radius,\n\t\t\tdata.radialSegments,\n\t\t\tdata.closed\n\t\t);\n\n\t}\n\n}\n\nclass WireframeGeometry extends BufferGeometry {\n\n\tconstructor( geometry = null ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'WireframeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tgeometry: geometry\n\t\t};\n\n\t\tif ( geometry !== null ) {\n\n\t\t\t// buffer\n\n\t\t\tconst vertices = [];\n\t\t\tconst edges = new Set();\n\n\t\t\t// helper variables\n\n\t\t\tconst start = new Vector3();\n\t\t\tconst end = new Vector3();\n\n\t\t\tif ( geometry.index !== null ) {\n\n\t\t\t\t// indexed BufferGeometry\n\n\t\t\t\tconst position = geometry.attributes.position;\n\t\t\t\tconst indices = geometry.index;\n\t\t\t\tlet groups = geometry.groups;\n\n\t\t\t\tif ( groups.length === 0 ) {\n\n\t\t\t\t\tgroups = [ { start: 0, count: indices.count, materialIndex: 0 } ];\n\n\t\t\t\t}\n\n\t\t\t\t// create a data structure that contains all edges without duplicates\n\n\t\t\t\tfor ( let o = 0, ol = groups.length; o < ol; ++ o ) {\n\n\t\t\t\t\tconst group = groups[ o ];\n\n\t\t\t\t\tconst groupStart = group.start;\n\t\t\t\t\tconst groupCount = group.count;\n\n\t\t\t\t\tfor ( let i = groupStart, l = ( groupStart + groupCount ); i < l; i += 3 ) {\n\n\t\t\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\t\tconst index1 = indices.getX( i + j );\n\t\t\t\t\t\t\tconst index2 = indices.getX( i + ( j + 1 ) % 3 );\n\n\t\t\t\t\t\t\tstart.fromBufferAttribute( position, index1 );\n\t\t\t\t\t\t\tend.fromBufferAttribute( position, index2 );\n\n\t\t\t\t\t\t\tif ( isUniqueEdge( start, end, edges ) === true ) {\n\n\t\t\t\t\t\t\t\tvertices.push( start.x, start.y, start.z );\n\t\t\t\t\t\t\t\tvertices.push( end.x, end.y, end.z );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed BufferGeometry\n\n\t\t\t\tconst position = geometry.attributes.position;\n\n\t\t\t\tfor ( let i = 0, l = ( position.count / 3 ); i < l; i ++ ) {\n\n\t\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\t// three edges per triangle, an edge is represented as (index1, index2)\n\t\t\t\t\t\t// e.g. the first triangle has the following edges: (0,1),(1,2),(2,0)\n\n\t\t\t\t\t\tconst index1 = 3 * i + j;\n\t\t\t\t\t\tconst index2 = 3 * i + ( ( j + 1 ) % 3 );\n\n\t\t\t\t\t\tstart.fromBufferAttribute( position, index1 );\n\t\t\t\t\t\tend.fromBufferAttribute( position, index2 );\n\n\t\t\t\t\t\tif ( isUniqueEdge( start, end, edges ) === true ) {\n\n\t\t\t\t\t\t\tvertices.push( start.x, start.y, start.z );\n\t\t\t\t\t\t\tvertices.push( end.x, end.y, end.z );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// build geometry\n\n\t\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\n\t\t}\n\n\t}\n\n}\n\nfunction isUniqueEdge( start, end, edges ) {\n\n\tconst hash1 = `${start.x},${start.y},${start.z}-${end.x},${end.y},${end.z}`;\n\tconst hash2 = `${end.x},${end.y},${end.z}-${start.x},${start.y},${start.z}`; // coincident edge\n\n\tif ( edges.has( hash1 ) === true || edges.has( hash2 ) === true ) {\n\n\t\treturn false;\n\n\t} else {\n\n\t\tedges.add( hash1 );\n\t\tedges.add( hash2 );\n\t\treturn true;\n\n\t}\n\n}\n\nvar Geometries = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tBoxGeometry: BoxGeometry,\n\tCapsuleGeometry: CapsuleGeometry,\n\tCircleGeometry: CircleGeometry,\n\tConeGeometry: ConeGeometry,\n\tCylinderGeometry: CylinderGeometry,\n\tDodecahedronGeometry: DodecahedronGeometry,\n\tEdgesGeometry: EdgesGeometry,\n\tExtrudeGeometry: ExtrudeGeometry,\n\tIcosahedronGeometry: IcosahedronGeometry,\n\tLatheGeometry: LatheGeometry,\n\tOctahedronGeometry: OctahedronGeometry,\n\tPlaneGeometry: PlaneGeometry,\n\tPolyhedronGeometry: PolyhedronGeometry,\n\tRingGeometry: RingGeometry,\n\tShapeGeometry: ShapeGeometry,\n\tSphereGeometry: SphereGeometry,\n\tTetrahedronGeometry: TetrahedronGeometry,\n\tTorusGeometry: TorusGeometry,\n\tTorusKnotGeometry: TorusKnotGeometry,\n\tTubeGeometry: TubeGeometry,\n\tWireframeGeometry: WireframeGeometry\n});\n\nclass ShadowMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isShadowMaterial = true;\n\n\t\tthis.type = 'ShadowMaterial';\n\n\t\tthis.color = new Color( 0x000000 );\n\t\tthis.transparent = true;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass RawShaderMaterial extends ShaderMaterial {\n\n\tconstructor( parameters ) {\n\n\t\tsuper( parameters );\n\n\t\tthis.isRawShaderMaterial = true;\n\n\t\tthis.type = 'RawShaderMaterial';\n\n\t}\n\n}\n\nclass MeshStandardMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshStandardMaterial = true;\n\n\t\tthis.defines = { 'STANDARD': '' };\n\n\t\tthis.type = 'MeshStandardMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // diffuse\n\t\tthis.roughness = 1.0;\n\t\tthis.metalness = 0.0;\n\n\t\tthis.map = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.emissive = new Color( 0x000000 );\n\t\tthis.emissiveIntensity = 1.0;\n\t\tthis.emissiveMap = null;\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.roughnessMap = null;\n\n\t\tthis.metalnessMap = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.envMap = null;\n\t\tthis.envMapIntensity = 1.0;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.flatShading = false;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.defines = { 'STANDARD': '' };\n\n\t\tthis.color.copy( source.color );\n\t\tthis.roughness = source.roughness;\n\t\tthis.metalness = source.metalness;\n\n\t\tthis.map = source.map;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.emissive.copy( source.emissive );\n\t\tthis.emissiveMap = source.emissiveMap;\n\t\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.roughnessMap = source.roughnessMap;\n\n\t\tthis.metalnessMap = source.metalnessMap;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.envMap = source.envMap;\n\t\tthis.envMapIntensity = source.envMapIntensity;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.flatShading = source.flatShading;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshPhysicalMaterial extends MeshStandardMaterial {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshPhysicalMaterial = true;\n\n\t\tthis.defines = {\n\n\t\t\t'STANDARD': '',\n\t\t\t'PHYSICAL': ''\n\n\t\t};\n\n\t\tthis.type = 'MeshPhysicalMaterial';\n\n\t\tthis.clearcoatMap = null;\n\t\tthis.clearcoatRoughness = 0.0;\n\t\tthis.clearcoatRoughnessMap = null;\n\t\tthis.clearcoatNormalScale = new Vector2( 1, 1 );\n\t\tthis.clearcoatNormalMap = null;\n\n\t\tthis.ior = 1.5;\n\n\t\tObject.defineProperty( this, 'reflectivity', {\n\t\t\tget: function () {\n\n\t\t\t\treturn ( clamp( 2.5 * ( this.ior - 1 ) / ( this.ior + 1 ), 0, 1 ) );\n\n\t\t\t},\n\t\t\tset: function ( reflectivity ) {\n\n\t\t\t\tthis.ior = ( 1 + 0.4 * reflectivity ) / ( 1 - 0.4 * reflectivity );\n\n\t\t\t}\n\t\t} );\n\n\t\tthis.iridescenceMap = null;\n\t\tthis.iridescenceIOR = 1.3;\n\t\tthis.iridescenceThicknessRange = [ 100, 400 ];\n\t\tthis.iridescenceThicknessMap = null;\n\n\t\tthis.sheenColor = new Color( 0x000000 );\n\t\tthis.sheenColorMap = null;\n\t\tthis.sheenRoughness = 1.0;\n\t\tthis.sheenRoughnessMap = null;\n\n\t\tthis.transmissionMap = null;\n\n\t\tthis.thickness = 0;\n\t\tthis.thicknessMap = null;\n\t\tthis.attenuationDistance = Infinity;\n\t\tthis.attenuationColor = new Color( 1, 1, 1 );\n\n\t\tthis.specularIntensity = 1.0;\n\t\tthis.specularIntensityMap = null;\n\t\tthis.specularColor = new Color( 1, 1, 1 );\n\t\tthis.specularColorMap = null;\n\n\t\tthis._sheen = 0.0;\n\t\tthis._clearcoat = 0;\n\t\tthis._iridescence = 0;\n\t\tthis._transmission = 0;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tget sheen() {\n\n\t\treturn this._sheen;\n\n\t}\n\n\tset sheen( value ) {\n\n\t\tif ( this._sheen > 0 !== value > 0 ) {\n\n\t\t\tthis.version ++;\n\n\t\t}\n\n\t\tthis._sheen = value;\n\n\t}\n\n\tget clearcoat() {\n\n\t\treturn this._clearcoat;\n\n\t}\n\n\tset clearcoat( value ) {\n\n\t\tif ( this._clearcoat > 0 !== value > 0 ) {\n\n\t\t\tthis.version ++;\n\n\t\t}\n\n\t\tthis._clearcoat = value;\n\n\t}\n\n\tget iridescence() {\n\n\t\treturn this._iridescence;\n\n\t}\n\n\tset iridescence( value ) {\n\n\t\tif ( this._iridescence > 0 !== value > 0 ) {\n\n\t\t\tthis.version ++;\n\n\t\t}\n\n\t\tthis._iridescence = value;\n\n\t}\n\n\tget transmission() {\n\n\t\treturn this._transmission;\n\n\t}\n\n\tset transmission( value ) {\n\n\t\tif ( this._transmission > 0 !== value > 0 ) {\n\n\t\t\tthis.version ++;\n\n\t\t}\n\n\t\tthis._transmission = value;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.defines = {\n\n\t\t\t'STANDARD': '',\n\t\t\t'PHYSICAL': ''\n\n\t\t};\n\n\t\tthis.clearcoat = source.clearcoat;\n\t\tthis.clearcoatMap = source.clearcoatMap;\n\t\tthis.clearcoatRoughness = source.clearcoatRoughness;\n\t\tthis.clearcoatRoughnessMap = source.clearcoatRoughnessMap;\n\t\tthis.clearcoatNormalMap = source.clearcoatNormalMap;\n\t\tthis.clearcoatNormalScale.copy( source.clearcoatNormalScale );\n\n\t\tthis.ior = source.ior;\n\n\t\tthis.iridescence = source.iridescence;\n\t\tthis.iridescenceMap = source.iridescenceMap;\n\t\tthis.iridescenceIOR = source.iridescenceIOR;\n\t\tthis.iridescenceThicknessRange = [ ...source.iridescenceThicknessRange ];\n\t\tthis.iridescenceThicknessMap = source.iridescenceThicknessMap;\n\n\t\tthis.sheen = source.sheen;\n\t\tthis.sheenColor.copy( source.sheenColor );\n\t\tthis.sheenColorMap = source.sheenColorMap;\n\t\tthis.sheenRoughness = source.sheenRoughness;\n\t\tthis.sheenRoughnessMap = source.sheenRoughnessMap;\n\n\t\tthis.transmission = source.transmission;\n\t\tthis.transmissionMap = source.transmissionMap;\n\n\t\tthis.thickness = source.thickness;\n\t\tthis.thicknessMap = source.thicknessMap;\n\t\tthis.attenuationDistance = source.attenuationDistance;\n\t\tthis.attenuationColor.copy( source.attenuationColor );\n\n\t\tthis.specularIntensity = source.specularIntensity;\n\t\tthis.specularIntensityMap = source.specularIntensityMap;\n\t\tthis.specularColor.copy( source.specularColor );\n\t\tthis.specularColorMap = source.specularColorMap;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshPhongMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshPhongMaterial = true;\n\n\t\tthis.type = 'MeshPhongMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // diffuse\n\t\tthis.specular = new Color( 0x111111 );\n\t\tthis.shininess = 30;\n\n\t\tthis.map = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.emissive = new Color( 0x000000 );\n\t\tthis.emissiveIntensity = 1.0;\n\t\tthis.emissiveMap = null;\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.specularMap = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.envMap = null;\n\t\tthis.combine = MultiplyOperation;\n\t\tthis.reflectivity = 1;\n\t\tthis.refractionRatio = 0.98;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.flatShading = false;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\t\tthis.specular.copy( source.specular );\n\t\tthis.shininess = source.shininess;\n\n\t\tthis.map = source.map;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.emissive.copy( source.emissive );\n\t\tthis.emissiveMap = source.emissiveMap;\n\t\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.specularMap = source.specularMap;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.envMap = source.envMap;\n\t\tthis.combine = source.combine;\n\t\tthis.reflectivity = source.reflectivity;\n\t\tthis.refractionRatio = source.refractionRatio;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.flatShading = source.flatShading;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshToonMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshToonMaterial = true;\n\n\t\tthis.defines = { 'TOON': '' };\n\n\t\tthis.type = 'MeshToonMaterial';\n\n\t\tthis.color = new Color( 0xffffff );\n\n\t\tthis.map = null;\n\t\tthis.gradientMap = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.emissive = new Color( 0x000000 );\n\t\tthis.emissiveIntensity = 1.0;\n\t\tthis.emissiveMap = null;\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\t\tthis.gradientMap = source.gradientMap;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.emissive.copy( source.emissive );\n\t\tthis.emissiveMap = source.emissiveMap;\n\t\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshNormalMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshNormalMaterial = true;\n\n\t\tthis.type = 'MeshNormalMaterial';\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\n\t\tthis.flatShading = false;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\t\tthis.flatShading = source.flatShading;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshLambertMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshLambertMaterial = true;\n\n\t\tthis.type = 'MeshLambertMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // diffuse\n\n\t\tthis.map = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.emissive = new Color( 0x000000 );\n\t\tthis.emissiveIntensity = 1.0;\n\t\tthis.emissiveMap = null;\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.specularMap = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.envMap = null;\n\t\tthis.combine = MultiplyOperation;\n\t\tthis.reflectivity = 1;\n\t\tthis.refractionRatio = 0.98;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.flatShading = false;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.emissive.copy( source.emissive );\n\t\tthis.emissiveMap = source.emissiveMap;\n\t\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.specularMap = source.specularMap;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.envMap = source.envMap;\n\t\tthis.combine = source.combine;\n\t\tthis.reflectivity = source.reflectivity;\n\t\tthis.refractionRatio = source.refractionRatio;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.flatShading = source.flatShading;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshMatcapMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshMatcapMaterial = true;\n\n\t\tthis.defines = { 'MATCAP': '' };\n\n\t\tthis.type = 'MeshMatcapMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // diffuse\n\n\t\tthis.matcap = null;\n\n\t\tthis.map = null;\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.flatShading = false;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.defines = { 'MATCAP': '' };\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.matcap = source.matcap;\n\n\t\tthis.map = source.map;\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.flatShading = source.flatShading;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass LineDashedMaterial extends LineBasicMaterial {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isLineDashedMaterial = true;\n\n\t\tthis.type = 'LineDashedMaterial';\n\n\t\tthis.scale = 1;\n\t\tthis.dashSize = 3;\n\t\tthis.gapSize = 1;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.scale = source.scale;\n\t\tthis.dashSize = source.dashSize;\n\t\tthis.gapSize = source.gapSize;\n\n\t\treturn this;\n\n\t}\n\n}\n\n// same as Array.prototype.slice, but also works on typed arrays\nfunction arraySlice( array, from, to ) {\n\n\tif ( isTypedArray( array ) ) {\n\n\t\t// in ios9 array.subarray(from, undefined) will return empty array\n\t\t// but array.subarray(from) or array.subarray(from, len) is correct\n\t\treturn new array.constructor( array.subarray( from, to !== undefined ? to : array.length ) );\n\n\t}\n\n\treturn array.slice( from, to );\n\n}\n\n// converts an array to a specific type\nfunction convertArray( array, type, forceClone ) {\n\n\tif ( ! array || // let 'undefined' and 'null' pass\n\t\t! forceClone && array.constructor === type ) return array;\n\n\tif ( typeof type.BYTES_PER_ELEMENT === 'number' ) {\n\n\t\treturn new type( array ); // create typed array\n\n\t}\n\n\treturn Array.prototype.slice.call( array ); // create Array\n\n}\n\nfunction isTypedArray( object ) {\n\n\treturn ArrayBuffer.isView( object ) &&\n\t\t! ( object instanceof DataView );\n\n}\n\n// returns an array by which times and values can be sorted\nfunction getKeyframeOrder( times ) {\n\n\tfunction compareTime( i, j ) {\n\n\t\treturn times[ i ] - times[ j ];\n\n\t}\n\n\tconst n = times.length;\n\tconst result = new Array( n );\n\tfor ( let i = 0; i !== n; ++ i ) result[ i ] = i;\n\n\tresult.sort( compareTime );\n\n\treturn result;\n\n}\n\n// uses the array previously returned by 'getKeyframeOrder' to sort data\nfunction sortedArray( values, stride, order ) {\n\n\tconst nValues = values.length;\n\tconst result = new values.constructor( nValues );\n\n\tfor ( let i = 0, dstOffset = 0; dstOffset !== nValues; ++ i ) {\n\n\t\tconst srcOffset = order[ i ] * stride;\n\n\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\tresult[ dstOffset ++ ] = values[ srcOffset + j ];\n\n\t\t}\n\n\t}\n\n\treturn result;\n\n}\n\n// function for parsing AOS keyframe formats\nfunction flattenJSON( jsonKeys, times, values, valuePropertyName ) {\n\n\tlet i = 1, key = jsonKeys[ 0 ];\n\n\twhile ( key !== undefined && key[ valuePropertyName ] === undefined ) {\n\n\t\tkey = jsonKeys[ i ++ ];\n\n\t}\n\n\tif ( key === undefined ) return; // no data\n\n\tlet value = key[ valuePropertyName ];\n\tif ( value === undefined ) return; // no data\n\n\tif ( Array.isArray( value ) ) {\n\n\t\tdo {\n\n\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\tif ( value !== undefined ) {\n\n\t\t\t\ttimes.push( key.time );\n\t\t\t\tvalues.push.apply( values, value ); // push all elements\n\n\t\t\t}\n\n\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t} while ( key !== undefined );\n\n\t} else if ( value.toArray !== undefined ) {\n\n\t\t// ...assume THREE.Math-ish\n\n\t\tdo {\n\n\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\tif ( value !== undefined ) {\n\n\t\t\t\ttimes.push( key.time );\n\t\t\t\tvalue.toArray( values, values.length );\n\n\t\t\t}\n\n\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t} while ( key !== undefined );\n\n\t} else {\n\n\t\t// otherwise push as-is\n\n\t\tdo {\n\n\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\tif ( value !== undefined ) {\n\n\t\t\t\ttimes.push( key.time );\n\t\t\t\tvalues.push( value );\n\n\t\t\t}\n\n\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t} while ( key !== undefined );\n\n\t}\n\n}\n\nfunction subclip( sourceClip, name, startFrame, endFrame, fps = 30 ) {\n\n\tconst clip = sourceClip.clone();\n\n\tclip.name = name;\n\n\tconst tracks = [];\n\n\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\tconst track = clip.tracks[ i ];\n\t\tconst valueSize = track.getValueSize();\n\n\t\tconst times = [];\n\t\tconst values = [];\n\n\t\tfor ( let j = 0; j < track.times.length; ++ j ) {\n\n\t\t\tconst frame = track.times[ j ] * fps;\n\n\t\t\tif ( frame < startFrame || frame >= endFrame ) continue;\n\n\t\t\ttimes.push( track.times[ j ] );\n\n\t\t\tfor ( let k = 0; k < valueSize; ++ k ) {\n\n\t\t\t\tvalues.push( track.values[ j * valueSize + k ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( times.length === 0 ) continue;\n\n\t\ttrack.times = convertArray( times, track.times.constructor );\n\t\ttrack.values = convertArray( values, track.values.constructor );\n\n\t\ttracks.push( track );\n\n\t}\n\n\tclip.tracks = tracks;\n\n\t// find minimum .times value across all tracks in the trimmed clip\n\n\tlet minStartTime = Infinity;\n\n\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\tif ( minStartTime > clip.tracks[ i ].times[ 0 ] ) {\n\n\t\t\tminStartTime = clip.tracks[ i ].times[ 0 ];\n\n\t\t}\n\n\t}\n\n\t// shift all tracks such that clip begins at t=0\n\n\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\tclip.tracks[ i ].shift( - 1 * minStartTime );\n\n\t}\n\n\tclip.resetDuration();\n\n\treturn clip;\n\n}\n\nfunction makeClipAdditive( targetClip, referenceFrame = 0, referenceClip = targetClip, fps = 30 ) {\n\n\tif ( fps <= 0 ) fps = 30;\n\n\tconst numTracks = referenceClip.tracks.length;\n\tconst referenceTime = referenceFrame / fps;\n\n\t// Make each track's values relative to the values at the reference frame\n\tfor ( let i = 0; i < numTracks; ++ i ) {\n\n\t\tconst referenceTrack = referenceClip.tracks[ i ];\n\t\tconst referenceTrackType = referenceTrack.ValueTypeName;\n\n\t\t// Skip this track if it's non-numeric\n\t\tif ( referenceTrackType === 'bool' || referenceTrackType === 'string' ) continue;\n\n\t\t// Find the track in the target clip whose name and type matches the reference track\n\t\tconst targetTrack = targetClip.tracks.find( function ( track ) {\n\n\t\t\treturn track.name === referenceTrack.name\n\t\t\t\t&& track.ValueTypeName === referenceTrackType;\n\n\t\t} );\n\n\t\tif ( targetTrack === undefined ) continue;\n\n\t\tlet referenceOffset = 0;\n\t\tconst referenceValueSize = referenceTrack.getValueSize();\n\n\t\tif ( referenceTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline ) {\n\n\t\t\treferenceOffset = referenceValueSize / 3;\n\n\t\t}\n\n\t\tlet targetOffset = 0;\n\t\tconst targetValueSize = targetTrack.getValueSize();\n\n\t\tif ( targetTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline ) {\n\n\t\t\ttargetOffset = targetValueSize / 3;\n\n\t\t}\n\n\t\tconst lastIndex = referenceTrack.times.length - 1;\n\t\tlet referenceValue;\n\n\t\t// Find the value to subtract out of the track\n\t\tif ( referenceTime <= referenceTrack.times[ 0 ] ) {\n\n\t\t\t// Reference frame is earlier than the first keyframe, so just use the first keyframe\n\t\t\tconst startIndex = referenceOffset;\n\t\t\tconst endIndex = referenceValueSize - referenceOffset;\n\t\t\treferenceValue = arraySlice( referenceTrack.values, startIndex, endIndex );\n\n\t\t} else if ( referenceTime >= referenceTrack.times[ lastIndex ] ) {\n\n\t\t\t// Reference frame is after the last keyframe, so just use the last keyframe\n\t\t\tconst startIndex = lastIndex * referenceValueSize + referenceOffset;\n\t\t\tconst endIndex = startIndex + referenceValueSize - referenceOffset;\n\t\t\treferenceValue = arraySlice( referenceTrack.values, startIndex, endIndex );\n\n\t\t} else {\n\n\t\t\t// Interpolate to the reference value\n\t\t\tconst interpolant = referenceTrack.createInterpolant();\n\t\t\tconst startIndex = referenceOffset;\n\t\t\tconst endIndex = referenceValueSize - referenceOffset;\n\t\t\tinterpolant.evaluate( referenceTime );\n\t\t\treferenceValue = arraySlice( interpolant.resultBuffer, startIndex, endIndex );\n\n\t\t}\n\n\t\t// Conjugate the quaternion\n\t\tif ( referenceTrackType === 'quaternion' ) {\n\n\t\t\tconst referenceQuat = new Quaternion().fromArray( referenceValue ).normalize().conjugate();\n\t\t\treferenceQuat.toArray( referenceValue );\n\n\t\t}\n\n\t\t// Subtract the reference value from all of the track values\n\n\t\tconst numTimes = targetTrack.times.length;\n\t\tfor ( let j = 0; j < numTimes; ++ j ) {\n\n\t\t\tconst valueStart = j * targetValueSize + targetOffset;\n\n\t\t\tif ( referenceTrackType === 'quaternion' ) {\n\n\t\t\t\t// Multiply the conjugate for quaternion track types\n\t\t\t\tQuaternion.multiplyQuaternionsFlat(\n\t\t\t\t\ttargetTrack.values,\n\t\t\t\t\tvalueStart,\n\t\t\t\t\treferenceValue,\n\t\t\t\t\t0,\n\t\t\t\t\ttargetTrack.values,\n\t\t\t\t\tvalueStart\n\t\t\t\t);\n\n\t\t\t} else {\n\n\t\t\t\tconst valueEnd = targetValueSize - targetOffset * 2;\n\n\t\t\t\t// Subtract each value for all other numeric track types\n\t\t\t\tfor ( let k = 0; k < valueEnd; ++ k ) {\n\n\t\t\t\t\ttargetTrack.values[ valueStart + k ] -= referenceValue[ k ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttargetClip.blendMode = AdditiveAnimationBlendMode;\n\n\treturn targetClip;\n\n}\n\nvar AnimationUtils = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tarraySlice: arraySlice,\n\tconvertArray: convertArray,\n\tisTypedArray: isTypedArray,\n\tgetKeyframeOrder: getKeyframeOrder,\n\tsortedArray: sortedArray,\n\tflattenJSON: flattenJSON,\n\tsubclip: subclip,\n\tmakeClipAdditive: makeClipAdditive\n});\n\n/**\n * Abstract base class of interpolants over parametric samples.\n *\n * The parameter domain is one dimensional, typically the time or a path\n * along a curve defined by the data.\n *\n * The sample values can have any dimensionality and derived classes may\n * apply special interpretations to the data.\n *\n * This class provides the interval seek in a Template Method, deferring\n * the actual interpolation to derived classes.\n *\n * Time complexity is O(1) for linear access crossing at most two points\n * and O(log N) for random access, where N is the number of positions.\n *\n * References:\n *\n * \t\thttp://www.oodesign.com/template-method-pattern.html\n *\n */\n\nclass Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tthis.parameterPositions = parameterPositions;\n\t\tthis._cachedIndex = 0;\n\n\t\tthis.resultBuffer = resultBuffer !== undefined ?\n\t\t\tresultBuffer : new sampleValues.constructor( sampleSize );\n\t\tthis.sampleValues = sampleValues;\n\t\tthis.valueSize = sampleSize;\n\n\t\tthis.settings = null;\n\t\tthis.DefaultSettings_ = {};\n\n\t}\n\n\tevaluate( t ) {\n\n\t\tconst pp = this.parameterPositions;\n\t\tlet i1 = this._cachedIndex,\n\t\t\tt1 = pp[ i1 ],\n\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\tvalidate_interval: {\n\n\t\t\tseek: {\n\n\t\t\t\tlet right;\n\n\t\t\t\tlinear_scan: {\n\n\t\t\t\t\t//- See http://jsperf.com/comparison-to-undefined/3\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\n\t\t\t\t\t//- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\n\t\t\t\t\tforward_scan: if ( ! ( t < t1 ) ) {\n\n\t\t\t\t\t\tfor ( let giveUpAt = i1 + 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\t\t\t\tif ( t < t0 ) break forward_scan;\n\n\t\t\t\t\t\t\t\t// after end\n\n\t\t\t\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\t\t\t\treturn this.copySampleValue_( i1 - 1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt0 = t1;\n\t\t\t\t\t\t\tt1 = pp[ ++ i1 ];\n\n\t\t\t\t\t\t\tif ( t < t1 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the right side of the index\n\t\t\t\t\t\tright = pp.length;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\n\t\t\t\t\tif ( ! ( t >= t0 ) ) {\n\n\t\t\t\t\t\t// looping?\n\n\t\t\t\t\t\tconst t1global = pp[ 1 ];\n\n\t\t\t\t\t\tif ( t < t1global ) {\n\n\t\t\t\t\t\t\ti1 = 2; // + 1, using the scan for the details\n\t\t\t\t\t\t\tt0 = t1global;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// linear reverse scan\n\n\t\t\t\t\t\tfor ( let giveUpAt = i1 - 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\t\t\t\t// before start\n\n\t\t\t\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\t\t\t\treturn this.copySampleValue_( 0 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt1 = t0;\n\t\t\t\t\t\t\tt0 = pp[ -- i1 - 1 ];\n\n\t\t\t\t\t\t\tif ( t >= t0 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the left side of the index\n\t\t\t\t\t\tright = i1;\n\t\t\t\t\t\ti1 = 0;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// the interval is valid\n\n\t\t\t\t\tbreak validate_interval;\n\n\t\t\t\t} // linear scan\n\n\t\t\t\t// binary search\n\n\t\t\t\twhile ( i1 < right ) {\n\n\t\t\t\t\tconst mid = ( i1 + right ) >>> 1;\n\n\t\t\t\t\tif ( t < pp[ mid ] ) {\n\n\t\t\t\t\t\tright = mid;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ti1 = mid + 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tt1 = pp[ i1 ];\n\t\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\t\t\t// check boundary cases, again\n\n\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\treturn this.copySampleValue_( 0 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\treturn this.copySampleValue_( i1 - 1 );\n\n\t\t\t\t}\n\n\t\t\t} // seek\n\n\t\t\tthis._cachedIndex = i1;\n\n\t\t\tthis.intervalChanged_( i1, t0, t1 );\n\n\t\t} // validate_interval\n\n\t\treturn this.interpolate_( i1, t0, t, t1 );\n\n\t}\n\n\tgetSettings_() {\n\n\t\treturn this.settings || this.DefaultSettings_;\n\n\t}\n\n\tcopySampleValue_( index ) {\n\n\t\t// copies a sample value to the result buffer\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = index * stride;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\t// Template methods for derived classes:\n\n\tinterpolate_( /* i1, t0, t, t1 */ ) {\n\n\t\tthrow new Error( 'call to abstract method' );\n\t\t// implementations shall return this.resultBuffer\n\n\t}\n\n\tintervalChanged_( /* i1, t0, t1 */ ) {\n\n\t\t// empty\n\n\t}\n\n}\n\n/**\n * Fast and simple cubic spline interpolant.\n *\n * It was derived from a Hermitian construction setting the first derivative\n * at each sample position to the linear slope between neighboring positions\n * over their parameter interval.\n */\n\nclass CubicInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t\tthis._weightPrev = - 0;\n\t\tthis._offsetPrev = - 0;\n\t\tthis._weightNext = - 0;\n\t\tthis._offsetNext = - 0;\n\n\t\tthis.DefaultSettings_ = {\n\n\t\t\tendingStart: ZeroCurvatureEnding,\n\t\t\tendingEnd: ZeroCurvatureEnding\n\n\t\t};\n\n\t}\n\n\tintervalChanged_( i1, t0, t1 ) {\n\n\t\tconst pp = this.parameterPositions;\n\t\tlet iPrev = i1 - 2,\n\t\t\tiNext = i1 + 1,\n\n\t\t\ttPrev = pp[ iPrev ],\n\t\t\ttNext = pp[ iNext ];\n\n\t\tif ( tPrev === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingStart ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(t0) = 0\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = 2 * t0 - t1;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiPrev = pp.length - 2;\n\t\t\t\t\ttPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(t0) = 0 a.k.a. Natural Spline\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = t1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tNext === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingEnd ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(tN) = 0\n\t\t\t\t\tiNext = i1;\n\t\t\t\t\ttNext = 2 * t1 - t0;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiNext = 1;\n\t\t\t\t\ttNext = t1 + pp[ 1 ] - pp[ 0 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(tN) = 0, a.k.a. Natural Spline\n\t\t\t\t\tiNext = i1 - 1;\n\t\t\t\t\ttNext = t0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst halfDt = ( t1 - t0 ) * 0.5,\n\t\t\tstride = this.valueSize;\n\n\t\tthis._weightPrev = halfDt / ( t0 - tPrev );\n\t\tthis._weightNext = halfDt / ( tNext - t1 );\n\t\tthis._offsetPrev = iPrev * stride;\n\t\tthis._offsetNext = iNext * stride;\n\n\t}\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\to1 = i1 * stride,\t\to0 = o1 - stride,\n\t\t\toP = this._offsetPrev, \toN = this._offsetNext,\n\t\t\twP = this._weightPrev,\twN = this._weightNext,\n\n\t\t\tp = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tpp = p * p,\n\t\t\tppp = pp * p;\n\n\t\t// evaluate polynomials\n\n\t\tconst sP = - wP * ppp + 2 * wP * pp - wP * p;\n\t\tconst s0 = ( 1 + wP ) * ppp + ( - 1.5 - 2 * wP ) * pp + ( - 0.5 + wP ) * p + 1;\n\t\tconst s1 = ( - 1 - wN ) * ppp + ( 1.5 + wN ) * pp + 0.5 * p;\n\t\tconst sN = wN * ppp - wN * pp;\n\n\t\t// combine data linearly\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tsP * values[ oP + i ] +\n\t\t\t\t\ts0 * values[ o0 + i ] +\n\t\t\t\t\ts1 * values[ o1 + i ] +\n\t\t\t\t\tsN * values[ oN + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\nclass LinearInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\toffset1 = i1 * stride,\n\t\t\toffset0 = offset1 - stride,\n\n\t\t\tweight1 = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tweight0 = 1 - weight1;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tvalues[ offset0 + i ] * weight0 +\n\t\t\t\t\tvalues[ offset1 + i ] * weight1;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\n/**\n *\n * Interpolant that evaluates to the sample value at the position preceding\n * the parameter.\n */\n\nclass DiscreteInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tinterpolate_( i1 /*, t0, t, t1 */ ) {\n\n\t\treturn this.copySampleValue_( i1 - 1 );\n\n\t}\n\n}\n\nclass KeyframeTrack {\n\n\tconstructor( name, times, values, interpolation ) {\n\n\t\tif ( name === undefined ) throw new Error( 'THREE.KeyframeTrack: track name is undefined' );\n\t\tif ( times === undefined || times.length === 0 ) throw new Error( 'THREE.KeyframeTrack: no keyframes in track named ' + name );\n\n\t\tthis.name = name;\n\n\t\tthis.times = convertArray( times, this.TimeBufferType );\n\t\tthis.values = convertArray( values, this.ValueBufferType );\n\n\t\tthis.setInterpolation( interpolation || this.DefaultInterpolation );\n\n\t}\n\n\t// Serialization (in static context, because of constructor invocation\n\t// and automatic invocation of .toJSON):\n\n\tstatic toJSON( track ) {\n\n\t\tconst trackType = track.constructor;\n\n\t\tlet json;\n\n\t\t// derived classes can define a static toJSON method\n\t\tif ( trackType.toJSON !== this.toJSON ) {\n\n\t\t\tjson = trackType.toJSON( track );\n\n\t\t} else {\n\n\t\t\t// by default, we assume the data can be serialized as-is\n\t\t\tjson = {\n\n\t\t\t\t'name': track.name,\n\t\t\t\t'times': convertArray( track.times, Array ),\n\t\t\t\t'values': convertArray( track.values, Array )\n\n\t\t\t};\n\n\t\t\tconst interpolation = track.getInterpolation();\n\n\t\t\tif ( interpolation !== track.DefaultInterpolation ) {\n\n\t\t\t\tjson.interpolation = interpolation;\n\n\t\t\t}\n\n\t\t}\n\n\t\tjson.type = track.ValueTypeName; // mandatory\n\n\t\treturn json;\n\n\t}\n\n\tInterpolantFactoryMethodDiscrete( result ) {\n\n\t\treturn new DiscreteInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t}\n\n\tInterpolantFactoryMethodLinear( result ) {\n\n\t\treturn new LinearInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t}\n\n\tInterpolantFactoryMethodSmooth( result ) {\n\n\t\treturn new CubicInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t}\n\n\tsetInterpolation( interpolation ) {\n\n\t\tlet factoryMethod;\n\n\t\tswitch ( interpolation ) {\n\n\t\t\tcase InterpolateDiscrete:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodDiscrete;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateLinear:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodLinear;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateSmooth:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodSmooth;\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( factoryMethod === undefined ) {\n\n\t\t\tconst message = 'unsupported interpolation for ' +\n\t\t\t\tthis.ValueTypeName + ' keyframe track named ' + this.name;\n\n\t\t\tif ( this.createInterpolant === undefined ) {\n\n\t\t\t\t// fall back to default, unless the default itself is messed up\n\t\t\t\tif ( interpolation !== this.DefaultInterpolation ) {\n\n\t\t\t\t\tthis.setInterpolation( this.DefaultInterpolation );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( message ); // fatal, in this case\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconsole.warn( 'THREE.KeyframeTrack:', message );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tthis.createInterpolant = factoryMethod;\n\n\t\treturn this;\n\n\t}\n\n\tgetInterpolation() {\n\n\t\tswitch ( this.createInterpolant ) {\n\n\t\t\tcase this.InterpolantFactoryMethodDiscrete:\n\n\t\t\t\treturn InterpolateDiscrete;\n\n\t\t\tcase this.InterpolantFactoryMethodLinear:\n\n\t\t\t\treturn InterpolateLinear;\n\n\t\t\tcase this.InterpolantFactoryMethodSmooth:\n\n\t\t\t\treturn InterpolateSmooth;\n\n\t\t}\n\n\t}\n\n\tgetValueSize() {\n\n\t\treturn this.values.length / this.times.length;\n\n\t}\n\n\t// move all keyframes either forwards or backwards in time\n\tshift( timeOffset ) {\n\n\t\tif ( timeOffset !== 0.0 ) {\n\n\t\t\tconst times = this.times;\n\n\t\t\tfor ( let i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] += timeOffset;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// scale all keyframe times by a factor (useful for frame <-> seconds conversions)\n\tscale( timeScale ) {\n\n\t\tif ( timeScale !== 1.0 ) {\n\n\t\t\tconst times = this.times;\n\n\t\t\tfor ( let i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] *= timeScale;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// removes keyframes before and after animation without changing any values within the range [startTime, endTime].\n\t// IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values\n\ttrim( startTime, endTime ) {\n\n\t\tconst times = this.times,\n\t\t\tnKeys = times.length;\n\n\t\tlet from = 0,\n\t\t\tto = nKeys - 1;\n\n\t\twhile ( from !== nKeys && times[ from ] < startTime ) {\n\n\t\t\t++ from;\n\n\t\t}\n\n\t\twhile ( to !== - 1 && times[ to ] > endTime ) {\n\n\t\t\t-- to;\n\n\t\t}\n\n\t\t++ to; // inclusive -> exclusive bound\n\n\t\tif ( from !== 0 || to !== nKeys ) {\n\n\t\t\t// empty tracks are forbidden, so keep at least one keyframe\n\t\t\tif ( from >= to ) {\n\n\t\t\t\tto = Math.max( to, 1 );\n\t\t\t\tfrom = to - 1;\n\n\t\t\t}\n\n\t\t\tconst stride = this.getValueSize();\n\t\t\tthis.times = arraySlice( times, from, to );\n\t\t\tthis.values = arraySlice( this.values, from * stride, to * stride );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable\n\tvalidate() {\n\n\t\tlet valid = true;\n\n\t\tconst valueSize = this.getValueSize();\n\t\tif ( valueSize - Math.floor( valueSize ) !== 0 ) {\n\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Invalid value size in track.', this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tconst times = this.times,\n\t\t\tvalues = this.values,\n\n\t\t\tnKeys = times.length;\n\n\t\tif ( nKeys === 0 ) {\n\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Track is empty.', this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tlet prevTime = null;\n\n\t\tfor ( let i = 0; i !== nKeys; i ++ ) {\n\n\t\t\tconst currTime = times[ i ];\n\n\t\t\tif ( typeof currTime === 'number' && isNaN( currTime ) ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Time is not a valid number.', this, i, currTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( prevTime !== null && prevTime > currTime ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Out of order keys.', this, i, currTime, prevTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tprevTime = currTime;\n\n\t\t}\n\n\t\tif ( values !== undefined ) {\n\n\t\t\tif ( isTypedArray( values ) ) {\n\n\t\t\t\tfor ( let i = 0, n = values.length; i !== n; ++ i ) {\n\n\t\t\t\t\tconst value = values[ i ];\n\n\t\t\t\t\tif ( isNaN( value ) ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Value is not a valid number.', this, i, value );\n\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn valid;\n\n\t}\n\n\t// removes equivalent sequential keys as common in morph target sequences\n\t// (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)\n\toptimize() {\n\n\t\t// times or values may be shared with other tracks, so overwriting is unsafe\n\t\tconst times = arraySlice( this.times ),\n\t\t\tvalues = arraySlice( this.values ),\n\t\t\tstride = this.getValueSize(),\n\n\t\t\tsmoothInterpolation = this.getInterpolation() === InterpolateSmooth,\n\n\t\t\tlastIndex = times.length - 1;\n\n\t\tlet writeIndex = 1;\n\n\t\tfor ( let i = 1; i < lastIndex; ++ i ) {\n\n\t\t\tlet keep = false;\n\n\t\t\tconst time = times[ i ];\n\t\t\tconst timeNext = times[ i + 1 ];\n\n\t\t\t// remove adjacent keyframes scheduled at the same time\n\n\t\t\tif ( time !== timeNext && ( i !== 1 || time !== times[ 0 ] ) ) {\n\n\t\t\t\tif ( ! smoothInterpolation ) {\n\n\t\t\t\t\t// remove unnecessary keyframes same as their neighbors\n\n\t\t\t\t\tconst offset = i * stride,\n\t\t\t\t\t\toffsetP = offset - stride,\n\t\t\t\t\t\toffsetN = offset + stride;\n\n\t\t\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tconst value = values[ offset + j ];\n\n\t\t\t\t\t\tif ( value !== values[ offsetP + j ] ||\n\t\t\t\t\t\t\tvalue !== values[ offsetN + j ] ) {\n\n\t\t\t\t\t\t\tkeep = true;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tkeep = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// in-place compaction\n\n\t\t\tif ( keep ) {\n\n\t\t\t\tif ( i !== writeIndex ) {\n\n\t\t\t\t\ttimes[ writeIndex ] = times[ i ];\n\n\t\t\t\t\tconst readOffset = i * stride,\n\t\t\t\t\t\twriteOffset = writeIndex * stride;\n\n\t\t\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t++ writeIndex;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// flush last keyframe (compaction looks ahead)\n\n\t\tif ( lastIndex > 0 ) {\n\n\t\t\ttimes[ writeIndex ] = times[ lastIndex ];\n\n\t\t\tfor ( let readOffset = lastIndex * stride, writeOffset = writeIndex * stride, j = 0; j !== stride; ++ j ) {\n\n\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t}\n\n\t\t\t++ writeIndex;\n\n\t\t}\n\n\t\tif ( writeIndex !== times.length ) {\n\n\t\t\tthis.times = arraySlice( times, 0, writeIndex );\n\t\t\tthis.values = arraySlice( values, 0, writeIndex * stride );\n\n\t\t} else {\n\n\t\t\tthis.times = times;\n\t\t\tthis.values = values;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\tconst times = arraySlice( this.times, 0 );\n\t\tconst values = arraySlice( this.values, 0 );\n\n\t\tconst TypedKeyframeTrack = this.constructor;\n\t\tconst track = new TypedKeyframeTrack( this.name, times, values );\n\n\t\t// Interpolant argument to constructor is not saved, so copy the factory method directly.\n\t\ttrack.createInterpolant = this.createInterpolant;\n\n\t\treturn track;\n\n\t}\n\n}\n\nKeyframeTrack.prototype.TimeBufferType = Float32Array;\nKeyframeTrack.prototype.ValueBufferType = Float32Array;\nKeyframeTrack.prototype.DefaultInterpolation = InterpolateLinear;\n\n/**\n * A Track of Boolean keyframe values.\n */\nclass BooleanKeyframeTrack extends KeyframeTrack {}\n\nBooleanKeyframeTrack.prototype.ValueTypeName = 'bool';\nBooleanKeyframeTrack.prototype.ValueBufferType = Array;\nBooleanKeyframeTrack.prototype.DefaultInterpolation = InterpolateDiscrete;\nBooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear = undefined;\nBooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth = undefined;\n\n/**\n * A Track of keyframe values that represent color.\n */\nclass ColorKeyframeTrack extends KeyframeTrack {}\n\nColorKeyframeTrack.prototype.ValueTypeName = 'color';\n\n/**\n * A Track of numeric keyframe values.\n */\nclass NumberKeyframeTrack extends KeyframeTrack {}\n\nNumberKeyframeTrack.prototype.ValueTypeName = 'number';\n\n/**\n * Spherical linear unit quaternion interpolant.\n */\n\nclass QuaternionLinearInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\talpha = ( t - t0 ) / ( t1 - t0 );\n\n\t\tlet offset = i1 * stride;\n\n\t\tfor ( let end = offset + stride; offset !== end; offset += 4 ) {\n\n\t\t\tQuaternion.slerpFlat( result, 0, values, offset - stride, values, offset, alpha );\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\n/**\n * A Track of quaternion keyframe values.\n */\nclass QuaternionKeyframeTrack extends KeyframeTrack {\n\n\tInterpolantFactoryMethodLinear( result ) {\n\n\t\treturn new QuaternionLinearInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t}\n\n}\n\nQuaternionKeyframeTrack.prototype.ValueTypeName = 'quaternion';\n// ValueBufferType is inherited\nQuaternionKeyframeTrack.prototype.DefaultInterpolation = InterpolateLinear;\nQuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth = undefined;\n\n/**\n * A Track that interpolates Strings\n */\nclass StringKeyframeTrack extends KeyframeTrack {}\n\nStringKeyframeTrack.prototype.ValueTypeName = 'string';\nStringKeyframeTrack.prototype.ValueBufferType = Array;\nStringKeyframeTrack.prototype.DefaultInterpolation = InterpolateDiscrete;\nStringKeyframeTrack.prototype.InterpolantFactoryMethodLinear = undefined;\nStringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth = undefined;\n\n/**\n * A Track of vectored keyframe values.\n */\nclass VectorKeyframeTrack extends KeyframeTrack {}\n\nVectorKeyframeTrack.prototype.ValueTypeName = 'vector';\n\nclass AnimationClip {\n\n\tconstructor( name, duration = - 1, tracks, blendMode = NormalAnimationBlendMode ) {\n\n\t\tthis.name = name;\n\t\tthis.tracks = tracks;\n\t\tthis.duration = duration;\n\t\tthis.blendMode = blendMode;\n\n\t\tthis.uuid = generateUUID();\n\n\t\t// this means it should figure out its duration by scanning the tracks\n\t\tif ( this.duration < 0 ) {\n\n\t\t\tthis.resetDuration();\n\n\t\t}\n\n\t}\n\n\n\tstatic parse( json ) {\n\n\t\tconst tracks = [],\n\t\t\tjsonTracks = json.tracks,\n\t\t\tframeTime = 1.0 / ( json.fps || 1.0 );\n\n\t\tfor ( let i = 0, n = jsonTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( parseKeyframeTrack( jsonTracks[ i ] ).scale( frameTime ) );\n\n\t\t}\n\n\t\tconst clip = new this( json.name, json.duration, tracks, json.blendMode );\n\t\tclip.uuid = json.uuid;\n\n\t\treturn clip;\n\n\t}\n\n\tstatic toJSON( clip ) {\n\n\t\tconst tracks = [],\n\t\t\tclipTracks = clip.tracks;\n\n\t\tconst json = {\n\n\t\t\t'name': clip.name,\n\t\t\t'duration': clip.duration,\n\t\t\t'tracks': tracks,\n\t\t\t'uuid': clip.uuid,\n\t\t\t'blendMode': clip.blendMode\n\n\t\t};\n\n\t\tfor ( let i = 0, n = clipTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( KeyframeTrack.toJSON( clipTracks[ i ] ) );\n\n\t\t}\n\n\t\treturn json;\n\n\t}\n\n\tstatic CreateFromMorphTargetSequence( name, morphTargetSequence, fps, noLoop ) {\n\n\t\tconst numMorphTargets = morphTargetSequence.length;\n\t\tconst tracks = [];\n\n\t\tfor ( let i = 0; i < numMorphTargets; i ++ ) {\n\n\t\t\tlet times = [];\n\t\t\tlet values = [];\n\n\t\t\ttimes.push(\n\t\t\t\t( i + numMorphTargets - 1 ) % numMorphTargets,\n\t\t\t\ti,\n\t\t\t\t( i + 1 ) % numMorphTargets );\n\n\t\t\tvalues.push( 0, 1, 0 );\n\n\t\t\tconst order = getKeyframeOrder( times );\n\t\t\ttimes = sortedArray( times, 1, order );\n\t\t\tvalues = sortedArray( values, 1, order );\n\n\t\t\t// if there is a key at the first frame, duplicate it as the\n\t\t\t// last frame as well for perfect loop.\n\t\t\tif ( ! noLoop && times[ 0 ] === 0 ) {\n\n\t\t\t\ttimes.push( numMorphTargets );\n\t\t\t\tvalues.push( values[ 0 ] );\n\n\t\t\t}\n\n\t\t\ttracks.push(\n\t\t\t\tnew NumberKeyframeTrack(\n\t\t\t\t\t'.morphTargetInfluences[' + morphTargetSequence[ i ].name + ']',\n\t\t\t\t\ttimes, values\n\t\t\t\t).scale( 1.0 / fps ) );\n\n\t\t}\n\n\t\treturn new this( name, - 1, tracks );\n\n\t}\n\n\tstatic findByName( objectOrClipArray, name ) {\n\n\t\tlet clipArray = objectOrClipArray;\n\n\t\tif ( ! Array.isArray( objectOrClipArray ) ) {\n\n\t\t\tconst o = objectOrClipArray;\n\t\t\tclipArray = o.geometry && o.geometry.animations || o.animations;\n\n\t\t}\n\n\t\tfor ( let i = 0; i < clipArray.length; i ++ ) {\n\n\t\t\tif ( clipArray[ i ].name === name ) {\n\n\t\t\t\treturn clipArray[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\tstatic CreateClipsFromMorphTargetSequences( morphTargets, fps, noLoop ) {\n\n\t\tconst animationToMorphTargets = {};\n\n\t\t// tested with https://regex101.com/ on trick sequences\n\t\t// such flamingo_flyA_003, flamingo_run1_003, crdeath0059\n\t\tconst pattern = /^([\\w-]*?)([\\d]+)$/;\n\n\t\t// sort morph target names into animation groups based\n\t\t// patterns like Walk_001, Walk_002, Run_001, Run_002\n\t\tfor ( let i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tconst morphTarget = morphTargets[ i ];\n\t\t\tconst parts = morphTarget.name.match( pattern );\n\n\t\t\tif ( parts && parts.length > 1 ) {\n\n\t\t\t\tconst name = parts[ 1 ];\n\n\t\t\t\tlet animationMorphTargets = animationToMorphTargets[ name ];\n\n\t\t\t\tif ( ! animationMorphTargets ) {\n\n\t\t\t\t\tanimationToMorphTargets[ name ] = animationMorphTargets = [];\n\n\t\t\t\t}\n\n\t\t\t\tanimationMorphTargets.push( morphTarget );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst clips = [];\n\n\t\tfor ( const name in animationToMorphTargets ) {\n\n\t\t\tclips.push( this.CreateFromMorphTargetSequence( name, animationToMorphTargets[ name ], fps, noLoop ) );\n\n\t\t}\n\n\t\treturn clips;\n\n\t}\n\n\t// parse the animation.hierarchy format\n\tstatic parseAnimation( animation, bones ) {\n\n\t\tif ( ! animation ) {\n\n\t\t\tconsole.error( 'THREE.AnimationClip: No animation in JSONLoader data.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst addNonemptyTrack = function ( trackType, trackName, animationKeys, propertyName, destTracks ) {\n\n\t\t\t// only return track if there are actually keys.\n\t\t\tif ( animationKeys.length !== 0 ) {\n\n\t\t\t\tconst times = [];\n\t\t\t\tconst values = [];\n\n\t\t\t\tflattenJSON( animationKeys, times, values, propertyName );\n\n\t\t\t\t// empty keys are filtered out, so check again\n\t\t\t\tif ( times.length !== 0 ) {\n\n\t\t\t\t\tdestTracks.push( new trackType( trackName, times, values ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tconst tracks = [];\n\n\t\tconst clipName = animation.name || 'default';\n\t\tconst fps = animation.fps || 30;\n\t\tconst blendMode = animation.blendMode;\n\n\t\t// automatic length determination in AnimationClip.\n\t\tlet duration = animation.length || - 1;\n\n\t\tconst hierarchyTracks = animation.hierarchy || [];\n\n\t\tfor ( let h = 0; h < hierarchyTracks.length; h ++ ) {\n\n\t\t\tconst animationKeys = hierarchyTracks[ h ].keys;\n\n\t\t\t// skip empty tracks\n\t\t\tif ( ! animationKeys || animationKeys.length === 0 ) continue;\n\n\t\t\t// process morph targets\n\t\t\tif ( animationKeys[ 0 ].morphTargets ) {\n\n\t\t\t\t// figure out all morph targets used in this track\n\t\t\t\tconst morphTargetNames = {};\n\n\t\t\t\tlet k;\n\n\t\t\t\tfor ( k = 0; k < animationKeys.length; k ++ ) {\n\n\t\t\t\t\tif ( animationKeys[ k ].morphTargets ) {\n\n\t\t\t\t\t\tfor ( let m = 0; m < animationKeys[ k ].morphTargets.length; m ++ ) {\n\n\t\t\t\t\t\t\tmorphTargetNames[ animationKeys[ k ].morphTargets[ m ] ] = - 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// create a track for each morph target with all zero\n\t\t\t\t// morphTargetInfluences except for the keys in which\n\t\t\t\t// the morphTarget is named.\n\t\t\t\tfor ( const morphTargetName in morphTargetNames ) {\n\n\t\t\t\t\tconst times = [];\n\t\t\t\t\tconst values = [];\n\n\t\t\t\t\tfor ( let m = 0; m !== animationKeys[ k ].morphTargets.length; ++ m ) {\n\n\t\t\t\t\t\tconst animationKey = animationKeys[ k ];\n\n\t\t\t\t\t\ttimes.push( animationKey.time );\n\t\t\t\t\t\tvalues.push( ( animationKey.morphTarget === morphTargetName ) ? 1 : 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( new NumberKeyframeTrack( '.morphTargetInfluence[' + morphTargetName + ']', times, values ) );\n\n\t\t\t\t}\n\n\t\t\t\tduration = morphTargetNames.length * fps;\n\n\t\t\t} else {\n\n\t\t\t\t// ...assume skeletal animation\n\n\t\t\t\tconst boneName = '.bones[' + bones[ h ].name + ']';\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.position',\n\t\t\t\t\tanimationKeys, 'pos', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tQuaternionKeyframeTrack, boneName + '.quaternion',\n\t\t\t\t\tanimationKeys, 'rot', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.scale',\n\t\t\t\t\tanimationKeys, 'scl', tracks );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tracks.length === 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst clip = new this( clipName, duration, tracks, blendMode );\n\n\t\treturn clip;\n\n\t}\n\n\tresetDuration() {\n\n\t\tconst tracks = this.tracks;\n\t\tlet duration = 0;\n\n\t\tfor ( let i = 0, n = tracks.length; i !== n; ++ i ) {\n\n\t\t\tconst track = this.tracks[ i ];\n\n\t\t\tduration = Math.max( duration, track.times[ track.times.length - 1 ] );\n\n\t\t}\n\n\t\tthis.duration = duration;\n\n\t\treturn this;\n\n\t}\n\n\ttrim() {\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].trim( 0, this.duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tvalidate() {\n\n\t\tlet valid = true;\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tvalid = valid && this.tracks[ i ].validate();\n\n\t\t}\n\n\t\treturn valid;\n\n\t}\n\n\toptimize() {\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].optimize();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\tconst tracks = [];\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\ttracks.push( this.tracks[ i ].clone() );\n\n\t\t}\n\n\t\treturn new this.constructor( this.name, this.duration, tracks, this.blendMode );\n\n\t}\n\n\ttoJSON() {\n\n\t\treturn this.constructor.toJSON( this );\n\n\t}\n\n}\n\nfunction getTrackTypeForValueTypeName( typeName ) {\n\n\tswitch ( typeName.toLowerCase() ) {\n\n\t\tcase 'scalar':\n\t\tcase 'double':\n\t\tcase 'float':\n\t\tcase 'number':\n\t\tcase 'integer':\n\n\t\t\treturn NumberKeyframeTrack;\n\n\t\tcase 'vector':\n\t\tcase 'vector2':\n\t\tcase 'vector3':\n\t\tcase 'vector4':\n\n\t\t\treturn VectorKeyframeTrack;\n\n\t\tcase 'color':\n\n\t\t\treturn ColorKeyframeTrack;\n\n\t\tcase 'quaternion':\n\n\t\t\treturn QuaternionKeyframeTrack;\n\n\t\tcase 'bool':\n\t\tcase 'boolean':\n\n\t\t\treturn BooleanKeyframeTrack;\n\n\t\tcase 'string':\n\n\t\t\treturn StringKeyframeTrack;\n\n\t}\n\n\tthrow new Error( 'THREE.KeyframeTrack: Unsupported typeName: ' + typeName );\n\n}\n\nfunction parseKeyframeTrack( json ) {\n\n\tif ( json.type === undefined ) {\n\n\t\tthrow new Error( 'THREE.KeyframeTrack: track type undefined, can not parse' );\n\n\t}\n\n\tconst trackType = getTrackTypeForValueTypeName( json.type );\n\n\tif ( json.times === undefined ) {\n\n\t\tconst times = [], values = [];\n\n\t\tflattenJSON( json.keys, times, values, 'value' );\n\n\t\tjson.times = times;\n\t\tjson.values = values;\n\n\t}\n\n\t// derived classes can define a static parse method\n\tif ( trackType.parse !== undefined ) {\n\n\t\treturn trackType.parse( json );\n\n\t} else {\n\n\t\t// by default, we assume a constructor compatible with the base\n\t\treturn new trackType( json.name, json.times, json.values, json.interpolation );\n\n\t}\n\n}\n\nconst Cache = {\n\n\tenabled: false,\n\n\tfiles: {},\n\n\tadd: function ( key, file ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\n\n\t\tthis.files[ key ] = file;\n\n\t},\n\n\tget: function ( key ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\n\n\t\treturn this.files[ key ];\n\n\t},\n\n\tremove: function ( key ) {\n\n\t\tdelete this.files[ key ];\n\n\t},\n\n\tclear: function () {\n\n\t\tthis.files = {};\n\n\t}\n\n};\n\nclass LoadingManager {\n\n\tconstructor( onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tlet isLoading = false;\n\t\tlet itemsLoaded = 0;\n\t\tlet itemsTotal = 0;\n\t\tlet urlModifier = undefined;\n\t\tconst handlers = [];\n\n\t\t// Refer to #5689 for the reason why we don't set .onStart\n\t\t// in the constructor\n\n\t\tthis.onStart = undefined;\n\t\tthis.onLoad = onLoad;\n\t\tthis.onProgress = onProgress;\n\t\tthis.onError = onError;\n\n\t\tthis.itemStart = function ( url ) {\n\n\t\t\titemsTotal ++;\n\n\t\t\tif ( isLoading === false ) {\n\n\t\t\t\tif ( scope.onStart !== undefined ) {\n\n\t\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tisLoading = true;\n\n\t\t};\n\n\t\tthis.itemEnd = function ( url ) {\n\n\t\t\titemsLoaded ++;\n\n\t\t\tif ( scope.onProgress !== undefined ) {\n\n\t\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\n\n\t\t\t}\n\n\t\t\tif ( itemsLoaded === itemsTotal ) {\n\n\t\t\t\tisLoading = false;\n\n\t\t\t\tif ( scope.onLoad !== undefined ) {\n\n\t\t\t\t\tscope.onLoad();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.itemError = function ( url ) {\n\n\t\t\tif ( scope.onError !== undefined ) {\n\n\t\t\t\tscope.onError( url );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.resolveURL = function ( url ) {\n\n\t\t\tif ( urlModifier ) {\n\n\t\t\t\treturn urlModifier( url );\n\n\t\t\t}\n\n\t\t\treturn url;\n\n\t\t};\n\n\t\tthis.setURLModifier = function ( transform ) {\n\n\t\t\turlModifier = transform;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t\tthis.addHandler = function ( regex, loader ) {\n\n\t\t\thandlers.push( regex, loader );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t\tthis.removeHandler = function ( regex ) {\n\n\t\t\tconst index = handlers.indexOf( regex );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\thandlers.splice( index, 2 );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t};\n\n\t\tthis.getHandler = function ( file ) {\n\n\t\t\tfor ( let i = 0, l = handlers.length; i < l; i += 2 ) {\n\n\t\t\t\tconst regex = handlers[ i ];\n\t\t\t\tconst loader = handlers[ i + 1 ];\n\n\t\t\t\tif ( regex.global ) regex.lastIndex = 0; // see #17920\n\n\t\t\t\tif ( regex.test( file ) ) {\n\n\t\t\t\t\treturn loader;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\t};\n\n\t}\n\n}\n\nconst DefaultLoadingManager = /*@__PURE__*/ new LoadingManager();\n\nclass Loader {\n\n\tconstructor( manager ) {\n\n\t\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n\t\tthis.crossOrigin = 'anonymous';\n\t\tthis.withCredentials = false;\n\t\tthis.path = '';\n\t\tthis.resourcePath = '';\n\t\tthis.requestHeader = {};\n\n\t}\n\n\tload( /* url, onLoad, onProgress, onError */ ) {}\n\n\tloadAsync( url, onProgress ) {\n\n\t\tconst scope = this;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tscope.load( url, resolve, onProgress, reject );\n\n\t\t} );\n\n\t}\n\n\tparse( /* data */ ) {}\n\n\tsetCrossOrigin( crossOrigin ) {\n\n\t\tthis.crossOrigin = crossOrigin;\n\t\treturn this;\n\n\t}\n\n\tsetWithCredentials( value ) {\n\n\t\tthis.withCredentials = value;\n\t\treturn this;\n\n\t}\n\n\tsetPath( path ) {\n\n\t\tthis.path = path;\n\t\treturn this;\n\n\t}\n\n\tsetResourcePath( resourcePath ) {\n\n\t\tthis.resourcePath = resourcePath;\n\t\treturn this;\n\n\t}\n\n\tsetRequestHeader( requestHeader ) {\n\n\t\tthis.requestHeader = requestHeader;\n\t\treturn this;\n\n\t}\n\n}\n\nconst loading = {};\n\nclass HttpError extends Error {\n\n\tconstructor( message, response ) {\n\n\t\tsuper( message );\n\t\tthis.response = response;\n\n\t}\n\n}\n\nclass FileLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tthis.manager.itemStart( url );\n\n\t\t\tsetTimeout( () => {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tthis.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\t// Check if request is duplicate\n\n\t\tif ( loading[ url ] !== undefined ) {\n\n\t\t\tloading[ url ].push( {\n\n\t\t\t\tonLoad: onLoad,\n\t\t\t\tonProgress: onProgress,\n\t\t\t\tonError: onError\n\n\t\t\t} );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Initialise array for duplicate requests\n\t\tloading[ url ] = [];\n\n\t\tloading[ url ].push( {\n\t\t\tonLoad: onLoad,\n\t\t\tonProgress: onProgress,\n\t\t\tonError: onError,\n\t\t} );\n\n\t\t// create request\n\t\tconst req = new Request( url, {\n\t\t\theaders: new Headers( this.requestHeader ),\n\t\t\tcredentials: this.withCredentials ? 'include' : 'same-origin',\n\t\t\t// An abort controller could be added within a future PR\n\t\t} );\n\n\t\t// record states ( avoid data race )\n\t\tconst mimeType = this.mimeType;\n\t\tconst responseType = this.responseType;\n\n\t\t// start the fetch\n\t\tfetch( req )\n\t\t\t.then( response => {\n\n\t\t\t\tif ( response.status === 200 || response.status === 0 ) {\n\n\t\t\t\t\t// Some browsers return HTTP Status 0 when using non-http protocol\n\t\t\t\t\t// e.g. 'file://' or 'data://'. Handle as success.\n\n\t\t\t\t\tif ( response.status === 0 ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.FileLoader: HTTP Status 0 received.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Workaround: Checking if response.body === undefined for Alipay browser #23548\n\n\t\t\t\t\tif ( typeof ReadableStream === 'undefined' || response.body === undefined || response.body.getReader === undefined ) {\n\n\t\t\t\t\t\treturn response;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst callbacks = loading[ url ];\n\t\t\t\t\tconst reader = response.body.getReader();\n\n\t\t\t\t\t// Nginx needs X-File-Size check\n\t\t\t\t\t// https://serverfault.com/questions/482875/why-does-nginx-remove-content-length-header-for-chunked-content\n\t\t\t\t\tconst contentLength = response.headers.get( 'Content-Length' ) || response.headers.get( 'X-File-Size' );\n\t\t\t\t\tconst total = contentLength ? parseInt( contentLength ) : 0;\n\t\t\t\t\tconst lengthComputable = total !== 0;\n\t\t\t\t\tlet loaded = 0;\n\n\t\t\t\t\t// periodically read data into the new stream tracking while download progress\n\t\t\t\t\tconst stream = new ReadableStream( {\n\t\t\t\t\t\tstart( controller ) {\n\n\t\t\t\t\t\t\treadData();\n\n\t\t\t\t\t\t\tfunction readData() {\n\n\t\t\t\t\t\t\t\treader.read().then( ( { done, value } ) => {\n\n\t\t\t\t\t\t\t\t\tif ( done ) {\n\n\t\t\t\t\t\t\t\t\t\tcontroller.close();\n\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tloaded += value.byteLength;\n\n\t\t\t\t\t\t\t\t\t\tconst event = new ProgressEvent( 'progress', { lengthComputable, loaded, total } );\n\t\t\t\t\t\t\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\t\t\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\t\t\t\t\t\t\tif ( callback.onProgress ) callback.onProgress( event );\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tcontroller.enqueue( value );\n\t\t\t\t\t\t\t\t\t\treadData();\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t\treturn new Response( stream );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new HttpError( `fetch for \"${response.url}\" responded with ${response.status}: ${response.statusText}`, response );\n\n\t\t\t\t}\n\n\t\t\t} )\n\t\t\t.then( response => {\n\n\t\t\t\tswitch ( responseType ) {\n\n\t\t\t\t\tcase 'arraybuffer':\n\n\t\t\t\t\t\treturn response.arrayBuffer();\n\n\t\t\t\t\tcase 'blob':\n\n\t\t\t\t\t\treturn response.blob();\n\n\t\t\t\t\tcase 'document':\n\n\t\t\t\t\t\treturn response.text()\n\t\t\t\t\t\t\t.then( text => {\n\n\t\t\t\t\t\t\t\tconst parser = new DOMParser();\n\t\t\t\t\t\t\t\treturn parser.parseFromString( text, mimeType );\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\tcase 'json':\n\n\t\t\t\t\t\treturn response.json();\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif ( mimeType === undefined ) {\n\n\t\t\t\t\t\t\treturn response.text();\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// sniff encoding\n\t\t\t\t\t\t\tconst re = /charset=\"?([^;\"\\s]*)\"?/i;\n\t\t\t\t\t\t\tconst exec = re.exec( mimeType );\n\t\t\t\t\t\t\tconst label = exec && exec[ 1 ] ? exec[ 1 ].toLowerCase() : undefined;\n\t\t\t\t\t\t\tconst decoder = new TextDecoder( label );\n\t\t\t\t\t\t\treturn response.arrayBuffer().then( ab => decoder.decode( ab ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} )\n\t\t\t.then( data => {\n\n\t\t\t\t// Add to cache only on HTTP success, so that we do not cache\n\t\t\t\t// error response bodies as proper responses to requests.\n\t\t\t\tCache.add( url, data );\n\n\t\t\t\tconst callbacks = loading[ url ];\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onLoad ) callback.onLoad( data );\n\n\t\t\t\t}\n\n\t\t\t} )\n\t\t\t.catch( err => {\n\n\t\t\t\t// Abort errors and other errors are handled the same\n\n\t\t\t\tconst callbacks = loading[ url ];\n\n\t\t\t\tif ( callbacks === undefined ) {\n\n\t\t\t\t\t// When onLoad was called and url was deleted in `loading`\n\t\t\t\t\tthis.manager.itemError( url );\n\t\t\t\t\tthrow err;\n\n\t\t\t\t}\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onError ) callback.onError( err );\n\n\t\t\t\t}\n\n\t\t\t\tthis.manager.itemError( url );\n\n\t\t\t} )\n\t\t\t.finally( () => {\n\n\t\t\t\tthis.manager.itemEnd( url );\n\n\t\t\t} );\n\n\t\tthis.manager.itemStart( url );\n\n\t}\n\n\tsetResponseType( value ) {\n\n\t\tthis.responseType = value;\n\t\treturn this;\n\n\t}\n\n\tsetMimeType( value ) {\n\n\t\tthis.mimeType = value;\n\t\treturn this;\n\n\t}\n\n}\n\nclass AnimationLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( json ) {\n\n\t\tconst animations = [];\n\n\t\tfor ( let i = 0; i < json.length; i ++ ) {\n\n\t\t\tconst clip = AnimationClip.parse( json[ i ] );\n\n\t\t\tanimations.push( clip );\n\n\t\t}\n\n\t\treturn animations;\n\n\t}\n\n}\n\n/**\n * Abstract Base class to block based textures loader (dds, pvr, ...)\n *\n * Sub classes have to implement the parse() method which will be used in load().\n */\n\nclass CompressedTextureLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst images = [];\n\n\t\tconst texture = new CompressedTexture();\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\n\t\tlet loaded = 0;\n\n\t\tfunction loadTexture( i ) {\n\n\t\t\tloader.load( url[ i ], function ( buffer ) {\n\n\t\t\t\tconst texDatas = scope.parse( buffer, true );\n\n\t\t\t\timages[ i ] = {\n\t\t\t\t\twidth: texDatas.width,\n\t\t\t\t\theight: texDatas.height,\n\t\t\t\t\tformat: texDatas.format,\n\t\t\t\t\tmipmaps: texDatas.mipmaps\n\t\t\t\t};\n\n\t\t\t\tloaded += 1;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\tif ( texDatas.mipmapCount === 1 ) texture.minFilter = LinearFilter;\n\n\t\t\t\t\ttexture.image = images;\n\t\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, onError );\n\n\t\t}\n\n\t\tif ( Array.isArray( url ) ) {\n\n\t\t\tfor ( let i = 0, il = url.length; i < il; ++ i ) {\n\n\t\t\t\tloadTexture( i );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// compressed cubemap texture stored in a single DDS file\n\n\t\t\tloader.load( url, function ( buffer ) {\n\n\t\t\t\tconst texDatas = scope.parse( buffer, true );\n\n\t\t\t\tif ( texDatas.isCubemap ) {\n\n\t\t\t\t\tconst faces = texDatas.mipmaps.length / texDatas.mipmapCount;\n\n\t\t\t\t\tfor ( let f = 0; f < faces; f ++ ) {\n\n\t\t\t\t\t\timages[ f ] = { mipmaps: [] };\n\n\t\t\t\t\t\tfor ( let i = 0; i < texDatas.mipmapCount; i ++ ) {\n\n\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\n\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\n\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\n\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttexture.image = images;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttexture.image.width = texDatas.width;\n\t\t\t\t\ttexture.image.height = texDatas.height;\n\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\n\n\t\t\t\t}\n\n\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\n\n\t\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t\t}\n\n\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t}, onProgress, onError );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n}\n\nclass ImageLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst scope = this;\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tconst image = createElementNS( 'img' );\n\n\t\tfunction onImageLoad() {\n\n\t\t\tremoveEventListeners();\n\n\t\t\tCache.add( url, this );\n\n\t\t\tif ( onLoad ) onLoad( this );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\tfunction onImageError( event ) {\n\n\t\t\tremoveEventListeners();\n\n\t\t\tif ( onError ) onError( event );\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\tfunction removeEventListeners() {\n\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\n\t\t\timage.removeEventListener( 'error', onImageError, false );\n\n\t\t}\n\n\t\timage.addEventListener( 'load', onImageLoad, false );\n\t\timage.addEventListener( 'error', onImageError, false );\n\n\t\tif ( url.slice( 0, 5 ) !== 'data:' ) {\n\n\t\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\timage.src = url;\n\n\t\treturn image;\n\n\t}\n\n}\n\nclass CubeTextureLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( urls, onLoad, onProgress, onError ) {\n\n\t\tconst texture = new CubeTexture();\n\n\t\tconst loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tlet loaded = 0;\n\n\t\tfunction loadTexture( i ) {\n\n\t\t\tloader.load( urls[ i ], function ( image ) {\n\n\t\t\t\ttexture.images[ i ] = image;\n\n\t\t\t\tloaded ++;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, undefined, onError );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < urls.length; ++ i ) {\n\n\t\t\tloadTexture( i );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n}\n\n/**\n * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\n *\n * Sub classes have to implement the parse() method which will be used in load().\n */\n\nclass DataTextureLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst texture = new DataTexture();\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setPath( this.path );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\tconst texData = scope.parse( buffer );\n\n\t\t\tif ( ! texData ) return;\n\n\t\t\tif ( texData.image !== undefined ) {\n\n\t\t\t\ttexture.image = texData.image;\n\n\t\t\t} else if ( texData.data !== undefined ) {\n\n\t\t\t\ttexture.image.width = texData.width;\n\t\t\t\ttexture.image.height = texData.height;\n\t\t\t\ttexture.image.data = texData.data;\n\n\t\t\t}\n\n\t\t\ttexture.wrapS = texData.wrapS !== undefined ? texData.wrapS : ClampToEdgeWrapping;\n\t\t\ttexture.wrapT = texData.wrapT !== undefined ? texData.wrapT : ClampToEdgeWrapping;\n\n\t\t\ttexture.magFilter = texData.magFilter !== undefined ? texData.magFilter : LinearFilter;\n\t\t\ttexture.minFilter = texData.minFilter !== undefined ? texData.minFilter : LinearFilter;\n\n\t\t\ttexture.anisotropy = texData.anisotropy !== undefined ? texData.anisotropy : 1;\n\n\t\t\tif ( texData.encoding !== undefined ) {\n\n\t\t\t\ttexture.encoding = texData.encoding;\n\n\t\t\t}\n\n\t\t\tif ( texData.flipY !== undefined ) {\n\n\t\t\t\ttexture.flipY = texData.flipY;\n\n\t\t\t}\n\n\t\t\tif ( texData.format !== undefined ) {\n\n\t\t\t\ttexture.format = texData.format;\n\n\t\t\t}\n\n\t\t\tif ( texData.type !== undefined ) {\n\n\t\t\t\ttexture.type = texData.type;\n\n\t\t\t}\n\n\t\t\tif ( texData.mipmaps !== undefined ) {\n\n\t\t\t\ttexture.mipmaps = texData.mipmaps;\n\t\t\t\ttexture.minFilter = LinearMipmapLinearFilter; // presumably...\n\n\t\t\t}\n\n\t\t\tif ( texData.mipmapCount === 1 ) {\n\n\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t}\n\n\t\t\tif ( texData.generateMipmaps !== undefined ) {\n\n\t\t\t\ttexture.generateMipmaps = texData.generateMipmaps;\n\n\t\t\t}\n\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad ) onLoad( texture, texData );\n\n\t\t}, onProgress, onError );\n\n\n\t\treturn texture;\n\n\t}\n\n}\n\nclass TextureLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst texture = new Texture();\n\n\t\tconst loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tloader.load( url, function ( image ) {\n\n\t\t\ttexture.image = image;\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad !== undefined ) {\n\n\t\t\t\tonLoad( texture );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t\treturn texture;\n\n\t}\n\n}\n\nclass Light extends Object3D {\n\n\tconstructor( color, intensity = 1 ) {\n\n\t\tsuper();\n\n\t\tthis.isLight = true;\n\n\t\tthis.type = 'Light';\n\n\t\tthis.color = new Color( color );\n\t\tthis.intensity = intensity;\n\n\t}\n\n\tdispose() {\n\n\t\t// Empty here in base class; some subclasses override.\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.color.copy( source.color );\n\t\tthis.intensity = source.intensity;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.object.color = this.color.getHex();\n\t\tdata.object.intensity = this.intensity;\n\n\t\tif ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\n\n\t\tif ( this.distance !== undefined ) data.object.distance = this.distance;\n\t\tif ( this.angle !== undefined ) data.object.angle = this.angle;\n\t\tif ( this.decay !== undefined ) data.object.decay = this.decay;\n\t\tif ( this.penumbra !== undefined ) data.object.penumbra = this.penumbra;\n\n\t\tif ( this.shadow !== undefined ) data.object.shadow = this.shadow.toJSON();\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass HemisphereLight extends Light {\n\n\tconstructor( skyColor, groundColor, intensity ) {\n\n\t\tsuper( skyColor, intensity );\n\n\t\tthis.isHemisphereLight = true;\n\n\t\tthis.type = 'HemisphereLight';\n\n\t\tthis.position.copy( Object3D.DefaultUp );\n\t\tthis.updateMatrix();\n\n\t\tthis.groundColor = new Color( groundColor );\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.groundColor.copy( source.groundColor );\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _projScreenMatrix$1 = /*@__PURE__*/ new Matrix4();\nconst _lightPositionWorld$1 = /*@__PURE__*/ new Vector3();\nconst _lookTarget$1 = /*@__PURE__*/ new Vector3();\n\nclass LightShadow {\n\n\tconstructor( camera ) {\n\n\t\tthis.camera = camera;\n\n\t\tthis.bias = 0;\n\t\tthis.normalBias = 0;\n\t\tthis.radius = 1;\n\t\tthis.blurSamples = 8;\n\n\t\tthis.mapSize = new Vector2( 512, 512 );\n\n\t\tthis.map = null;\n\t\tthis.mapPass = null;\n\t\tthis.matrix = new Matrix4();\n\n\t\tthis.autoUpdate = true;\n\t\tthis.needsUpdate = false;\n\n\t\tthis._frustum = new Frustum();\n\t\tthis._frameExtents = new Vector2( 1, 1 );\n\n\t\tthis._viewportCount = 1;\n\n\t\tthis._viewports = [\n\n\t\t\tnew Vector4( 0, 0, 1, 1 )\n\n\t\t];\n\n\t}\n\n\tgetViewportCount() {\n\n\t\treturn this._viewportCount;\n\n\t}\n\n\tgetFrustum() {\n\n\t\treturn this._frustum;\n\n\t}\n\n\tupdateMatrices( light ) {\n\n\t\tconst shadowCamera = this.camera;\n\t\tconst shadowMatrix = this.matrix;\n\n\t\t_lightPositionWorld$1.setFromMatrixPosition( light.matrixWorld );\n\t\tshadowCamera.position.copy( _lightPositionWorld$1 );\n\n\t\t_lookTarget$1.setFromMatrixPosition( light.target.matrixWorld );\n\t\tshadowCamera.lookAt( _lookTarget$1 );\n\t\tshadowCamera.updateMatrixWorld();\n\n\t\t_projScreenMatrix$1.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\n\t\tthis._frustum.setFromProjectionMatrix( _projScreenMatrix$1 );\n\n\t\tshadowMatrix.set(\n\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t);\n\n\t\tshadowMatrix.multiply( _projScreenMatrix$1 );\n\n\t}\n\n\tgetViewport( viewportIndex ) {\n\n\t\treturn this._viewports[ viewportIndex ];\n\n\t}\n\n\tgetFrameExtents() {\n\n\t\treturn this._frameExtents;\n\n\t}\n\n\tdispose() {\n\n\t\tif ( this.map ) {\n\n\t\t\tthis.map.dispose();\n\n\t\t}\n\n\t\tif ( this.mapPass ) {\n\n\t\t\tthis.mapPass.dispose();\n\n\t\t}\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.camera = source.camera.clone();\n\n\t\tthis.bias = source.bias;\n\t\tthis.radius = source.radius;\n\n\t\tthis.mapSize.copy( source.mapSize );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst object = {};\n\n\t\tif ( this.bias !== 0 ) object.bias = this.bias;\n\t\tif ( this.normalBias !== 0 ) object.normalBias = this.normalBias;\n\t\tif ( this.radius !== 1 ) object.radius = this.radius;\n\t\tif ( this.mapSize.x !== 512 || this.mapSize.y !== 512 ) object.mapSize = this.mapSize.toArray();\n\n\t\tobject.camera = this.camera.toJSON( false ).object;\n\t\tdelete object.camera.matrix;\n\n\t\treturn object;\n\n\t}\n\n}\n\nclass SpotLightShadow extends LightShadow {\n\n\tconstructor() {\n\n\t\tsuper( new PerspectiveCamera( 50, 1, 0.5, 500 ) );\n\n\t\tthis.isSpotLightShadow = true;\n\n\t\tthis.focus = 1;\n\n\t}\n\n\tupdateMatrices( light ) {\n\n\t\tconst camera = this.camera;\n\n\t\tconst fov = RAD2DEG * 2 * light.angle * this.focus;\n\t\tconst aspect = this.mapSize.width / this.mapSize.height;\n\t\tconst far = light.distance || camera.far;\n\n\t\tif ( fov !== camera.fov || aspect !== camera.aspect || far !== camera.far ) {\n\n\t\t\tcamera.fov = fov;\n\t\t\tcamera.aspect = aspect;\n\t\t\tcamera.far = far;\n\t\t\tcamera.updateProjectionMatrix();\n\n\t\t}\n\n\t\tsuper.updateMatrices( light );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.focus = source.focus;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass SpotLight extends Light {\n\n\tconstructor( color, intensity, distance = 0, angle = Math.PI / 3, penumbra = 0, decay = 2 ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.isSpotLight = true;\n\n\t\tthis.type = 'SpotLight';\n\n\t\tthis.position.copy( Object3D.DefaultUp );\n\t\tthis.updateMatrix();\n\n\t\tthis.target = new Object3D();\n\n\t\tthis.distance = distance;\n\t\tthis.angle = angle;\n\t\tthis.penumbra = penumbra;\n\t\tthis.decay = decay;\n\n\t\tthis.map = null;\n\n\t\tthis.shadow = new SpotLightShadow();\n\n\t}\n\n\tget power() {\n\n\t\t// compute the light's luminous power (in lumens) from its intensity (in candela)\n\t\t// by convention for a spotlight, luminous power (lm) = π * luminous intensity (cd)\n\t\treturn this.intensity * Math.PI;\n\n\t}\n\n\tset power( power ) {\n\n\t\t// set the light's intensity (in candela) from the desired luminous power (in lumens)\n\t\tthis.intensity = power / Math.PI;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.shadow.dispose();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.distance = source.distance;\n\t\tthis.angle = source.angle;\n\t\tthis.penumbra = source.penumbra;\n\t\tthis.decay = source.decay;\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _projScreenMatrix = /*@__PURE__*/ new Matrix4();\nconst _lightPositionWorld = /*@__PURE__*/ new Vector3();\nconst _lookTarget = /*@__PURE__*/ new Vector3();\n\nclass PointLightShadow extends LightShadow {\n\n\tconstructor() {\n\n\t\tsuper( new PerspectiveCamera( 90, 1, 0.5, 500 ) );\n\n\t\tthis.isPointLightShadow = true;\n\n\t\tthis._frameExtents = new Vector2( 4, 2 );\n\n\t\tthis._viewportCount = 6;\n\n\t\tthis._viewports = [\n\t\t\t// These viewports map a cube-map onto a 2D texture with the\n\t\t\t// following orientation:\n\t\t\t//\n\t\t\t//  xzXZ\n\t\t\t//   y Y\n\t\t\t//\n\t\t\t// X - Positive x direction\n\t\t\t// x - Negative x direction\n\t\t\t// Y - Positive y direction\n\t\t\t// y - Negative y direction\n\t\t\t// Z - Positive z direction\n\t\t\t// z - Negative z direction\n\n\t\t\t// positive X\n\t\t\tnew Vector4( 2, 1, 1, 1 ),\n\t\t\t// negative X\n\t\t\tnew Vector4( 0, 1, 1, 1 ),\n\t\t\t// positive Z\n\t\t\tnew Vector4( 3, 1, 1, 1 ),\n\t\t\t// negative Z\n\t\t\tnew Vector4( 1, 1, 1, 1 ),\n\t\t\t// positive Y\n\t\t\tnew Vector4( 3, 0, 1, 1 ),\n\t\t\t// negative Y\n\t\t\tnew Vector4( 1, 0, 1, 1 )\n\t\t];\n\n\t\tthis._cubeDirections = [\n\t\t\tnew Vector3( 1, 0, 0 ), new Vector3( - 1, 0, 0 ), new Vector3( 0, 0, 1 ),\n\t\t\tnew Vector3( 0, 0, - 1 ), new Vector3( 0, 1, 0 ), new Vector3( 0, - 1, 0 )\n\t\t];\n\n\t\tthis._cubeUps = [\n\t\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ),\n\t\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 0, 1 ),\tnew Vector3( 0, 0, - 1 )\n\t\t];\n\n\t}\n\n\tupdateMatrices( light, viewportIndex = 0 ) {\n\n\t\tconst camera = this.camera;\n\t\tconst shadowMatrix = this.matrix;\n\n\t\tconst far = light.distance || camera.far;\n\n\t\tif ( far !== camera.far ) {\n\n\t\t\tcamera.far = far;\n\t\t\tcamera.updateProjectionMatrix();\n\n\t\t}\n\n\t\t_lightPositionWorld.setFromMatrixPosition( light.matrixWorld );\n\t\tcamera.position.copy( _lightPositionWorld );\n\n\t\t_lookTarget.copy( camera.position );\n\t\t_lookTarget.add( this._cubeDirections[ viewportIndex ] );\n\t\tcamera.up.copy( this._cubeUps[ viewportIndex ] );\n\t\tcamera.lookAt( _lookTarget );\n\t\tcamera.updateMatrixWorld();\n\n\t\tshadowMatrix.makeTranslation( - _lightPositionWorld.x, - _lightPositionWorld.y, - _lightPositionWorld.z );\n\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\tthis._frustum.setFromProjectionMatrix( _projScreenMatrix );\n\n\t}\n\n}\n\nclass PointLight extends Light {\n\n\tconstructor( color, intensity, distance = 0, decay = 2 ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.isPointLight = true;\n\n\t\tthis.type = 'PointLight';\n\n\t\tthis.distance = distance;\n\t\tthis.decay = decay;\n\n\t\tthis.shadow = new PointLightShadow();\n\n\t}\n\n\tget power() {\n\n\t\t// compute the light's luminous power (in lumens) from its intensity (in candela)\n\t\t// for an isotropic light source, luminous power (lm) = 4 π luminous intensity (cd)\n\t\treturn this.intensity * 4 * Math.PI;\n\n\t}\n\n\tset power( power ) {\n\n\t\t// set the light's intensity (in candela) from the desired luminous power (in lumens)\n\t\tthis.intensity = power / ( 4 * Math.PI );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.shadow.dispose();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.distance = source.distance;\n\t\tthis.decay = source.decay;\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass DirectionalLightShadow extends LightShadow {\n\n\tconstructor() {\n\n\t\tsuper( new OrthographicCamera( - 5, 5, 5, - 5, 0.5, 500 ) );\n\n\t\tthis.isDirectionalLightShadow = true;\n\n\t}\n\n}\n\nclass DirectionalLight extends Light {\n\n\tconstructor( color, intensity ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.isDirectionalLight = true;\n\n\t\tthis.type = 'DirectionalLight';\n\n\t\tthis.position.copy( Object3D.DefaultUp );\n\t\tthis.updateMatrix();\n\n\t\tthis.target = new Object3D();\n\n\t\tthis.shadow = new DirectionalLightShadow();\n\n\t}\n\n\tdispose() {\n\n\t\tthis.shadow.dispose();\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.target = source.target.clone();\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass AmbientLight extends Light {\n\n\tconstructor( color, intensity ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.isAmbientLight = true;\n\n\t\tthis.type = 'AmbientLight';\n\n\t}\n\n}\n\nclass RectAreaLight extends Light {\n\n\tconstructor( color, intensity, width = 10, height = 10 ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.isRectAreaLight = true;\n\n\t\tthis.type = 'RectAreaLight';\n\n\t\tthis.width = width;\n\t\tthis.height = height;\n\n\t}\n\n\tget power() {\n\n\t\t// compute the light's luminous power (in lumens) from its intensity (in nits)\n\t\treturn this.intensity * this.width * this.height * Math.PI;\n\n\t}\n\n\tset power( power ) {\n\n\t\t// set the light's intensity (in nits) from the desired luminous power (in lumens)\n\t\tthis.intensity = power / ( this.width * this.height * Math.PI );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.object.width = this.width;\n\t\tdata.object.height = this.height;\n\n\t\treturn data;\n\n\t}\n\n}\n\n/**\n * Primary reference:\n *   https://graphics.stanford.edu/papers/envmap/envmap.pdf\n *\n * Secondary reference:\n *   https://www.ppsloan.org/publications/StupidSH36.pdf\n */\n\n// 3-band SH defined by 9 coefficients\n\nclass SphericalHarmonics3 {\n\n\tconstructor() {\n\n\t\tthis.isSphericalHarmonics3 = true;\n\n\t\tthis.coefficients = [];\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients.push( new Vector3() );\n\n\t\t}\n\n\t}\n\n\tset( coefficients ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].copy( coefficients[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tzero() {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].set( 0, 0, 0 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// get the radiance in the direction of the normal\n\t// target is a Vector3\n\tgetAt( normal, target ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\n\n\t\tconst coeff = this.coefficients;\n\n\t\t// band 0\n\t\ttarget.copy( coeff[ 0 ] ).multiplyScalar( 0.282095 );\n\n\t\t// band 1\n\t\ttarget.addScaledVector( coeff[ 1 ], 0.488603 * y );\n\t\ttarget.addScaledVector( coeff[ 2 ], 0.488603 * z );\n\t\ttarget.addScaledVector( coeff[ 3 ], 0.488603 * x );\n\n\t\t// band 2\n\t\ttarget.addScaledVector( coeff[ 4 ], 1.092548 * ( x * y ) );\n\t\ttarget.addScaledVector( coeff[ 5 ], 1.092548 * ( y * z ) );\n\t\ttarget.addScaledVector( coeff[ 6 ], 0.315392 * ( 3.0 * z * z - 1.0 ) );\n\t\ttarget.addScaledVector( coeff[ 7 ], 1.092548 * ( x * z ) );\n\t\ttarget.addScaledVector( coeff[ 8 ], 0.546274 * ( x * x - y * y ) );\n\n\t\treturn target;\n\n\t}\n\n\t// get the irradiance (radiance convolved with cosine lobe) in the direction of the normal\n\t// target is a Vector3\n\t// https://graphics.stanford.edu/papers/envmap/envmap.pdf\n\tgetIrradianceAt( normal, target ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\n\n\t\tconst coeff = this.coefficients;\n\n\t\t// band 0\n\t\ttarget.copy( coeff[ 0 ] ).multiplyScalar( 0.886227 ); // π * 0.282095\n\n\t\t// band 1\n\t\ttarget.addScaledVector( coeff[ 1 ], 2.0 * 0.511664 * y ); // ( 2 * π / 3 ) * 0.488603\n\t\ttarget.addScaledVector( coeff[ 2 ], 2.0 * 0.511664 * z );\n\t\ttarget.addScaledVector( coeff[ 3 ], 2.0 * 0.511664 * x );\n\n\t\t// band 2\n\t\ttarget.addScaledVector( coeff[ 4 ], 2.0 * 0.429043 * x * y ); // ( π / 4 ) * 1.092548\n\t\ttarget.addScaledVector( coeff[ 5 ], 2.0 * 0.429043 * y * z );\n\t\ttarget.addScaledVector( coeff[ 6 ], 0.743125 * z * z - 0.247708 ); // ( π / 4 ) * 0.315392 * 3\n\t\ttarget.addScaledVector( coeff[ 7 ], 2.0 * 0.429043 * x * z );\n\t\ttarget.addScaledVector( coeff[ 8 ], 0.429043 * ( x * x - y * y ) ); // ( π / 4 ) * 0.546274\n\n\t\treturn target;\n\n\t}\n\n\tadd( sh ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].add( sh.coefficients[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\taddScaledSH( sh, s ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].addScaledVector( sh.coefficients[ i ], s );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tscale( s ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].multiplyScalar( s );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tlerp( sh, alpha ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].lerp( sh.coefficients[ i ], alpha );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tequals( sh ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( ! this.coefficients[ i ].equals( sh.coefficients[ i ] ) ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tcopy( sh ) {\n\n\t\treturn this.set( sh.coefficients );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tconst coefficients = this.coefficients;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tcoefficients[ i ].fromArray( array, offset + ( i * 3 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst coefficients = this.coefficients;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tcoefficients[ i ].toArray( array, offset + ( i * 3 ) );\n\n\t\t}\n\n\t\treturn array;\n\n\t}\n\n\t// evaluate the basis functions\n\t// shBasis is an Array[ 9 ]\n\tstatic getBasisAt( normal, shBasis ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\n\n\t\t// band 0\n\t\tshBasis[ 0 ] = 0.282095;\n\n\t\t// band 1\n\t\tshBasis[ 1 ] = 0.488603 * y;\n\t\tshBasis[ 2 ] = 0.488603 * z;\n\t\tshBasis[ 3 ] = 0.488603 * x;\n\n\t\t// band 2\n\t\tshBasis[ 4 ] = 1.092548 * x * y;\n\t\tshBasis[ 5 ] = 1.092548 * y * z;\n\t\tshBasis[ 6 ] = 0.315392 * ( 3 * z * z - 1 );\n\t\tshBasis[ 7 ] = 1.092548 * x * z;\n\t\tshBasis[ 8 ] = 0.546274 * ( x * x - y * y );\n\n\t}\n\n}\n\nclass LightProbe extends Light {\n\n\tconstructor( sh = new SphericalHarmonics3(), intensity = 1 ) {\n\n\t\tsuper( undefined, intensity );\n\n\t\tthis.isLightProbe = true;\n\n\t\tthis.sh = sh;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.sh.copy( source.sh );\n\n\t\treturn this;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tthis.intensity = json.intensity; // TODO: Move this bit to Light.fromJSON();\n\t\tthis.sh.fromArray( json.sh );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.object.sh = this.sh.toArray();\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass MaterialLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\t\tthis.textures = {};\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( json ) {\n\n\t\tconst textures = this.textures;\n\n\t\tfunction getTexture( name ) {\n\n\t\t\tif ( textures[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.MaterialLoader: Undefined texture', name );\n\n\t\t\t}\n\n\t\t\treturn textures[ name ];\n\n\t\t}\n\n\t\tconst material = MaterialLoader.createMaterialFromType( json.type );\n\n\t\tif ( json.uuid !== undefined ) material.uuid = json.uuid;\n\t\tif ( json.name !== undefined ) material.name = json.name;\n\t\tif ( json.color !== undefined && material.color !== undefined ) material.color.setHex( json.color );\n\t\tif ( json.roughness !== undefined ) material.roughness = json.roughness;\n\t\tif ( json.metalness !== undefined ) material.metalness = json.metalness;\n\t\tif ( json.sheen !== undefined ) material.sheen = json.sheen;\n\t\tif ( json.sheenColor !== undefined ) material.sheenColor = new Color().setHex( json.sheenColor );\n\t\tif ( json.sheenRoughness !== undefined ) material.sheenRoughness = json.sheenRoughness;\n\t\tif ( json.emissive !== undefined && material.emissive !== undefined ) material.emissive.setHex( json.emissive );\n\t\tif ( json.specular !== undefined && material.specular !== undefined ) material.specular.setHex( json.specular );\n\t\tif ( json.specularIntensity !== undefined ) material.specularIntensity = json.specularIntensity;\n\t\tif ( json.specularColor !== undefined && material.specularColor !== undefined ) material.specularColor.setHex( json.specularColor );\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\n\t\tif ( json.clearcoat !== undefined ) material.clearcoat = json.clearcoat;\n\t\tif ( json.clearcoatRoughness !== undefined ) material.clearcoatRoughness = json.clearcoatRoughness;\n\t\tif ( json.iridescence !== undefined ) material.iridescence = json.iridescence;\n\t\tif ( json.iridescenceIOR !== undefined ) material.iridescenceIOR = json.iridescenceIOR;\n\t\tif ( json.iridescenceThicknessRange !== undefined ) material.iridescenceThicknessRange = json.iridescenceThicknessRange;\n\t\tif ( json.transmission !== undefined ) material.transmission = json.transmission;\n\t\tif ( json.thickness !== undefined ) material.thickness = json.thickness;\n\t\tif ( json.attenuationDistance !== undefined ) material.attenuationDistance = json.attenuationDistance;\n\t\tif ( json.attenuationColor !== undefined && material.attenuationColor !== undefined ) material.attenuationColor.setHex( json.attenuationColor );\n\t\tif ( json.fog !== undefined ) material.fog = json.fog;\n\t\tif ( json.flatShading !== undefined ) material.flatShading = json.flatShading;\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\n\t\tif ( json.combine !== undefined ) material.combine = json.combine;\n\t\tif ( json.side !== undefined ) material.side = json.side;\n\t\tif ( json.shadowSide !== undefined ) material.shadowSide = json.shadowSide;\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\n\t\tif ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\n\t\tif ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\n\t\tif ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\n\t\tif ( json.colorWrite !== undefined ) material.colorWrite = json.colorWrite;\n\n\t\tif ( json.stencilWrite !== undefined ) material.stencilWrite = json.stencilWrite;\n\t\tif ( json.stencilWriteMask !== undefined ) material.stencilWriteMask = json.stencilWriteMask;\n\t\tif ( json.stencilFunc !== undefined ) material.stencilFunc = json.stencilFunc;\n\t\tif ( json.stencilRef !== undefined ) material.stencilRef = json.stencilRef;\n\t\tif ( json.stencilFuncMask !== undefined ) material.stencilFuncMask = json.stencilFuncMask;\n\t\tif ( json.stencilFail !== undefined ) material.stencilFail = json.stencilFail;\n\t\tif ( json.stencilZFail !== undefined ) material.stencilZFail = json.stencilZFail;\n\t\tif ( json.stencilZPass !== undefined ) material.stencilZPass = json.stencilZPass;\n\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\n\t\tif ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\n\t\tif ( json.wireframeLinecap !== undefined ) material.wireframeLinecap = json.wireframeLinecap;\n\t\tif ( json.wireframeLinejoin !== undefined ) material.wireframeLinejoin = json.wireframeLinejoin;\n\n\t\tif ( json.rotation !== undefined ) material.rotation = json.rotation;\n\n\t\tif ( json.linewidth !== 1 ) material.linewidth = json.linewidth;\n\t\tif ( json.dashSize !== undefined ) material.dashSize = json.dashSize;\n\t\tif ( json.gapSize !== undefined ) material.gapSize = json.gapSize;\n\t\tif ( json.scale !== undefined ) material.scale = json.scale;\n\n\t\tif ( json.polygonOffset !== undefined ) material.polygonOffset = json.polygonOffset;\n\t\tif ( json.polygonOffsetFactor !== undefined ) material.polygonOffsetFactor = json.polygonOffsetFactor;\n\t\tif ( json.polygonOffsetUnits !== undefined ) material.polygonOffsetUnits = json.polygonOffsetUnits;\n\n\t\tif ( json.dithering !== undefined ) material.dithering = json.dithering;\n\n\t\tif ( json.alphaToCoverage !== undefined ) material.alphaToCoverage = json.alphaToCoverage;\n\t\tif ( json.premultipliedAlpha !== undefined ) material.premultipliedAlpha = json.premultipliedAlpha;\n\n\t\tif ( json.visible !== undefined ) material.visible = json.visible;\n\n\t\tif ( json.toneMapped !== undefined ) material.toneMapped = json.toneMapped;\n\n\t\tif ( json.userData !== undefined ) material.userData = json.userData;\n\n\t\tif ( json.vertexColors !== undefined ) {\n\n\t\t\tif ( typeof json.vertexColors === 'number' ) {\n\n\t\t\t\tmaterial.vertexColors = ( json.vertexColors > 0 ) ? true : false;\n\n\t\t\t} else {\n\n\t\t\t\tmaterial.vertexColors = json.vertexColors;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Shader Material\n\n\t\tif ( json.uniforms !== undefined ) {\n\n\t\t\tfor ( const name in json.uniforms ) {\n\n\t\t\t\tconst uniform = json.uniforms[ name ];\n\n\t\t\t\tmaterial.uniforms[ name ] = {};\n\n\t\t\t\tswitch ( uniform.type ) {\n\n\t\t\t\t\tcase 't':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = getTexture( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'c':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Color().setHex( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v2':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector2().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v3':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector3().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v4':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector4().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'm3':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Matrix3().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'm4':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Matrix4().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = uniform.value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json.defines !== undefined ) material.defines = json.defines;\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\n\t\tif ( json.glslVersion !== undefined ) material.glslVersion = json.glslVersion;\n\n\t\tif ( json.extensions !== undefined ) {\n\n\t\t\tfor ( const key in json.extensions ) {\n\n\t\t\t\tmaterial.extensions[ key ] = json.extensions[ key ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// for PointsMaterial\n\n\t\tif ( json.size !== undefined ) material.size = json.size;\n\t\tif ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\n\n\t\t// maps\n\n\t\tif ( json.map !== undefined ) material.map = getTexture( json.map );\n\t\tif ( json.matcap !== undefined ) material.matcap = getTexture( json.matcap );\n\n\t\tif ( json.alphaMap !== undefined ) material.alphaMap = getTexture( json.alphaMap );\n\n\t\tif ( json.bumpMap !== undefined ) material.bumpMap = getTexture( json.bumpMap );\n\t\tif ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\n\n\t\tif ( json.normalMap !== undefined ) material.normalMap = getTexture( json.normalMap );\n\t\tif ( json.normalMapType !== undefined ) material.normalMapType = json.normalMapType;\n\t\tif ( json.normalScale !== undefined ) {\n\n\t\t\tlet normalScale = json.normalScale;\n\n\t\t\tif ( Array.isArray( normalScale ) === false ) {\n\n\t\t\t\t// Blender exporter used to export a scalar. See #7459\n\n\t\t\t\tnormalScale = [ normalScale, normalScale ];\n\n\t\t\t}\n\n\t\t\tmaterial.normalScale = new Vector2().fromArray( normalScale );\n\n\t\t}\n\n\t\tif ( json.displacementMap !== undefined ) material.displacementMap = getTexture( json.displacementMap );\n\t\tif ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\n\t\tif ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\n\n\t\tif ( json.roughnessMap !== undefined ) material.roughnessMap = getTexture( json.roughnessMap );\n\t\tif ( json.metalnessMap !== undefined ) material.metalnessMap = getTexture( json.metalnessMap );\n\n\t\tif ( json.emissiveMap !== undefined ) material.emissiveMap = getTexture( json.emissiveMap );\n\t\tif ( json.emissiveIntensity !== undefined ) material.emissiveIntensity = json.emissiveIntensity;\n\n\t\tif ( json.specularMap !== undefined ) material.specularMap = getTexture( json.specularMap );\n\t\tif ( json.specularIntensityMap !== undefined ) material.specularIntensityMap = getTexture( json.specularIntensityMap );\n\t\tif ( json.specularColorMap !== undefined ) material.specularColorMap = getTexture( json.specularColorMap );\n\n\t\tif ( json.envMap !== undefined ) material.envMap = getTexture( json.envMap );\n\t\tif ( json.envMapIntensity !== undefined ) material.envMapIntensity = json.envMapIntensity;\n\n\t\tif ( json.reflectivity !== undefined ) material.reflectivity = json.reflectivity;\n\t\tif ( json.refractionRatio !== undefined ) material.refractionRatio = json.refractionRatio;\n\n\t\tif ( json.lightMap !== undefined ) material.lightMap = getTexture( json.lightMap );\n\t\tif ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\n\n\t\tif ( json.aoMap !== undefined ) material.aoMap = getTexture( json.aoMap );\n\t\tif ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\n\n\t\tif ( json.gradientMap !== undefined ) material.gradientMap = getTexture( json.gradientMap );\n\n\t\tif ( json.clearcoatMap !== undefined ) material.clearcoatMap = getTexture( json.clearcoatMap );\n\t\tif ( json.clearcoatRoughnessMap !== undefined ) material.clearcoatRoughnessMap = getTexture( json.clearcoatRoughnessMap );\n\t\tif ( json.clearcoatNormalMap !== undefined ) material.clearcoatNormalMap = getTexture( json.clearcoatNormalMap );\n\t\tif ( json.clearcoatNormalScale !== undefined ) material.clearcoatNormalScale = new Vector2().fromArray( json.clearcoatNormalScale );\n\n\t\tif ( json.iridescenceMap !== undefined ) material.iridescenceMap = getTexture( json.iridescenceMap );\n\t\tif ( json.iridescenceThicknessMap !== undefined ) material.iridescenceThicknessMap = getTexture( json.iridescenceThicknessMap );\n\n\t\tif ( json.transmissionMap !== undefined ) material.transmissionMap = getTexture( json.transmissionMap );\n\t\tif ( json.thicknessMap !== undefined ) material.thicknessMap = getTexture( json.thicknessMap );\n\n\t\tif ( json.sheenColorMap !== undefined ) material.sheenColorMap = getTexture( json.sheenColorMap );\n\t\tif ( json.sheenRoughnessMap !== undefined ) material.sheenRoughnessMap = getTexture( json.sheenRoughnessMap );\n\n\t\treturn material;\n\n\t}\n\n\tsetTextures( value ) {\n\n\t\tthis.textures = value;\n\t\treturn this;\n\n\t}\n\n\tstatic createMaterialFromType( type ) {\n\n\t\tconst materialLib = {\n\t\t\tShadowMaterial,\n\t\t\tSpriteMaterial,\n\t\t\tRawShaderMaterial,\n\t\t\tShaderMaterial,\n\t\t\tPointsMaterial,\n\t\t\tMeshPhysicalMaterial,\n\t\t\tMeshStandardMaterial,\n\t\t\tMeshPhongMaterial,\n\t\t\tMeshToonMaterial,\n\t\t\tMeshNormalMaterial,\n\t\t\tMeshLambertMaterial,\n\t\t\tMeshDepthMaterial,\n\t\t\tMeshDistanceMaterial,\n\t\t\tMeshBasicMaterial,\n\t\t\tMeshMatcapMaterial,\n\t\t\tLineDashedMaterial,\n\t\t\tLineBasicMaterial,\n\t\t\tMaterial\n\t\t};\n\n\t\treturn new materialLib[ type ]();\n\n\t}\n\n}\n\nclass LoaderUtils {\n\n\tstatic decodeText( array ) {\n\n\t\tif ( typeof TextDecoder !== 'undefined' ) {\n\n\t\t\treturn new TextDecoder().decode( array );\n\n\t\t}\n\n\t\t// Avoid the String.fromCharCode.apply(null, array) shortcut, which\n\t\t// throws a \"maximum call stack size exceeded\" error for large arrays.\n\n\t\tlet s = '';\n\n\t\tfor ( let i = 0, il = array.length; i < il; i ++ ) {\n\n\t\t\t// Implicitly assumes little-endian.\n\t\t\ts += String.fromCharCode( array[ i ] );\n\n\t\t}\n\n\t\ttry {\n\n\t\t\t// merges multi-byte utf-8 characters.\n\n\t\t\treturn decodeURIComponent( escape( s ) );\n\n\t\t} catch ( e ) { // see #16358\n\n\t\t\treturn s;\n\n\t\t}\n\n\t}\n\n\tstatic extractUrlBase( url ) {\n\n\t\tconst index = url.lastIndexOf( '/' );\n\n\t\tif ( index === - 1 ) return './';\n\n\t\treturn url.slice( 0, index + 1 );\n\n\t}\n\n\tstatic resolveURL( url, path ) {\n\n\t\t// Invalid URL\n\t\tif ( typeof url !== 'string' || url === '' ) return '';\n\n\t\t// Host Relative URL\n\t\tif ( /^https?:\\/\\//i.test( path ) && /^\\//.test( url ) ) {\n\n\t\t\tpath = path.replace( /(^https?:\\/\\/[^\\/]+).*/i, '$1' );\n\n\t\t}\n\n\t\t// Absolute URL http://,https://,//\n\t\tif ( /^(https?:)?\\/\\//i.test( url ) ) return url;\n\n\t\t// Data URI\n\t\tif ( /^data:.*,.*$/i.test( url ) ) return url;\n\n\t\t// Blob URL\n\t\tif ( /^blob:.*$/i.test( url ) ) return url;\n\n\t\t// Relative URL\n\t\treturn path + url;\n\n\t}\n\n}\n\nclass InstancedBufferGeometry extends BufferGeometry {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isInstancedBufferGeometry = true;\n\n\t\tthis.type = 'InstancedBufferGeometry';\n\t\tthis.instanceCount = Infinity;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.instanceCount = source.instanceCount;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.instanceCount = this.instanceCount;\n\n\t\tdata.isInstancedBufferGeometry = true;\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass BufferGeometryLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( json ) {\n\n\t\tconst interleavedBufferMap = {};\n\t\tconst arrayBufferMap = {};\n\n\t\tfunction getInterleavedBuffer( json, uuid ) {\n\n\t\t\tif ( interleavedBufferMap[ uuid ] !== undefined ) return interleavedBufferMap[ uuid ];\n\n\t\t\tconst interleavedBuffers = json.interleavedBuffers;\n\t\t\tconst interleavedBuffer = interleavedBuffers[ uuid ];\n\n\t\t\tconst buffer = getArrayBuffer( json, interleavedBuffer.buffer );\n\n\t\t\tconst array = getTypedArray( interleavedBuffer.type, buffer );\n\t\t\tconst ib = new InterleavedBuffer( array, interleavedBuffer.stride );\n\t\t\tib.uuid = interleavedBuffer.uuid;\n\n\t\t\tinterleavedBufferMap[ uuid ] = ib;\n\n\t\t\treturn ib;\n\n\t\t}\n\n\t\tfunction getArrayBuffer( json, uuid ) {\n\n\t\t\tif ( arrayBufferMap[ uuid ] !== undefined ) return arrayBufferMap[ uuid ];\n\n\t\t\tconst arrayBuffers = json.arrayBuffers;\n\t\t\tconst arrayBuffer = arrayBuffers[ uuid ];\n\n\t\t\tconst ab = new Uint32Array( arrayBuffer ).buffer;\n\n\t\t\tarrayBufferMap[ uuid ] = ab;\n\n\t\t\treturn ab;\n\n\t\t}\n\n\t\tconst geometry = json.isInstancedBufferGeometry ? new InstancedBufferGeometry() : new BufferGeometry();\n\n\t\tconst index = json.data.index;\n\n\t\tif ( index !== undefined ) {\n\n\t\t\tconst typedArray = getTypedArray( index.type, index.array );\n\t\t\tgeometry.setIndex( new BufferAttribute( typedArray, 1 ) );\n\n\t\t}\n\n\t\tconst attributes = json.data.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tconst attribute = attributes[ key ];\n\t\t\tlet bufferAttribute;\n\n\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\tconst interleavedBuffer = getInterleavedBuffer( json.data, attribute.data );\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( interleavedBuffer, attribute.itemSize, attribute.offset, attribute.normalized );\n\n\t\t\t} else {\n\n\t\t\t\tconst typedArray = getTypedArray( attribute.type, attribute.array );\n\t\t\t\tconst bufferAttributeConstr = attribute.isInstancedBufferAttribute ? InstancedBufferAttribute : BufferAttribute;\n\t\t\t\tbufferAttribute = new bufferAttributeConstr( typedArray, attribute.itemSize, attribute.normalized );\n\n\t\t\t}\n\n\t\t\tif ( attribute.name !== undefined ) bufferAttribute.name = attribute.name;\n\t\t\tif ( attribute.usage !== undefined ) bufferAttribute.setUsage( attribute.usage );\n\n\t\t\tif ( attribute.updateRange !== undefined ) {\n\n\t\t\t\tbufferAttribute.updateRange.offset = attribute.updateRange.offset;\n\t\t\t\tbufferAttribute.updateRange.count = attribute.updateRange.count;\n\n\t\t\t}\n\n\t\t\tgeometry.setAttribute( key, bufferAttribute );\n\n\t\t}\n\n\t\tconst morphAttributes = json.data.morphAttributes;\n\n\t\tif ( morphAttributes ) {\n\n\t\t\tfor ( const key in morphAttributes ) {\n\n\t\t\t\tconst attributeArray = morphAttributes[ key ];\n\n\t\t\t\tconst array = [];\n\n\t\t\t\tfor ( let i = 0, il = attributeArray.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst attribute = attributeArray[ i ];\n\t\t\t\t\tlet bufferAttribute;\n\n\t\t\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tconst interleavedBuffer = getInterleavedBuffer( json.data, attribute.data );\n\t\t\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( interleavedBuffer, attribute.itemSize, attribute.offset, attribute.normalized );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst typedArray = getTypedArray( attribute.type, attribute.array );\n\t\t\t\t\t\tbufferAttribute = new BufferAttribute( typedArray, attribute.itemSize, attribute.normalized );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attribute.name !== undefined ) bufferAttribute.name = attribute.name;\n\t\t\t\t\tarray.push( bufferAttribute );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.morphAttributes[ key ] = array;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst morphTargetsRelative = json.data.morphTargetsRelative;\n\n\t\tif ( morphTargetsRelative ) {\n\n\t\t\tgeometry.morphTargetsRelative = true;\n\n\t\t}\n\n\t\tconst groups = json.data.groups || json.data.drawcalls || json.data.offsets;\n\n\t\tif ( groups !== undefined ) {\n\n\t\t\tfor ( let i = 0, n = groups.length; i !== n; ++ i ) {\n\n\t\t\t\tconst group = groups[ i ];\n\n\t\t\t\tgeometry.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst boundingSphere = json.data.boundingSphere;\n\n\t\tif ( boundingSphere !== undefined ) {\n\n\t\t\tconst center = new Vector3();\n\n\t\t\tif ( boundingSphere.center !== undefined ) {\n\n\t\t\t\tcenter.fromArray( boundingSphere.center );\n\n\t\t\t}\n\n\t\t\tgeometry.boundingSphere = new Sphere( center, boundingSphere.radius );\n\n\t\t}\n\n\t\tif ( json.name ) geometry.name = json.name;\n\t\tif ( json.userData ) geometry.userData = json.userData;\n\n\t\treturn geometry;\n\n\t}\n\n}\n\nclass ObjectLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst path = ( this.path === '' ) ? LoaderUtils.extractUrlBase( url ) : this.path;\n\t\tthis.resourcePath = this.resourcePath || path;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tlet json = null;\n\n\t\t\ttry {\n\n\t\t\t\tjson = JSON.parse( text );\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\tif ( onError !== undefined ) onError( error );\n\n\t\t\t\tconsole.error( 'THREE:ObjectLoader: Can\\'t parse ' + url + '.', error.message );\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tconst metadata = json.metadata;\n\n\t\t\tif ( metadata === undefined || metadata.type === undefined || metadata.type.toLowerCase() === 'geometry' ) {\n\n\t\t\t\tif ( onError !== undefined ) onError( new Error( 'THREE.ObjectLoader: Can\\'t load ' + url ) );\n\n\t\t\t\tconsole.error( 'THREE.ObjectLoader: Can\\'t load ' + url );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tscope.parse( json, onLoad );\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tasync loadAsync( url, onProgress ) {\n\n\t\tconst scope = this;\n\n\t\tconst path = ( this.path === '' ) ? LoaderUtils.extractUrlBase( url ) : this.path;\n\t\tthis.resourcePath = this.resourcePath || path;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tconst text = await loader.loadAsync( url, onProgress );\n\n\t\tconst json = JSON.parse( text );\n\n\t\tconst metadata = json.metadata;\n\n\t\tif ( metadata === undefined || metadata.type === undefined || metadata.type.toLowerCase() === 'geometry' ) {\n\n\t\t\tthrow new Error( 'THREE.ObjectLoader: Can\\'t load ' + url );\n\n\t\t}\n\n\t\treturn await scope.parseAsync( json );\n\n\t}\n\n\tparse( json, onLoad ) {\n\n\t\tconst animations = this.parseAnimations( json.animations );\n\t\tconst shapes = this.parseShapes( json.shapes );\n\t\tconst geometries = this.parseGeometries( json.geometries, shapes );\n\n\t\tconst images = this.parseImages( json.images, function () {\n\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\n\n\t\t} );\n\n\t\tconst textures = this.parseTextures( json.textures, images );\n\t\tconst materials = this.parseMaterials( json.materials, textures );\n\n\t\tconst object = this.parseObject( json.object, geometries, materials, textures, animations );\n\t\tconst skeletons = this.parseSkeletons( json.skeletons, object );\n\n\t\tthis.bindSkeletons( object, skeletons );\n\n\t\t//\n\n\t\tif ( onLoad !== undefined ) {\n\n\t\t\tlet hasImages = false;\n\n\t\t\tfor ( const uuid in images ) {\n\n\t\t\t\tif ( images[ uuid ].data instanceof HTMLImageElement ) {\n\n\t\t\t\t\thasImages = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( hasImages === false ) onLoad( object );\n\n\t\t}\n\n\t\treturn object;\n\n\t}\n\n\tasync parseAsync( json ) {\n\n\t\tconst animations = this.parseAnimations( json.animations );\n\t\tconst shapes = this.parseShapes( json.shapes );\n\t\tconst geometries = this.parseGeometries( json.geometries, shapes );\n\n\t\tconst images = await this.parseImagesAsync( json.images );\n\n\t\tconst textures = this.parseTextures( json.textures, images );\n\t\tconst materials = this.parseMaterials( json.materials, textures );\n\n\t\tconst object = this.parseObject( json.object, geometries, materials, textures, animations );\n\t\tconst skeletons = this.parseSkeletons( json.skeletons, object );\n\n\t\tthis.bindSkeletons( object, skeletons );\n\n\t\treturn object;\n\n\t}\n\n\tparseShapes( json ) {\n\n\t\tconst shapes = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tconst shape = new Shape().fromJSON( json[ i ] );\n\n\t\t\t\tshapes[ shape.uuid ] = shape;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn shapes;\n\n\t}\n\n\tparseSkeletons( json, object ) {\n\n\t\tconst skeletons = {};\n\t\tconst bones = {};\n\n\t\t// generate bone lookup table\n\n\t\tobject.traverse( function ( child ) {\n\n\t\t\tif ( child.isBone ) bones[ child.uuid ] = child;\n\n\t\t} );\n\n\t\t// create skeletons\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tconst skeleton = new Skeleton().fromJSON( json[ i ], bones );\n\n\t\t\t\tskeletons[ skeleton.uuid ] = skeleton;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn skeletons;\n\n\t}\n\n\tparseGeometries( json, shapes ) {\n\n\t\tconst geometries = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tconst bufferGeometryLoader = new BufferGeometryLoader();\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tlet geometry;\n\t\t\t\tconst data = json[ i ];\n\n\t\t\t\tswitch ( data.type ) {\n\n\t\t\t\t\tcase 'BufferGeometry':\n\t\t\t\t\tcase 'InstancedBufferGeometry':\n\n\t\t\t\t\t\tgeometry = bufferGeometryLoader.parse( data );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif ( data.type in Geometries ) {\n\n\t\t\t\t\t\t\tgeometry = Geometries[ data.type ].fromJSON( data, shapes );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tconsole.warn( `THREE.ObjectLoader: Unsupported geometry type \"${ data.type }\"` );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) geometry.name = data.name;\n\t\t\t\tif ( geometry.isBufferGeometry === true && data.userData !== undefined ) geometry.userData = data.userData;\n\n\t\t\t\tgeometries[ data.uuid ] = geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn geometries;\n\n\t}\n\n\tparseMaterials( json, textures ) {\n\n\t\tconst cache = {}; // MultiMaterial\n\t\tconst materials = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tconst loader = new MaterialLoader();\n\t\t\tloader.setTextures( textures );\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tconst data = json[ i ];\n\n\t\t\t\tif ( cache[ data.uuid ] === undefined ) {\n\n\t\t\t\t\tcache[ data.uuid ] = loader.parse( data );\n\n\t\t\t\t}\n\n\t\t\t\tmaterials[ data.uuid ] = cache[ data.uuid ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn materials;\n\n\t}\n\n\tparseAnimations( json ) {\n\n\t\tconst animations = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( let i = 0; i < json.length; i ++ ) {\n\n\t\t\t\tconst data = json[ i ];\n\n\t\t\t\tconst clip = AnimationClip.parse( data );\n\n\t\t\t\tanimations[ clip.uuid ] = clip;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn animations;\n\n\t}\n\n\tparseImages( json, onLoad ) {\n\n\t\tconst scope = this;\n\t\tconst images = {};\n\n\t\tlet loader;\n\n\t\tfunction loadImage( url ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\treturn loader.load( url, function () {\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, undefined, function () {\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t} );\n\n\t\t}\n\n\t\tfunction deserializeImage( image ) {\n\n\t\t\tif ( typeof image === 'string' ) {\n\n\t\t\t\tconst url = image;\n\n\t\t\t\tconst path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( url ) ? url : scope.resourcePath + url;\n\n\t\t\t\treturn loadImage( path );\n\n\t\t\t} else {\n\n\t\t\t\tif ( image.data ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdata: getTypedArray( image.type, image.data ),\n\t\t\t\t\t\twidth: image.width,\n\t\t\t\t\t\theight: image.height\n\t\t\t\t\t};\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json !== undefined && json.length > 0 ) {\n\n\t\t\tconst manager = new LoadingManager( onLoad );\n\n\t\t\tloader = new ImageLoader( manager );\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\n\n\t\t\tfor ( let i = 0, il = json.length; i < il; i ++ ) {\n\n\t\t\t\tconst image = json[ i ];\n\t\t\t\tconst url = image.url;\n\n\t\t\t\tif ( Array.isArray( url ) ) {\n\n\t\t\t\t\t// load array of images e.g CubeTexture\n\n\t\t\t\t\tconst imageArray = [];\n\n\t\t\t\t\tfor ( let j = 0, jl = url.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tconst currentUrl = url[ j ];\n\n\t\t\t\t\t\tconst deserializedImage = deserializeImage( currentUrl );\n\n\t\t\t\t\t\tif ( deserializedImage !== null ) {\n\n\t\t\t\t\t\t\tif ( deserializedImage instanceof HTMLImageElement ) {\n\n\t\t\t\t\t\t\t\timageArray.push( deserializedImage );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// special case: handle array of data textures for cube textures\n\n\t\t\t\t\t\t\t\timageArray.push( new DataTexture( deserializedImage.data, deserializedImage.width, deserializedImage.height ) );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\timages[ image.uuid ] = new Source( imageArray );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// load single image\n\n\t\t\t\t\tconst deserializedImage = deserializeImage( image.url );\n\t\t\t\t\timages[ image.uuid ] = new Source( deserializedImage );\n\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn images;\n\n\t}\n\n\tasync parseImagesAsync( json ) {\n\n\t\tconst scope = this;\n\t\tconst images = {};\n\n\t\tlet loader;\n\n\t\tasync function deserializeImage( image ) {\n\n\t\t\tif ( typeof image === 'string' ) {\n\n\t\t\t\tconst url = image;\n\n\t\t\t\tconst path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( url ) ? url : scope.resourcePath + url;\n\n\t\t\t\treturn await loader.loadAsync( path );\n\n\t\t\t} else {\n\n\t\t\t\tif ( image.data ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdata: getTypedArray( image.type, image.data ),\n\t\t\t\t\t\twidth: image.width,\n\t\t\t\t\t\theight: image.height\n\t\t\t\t\t};\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json !== undefined && json.length > 0 ) {\n\n\t\t\tloader = new ImageLoader( this.manager );\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\n\n\t\t\tfor ( let i = 0, il = json.length; i < il; i ++ ) {\n\n\t\t\t\tconst image = json[ i ];\n\t\t\t\tconst url = image.url;\n\n\t\t\t\tif ( Array.isArray( url ) ) {\n\n\t\t\t\t\t// load array of images e.g CubeTexture\n\n\t\t\t\t\tconst imageArray = [];\n\n\t\t\t\t\tfor ( let j = 0, jl = url.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tconst currentUrl = url[ j ];\n\n\t\t\t\t\t\tconst deserializedImage = await deserializeImage( currentUrl );\n\n\t\t\t\t\t\tif ( deserializedImage !== null ) {\n\n\t\t\t\t\t\t\tif ( deserializedImage instanceof HTMLImageElement ) {\n\n\t\t\t\t\t\t\t\timageArray.push( deserializedImage );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// special case: handle array of data textures for cube textures\n\n\t\t\t\t\t\t\t\timageArray.push( new DataTexture( deserializedImage.data, deserializedImage.width, deserializedImage.height ) );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\timages[ image.uuid ] = new Source( imageArray );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// load single image\n\n\t\t\t\t\tconst deserializedImage = await deserializeImage( image.url );\n\t\t\t\t\timages[ image.uuid ] = new Source( deserializedImage );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn images;\n\n\t}\n\n\tparseTextures( json, images ) {\n\n\t\tfunction parseConstant( value, type ) {\n\n\t\t\tif ( typeof value === 'number' ) return value;\n\n\t\t\tconsole.warn( 'THREE.ObjectLoader.parseTexture: Constant should be in numeric form.', value );\n\n\t\t\treturn type[ value ];\n\n\t\t}\n\n\t\tconst textures = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tconst data = json[ i ];\n\n\t\t\t\tif ( data.image === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: No \"image\" specified for', data.uuid );\n\n\t\t\t\t}\n\n\t\t\t\tif ( images[ data.image ] === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined image', data.image );\n\n\t\t\t\t}\n\n\t\t\t\tconst source = images[ data.image ];\n\t\t\t\tconst image = source.data;\n\n\t\t\t\tlet texture;\n\n\t\t\t\tif ( Array.isArray( image ) ) {\n\n\t\t\t\t\ttexture = new CubeTexture();\n\n\t\t\t\t\tif ( image.length === 6 ) texture.needsUpdate = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( image && image.data ) {\n\n\t\t\t\t\t\ttexture = new DataTexture();\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttexture = new Texture();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( image ) texture.needsUpdate = true; // textures can have undefined image data\n\n\t\t\t\t}\n\n\t\t\t\ttexture.source = source;\n\n\t\t\t\ttexture.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) texture.name = data.name;\n\n\t\t\t\tif ( data.mapping !== undefined ) texture.mapping = parseConstant( data.mapping, TEXTURE_MAPPING );\n\n\t\t\t\tif ( data.offset !== undefined ) texture.offset.fromArray( data.offset );\n\t\t\t\tif ( data.repeat !== undefined ) texture.repeat.fromArray( data.repeat );\n\t\t\t\tif ( data.center !== undefined ) texture.center.fromArray( data.center );\n\t\t\t\tif ( data.rotation !== undefined ) texture.rotation = data.rotation;\n\n\t\t\t\tif ( data.wrap !== undefined ) {\n\n\t\t\t\t\ttexture.wrapS = parseConstant( data.wrap[ 0 ], TEXTURE_WRAPPING );\n\t\t\t\t\ttexture.wrapT = parseConstant( data.wrap[ 1 ], TEXTURE_WRAPPING );\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.format !== undefined ) texture.format = data.format;\n\t\t\t\tif ( data.type !== undefined ) texture.type = data.type;\n\t\t\t\tif ( data.encoding !== undefined ) texture.encoding = data.encoding;\n\n\t\t\t\tif ( data.minFilter !== undefined ) texture.minFilter = parseConstant( data.minFilter, TEXTURE_FILTER );\n\t\t\t\tif ( data.magFilter !== undefined ) texture.magFilter = parseConstant( data.magFilter, TEXTURE_FILTER );\n\t\t\t\tif ( data.anisotropy !== undefined ) texture.anisotropy = data.anisotropy;\n\n\t\t\t\tif ( data.flipY !== undefined ) texture.flipY = data.flipY;\n\n\t\t\t\tif ( data.generateMipmaps !== undefined ) texture.generateMipmaps = data.generateMipmaps;\n\t\t\t\tif ( data.premultiplyAlpha !== undefined ) texture.premultiplyAlpha = data.premultiplyAlpha;\n\t\t\t\tif ( data.unpackAlignment !== undefined ) texture.unpackAlignment = data.unpackAlignment;\n\n\t\t\t\tif ( data.userData !== undefined ) texture.userData = data.userData;\n\n\t\t\t\ttextures[ data.uuid ] = texture;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn textures;\n\n\t}\n\n\tparseObject( data, geometries, materials, textures, animations ) {\n\n\t\tlet object;\n\n\t\tfunction getGeometry( name ) {\n\n\t\t\tif ( geometries[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', name );\n\n\t\t\t}\n\n\t\t\treturn geometries[ name ];\n\n\t\t}\n\n\t\tfunction getMaterial( name ) {\n\n\t\t\tif ( name === undefined ) return undefined;\n\n\t\t\tif ( Array.isArray( name ) ) {\n\n\t\t\t\tconst array = [];\n\n\t\t\t\tfor ( let i = 0, l = name.length; i < l; i ++ ) {\n\n\t\t\t\t\tconst uuid = name[ i ];\n\n\t\t\t\t\tif ( materials[ uuid ] === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', uuid );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tarray.push( materials[ uuid ] );\n\n\t\t\t\t}\n\n\t\t\t\treturn array;\n\n\t\t\t}\n\n\t\t\tif ( materials[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', name );\n\n\t\t\t}\n\n\t\t\treturn materials[ name ];\n\n\t\t}\n\n\t\tfunction getTexture( uuid ) {\n\n\t\t\tif ( textures[ uuid ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined texture', uuid );\n\n\t\t\t}\n\n\t\t\treturn textures[ uuid ];\n\n\t\t}\n\n\t\tlet geometry, material;\n\n\t\tswitch ( data.type ) {\n\n\t\t\tcase 'Scene':\n\n\t\t\t\tobject = new Scene();\n\n\t\t\t\tif ( data.background !== undefined ) {\n\n\t\t\t\t\tif ( Number.isInteger( data.background ) ) {\n\n\t\t\t\t\t\tobject.background = new Color( data.background );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tobject.background = getTexture( data.background );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.environment !== undefined ) {\n\n\t\t\t\t\tobject.environment = getTexture( data.environment );\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.fog !== undefined ) {\n\n\t\t\t\t\tif ( data.fog.type === 'Fog' ) {\n\n\t\t\t\t\t\tobject.fog = new Fog( data.fog.color, data.fog.near, data.fog.far );\n\n\t\t\t\t\t} else if ( data.fog.type === 'FogExp2' ) {\n\n\t\t\t\t\t\tobject.fog = new FogExp2( data.fog.color, data.fog.density );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.backgroundBlurriness !== undefined ) object.backgroundBlurriness = data.backgroundBlurriness;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'PerspectiveCamera':\n\n\t\t\t\tobject = new PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\n\n\t\t\t\tif ( data.focus !== undefined ) object.focus = data.focus;\n\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\n\t\t\t\tif ( data.filmGauge !== undefined ) object.filmGauge = data.filmGauge;\n\t\t\t\tif ( data.filmOffset !== undefined ) object.filmOffset = data.filmOffset;\n\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'OrthographicCamera':\n\n\t\t\t\tobject = new OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\n\n\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\n\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'AmbientLight':\n\n\t\t\t\tobject = new AmbientLight( data.color, data.intensity );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'DirectionalLight':\n\n\t\t\t\tobject = new DirectionalLight( data.color, data.intensity );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'PointLight':\n\n\t\t\t\tobject = new PointLight( data.color, data.intensity, data.distance, data.decay );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'RectAreaLight':\n\n\t\t\t\tobject = new RectAreaLight( data.color, data.intensity, data.width, data.height );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'SpotLight':\n\n\t\t\t\tobject = new SpotLight( data.color, data.intensity, data.distance, data.angle, data.penumbra, data.decay );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'HemisphereLight':\n\n\t\t\t\tobject = new HemisphereLight( data.color, data.groundColor, data.intensity );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LightProbe':\n\n\t\t\t\tobject = new LightProbe().fromJSON( data );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'SkinnedMesh':\n\n\t\t\t\tgeometry = getGeometry( data.geometry );\n\t\t\t \tmaterial = getMaterial( data.material );\n\n\t\t\t\tobject = new SkinnedMesh( geometry, material );\n\n\t\t\t\tif ( data.bindMode !== undefined ) object.bindMode = data.bindMode;\n\t\t\t\tif ( data.bindMatrix !== undefined ) object.bindMatrix.fromArray( data.bindMatrix );\n\t\t\t\tif ( data.skeleton !== undefined ) object.skeleton = data.skeleton;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Mesh':\n\n\t\t\t\tgeometry = getGeometry( data.geometry );\n\t\t\t\tmaterial = getMaterial( data.material );\n\n\t\t\t\tobject = new Mesh( geometry, material );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'InstancedMesh':\n\n\t\t\t\tgeometry = getGeometry( data.geometry );\n\t\t\t\tmaterial = getMaterial( data.material );\n\t\t\t\tconst count = data.count;\n\t\t\t\tconst instanceMatrix = data.instanceMatrix;\n\t\t\t\tconst instanceColor = data.instanceColor;\n\n\t\t\t\tobject = new InstancedMesh( geometry, material, count );\n\t\t\t\tobject.instanceMatrix = new InstancedBufferAttribute( new Float32Array( instanceMatrix.array ), 16 );\n\t\t\t\tif ( instanceColor !== undefined ) object.instanceColor = new InstancedBufferAttribute( new Float32Array( instanceColor.array ), instanceColor.itemSize );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LOD':\n\n\t\t\t\tobject = new LOD();\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Line':\n\n\t\t\t\tobject = new Line( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LineLoop':\n\n\t\t\t\tobject = new LineLoop( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LineSegments':\n\n\t\t\t\tobject = new LineSegments( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'PointCloud':\n\t\t\tcase 'Points':\n\n\t\t\t\tobject = new Points( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Sprite':\n\n\t\t\t\tobject = new Sprite( getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Group':\n\n\t\t\t\tobject = new Group();\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Bone':\n\n\t\t\t\tobject = new Bone();\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tobject = new Object3D();\n\n\t\t}\n\n\t\tobject.uuid = data.uuid;\n\n\t\tif ( data.name !== undefined ) object.name = data.name;\n\n\t\tif ( data.matrix !== undefined ) {\n\n\t\t\tobject.matrix.fromArray( data.matrix );\n\n\t\t\tif ( data.matrixAutoUpdate !== undefined ) object.matrixAutoUpdate = data.matrixAutoUpdate;\n\t\t\tif ( object.matrixAutoUpdate ) object.matrix.decompose( object.position, object.quaternion, object.scale );\n\n\t\t} else {\n\n\t\t\tif ( data.position !== undefined ) object.position.fromArray( data.position );\n\t\t\tif ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\n\t\t\tif ( data.quaternion !== undefined ) object.quaternion.fromArray( data.quaternion );\n\t\t\tif ( data.scale !== undefined ) object.scale.fromArray( data.scale );\n\n\t\t}\n\n\t\tif ( data.castShadow !== undefined ) object.castShadow = data.castShadow;\n\t\tif ( data.receiveShadow !== undefined ) object.receiveShadow = data.receiveShadow;\n\n\t\tif ( data.shadow ) {\n\n\t\t\tif ( data.shadow.bias !== undefined ) object.shadow.bias = data.shadow.bias;\n\t\t\tif ( data.shadow.normalBias !== undefined ) object.shadow.normalBias = data.shadow.normalBias;\n\t\t\tif ( data.shadow.radius !== undefined ) object.shadow.radius = data.shadow.radius;\n\t\t\tif ( data.shadow.mapSize !== undefined ) object.shadow.mapSize.fromArray( data.shadow.mapSize );\n\t\t\tif ( data.shadow.camera !== undefined ) object.shadow.camera = this.parseObject( data.shadow.camera );\n\n\t\t}\n\n\t\tif ( data.visible !== undefined ) object.visible = data.visible;\n\t\tif ( data.frustumCulled !== undefined ) object.frustumCulled = data.frustumCulled;\n\t\tif ( data.renderOrder !== undefined ) object.renderOrder = data.renderOrder;\n\t\tif ( data.userData !== undefined ) object.userData = data.userData;\n\t\tif ( data.layers !== undefined ) object.layers.mask = data.layers;\n\n\t\tif ( data.children !== undefined ) {\n\n\t\t\tconst children = data.children;\n\n\t\t\tfor ( let i = 0; i < children.length; i ++ ) {\n\n\t\t\t\tobject.add( this.parseObject( children[ i ], geometries, materials, textures, animations ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( data.animations !== undefined ) {\n\n\t\t\tconst objectAnimations = data.animations;\n\n\t\t\tfor ( let i = 0; i < objectAnimations.length; i ++ ) {\n\n\t\t\t\tconst uuid = objectAnimations[ i ];\n\n\t\t\t\tobject.animations.push( animations[ uuid ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( data.type === 'LOD' ) {\n\n\t\t\tif ( data.autoUpdate !== undefined ) object.autoUpdate = data.autoUpdate;\n\n\t\t\tconst levels = data.levels;\n\n\t\t\tfor ( let l = 0; l < levels.length; l ++ ) {\n\n\t\t\t\tconst level = levels[ l ];\n\t\t\t\tconst child = object.getObjectByProperty( 'uuid', level.object );\n\n\t\t\t\tif ( child !== undefined ) {\n\n\t\t\t\t\tobject.addLevel( child, level.distance, level.hysteresis );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn object;\n\n\t}\n\n\tbindSkeletons( object, skeletons ) {\n\n\t\tif ( Object.keys( skeletons ).length === 0 ) return;\n\n\t\tobject.traverse( function ( child ) {\n\n\t\t\tif ( child.isSkinnedMesh === true && child.skeleton !== undefined ) {\n\n\t\t\t\tconst skeleton = skeletons[ child.skeleton ];\n\n\t\t\t\tif ( skeleton === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: No skeleton found with UUID:', child.skeleton );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tchild.bind( skeleton, child.bindMatrix );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t}\n\n}\n\nconst TEXTURE_MAPPING = {\n\tUVMapping: UVMapping,\n\tCubeReflectionMapping: CubeReflectionMapping,\n\tCubeRefractionMapping: CubeRefractionMapping,\n\tEquirectangularReflectionMapping: EquirectangularReflectionMapping,\n\tEquirectangularRefractionMapping: EquirectangularRefractionMapping,\n\tCubeUVReflectionMapping: CubeUVReflectionMapping\n};\n\nconst TEXTURE_WRAPPING = {\n\tRepeatWrapping: RepeatWrapping,\n\tClampToEdgeWrapping: ClampToEdgeWrapping,\n\tMirroredRepeatWrapping: MirroredRepeatWrapping\n};\n\nconst TEXTURE_FILTER = {\n\tNearestFilter: NearestFilter,\n\tNearestMipmapNearestFilter: NearestMipmapNearestFilter,\n\tNearestMipmapLinearFilter: NearestMipmapLinearFilter,\n\tLinearFilter: LinearFilter,\n\tLinearMipmapNearestFilter: LinearMipmapNearestFilter,\n\tLinearMipmapLinearFilter: LinearMipmapLinearFilter\n};\n\nclass ImageBitmapLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.isImageBitmapLoader = true;\n\n\t\tif ( typeof createImageBitmap === 'undefined' ) {\n\n\t\t\tconsole.warn( 'THREE.ImageBitmapLoader: createImageBitmap() not supported.' );\n\n\t\t}\n\n\t\tif ( typeof fetch === 'undefined' ) {\n\n\t\t\tconsole.warn( 'THREE.ImageBitmapLoader: fetch() not supported.' );\n\n\t\t}\n\n\t\tthis.options = { premultiplyAlpha: 'none' };\n\n\t}\n\n\tsetOptions( options ) {\n\n\t\tthis.options = options;\n\n\t\treturn this;\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst scope = this;\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tconst fetchOptions = {};\n\t\tfetchOptions.credentials = ( this.crossOrigin === 'anonymous' ) ? 'same-origin' : 'include';\n\t\tfetchOptions.headers = this.requestHeader;\n\n\t\tfetch( url, fetchOptions ).then( function ( res ) {\n\n\t\t\treturn res.blob();\n\n\t\t} ).then( function ( blob ) {\n\n\t\t\treturn createImageBitmap( blob, Object.assign( scope.options, { colorSpaceConversion: 'none' } ) );\n\n\t\t} ).then( function ( imageBitmap ) {\n\n\t\t\tCache.add( url, imageBitmap );\n\n\t\t\tif ( onLoad ) onLoad( imageBitmap );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t} ).catch( function ( e ) {\n\n\t\t\tif ( onError ) onError( e );\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t} );\n\n\t\tscope.manager.itemStart( url );\n\n\t}\n\n}\n\nlet _context;\n\nclass AudioContext {\n\n\tstatic getContext() {\n\n\t\tif ( _context === undefined ) {\n\n\t\t\t_context = new ( window.AudioContext || window.webkitAudioContext )();\n\n\t\t}\n\n\t\treturn _context;\n\n\t}\n\n\tstatic setContext( value ) {\n\n\t\t_context = value;\n\n\t}\n\n}\n\nclass AudioLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\ttry {\n\n\t\t\t\t// Create a copy of the buffer. The `decodeAudioData` method\n\t\t\t\t// detaches the buffer when complete, preventing reuse.\n\t\t\t\tconst bufferCopy = buffer.slice( 0 );\n\n\t\t\t\tconst context = AudioContext.getContext();\n\t\t\t\tcontext.decodeAudioData( bufferCopy, function ( audioBuffer ) {\n\n\t\t\t\t\tonLoad( audioBuffer );\n\n\t\t\t\t} );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n}\n\nclass HemisphereLightProbe extends LightProbe {\n\n\tconstructor( skyColor, groundColor, intensity = 1 ) {\n\n\t\tsuper( undefined, intensity );\n\n\t\tthis.isHemisphereLightProbe = true;\n\n\t\tconst color1 = new Color().set( skyColor );\n\t\tconst color2 = new Color().set( groundColor );\n\n\t\tconst sky = new Vector3( color1.r, color1.g, color1.b );\n\t\tconst ground = new Vector3( color2.r, color2.g, color2.b );\n\n\t\t// without extra factor of PI in the shader, should = 1 / Math.sqrt( Math.PI );\n\t\tconst c0 = Math.sqrt( Math.PI );\n\t\tconst c1 = c0 * Math.sqrt( 0.75 );\n\n\t\tthis.sh.coefficients[ 0 ].copy( sky ).add( ground ).multiplyScalar( c0 );\n\t\tthis.sh.coefficients[ 1 ].copy( sky ).sub( ground ).multiplyScalar( c1 );\n\n\t}\n\n}\n\nclass AmbientLightProbe extends LightProbe {\n\n\tconstructor( color, intensity = 1 ) {\n\n\t\tsuper( undefined, intensity );\n\n\t\tthis.isAmbientLightProbe = true;\n\n\t\tconst color1 = new Color().set( color );\n\n\t\t// without extra factor of PI in the shader, would be 2 / Math.sqrt( Math.PI );\n\t\tthis.sh.coefficients[ 0 ].set( color1.r, color1.g, color1.b ).multiplyScalar( 2 * Math.sqrt( Math.PI ) );\n\n\t}\n\n}\n\nconst _eyeRight = /*@__PURE__*/ new Matrix4();\nconst _eyeLeft = /*@__PURE__*/ new Matrix4();\nconst _projectionMatrix = /*@__PURE__*/ new Matrix4();\n\nclass StereoCamera {\n\n\tconstructor() {\n\n\t\tthis.type = 'StereoCamera';\n\n\t\tthis.aspect = 1;\n\n\t\tthis.eyeSep = 0.064;\n\n\t\tthis.cameraL = new PerspectiveCamera();\n\t\tthis.cameraL.layers.enable( 1 );\n\t\tthis.cameraL.matrixAutoUpdate = false;\n\n\t\tthis.cameraR = new PerspectiveCamera();\n\t\tthis.cameraR.layers.enable( 2 );\n\t\tthis.cameraR.matrixAutoUpdate = false;\n\n\t\tthis._cache = {\n\t\t\tfocus: null,\n\t\t\tfov: null,\n\t\t\taspect: null,\n\t\t\tnear: null,\n\t\t\tfar: null,\n\t\t\tzoom: null,\n\t\t\teyeSep: null\n\t\t};\n\n\t}\n\n\tupdate( camera ) {\n\n\t\tconst cache = this._cache;\n\n\t\tconst needsUpdate = cache.focus !== camera.focus || cache.fov !== camera.fov ||\n\t\t\tcache.aspect !== camera.aspect * this.aspect || cache.near !== camera.near ||\n\t\t\tcache.far !== camera.far || cache.zoom !== camera.zoom || cache.eyeSep !== this.eyeSep;\n\n\t\tif ( needsUpdate ) {\n\n\t\t\tcache.focus = camera.focus;\n\t\t\tcache.fov = camera.fov;\n\t\t\tcache.aspect = camera.aspect * this.aspect;\n\t\t\tcache.near = camera.near;\n\t\t\tcache.far = camera.far;\n\t\t\tcache.zoom = camera.zoom;\n\t\t\tcache.eyeSep = this.eyeSep;\n\n\t\t\t// Off-axis stereoscopic effect based on\n\t\t\t// http://paulbourke.net/stereographics/stereorender/\n\n\t\t\t_projectionMatrix.copy( camera.projectionMatrix );\n\t\t\tconst eyeSepHalf = cache.eyeSep / 2;\n\t\t\tconst eyeSepOnProjection = eyeSepHalf * cache.near / cache.focus;\n\t\t\tconst ymax = ( cache.near * Math.tan( DEG2RAD * cache.fov * 0.5 ) ) / cache.zoom;\n\t\t\tlet xmin, xmax;\n\n\t\t\t// translate xOffset\n\n\t\t\t_eyeLeft.elements[ 12 ] = - eyeSepHalf;\n\t\t\t_eyeRight.elements[ 12 ] = eyeSepHalf;\n\n\t\t\t// for left eye\n\n\t\t\txmin = - ymax * cache.aspect + eyeSepOnProjection;\n\t\t\txmax = ymax * cache.aspect + eyeSepOnProjection;\n\n\t\t\t_projectionMatrix.elements[ 0 ] = 2 * cache.near / ( xmax - xmin );\n\t\t\t_projectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\n\n\t\t\tthis.cameraL.projectionMatrix.copy( _projectionMatrix );\n\n\t\t\t// for right eye\n\n\t\t\txmin = - ymax * cache.aspect - eyeSepOnProjection;\n\t\t\txmax = ymax * cache.aspect - eyeSepOnProjection;\n\n\t\t\t_projectionMatrix.elements[ 0 ] = 2 * cache.near / ( xmax - xmin );\n\t\t\t_projectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\n\n\t\t\tthis.cameraR.projectionMatrix.copy( _projectionMatrix );\n\n\t\t}\n\n\t\tthis.cameraL.matrixWorld.copy( camera.matrixWorld ).multiply( _eyeLeft );\n\t\tthis.cameraR.matrixWorld.copy( camera.matrixWorld ).multiply( _eyeRight );\n\n\t}\n\n}\n\nclass Clock {\n\n\tconstructor( autoStart = true ) {\n\n\t\tthis.autoStart = autoStart;\n\n\t\tthis.startTime = 0;\n\t\tthis.oldTime = 0;\n\t\tthis.elapsedTime = 0;\n\n\t\tthis.running = false;\n\n\t}\n\n\tstart() {\n\n\t\tthis.startTime = now();\n\n\t\tthis.oldTime = this.startTime;\n\t\tthis.elapsedTime = 0;\n\t\tthis.running = true;\n\n\t}\n\n\tstop() {\n\n\t\tthis.getElapsedTime();\n\t\tthis.running = false;\n\t\tthis.autoStart = false;\n\n\t}\n\n\tgetElapsedTime() {\n\n\t\tthis.getDelta();\n\t\treturn this.elapsedTime;\n\n\t}\n\n\tgetDelta() {\n\n\t\tlet diff = 0;\n\n\t\tif ( this.autoStart && ! this.running ) {\n\n\t\t\tthis.start();\n\t\t\treturn 0;\n\n\t\t}\n\n\t\tif ( this.running ) {\n\n\t\t\tconst newTime = now();\n\n\t\t\tdiff = ( newTime - this.oldTime ) / 1000;\n\t\t\tthis.oldTime = newTime;\n\n\t\t\tthis.elapsedTime += diff;\n\n\t\t}\n\n\t\treturn diff;\n\n\t}\n\n}\n\nfunction now() {\n\n\treturn ( typeof performance === 'undefined' ? Date : performance ).now(); // see #10732\n\n}\n\nconst _position$1 = /*@__PURE__*/ new Vector3();\nconst _quaternion$1 = /*@__PURE__*/ new Quaternion();\nconst _scale$1 = /*@__PURE__*/ new Vector3();\nconst _orientation$1 = /*@__PURE__*/ new Vector3();\n\nclass AudioListener extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.type = 'AudioListener';\n\n\t\tthis.context = AudioContext.getContext();\n\n\t\tthis.gain = this.context.createGain();\n\t\tthis.gain.connect( this.context.destination );\n\n\t\tthis.filter = null;\n\n\t\tthis.timeDelta = 0;\n\n\t\t// private\n\n\t\tthis._clock = new Clock();\n\n\t}\n\n\tgetInput() {\n\n\t\treturn this.gain;\n\n\t}\n\n\tremoveFilter() {\n\n\t\tif ( this.filter !== null ) {\n\n\t\t\tthis.gain.disconnect( this.filter );\n\t\t\tthis.filter.disconnect( this.context.destination );\n\t\t\tthis.gain.connect( this.context.destination );\n\t\t\tthis.filter = null;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetFilter() {\n\n\t\treturn this.filter;\n\n\t}\n\n\tsetFilter( value ) {\n\n\t\tif ( this.filter !== null ) {\n\n\t\t\tthis.gain.disconnect( this.filter );\n\t\t\tthis.filter.disconnect( this.context.destination );\n\n\t\t} else {\n\n\t\t\tthis.gain.disconnect( this.context.destination );\n\n\t\t}\n\n\t\tthis.filter = value;\n\t\tthis.gain.connect( this.filter );\n\t\tthis.filter.connect( this.context.destination );\n\n\t\treturn this;\n\n\t}\n\n\tgetMasterVolume() {\n\n\t\treturn this.gain.gain.value;\n\n\t}\n\n\tsetMasterVolume( value ) {\n\n\t\tthis.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\n\n\t\treturn this;\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t\tconst listener = this.context.listener;\n\t\tconst up = this.up;\n\n\t\tthis.timeDelta = this._clock.getDelta();\n\n\t\tthis.matrixWorld.decompose( _position$1, _quaternion$1, _scale$1 );\n\n\t\t_orientation$1.set( 0, 0, - 1 ).applyQuaternion( _quaternion$1 );\n\n\t\tif ( listener.positionX ) {\n\n\t\t\t// code path for Chrome (see #14393)\n\n\t\t\tconst endTime = this.context.currentTime + this.timeDelta;\n\n\t\t\tlistener.positionX.linearRampToValueAtTime( _position$1.x, endTime );\n\t\t\tlistener.positionY.linearRampToValueAtTime( _position$1.y, endTime );\n\t\t\tlistener.positionZ.linearRampToValueAtTime( _position$1.z, endTime );\n\t\t\tlistener.forwardX.linearRampToValueAtTime( _orientation$1.x, endTime );\n\t\t\tlistener.forwardY.linearRampToValueAtTime( _orientation$1.y, endTime );\n\t\t\tlistener.forwardZ.linearRampToValueAtTime( _orientation$1.z, endTime );\n\t\t\tlistener.upX.linearRampToValueAtTime( up.x, endTime );\n\t\t\tlistener.upY.linearRampToValueAtTime( up.y, endTime );\n\t\t\tlistener.upZ.linearRampToValueAtTime( up.z, endTime );\n\n\t\t} else {\n\n\t\t\tlistener.setPosition( _position$1.x, _position$1.y, _position$1.z );\n\t\t\tlistener.setOrientation( _orientation$1.x, _orientation$1.y, _orientation$1.z, up.x, up.y, up.z );\n\n\t\t}\n\n\t}\n\n}\n\nclass Audio extends Object3D {\n\n\tconstructor( listener ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'Audio';\n\n\t\tthis.listener = listener;\n\t\tthis.context = listener.context;\n\n\t\tthis.gain = this.context.createGain();\n\t\tthis.gain.connect( listener.getInput() );\n\n\t\tthis.autoplay = false;\n\n\t\tthis.buffer = null;\n\t\tthis.detune = 0;\n\t\tthis.loop = false;\n\t\tthis.loopStart = 0;\n\t\tthis.loopEnd = 0;\n\t\tthis.offset = 0;\n\t\tthis.duration = undefined;\n\t\tthis.playbackRate = 1;\n\t\tthis.isPlaying = false;\n\t\tthis.hasPlaybackControl = true;\n\t\tthis.source = null;\n\t\tthis.sourceType = 'empty';\n\n\t\tthis._startedAt = 0;\n\t\tthis._progress = 0;\n\t\tthis._connected = false;\n\n\t\tthis.filters = [];\n\n\t}\n\n\tgetOutput() {\n\n\t\treturn this.gain;\n\n\t}\n\n\tsetNodeSource( audioNode ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'audioNode';\n\t\tthis.source = audioNode;\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t}\n\n\tsetMediaElementSource( mediaElement ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'mediaNode';\n\t\tthis.source = this.context.createMediaElementSource( mediaElement );\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t}\n\n\tsetMediaStreamSource( mediaStream ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'mediaStreamNode';\n\t\tthis.source = this.context.createMediaStreamSource( mediaStream );\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t}\n\n\tsetBuffer( audioBuffer ) {\n\n\t\tthis.buffer = audioBuffer;\n\t\tthis.sourceType = 'buffer';\n\n\t\tif ( this.autoplay ) this.play();\n\n\t\treturn this;\n\n\t}\n\n\tplay( delay = 0 ) {\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: Audio is already playing.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._startedAt = this.context.currentTime + delay;\n\n\t\tconst source = this.context.createBufferSource();\n\t\tsource.buffer = this.buffer;\n\t\tsource.loop = this.loop;\n\t\tsource.loopStart = this.loopStart;\n\t\tsource.loopEnd = this.loopEnd;\n\t\tsource.onended = this.onEnded.bind( this );\n\t\tsource.start( this._startedAt, this._progress + this.offset, this.duration );\n\n\t\tthis.isPlaying = true;\n\n\t\tthis.source = source;\n\n\t\tthis.setDetune( this.detune );\n\t\tthis.setPlaybackRate( this.playbackRate );\n\n\t\treturn this.connect();\n\n\t}\n\n\tpause() {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\t// update current progress\n\n\t\t\tthis._progress += Math.max( this.context.currentTime - this._startedAt, 0 ) * this.playbackRate;\n\n\t\t\tif ( this.loop === true ) {\n\n\t\t\t\t// ensure _progress does not exceed duration with looped audios\n\n\t\t\t\tthis._progress = this._progress % ( this.duration || this.buffer.duration );\n\n\t\t\t}\n\n\t\t\tthis.source.stop();\n\t\t\tthis.source.onended = null;\n\n\t\t\tthis.isPlaying = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tstop() {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._progress = 0;\n\n\t\tthis.source.stop();\n\t\tthis.source.onended = null;\n\t\tthis.isPlaying = false;\n\n\t\treturn this;\n\n\t}\n\n\tconnect() {\n\n\t\tif ( this.filters.length > 0 ) {\n\n\t\t\tthis.source.connect( this.filters[ 0 ] );\n\n\t\t\tfor ( let i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\tthis.filters[ i - 1 ].connect( this.filters[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.filters[ this.filters.length - 1 ].connect( this.getOutput() );\n\n\t\t} else {\n\n\t\t\tthis.source.connect( this.getOutput() );\n\n\t\t}\n\n\t\tthis._connected = true;\n\n\t\treturn this;\n\n\t}\n\n\tdisconnect() {\n\n\t\tif ( this.filters.length > 0 ) {\n\n\t\t\tthis.source.disconnect( this.filters[ 0 ] );\n\n\t\t\tfor ( let i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\tthis.filters[ i - 1 ].disconnect( this.filters[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.filters[ this.filters.length - 1 ].disconnect( this.getOutput() );\n\n\t\t} else {\n\n\t\t\tthis.source.disconnect( this.getOutput() );\n\n\t\t}\n\n\t\tthis._connected = false;\n\n\t\treturn this;\n\n\t}\n\n\tgetFilters() {\n\n\t\treturn this.filters;\n\n\t}\n\n\tsetFilters( value ) {\n\n\t\tif ( ! value ) value = [];\n\n\t\tif ( this._connected === true ) {\n\n\t\t\tthis.disconnect();\n\t\t\tthis.filters = value.slice();\n\t\t\tthis.connect();\n\n\t\t} else {\n\n\t\t\tthis.filters = value.slice();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetDetune( value ) {\n\n\t\tthis.detune = value;\n\n\t\tif ( this.source.detune === undefined ) return; // only set detune when available\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.detune.setTargetAtTime( this.detune, this.context.currentTime, 0.01 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetDetune() {\n\n\t\treturn this.detune;\n\n\t}\n\n\tgetFilter() {\n\n\t\treturn this.getFilters()[ 0 ];\n\n\t}\n\n\tsetFilter( filter ) {\n\n\t\treturn this.setFilters( filter ? [ filter ] : [] );\n\n\t}\n\n\tsetPlaybackRate( value ) {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.playbackRate = value;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.playbackRate.setTargetAtTime( this.playbackRate, this.context.currentTime, 0.01 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetPlaybackRate() {\n\n\t\treturn this.playbackRate;\n\n\t}\n\n\tonEnded() {\n\n\t\tthis.isPlaying = false;\n\n\t}\n\n\tgetLoop() {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn this.loop;\n\n\t}\n\n\tsetLoop( value ) {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.loop = value;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.loop = this.loop;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetLoopStart( value ) {\n\n\t\tthis.loopStart = value;\n\n\t\treturn this;\n\n\t}\n\n\tsetLoopEnd( value ) {\n\n\t\tthis.loopEnd = value;\n\n\t\treturn this;\n\n\t}\n\n\tgetVolume() {\n\n\t\treturn this.gain.gain.value;\n\n\t}\n\n\tsetVolume( value ) {\n\n\t\tthis.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _position = /*@__PURE__*/ new Vector3();\nconst _quaternion = /*@__PURE__*/ new Quaternion();\nconst _scale = /*@__PURE__*/ new Vector3();\nconst _orientation = /*@__PURE__*/ new Vector3();\n\nclass PositionalAudio extends Audio {\n\n\tconstructor( listener ) {\n\n\t\tsuper( listener );\n\n\t\tthis.panner = this.context.createPanner();\n\t\tthis.panner.panningModel = 'HRTF';\n\t\tthis.panner.connect( this.gain );\n\n\t}\n\n\tdisconnect() {\n\n\t\tsuper.disconnect();\n\n\t\tthis.panner.disconnect( this.gain );\n\n\t}\n\n\tgetOutput() {\n\n\t\treturn this.panner;\n\n\t}\n\n\tgetRefDistance() {\n\n\t\treturn this.panner.refDistance;\n\n\t}\n\n\tsetRefDistance( value ) {\n\n\t\tthis.panner.refDistance = value;\n\n\t\treturn this;\n\n\t}\n\n\tgetRolloffFactor() {\n\n\t\treturn this.panner.rolloffFactor;\n\n\t}\n\n\tsetRolloffFactor( value ) {\n\n\t\tthis.panner.rolloffFactor = value;\n\n\t\treturn this;\n\n\t}\n\n\tgetDistanceModel() {\n\n\t\treturn this.panner.distanceModel;\n\n\t}\n\n\tsetDistanceModel( value ) {\n\n\t\tthis.panner.distanceModel = value;\n\n\t\treturn this;\n\n\t}\n\n\tgetMaxDistance() {\n\n\t\treturn this.panner.maxDistance;\n\n\t}\n\n\tsetMaxDistance( value ) {\n\n\t\tthis.panner.maxDistance = value;\n\n\t\treturn this;\n\n\t}\n\n\tsetDirectionalCone( coneInnerAngle, coneOuterAngle, coneOuterGain ) {\n\n\t\tthis.panner.coneInnerAngle = coneInnerAngle;\n\t\tthis.panner.coneOuterAngle = coneOuterAngle;\n\t\tthis.panner.coneOuterGain = coneOuterGain;\n\n\t\treturn this;\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t\tif ( this.hasPlaybackControl === true && this.isPlaying === false ) return;\n\n\t\tthis.matrixWorld.decompose( _position, _quaternion, _scale );\n\n\t\t_orientation.set( 0, 0, 1 ).applyQuaternion( _quaternion );\n\n\t\tconst panner = this.panner;\n\n\t\tif ( panner.positionX ) {\n\n\t\t\t// code path for Chrome and Firefox (see #14393)\n\n\t\t\tconst endTime = this.context.currentTime + this.listener.timeDelta;\n\n\t\t\tpanner.positionX.linearRampToValueAtTime( _position.x, endTime );\n\t\t\tpanner.positionY.linearRampToValueAtTime( _position.y, endTime );\n\t\t\tpanner.positionZ.linearRampToValueAtTime( _position.z, endTime );\n\t\t\tpanner.orientationX.linearRampToValueAtTime( _orientation.x, endTime );\n\t\t\tpanner.orientationY.linearRampToValueAtTime( _orientation.y, endTime );\n\t\t\tpanner.orientationZ.linearRampToValueAtTime( _orientation.z, endTime );\n\n\t\t} else {\n\n\t\t\tpanner.setPosition( _position.x, _position.y, _position.z );\n\t\t\tpanner.setOrientation( _orientation.x, _orientation.y, _orientation.z );\n\n\t\t}\n\n\t}\n\n}\n\nclass AudioAnalyser {\n\n\tconstructor( audio, fftSize = 2048 ) {\n\n\t\tthis.analyser = audio.context.createAnalyser();\n\t\tthis.analyser.fftSize = fftSize;\n\n\t\tthis.data = new Uint8Array( this.analyser.frequencyBinCount );\n\n\t\taudio.getOutput().connect( this.analyser );\n\n\t}\n\n\n\tgetFrequencyData() {\n\n\t\tthis.analyser.getByteFrequencyData( this.data );\n\n\t\treturn this.data;\n\n\t}\n\n\tgetAverageFrequency() {\n\n\t\tlet value = 0;\n\t\tconst data = this.getFrequencyData();\n\n\t\tfor ( let i = 0; i < data.length; i ++ ) {\n\n\t\t\tvalue += data[ i ];\n\n\t\t}\n\n\t\treturn value / data.length;\n\n\t}\n\n}\n\nclass PropertyMixer {\n\n\tconstructor( binding, typeName, valueSize ) {\n\n\t\tthis.binding = binding;\n\t\tthis.valueSize = valueSize;\n\n\t\tlet mixFunction,\n\t\t\tmixFunctionAdditive,\n\t\t\tsetIdentity;\n\n\t\t// buffer layout: [ incoming | accu0 | accu1 | orig | addAccu | (optional work) ]\n\t\t//\n\t\t// interpolators can use .buffer as their .result\n\t\t// the data then goes to 'incoming'\n\t\t//\n\t\t// 'accu0' and 'accu1' are used frame-interleaved for\n\t\t// the cumulative result and are compared to detect\n\t\t// changes\n\t\t//\n\t\t// 'orig' stores the original state of the property\n\t\t//\n\t\t// 'add' is used for additive cumulative results\n\t\t//\n\t\t// 'work' is optional and is only present for quaternion types. It is used\n\t\t// to store intermediate quaternion multiplication results\n\n\t\tswitch ( typeName ) {\n\n\t\t\tcase 'quaternion':\n\t\t\t\tmixFunction = this._slerp;\n\t\t\t\tmixFunctionAdditive = this._slerpAdditive;\n\t\t\t\tsetIdentity = this._setAdditiveIdentityQuaternion;\n\n\t\t\t\tthis.buffer = new Float64Array( valueSize * 6 );\n\t\t\t\tthis._workIndex = 5;\n\t\t\t\tbreak;\n\n\t\t\tcase 'string':\n\t\t\tcase 'bool':\n\t\t\t\tmixFunction = this._select;\n\n\t\t\t\t// Use the regular mix function and for additive on these types,\n\t\t\t\t// additive is not relevant for non-numeric types\n\t\t\t\tmixFunctionAdditive = this._select;\n\n\t\t\t\tsetIdentity = this._setAdditiveIdentityOther;\n\n\t\t\t\tthis.buffer = new Array( valueSize * 5 );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tmixFunction = this._lerp;\n\t\t\t\tmixFunctionAdditive = this._lerpAdditive;\n\t\t\t\tsetIdentity = this._setAdditiveIdentityNumeric;\n\n\t\t\t\tthis.buffer = new Float64Array( valueSize * 5 );\n\n\t\t}\n\n\t\tthis._mixBufferRegion = mixFunction;\n\t\tthis._mixBufferRegionAdditive = mixFunctionAdditive;\n\t\tthis._setIdentity = setIdentity;\n\t\tthis._origIndex = 3;\n\t\tthis._addIndex = 4;\n\n\t\tthis.cumulativeWeight = 0;\n\t\tthis.cumulativeWeightAdditive = 0;\n\n\t\tthis.useCount = 0;\n\t\tthis.referenceCount = 0;\n\n\t}\n\n\t// accumulate data in the 'incoming' region into 'accu<i>'\n\taccumulate( accuIndex, weight ) {\n\n\t\t// note: happily accumulating nothing when weight = 0, the caller knows\n\t\t// the weight and shouldn't have made the call in the first place\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = accuIndex * stride + stride;\n\n\t\tlet currentWeight = this.cumulativeWeight;\n\n\t\tif ( currentWeight === 0 ) {\n\n\t\t\t// accuN := incoming * weight\n\n\t\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tbuffer[ offset + i ] = buffer[ i ];\n\n\t\t\t}\n\n\t\t\tcurrentWeight = weight;\n\n\t\t} else {\n\n\t\t\t// accuN := accuN + incoming * weight\n\n\t\t\tcurrentWeight += weight;\n\t\t\tconst mix = weight / currentWeight;\n\t\t\tthis._mixBufferRegion( buffer, offset, 0, mix, stride );\n\n\t\t}\n\n\t\tthis.cumulativeWeight = currentWeight;\n\n\t}\n\n\t// accumulate data in the 'incoming' region into 'add'\n\taccumulateAdditive( weight ) {\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = stride * this._addIndex;\n\n\t\tif ( this.cumulativeWeightAdditive === 0 ) {\n\n\t\t\t// add = identity\n\n\t\t\tthis._setIdentity();\n\n\t\t}\n\n\t\t// add := add + incoming * weight\n\n\t\tthis._mixBufferRegionAdditive( buffer, offset, 0, weight, stride );\n\t\tthis.cumulativeWeightAdditive += weight;\n\n\t}\n\n\t// apply the state of 'accu<i>' to the binding when accus differ\n\tapply( accuIndex ) {\n\n\t\tconst stride = this.valueSize,\n\t\t\tbuffer = this.buffer,\n\t\t\toffset = accuIndex * stride + stride,\n\n\t\t\tweight = this.cumulativeWeight,\n\t\t\tweightAdditive = this.cumulativeWeightAdditive,\n\n\t\t\tbinding = this.binding;\n\n\t\tthis.cumulativeWeight = 0;\n\t\tthis.cumulativeWeightAdditive = 0;\n\n\t\tif ( weight < 1 ) {\n\n\t\t\t// accuN := accuN + original * ( 1 - cumulativeWeight )\n\n\t\t\tconst originalValueOffset = stride * this._origIndex;\n\n\t\t\tthis._mixBufferRegion(\n\t\t\t\tbuffer, offset, originalValueOffset, 1 - weight, stride );\n\n\t\t}\n\n\t\tif ( weightAdditive > 0 ) {\n\n\t\t\t// accuN := accuN + additive accuN\n\n\t\t\tthis._mixBufferRegionAdditive( buffer, offset, this._addIndex * stride, 1, stride );\n\n\t\t}\n\n\t\tfor ( let i = stride, e = stride + stride; i !== e; ++ i ) {\n\n\t\t\tif ( buffer[ i ] !== buffer[ i + stride ] ) {\n\n\t\t\t\t// value has changed -> update scene graph\n\n\t\t\t\tbinding.setValue( buffer, offset );\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// remember the state of the bound property and copy it to both accus\n\tsaveOriginalState() {\n\n\t\tconst binding = this.binding;\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\n\t\t\toriginalValueOffset = stride * this._origIndex;\n\n\t\tbinding.getValue( buffer, originalValueOffset );\n\n\t\t// accu[0..1] := orig -- initially detect changes against the original\n\t\tfor ( let i = stride, e = originalValueOffset; i !== e; ++ i ) {\n\n\t\t\tbuffer[ i ] = buffer[ originalValueOffset + ( i % stride ) ];\n\n\t\t}\n\n\t\t// Add to identity for additive\n\t\tthis._setIdentity();\n\n\t\tthis.cumulativeWeight = 0;\n\t\tthis.cumulativeWeightAdditive = 0;\n\n\t}\n\n\t// apply the state previously taken via 'saveOriginalState' to the binding\n\trestoreOriginalState() {\n\n\t\tconst originalValueOffset = this.valueSize * 3;\n\t\tthis.binding.setValue( this.buffer, originalValueOffset );\n\n\t}\n\n\t_setAdditiveIdentityNumeric() {\n\n\t\tconst startIndex = this._addIndex * this.valueSize;\n\t\tconst endIndex = startIndex + this.valueSize;\n\n\t\tfor ( let i = startIndex; i < endIndex; i ++ ) {\n\n\t\t\tthis.buffer[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\t_setAdditiveIdentityQuaternion() {\n\n\t\tthis._setAdditiveIdentityNumeric();\n\t\tthis.buffer[ this._addIndex * this.valueSize + 3 ] = 1;\n\n\t}\n\n\t_setAdditiveIdentityOther() {\n\n\t\tconst startIndex = this._origIndex * this.valueSize;\n\t\tconst targetIndex = this._addIndex * this.valueSize;\n\n\t\tfor ( let i = 0; i < this.valueSize; i ++ ) {\n\n\t\t\tthis.buffer[ targetIndex + i ] = this.buffer[ startIndex + i ];\n\n\t\t}\n\n\t}\n\n\n\t// mix functions\n\n\t_select( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tif ( t >= 0.5 ) {\n\n\t\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tbuffer[ dstOffset + i ] = buffer[ srcOffset + i ];\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_slerp( buffer, dstOffset, srcOffset, t ) {\n\n\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, srcOffset, t );\n\n\t}\n\n\t_slerpAdditive( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tconst workOffset = this._workIndex * stride;\n\n\t\t// Store result in intermediate buffer offset\n\t\tQuaternion.multiplyQuaternionsFlat( buffer, workOffset, buffer, dstOffset, buffer, srcOffset );\n\n\t\t// Slerp to the intermediate result\n\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, workOffset, t );\n\n\t}\n\n\t_lerp( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tconst s = 1 - t;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tconst j = dstOffset + i;\n\n\t\t\tbuffer[ j ] = buffer[ j ] * s + buffer[ srcOffset + i ] * t;\n\n\t\t}\n\n\t}\n\n\t_lerpAdditive( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tconst j = dstOffset + i;\n\n\t\t\tbuffer[ j ] = buffer[ j ] + buffer[ srcOffset + i ] * t;\n\n\t\t}\n\n\t}\n\n}\n\n// Characters [].:/ are reserved for track binding syntax.\nconst _RESERVED_CHARS_RE = '\\\\[\\\\]\\\\.:\\\\/';\nconst _reservedRe = new RegExp( '[' + _RESERVED_CHARS_RE + ']', 'g' );\n\n// Attempts to allow node names from any language. ES5's `\\w` regexp matches\n// only latin characters, and the unicode \\p{L} is not yet supported. So\n// instead, we exclude reserved characters and match everything else.\nconst _wordChar = '[^' + _RESERVED_CHARS_RE + ']';\nconst _wordCharOrDot = '[^' + _RESERVED_CHARS_RE.replace( '\\\\.', '' ) + ']';\n\n// Parent directories, delimited by '/' or ':'. Currently unused, but must\n// be matched to parse the rest of the track name.\nconst _directoryRe = /*@__PURE__*/ /((?:WC+[\\/:])*)/.source.replace( 'WC', _wordChar );\n\n// Target node. May contain word characters (a-zA-Z0-9_) and '.' or '-'.\nconst _nodeRe = /*@__PURE__*/ /(WCOD+)?/.source.replace( 'WCOD', _wordCharOrDot );\n\n// Object on target node, and accessor. May not contain reserved\n// characters. Accessor may contain any character except closing bracket.\nconst _objectRe = /*@__PURE__*/ /(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace( 'WC', _wordChar );\n\n// Property and accessor. May not contain reserved characters. Accessor may\n// contain any non-bracket characters.\nconst _propertyRe = /*@__PURE__*/ /\\.(WC+)(?:\\[(.+)\\])?/.source.replace( 'WC', _wordChar );\n\nconst _trackRe = new RegExp( ''\n\t+ '^'\n\t+ _directoryRe\n\t+ _nodeRe\n\t+ _objectRe\n\t+ _propertyRe\n\t+ '$'\n);\n\nconst _supportedObjectNames = [ 'material', 'materials', 'bones', 'map' ];\n\nclass Composite {\n\n\tconstructor( targetGroup, path, optionalParsedPath ) {\n\n\t\tconst parsedPath = optionalParsedPath || PropertyBinding.parseTrackName( path );\n\n\t\tthis._targetGroup = targetGroup;\n\t\tthis._bindings = targetGroup.subscribe_( path, parsedPath );\n\n\t}\n\n\tgetValue( array, offset ) {\n\n\t\tthis.bind(); // bind all binding\n\n\t\tconst firstValidIndex = this._targetGroup.nCachedObjects_,\n\t\t\tbinding = this._bindings[ firstValidIndex ];\n\n\t\t// and only call .getValue on the first\n\t\tif ( binding !== undefined ) binding.getValue( array, offset );\n\n\t}\n\n\tsetValue( array, offset ) {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].setValue( array, offset );\n\n\t\t}\n\n\t}\n\n\tbind() {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].bind();\n\n\t\t}\n\n\t}\n\n\tunbind() {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].unbind();\n\n\t\t}\n\n\t}\n\n}\n\n// Note: This class uses a State pattern on a per-method basis:\n// 'bind' sets 'this.getValue' / 'setValue' and shadows the\n// prototype version of these methods with one that represents\n// the bound state. When the property is not found, the methods\n// become no-ops.\nclass PropertyBinding {\n\n\tconstructor( rootNode, path, parsedPath ) {\n\n\t\tthis.path = path;\n\t\tthis.parsedPath = parsedPath || PropertyBinding.parseTrackName( path );\n\n\t\tthis.node = PropertyBinding.findNode( rootNode, this.parsedPath.nodeName ) || rootNode;\n\n\t\tthis.rootNode = rootNode;\n\n\t\t// initial state of these methods that calls 'bind'\n\t\tthis.getValue = this._getValue_unbound;\n\t\tthis.setValue = this._setValue_unbound;\n\n\t}\n\n\n\tstatic create( root, path, parsedPath ) {\n\n\t\tif ( ! ( root && root.isAnimationObjectGroup ) ) {\n\n\t\t\treturn new PropertyBinding( root, path, parsedPath );\n\n\t\t} else {\n\n\t\t\treturn new PropertyBinding.Composite( root, path, parsedPath );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Replaces spaces with underscores and removes unsupported characters from\n\t * node names, to ensure compatibility with parseTrackName().\n\t *\n\t * @param {string} name Node name to be sanitized.\n\t * @return {string}\n\t */\n\tstatic sanitizeNodeName( name ) {\n\n\t\treturn name.replace( /\\s/g, '_' ).replace( _reservedRe, '' );\n\n\t}\n\n\tstatic parseTrackName( trackName ) {\n\n\t\tconst matches = _trackRe.exec( trackName );\n\n\t\tif ( matches === null ) {\n\n\t\t\tthrow new Error( 'PropertyBinding: Cannot parse trackName: ' + trackName );\n\n\t\t}\n\n\t\tconst results = {\n\t\t\t// directoryName: matches[ 1 ], // (tschw) currently unused\n\t\t\tnodeName: matches[ 2 ],\n\t\t\tobjectName: matches[ 3 ],\n\t\t\tobjectIndex: matches[ 4 ],\n\t\t\tpropertyName: matches[ 5 ], // required\n\t\t\tpropertyIndex: matches[ 6 ]\n\t\t};\n\n\t\tconst lastDot = results.nodeName && results.nodeName.lastIndexOf( '.' );\n\n\t\tif ( lastDot !== undefined && lastDot !== - 1 ) {\n\n\t\t\tconst objectName = results.nodeName.substring( lastDot + 1 );\n\n\t\t\t// Object names must be checked against an allowlist. Otherwise, there\n\t\t\t// is no way to parse 'foo.bar.baz': 'baz' must be a property, but\n\t\t\t// 'bar' could be the objectName, or part of a nodeName (which can\n\t\t\t// include '.' characters).\n\t\t\tif ( _supportedObjectNames.indexOf( objectName ) !== - 1 ) {\n\n\t\t\t\tresults.nodeName = results.nodeName.substring( 0, lastDot );\n\t\t\t\tresults.objectName = objectName;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( results.propertyName === null || results.propertyName.length === 0 ) {\n\n\t\t\tthrow new Error( 'PropertyBinding: can not parse propertyName from trackName: ' + trackName );\n\n\t\t}\n\n\t\treturn results;\n\n\t}\n\n\tstatic findNode( root, nodeName ) {\n\n\t\tif ( nodeName === undefined || nodeName === '' || nodeName === '.' || nodeName === - 1 || nodeName === root.name || nodeName === root.uuid ) {\n\n\t\t\treturn root;\n\n\t\t}\n\n\t\t// search into skeleton bones.\n\t\tif ( root.skeleton ) {\n\n\t\t\tconst bone = root.skeleton.getBoneByName( nodeName );\n\n\t\t\tif ( bone !== undefined ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// search into node subtree.\n\t\tif ( root.children ) {\n\n\t\t\tconst searchNodeSubtree = function ( children ) {\n\n\t\t\t\tfor ( let i = 0; i < children.length; i ++ ) {\n\n\t\t\t\t\tconst childNode = children[ i ];\n\n\t\t\t\t\tif ( childNode.name === nodeName || childNode.uuid === nodeName ) {\n\n\t\t\t\t\t\treturn childNode;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst result = searchNodeSubtree( childNode.children );\n\n\t\t\t\t\tif ( result ) return result;\n\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\n\t\t\t};\n\n\t\t\tconst subTreeNode = searchNodeSubtree( root.children );\n\n\t\t\tif ( subTreeNode ) {\n\n\t\t\t\treturn subTreeNode;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t// these are used to \"bind\" a nonexistent property\n\t_getValue_unavailable() {}\n\t_setValue_unavailable() {}\n\n\t// Getters\n\n\t_getValue_direct( buffer, offset ) {\n\n\t\tbuffer[ offset ] = this.targetObject[ this.propertyName ];\n\n\t}\n\n\t_getValue_array( buffer, offset ) {\n\n\t\tconst source = this.resolvedProperty;\n\n\t\tfor ( let i = 0, n = source.length; i !== n; ++ i ) {\n\n\t\t\tbuffer[ offset ++ ] = source[ i ];\n\n\t\t}\n\n\t}\n\n\t_getValue_arrayElement( buffer, offset ) {\n\n\t\tbuffer[ offset ] = this.resolvedProperty[ this.propertyIndex ];\n\n\t}\n\n\t_getValue_toArray( buffer, offset ) {\n\n\t\tthis.resolvedProperty.toArray( buffer, offset );\n\n\t}\n\n\t// Direct\n\n\t_setValue_direct( buffer, offset ) {\n\n\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\n\t}\n\n\t_setValue_direct_setNeedsUpdate( buffer, offset ) {\n\n\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\t\tthis.targetObject.needsUpdate = true;\n\n\t}\n\n\t_setValue_direct_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t}\n\n\t// EntireArray\n\n\t_setValue_array( buffer, offset ) {\n\n\t\tconst dest = this.resolvedProperty;\n\n\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t}\n\n\t}\n\n\t_setValue_array_setNeedsUpdate( buffer, offset ) {\n\n\t\tconst dest = this.resolvedProperty;\n\n\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t}\n\n\t\tthis.targetObject.needsUpdate = true;\n\n\t}\n\n\t_setValue_array_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\tconst dest = this.resolvedProperty;\n\n\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t}\n\n\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t}\n\n\t// ArrayElement\n\n\t_setValue_arrayElement( buffer, offset ) {\n\n\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\n\t}\n\n\t_setValue_arrayElement_setNeedsUpdate( buffer, offset ) {\n\n\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\tthis.targetObject.needsUpdate = true;\n\n\t}\n\n\t_setValue_arrayElement_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t}\n\n\t// HasToFromArray\n\n\t_setValue_fromArray( buffer, offset ) {\n\n\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\n\t}\n\n\t_setValue_fromArray_setNeedsUpdate( buffer, offset ) {\n\n\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\tthis.targetObject.needsUpdate = true;\n\n\t}\n\n\t_setValue_fromArray_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t}\n\n\t_getValue_unbound( targetArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.getValue( targetArray, offset );\n\n\t}\n\n\t_setValue_unbound( sourceArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.setValue( sourceArray, offset );\n\n\t}\n\n\t// create getter / setter pair for a property in the scene graph\n\tbind() {\n\n\t\tlet targetObject = this.node;\n\t\tconst parsedPath = this.parsedPath;\n\n\t\tconst objectName = parsedPath.objectName;\n\t\tconst propertyName = parsedPath.propertyName;\n\t\tlet propertyIndex = parsedPath.propertyIndex;\n\n\t\tif ( ! targetObject ) {\n\n\t\t\ttargetObject = PropertyBinding.findNode( this.rootNode, parsedPath.nodeName ) || this.rootNode;\n\n\t\t\tthis.node = targetObject;\n\n\t\t}\n\n\t\t// set fail state so we can just 'return' on error\n\t\tthis.getValue = this._getValue_unavailable;\n\t\tthis.setValue = this._setValue_unavailable;\n\n\t\t// ensure there is a value node\n\t\tif ( ! targetObject ) {\n\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update node for track: ' + this.path + ' but it wasn\\'t found.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( objectName ) {\n\n\t\t\tlet objectIndex = parsedPath.objectIndex;\n\n\t\t\t// special cases were we need to reach deeper into the hierarchy to get the face materials....\n\t\t\tswitch ( objectName ) {\n\n\t\t\t\tcase 'materials':\n\n\t\t\t\t\tif ( ! targetObject.material ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material as node does not have a material.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! targetObject.material.materials ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject.material.materials;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bones':\n\n\t\t\t\t\tif ( ! targetObject.skeleton ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// potential future optimization: skip this if propertyIndex is already an integer\n\t\t\t\t\t// and convert the integer string to a true integer.\n\n\t\t\t\t\ttargetObject = targetObject.skeleton.bones;\n\n\t\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\t\tfor ( let i = 0; i < targetObject.length; i ++ ) {\n\n\t\t\t\t\t\tif ( targetObject[ i ].name === objectIndex ) {\n\n\t\t\t\t\t\t\tobjectIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map':\n\n\t\t\t\t\tif ( 'map' in targetObject ) {\n\n\t\t\t\t\t\ttargetObject = targetObject.map;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! targetObject.material ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material as node does not have a material.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! targetObject.material.map ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject.material.map;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tif ( targetObject[ objectName ] === undefined ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to objectName of node undefined.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject[ objectName ];\n\n\t\t\t}\n\n\n\t\t\tif ( objectIndex !== undefined ) {\n\n\t\t\t\tif ( targetObject[ objectIndex ] === undefined ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.', this, targetObject );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\ttargetObject = targetObject[ objectIndex ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// resolve property\n\t\tconst nodeProperty = targetObject[ propertyName ];\n\n\t\tif ( nodeProperty === undefined ) {\n\n\t\t\tconst nodeName = parsedPath.nodeName;\n\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update property for track: ' + nodeName +\n\t\t\t\t'.' + propertyName + ' but it wasn\\'t found.', targetObject );\n\t\t\treturn;\n\n\t\t}\n\n\t\t// determine versioning scheme\n\t\tlet versioning = this.Versioning.None;\n\n\t\tthis.targetObject = targetObject;\n\n\t\tif ( targetObject.needsUpdate !== undefined ) { // material\n\n\t\t\tversioning = this.Versioning.NeedsUpdate;\n\n\t\t} else if ( targetObject.matrixWorldNeedsUpdate !== undefined ) { // node transform\n\n\t\t\tversioning = this.Versioning.MatrixWorldNeedsUpdate;\n\n\t\t}\n\n\t\t// determine how the property gets bound\n\t\tlet bindingType = this.BindingType.Direct;\n\n\t\tif ( propertyIndex !== undefined ) {\n\n\t\t\t// access a sub element of the property array (only primitives are supported right now)\n\n\t\t\tif ( propertyName === 'morphTargetInfluences' ) {\n\n\t\t\t\t// potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\n\n\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\tif ( ! targetObject.geometry ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.', this );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! targetObject.geometry.morphAttributes ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.', this );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( targetObject.morphTargetDictionary[ propertyIndex ] !== undefined ) {\n\n\t\t\t\t\tpropertyIndex = targetObject.morphTargetDictionary[ propertyIndex ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tbindingType = this.BindingType.ArrayElement;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\t\t\tthis.propertyIndex = propertyIndex;\n\n\t\t} else if ( nodeProperty.fromArray !== undefined && nodeProperty.toArray !== undefined ) {\n\n\t\t\t// must use copy for Object3D.Euler/Quaternion\n\n\t\t\tbindingType = this.BindingType.HasFromToArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else if ( Array.isArray( nodeProperty ) ) {\n\n\t\t\tbindingType = this.BindingType.EntireArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else {\n\n\t\t\tthis.propertyName = propertyName;\n\n\t\t}\n\n\t\t// select getter / setter\n\t\tthis.getValue = this.GetterByBindingType[ bindingType ];\n\t\tthis.setValue = this.SetterByBindingTypeAndVersioning[ bindingType ][ versioning ];\n\n\t}\n\n\tunbind() {\n\n\t\tthis.node = null;\n\n\t\t// back to the prototype version of getValue / setValue\n\t\t// note: avoiding to mutate the shape of 'this' via 'delete'\n\t\tthis.getValue = this._getValue_unbound;\n\t\tthis.setValue = this._setValue_unbound;\n\n\t}\n\n}\n\nPropertyBinding.Composite = Composite;\n\nPropertyBinding.prototype.BindingType = {\n\tDirect: 0,\n\tEntireArray: 1,\n\tArrayElement: 2,\n\tHasFromToArray: 3\n};\n\nPropertyBinding.prototype.Versioning = {\n\tNone: 0,\n\tNeedsUpdate: 1,\n\tMatrixWorldNeedsUpdate: 2\n};\n\nPropertyBinding.prototype.GetterByBindingType = [\n\n\tPropertyBinding.prototype._getValue_direct,\n\tPropertyBinding.prototype._getValue_array,\n\tPropertyBinding.prototype._getValue_arrayElement,\n\tPropertyBinding.prototype._getValue_toArray,\n\n];\n\nPropertyBinding.prototype.SetterByBindingTypeAndVersioning = [\n\n\t[\n\t\t// Direct\n\t\tPropertyBinding.prototype._setValue_direct,\n\t\tPropertyBinding.prototype._setValue_direct_setNeedsUpdate,\n\t\tPropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate,\n\n\t], [\n\n\t\t// EntireArray\n\n\t\tPropertyBinding.prototype._setValue_array,\n\t\tPropertyBinding.prototype._setValue_array_setNeedsUpdate,\n\t\tPropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate,\n\n\t], [\n\n\t\t// ArrayElement\n\t\tPropertyBinding.prototype._setValue_arrayElement,\n\t\tPropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,\n\t\tPropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate,\n\n\t], [\n\n\t\t// HasToFromArray\n\t\tPropertyBinding.prototype._setValue_fromArray,\n\t\tPropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,\n\t\tPropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate,\n\n\t]\n\n];\n\n/**\n *\n * A group of objects that receives a shared animation state.\n *\n * Usage:\n *\n *  - Add objects you would otherwise pass as 'root' to the\n *    constructor or the .clipAction method of AnimationMixer.\n *\n *  - Instead pass this object as 'root'.\n *\n *  - You can also add and remove objects later when the mixer\n *    is running.\n *\n * Note:\n *\n *    Objects of this class appear as one object to the mixer,\n *    so cache control of the individual objects must be done\n *    on the group.\n *\n * Limitation:\n *\n *  - The animated properties must be compatible among the\n *    all objects in the group.\n *\n *  - A single property can either be controlled through a\n *    target group or directly, but not both.\n */\n\nclass AnimationObjectGroup {\n\n\tconstructor() {\n\n\t\tthis.isAnimationObjectGroup = true;\n\n\t\tthis.uuid = generateUUID();\n\n\t\t// cached objects followed by the active ones\n\t\tthis._objects = Array.prototype.slice.call( arguments );\n\n\t\tthis.nCachedObjects_ = 0; // threshold\n\t\t// note: read by PropertyBinding.Composite\n\n\t\tconst indices = {};\n\t\tthis._indicesByUUID = indices; // for bookkeeping\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tindices[ arguments[ i ].uuid ] = i;\n\n\t\t}\n\n\t\tthis._paths = []; // inside: string\n\t\tthis._parsedPaths = []; // inside: { we don't care, here }\n\t\tthis._bindings = []; // inside: Array< PropertyBinding >\n\t\tthis._bindingsIndicesByPath = {}; // inside: indices in these arrays\n\n\t\tconst scope = this;\n\n\t\tthis.stats = {\n\n\t\t\tobjects: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._objects.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn this.total - scope.nCachedObjects_;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tget bindingsPerObject() {\n\n\t\t\t\treturn scope._bindings.length;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tadd() {\n\n\t\tconst objects = this._objects,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tpaths = this._paths,\n\t\t\tparsedPaths = this._parsedPaths,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tlet knownObject = undefined,\n\t\t\tnObjects = objects.length,\n\t\t\tnCachedObjects = this.nCachedObjects_;\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tconst object = arguments[ i ],\n\t\t\t\tuuid = object.uuid;\n\t\t\tlet index = indicesByUUID[ uuid ];\n\n\t\t\tif ( index === undefined ) {\n\n\t\t\t\t// unknown object -> add it to the ACTIVE region\n\n\t\t\t\tindex = nObjects ++;\n\t\t\t\tindicesByUUID[ uuid ] = index;\n\t\t\t\tobjects.push( object );\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tbindings[ j ].push( new PropertyBinding( object, paths[ j ], parsedPaths[ j ] ) );\n\n\t\t\t\t}\n\n\t\t\t} else if ( index < nCachedObjects ) {\n\n\t\t\t\tknownObject = objects[ index ];\n\n\t\t\t\t// move existing object to the ACTIVE region\n\n\t\t\t\tconst firstActiveIndex = -- nCachedObjects,\n\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ];\n\n\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\n\t\t\t\tobjects[ index ] = lastCachedObject;\n\n\t\t\t\tindicesByUUID[ uuid ] = firstActiveIndex;\n\t\t\t\tobjects[ firstActiveIndex ] = object;\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tconst bindingsForPath = bindings[ j ],\n\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ];\n\n\t\t\t\t\tlet binding = bindingsForPath[ index ];\n\n\t\t\t\t\tbindingsForPath[ index ] = lastCached;\n\n\t\t\t\t\tif ( binding === undefined ) {\n\n\t\t\t\t\t\t// since we do not bother to create new bindings\n\t\t\t\t\t\t// for objects that are cached, the binding may\n\t\t\t\t\t\t// or may not exist\n\n\t\t\t\t\t\tbinding = new PropertyBinding( object, paths[ j ], parsedPaths[ j ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = binding;\n\n\t\t\t\t}\n\n\t\t\t} else if ( objects[ index ] !== knownObject ) {\n\n\t\t\t\tconsole.error( 'THREE.AnimationObjectGroup: Different objects with the same UUID ' +\n\t\t\t\t\t'detected. Clean the caches or recreate your infrastructure when reloading scenes.' );\n\n\t\t\t} // else the object is already where we want it to be\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t}\n\n\tremove() {\n\n\t\tconst objects = this._objects,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tlet nCachedObjects = this.nCachedObjects_;\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tconst object = arguments[ i ],\n\t\t\t\tuuid = object.uuid,\n\t\t\t\tindex = indicesByUUID[ uuid ];\n\n\t\t\tif ( index !== undefined && index >= nCachedObjects ) {\n\n\t\t\t\t// move existing object into the CACHED region\n\n\t\t\t\tconst lastCachedIndex = nCachedObjects ++,\n\t\t\t\t\tfirstActiveObject = objects[ lastCachedIndex ];\n\n\t\t\t\tindicesByUUID[ firstActiveObject.uuid ] = index;\n\t\t\t\tobjects[ index ] = firstActiveObject;\n\n\t\t\t\tindicesByUUID[ uuid ] = lastCachedIndex;\n\t\t\t\tobjects[ lastCachedIndex ] = object;\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tconst bindingsForPath = bindings[ j ],\n\t\t\t\t\t\tfirstActive = bindingsForPath[ lastCachedIndex ],\n\t\t\t\t\t\tbinding = bindingsForPath[ index ];\n\n\t\t\t\t\tbindingsForPath[ index ] = firstActive;\n\t\t\t\t\tbindingsForPath[ lastCachedIndex ] = binding;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t}\n\n\t// remove & forget\n\tuncache() {\n\n\t\tconst objects = this._objects,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tlet nCachedObjects = this.nCachedObjects_,\n\t\t\tnObjects = objects.length;\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tconst object = arguments[ i ],\n\t\t\t\tuuid = object.uuid,\n\t\t\t\tindex = indicesByUUID[ uuid ];\n\n\t\t\tif ( index !== undefined ) {\n\n\t\t\t\tdelete indicesByUUID[ uuid ];\n\n\t\t\t\tif ( index < nCachedObjects ) {\n\n\t\t\t\t\t// object is cached, shrink the CACHED region\n\n\t\t\t\t\tconst firstActiveIndex = -- nCachedObjects,\n\t\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ],\n\t\t\t\t\t\tlastIndex = -- nObjects,\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\n\n\t\t\t\t\t// last cached object takes this object's place\n\t\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\n\t\t\t\t\tobjects[ index ] = lastCachedObject;\n\n\t\t\t\t\t// last object goes to the activated slot and pop\n\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = firstActiveIndex;\n\t\t\t\t\tobjects[ firstActiveIndex ] = lastObject;\n\t\t\t\t\tobjects.pop();\n\n\t\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\t\tconst bindingsForPath = bindings[ j ],\n\t\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ],\n\t\t\t\t\t\t\tlast = bindingsForPath[ lastIndex ];\n\n\t\t\t\t\t\tbindingsForPath[ index ] = lastCached;\n\t\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = last;\n\t\t\t\t\t\tbindingsForPath.pop();\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// object is active, just swap with the last and pop\n\n\t\t\t\t\tconst lastIndex = -- nObjects,\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\n\n\t\t\t\t\tif ( lastIndex > 0 ) {\n\n\t\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = index;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobjects[ index ] = lastObject;\n\t\t\t\t\tobjects.pop();\n\n\t\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\t\tconst bindingsForPath = bindings[ j ];\n\n\t\t\t\t\t\tbindingsForPath[ index ] = bindingsForPath[ lastIndex ];\n\t\t\t\t\t\tbindingsForPath.pop();\n\n\t\t\t\t\t}\n\n\t\t\t\t} // cached or active\n\n\t\t\t} // if object is known\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t}\n\n\t// Internal interface used by befriended PropertyBinding.Composite:\n\n\tsubscribe_( path, parsedPath ) {\n\n\t\t// returns an array of bindings for the given path that is changed\n\t\t// according to the contained objects in the group\n\n\t\tconst indicesByPath = this._bindingsIndicesByPath;\n\t\tlet index = indicesByPath[ path ];\n\t\tconst bindings = this._bindings;\n\n\t\tif ( index !== undefined ) return bindings[ index ];\n\n\t\tconst paths = this._paths,\n\t\t\tparsedPaths = this._parsedPaths,\n\t\t\tobjects = this._objects,\n\t\t\tnObjects = objects.length,\n\t\t\tnCachedObjects = this.nCachedObjects_,\n\t\t\tbindingsForPath = new Array( nObjects );\n\n\t\tindex = bindings.length;\n\n\t\tindicesByPath[ path ] = index;\n\n\t\tpaths.push( path );\n\t\tparsedPaths.push( parsedPath );\n\t\tbindings.push( bindingsForPath );\n\n\t\tfor ( let i = nCachedObjects, n = objects.length; i !== n; ++ i ) {\n\n\t\t\tconst object = objects[ i ];\n\t\t\tbindingsForPath[ i ] = new PropertyBinding( object, path, parsedPath );\n\n\t\t}\n\n\t\treturn bindingsForPath;\n\n\t}\n\n\tunsubscribe_( path ) {\n\n\t\t// tells the group to forget about a property path and no longer\n\t\t// update the array previously obtained with 'subscribe_'\n\n\t\tconst indicesByPath = this._bindingsIndicesByPath,\n\t\t\tindex = indicesByPath[ path ];\n\n\t\tif ( index !== undefined ) {\n\n\t\t\tconst paths = this._paths,\n\t\t\t\tparsedPaths = this._parsedPaths,\n\t\t\t\tbindings = this._bindings,\n\t\t\t\tlastBindingsIndex = bindings.length - 1,\n\t\t\t\tlastBindings = bindings[ lastBindingsIndex ],\n\t\t\t\tlastBindingsPath = path[ lastBindingsIndex ];\n\n\t\t\tindicesByPath[ lastBindingsPath ] = index;\n\n\t\t\tbindings[ index ] = lastBindings;\n\t\t\tbindings.pop();\n\n\t\t\tparsedPaths[ index ] = parsedPaths[ lastBindingsIndex ];\n\t\t\tparsedPaths.pop();\n\n\t\t\tpaths[ index ] = paths[ lastBindingsIndex ];\n\t\t\tpaths.pop();\n\n\t\t}\n\n\t}\n\n}\n\nclass AnimationAction {\n\n\tconstructor( mixer, clip, localRoot = null, blendMode = clip.blendMode ) {\n\n\t\tthis._mixer = mixer;\n\t\tthis._clip = clip;\n\t\tthis._localRoot = localRoot;\n\t\tthis.blendMode = blendMode;\n\n\t\tconst tracks = clip.tracks,\n\t\t\tnTracks = tracks.length,\n\t\t\tinterpolants = new Array( nTracks );\n\n\t\tconst interpolantSettings = {\n\t\t\tendingStart: ZeroCurvatureEnding,\n\t\t\tendingEnd: ZeroCurvatureEnding\n\t\t};\n\n\t\tfor ( let i = 0; i !== nTracks; ++ i ) {\n\n\t\t\tconst interpolant = tracks[ i ].createInterpolant( null );\n\t\t\tinterpolants[ i ] = interpolant;\n\t\t\tinterpolant.settings = interpolantSettings;\n\n\t\t}\n\n\t\tthis._interpolantSettings = interpolantSettings;\n\n\t\tthis._interpolants = interpolants; // bound by the mixer\n\n\t\t// inside: PropertyMixer (managed by the mixer)\n\t\tthis._propertyBindings = new Array( nTracks );\n\n\t\tthis._cacheIndex = null; // for the memory manager\n\t\tthis._byClipCacheIndex = null; // for the memory manager\n\n\t\tthis._timeScaleInterpolant = null;\n\t\tthis._weightInterpolant = null;\n\n\t\tthis.loop = LoopRepeat;\n\t\tthis._loopCount = - 1;\n\n\t\t// global mixer time when the action is to be started\n\t\t// it's set back to 'null' upon start of the action\n\t\tthis._startTime = null;\n\n\t\t// scaled local time of the action\n\t\t// gets clamped or wrapped to 0..clip.duration according to loop\n\t\tthis.time = 0;\n\n\t\tthis.timeScale = 1;\n\t\tthis._effectiveTimeScale = 1;\n\n\t\tthis.weight = 1;\n\t\tthis._effectiveWeight = 1;\n\n\t\tthis.repetitions = Infinity; // no. of repetitions when looping\n\n\t\tthis.paused = false; // true -> zero effective time scale\n\t\tthis.enabled = true; // false -> zero effective weight\n\n\t\tthis.clampWhenFinished = false;// keep feeding the last frame?\n\n\t\tthis.zeroSlopeAtStart = true;// for smooth interpolation w/o separate\n\t\tthis.zeroSlopeAtEnd = true;// clips for start, loop and end\n\n\t}\n\n\t// State & Scheduling\n\n\tplay() {\n\n\t\tthis._mixer._activateAction( this );\n\n\t\treturn this;\n\n\t}\n\n\tstop() {\n\n\t\tthis._mixer._deactivateAction( this );\n\n\t\treturn this.reset();\n\n\t}\n\n\treset() {\n\n\t\tthis.paused = false;\n\t\tthis.enabled = true;\n\n\t\tthis.time = 0; // restart clip\n\t\tthis._loopCount = - 1;// forget previous loops\n\t\tthis._startTime = null;// forget scheduling\n\n\t\treturn this.stopFading().stopWarping();\n\n\t}\n\n\tisRunning() {\n\n\t\treturn this.enabled && ! this.paused && this.timeScale !== 0 &&\n\t\t\tthis._startTime === null && this._mixer._isActiveAction( this );\n\n\t}\n\n\t// return true when play has been called\n\tisScheduled() {\n\n\t\treturn this._mixer._isActiveAction( this );\n\n\t}\n\n\tstartAt( time ) {\n\n\t\tthis._startTime = time;\n\n\t\treturn this;\n\n\t}\n\n\tsetLoop( mode, repetitions ) {\n\n\t\tthis.loop = mode;\n\t\tthis.repetitions = repetitions;\n\n\t\treturn this;\n\n\t}\n\n\t// Weight\n\n\t// set the weight stopping any scheduled fading\n\t// although .enabled = false yields an effective weight of zero, this\n\t// method does *not* change .enabled, because it would be confusing\n\tsetEffectiveWeight( weight ) {\n\n\t\tthis.weight = weight;\n\n\t\t// note: same logic as when updated at runtime\n\t\tthis._effectiveWeight = this.enabled ? weight : 0;\n\n\t\treturn this.stopFading();\n\n\t}\n\n\t// return the weight considering fading and .enabled\n\tgetEffectiveWeight() {\n\n\t\treturn this._effectiveWeight;\n\n\t}\n\n\tfadeIn( duration ) {\n\n\t\treturn this._scheduleFading( duration, 0, 1 );\n\n\t}\n\n\tfadeOut( duration ) {\n\n\t\treturn this._scheduleFading( duration, 1, 0 );\n\n\t}\n\n\tcrossFadeFrom( fadeOutAction, duration, warp ) {\n\n\t\tfadeOutAction.fadeOut( duration );\n\t\tthis.fadeIn( duration );\n\n\t\tif ( warp ) {\n\n\t\t\tconst fadeInDuration = this._clip.duration,\n\t\t\t\tfadeOutDuration = fadeOutAction._clip.duration,\n\n\t\t\t\tstartEndRatio = fadeOutDuration / fadeInDuration,\n\t\t\t\tendStartRatio = fadeInDuration / fadeOutDuration;\n\n\t\t\tfadeOutAction.warp( 1.0, startEndRatio, duration );\n\t\t\tthis.warp( endStartRatio, 1.0, duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcrossFadeTo( fadeInAction, duration, warp ) {\n\n\t\treturn fadeInAction.crossFadeFrom( this, duration, warp );\n\n\t}\n\n\tstopFading() {\n\n\t\tconst weightInterpolant = this._weightInterpolant;\n\n\t\tif ( weightInterpolant !== null ) {\n\n\t\t\tthis._weightInterpolant = null;\n\t\t\tthis._mixer._takeBackControlInterpolant( weightInterpolant );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Time Scale Control\n\n\t// set the time scale stopping any scheduled warping\n\t// although .paused = true yields an effective time scale of zero, this\n\t// method does *not* change .paused, because it would be confusing\n\tsetEffectiveTimeScale( timeScale ) {\n\n\t\tthis.timeScale = timeScale;\n\t\tthis._effectiveTimeScale = this.paused ? 0 : timeScale;\n\n\t\treturn this.stopWarping();\n\n\t}\n\n\t// return the time scale considering warping and .paused\n\tgetEffectiveTimeScale() {\n\n\t\treturn this._effectiveTimeScale;\n\n\t}\n\n\tsetDuration( duration ) {\n\n\t\tthis.timeScale = this._clip.duration / duration;\n\n\t\treturn this.stopWarping();\n\n\t}\n\n\tsyncWith( action ) {\n\n\t\tthis.time = action.time;\n\t\tthis.timeScale = action.timeScale;\n\n\t\treturn this.stopWarping();\n\n\t}\n\n\thalt( duration ) {\n\n\t\treturn this.warp( this._effectiveTimeScale, 0, duration );\n\n\t}\n\n\twarp( startTimeScale, endTimeScale, duration ) {\n\n\t\tconst mixer = this._mixer,\n\t\t\tnow = mixer.time,\n\t\t\ttimeScale = this.timeScale;\n\n\t\tlet interpolant = this._timeScaleInterpolant;\n\n\t\tif ( interpolant === null ) {\n\n\t\t\tinterpolant = mixer._lendControlInterpolant();\n\t\t\tthis._timeScaleInterpolant = interpolant;\n\n\t\t}\n\n\t\tconst times = interpolant.parameterPositions,\n\t\t\tvalues = interpolant.sampleValues;\n\n\t\ttimes[ 0 ] = now;\n\t\ttimes[ 1 ] = now + duration;\n\n\t\tvalues[ 0 ] = startTimeScale / timeScale;\n\t\tvalues[ 1 ] = endTimeScale / timeScale;\n\n\t\treturn this;\n\n\t}\n\n\tstopWarping() {\n\n\t\tconst timeScaleInterpolant = this._timeScaleInterpolant;\n\n\t\tif ( timeScaleInterpolant !== null ) {\n\n\t\t\tthis._timeScaleInterpolant = null;\n\t\t\tthis._mixer._takeBackControlInterpolant( timeScaleInterpolant );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Object Accessors\n\n\tgetMixer() {\n\n\t\treturn this._mixer;\n\n\t}\n\n\tgetClip() {\n\n\t\treturn this._clip;\n\n\t}\n\n\tgetRoot() {\n\n\t\treturn this._localRoot || this._mixer._root;\n\n\t}\n\n\t// Interna\n\n\t_update( time, deltaTime, timeDirection, accuIndex ) {\n\n\t\t// called by the mixer\n\n\t\tif ( ! this.enabled ) {\n\n\t\t\t// call ._updateWeight() to update ._effectiveWeight\n\n\t\t\tthis._updateWeight( time );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst startTime = this._startTime;\n\n\t\tif ( startTime !== null ) {\n\n\t\t\t// check for scheduled start of action\n\n\t\t\tconst timeRunning = ( time - startTime ) * timeDirection;\n\t\t\tif ( timeRunning < 0 || timeDirection === 0 ) {\n\n\t\t\t\tdeltaTime = 0;\n\n\t\t\t} else {\n\n\n\t\t\t\tthis._startTime = null; // unschedule\n\t\t\t\tdeltaTime = timeDirection * timeRunning;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// apply time scale and advance time\n\n\t\tdeltaTime *= this._updateTimeScale( time );\n\t\tconst clipTime = this._updateTime( deltaTime );\n\n\t\t// note: _updateTime may disable the action resulting in\n\t\t// an effective weight of 0\n\n\t\tconst weight = this._updateWeight( time );\n\n\t\tif ( weight > 0 ) {\n\n\t\t\tconst interpolants = this._interpolants;\n\t\t\tconst propertyMixers = this._propertyBindings;\n\n\t\t\tswitch ( this.blendMode ) {\n\n\t\t\t\tcase AdditiveAnimationBlendMode:\n\n\t\t\t\t\tfor ( let j = 0, m = interpolants.length; j !== m; ++ j ) {\n\n\t\t\t\t\t\tinterpolants[ j ].evaluate( clipTime );\n\t\t\t\t\t\tpropertyMixers[ j ].accumulateAdditive( weight );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase NormalAnimationBlendMode:\n\t\t\t\tdefault:\n\n\t\t\t\t\tfor ( let j = 0, m = interpolants.length; j !== m; ++ j ) {\n\n\t\t\t\t\t\tinterpolants[ j ].evaluate( clipTime );\n\t\t\t\t\t\tpropertyMixers[ j ].accumulate( accuIndex, weight );\n\n\t\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_updateWeight( time ) {\n\n\t\tlet weight = 0;\n\n\t\tif ( this.enabled ) {\n\n\t\t\tweight = this.weight;\n\t\t\tconst interpolant = this._weightInterpolant;\n\n\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\tconst interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\tweight *= interpolantValue;\n\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\tthis.stopFading();\n\n\t\t\t\t\tif ( interpolantValue === 0 ) {\n\n\t\t\t\t\t\t// faded out, disable\n\t\t\t\t\t\tthis.enabled = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._effectiveWeight = weight;\n\t\treturn weight;\n\n\t}\n\n\t_updateTimeScale( time ) {\n\n\t\tlet timeScale = 0;\n\n\t\tif ( ! this.paused ) {\n\n\t\t\ttimeScale = this.timeScale;\n\n\t\t\tconst interpolant = this._timeScaleInterpolant;\n\n\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\tconst interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\ttimeScale *= interpolantValue;\n\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\tthis.stopWarping();\n\n\t\t\t\t\tif ( timeScale === 0 ) {\n\n\t\t\t\t\t\t// motion has halted, pause\n\t\t\t\t\t\tthis.paused = true;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// warp done - apply final time scale\n\t\t\t\t\t\tthis.timeScale = timeScale;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._effectiveTimeScale = timeScale;\n\t\treturn timeScale;\n\n\t}\n\n\t_updateTime( deltaTime ) {\n\n\t\tconst duration = this._clip.duration;\n\t\tconst loop = this.loop;\n\n\t\tlet time = this.time + deltaTime;\n\t\tlet loopCount = this._loopCount;\n\n\t\tconst pingPong = ( loop === LoopPingPong );\n\n\t\tif ( deltaTime === 0 ) {\n\n\t\t\tif ( loopCount === - 1 ) return time;\n\n\t\t\treturn ( pingPong && ( loopCount & 1 ) === 1 ) ? duration - time : time;\n\n\t\t}\n\n\t\tif ( loop === LoopOnce ) {\n\n\t\t\tif ( loopCount === - 1 ) {\n\n\t\t\t\t// just started\n\n\t\t\t\tthis._loopCount = 0;\n\t\t\t\tthis._setEndings( true, true, false );\n\n\t\t\t}\n\n\t\t\thandle_stop: {\n\n\t\t\t\tif ( time >= duration ) {\n\n\t\t\t\t\ttime = duration;\n\n\t\t\t\t} else if ( time < 0 ) {\n\n\t\t\t\t\ttime = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tbreak handle_stop;\n\n\t\t\t\t}\n\n\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\telse this.enabled = false;\n\n\t\t\t\tthis.time = time;\n\n\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\tdirection: deltaTime < 0 ? - 1 : 1\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t} else { // repetitive Repeat or PingPong\n\n\t\t\tif ( loopCount === - 1 ) {\n\n\t\t\t\t// just started\n\n\t\t\t\tif ( deltaTime >= 0 ) {\n\n\t\t\t\t\tloopCount = 0;\n\n\t\t\t\t\tthis._setEndings( true, this.repetitions === 0, pingPong );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// when looping in reverse direction, the initial\n\t\t\t\t\t// transition through zero counts as a repetition,\n\t\t\t\t\t// so leave loopCount at -1\n\n\t\t\t\t\tthis._setEndings( this.repetitions === 0, true, pingPong );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( time >= duration || time < 0 ) {\n\n\t\t\t\t// wrap around\n\n\t\t\t\tconst loopDelta = Math.floor( time / duration ); // signed\n\t\t\t\ttime -= duration * loopDelta;\n\n\t\t\t\tloopCount += Math.abs( loopDelta );\n\n\t\t\t\tconst pending = this.repetitions - loopCount;\n\n\t\t\t\tif ( pending <= 0 ) {\n\n\t\t\t\t\t// have to stop (switch state, clamp time, fire event)\n\n\t\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\t\telse this.enabled = false;\n\n\t\t\t\t\ttime = deltaTime > 0 ? duration : 0;\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\t\tdirection: deltaTime > 0 ? 1 : - 1\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// keep running\n\n\t\t\t\t\tif ( pending === 1 ) {\n\n\t\t\t\t\t\t// entering the last round\n\n\t\t\t\t\t\tconst atStart = deltaTime < 0;\n\t\t\t\t\t\tthis._setEndings( atStart, ! atStart, pingPong );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis._setEndings( false, false, pingPong );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._loopCount = loopCount;\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'loop', action: this, loopDelta: loopDelta\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tthis.time = time;\n\n\t\t\t}\n\n\t\t\tif ( pingPong && ( loopCount & 1 ) === 1 ) {\n\n\t\t\t\t// invert time for the \"pong round\"\n\n\t\t\t\treturn duration - time;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn time;\n\n\t}\n\n\t_setEndings( atStart, atEnd, pingPong ) {\n\n\t\tconst settings = this._interpolantSettings;\n\n\t\tif ( pingPong ) {\n\n\t\t\tsettings.endingStart = ZeroSlopeEnding;\n\t\t\tsettings.endingEnd = ZeroSlopeEnding;\n\n\t\t} else {\n\n\t\t\t// assuming for LoopOnce atStart == atEnd == true\n\n\t\t\tif ( atStart ) {\n\n\t\t\t\tsettings.endingStart = this.zeroSlopeAtStart ? ZeroSlopeEnding : ZeroCurvatureEnding;\n\n\t\t\t} else {\n\n\t\t\t\tsettings.endingStart = WrapAroundEnding;\n\n\t\t\t}\n\n\t\t\tif ( atEnd ) {\n\n\t\t\t\tsettings.endingEnd = this.zeroSlopeAtEnd ? ZeroSlopeEnding : ZeroCurvatureEnding;\n\n\t\t\t} else {\n\n\t\t\t\tsettings.endingEnd \t = WrapAroundEnding;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_scheduleFading( duration, weightNow, weightThen ) {\n\n\t\tconst mixer = this._mixer, now = mixer.time;\n\t\tlet interpolant = this._weightInterpolant;\n\n\t\tif ( interpolant === null ) {\n\n\t\t\tinterpolant = mixer._lendControlInterpolant();\n\t\t\tthis._weightInterpolant = interpolant;\n\n\t\t}\n\n\t\tconst times = interpolant.parameterPositions,\n\t\t\tvalues = interpolant.sampleValues;\n\n\t\ttimes[ 0 ] = now;\n\t\tvalues[ 0 ] = weightNow;\n\t\ttimes[ 1 ] = now + duration;\n\t\tvalues[ 1 ] = weightThen;\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _controlInterpolantsResultBuffer = new Float32Array( 1 );\n\n\nclass AnimationMixer extends EventDispatcher {\n\n\tconstructor( root ) {\n\n\t\tsuper();\n\n\t\tthis._root = root;\n\t\tthis._initMemoryManager();\n\t\tthis._accuIndex = 0;\n\t\tthis.time = 0;\n\t\tthis.timeScale = 1.0;\n\n\t}\n\n\t_bindAction( action, prototypeAction ) {\n\n\t\tconst root = action._localRoot || this._root,\n\t\t\ttracks = action._clip.tracks,\n\t\t\tnTracks = tracks.length,\n\t\t\tbindings = action._propertyBindings,\n\t\t\tinterpolants = action._interpolants,\n\t\t\trootUuid = root.uuid,\n\t\t\tbindingsByRoot = this._bindingsByRootAndName;\n\n\t\tlet bindingsByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingsByName === undefined ) {\n\n\t\t\tbindingsByName = {};\n\t\t\tbindingsByRoot[ rootUuid ] = bindingsByName;\n\n\t\t}\n\n\t\tfor ( let i = 0; i !== nTracks; ++ i ) {\n\n\t\t\tconst track = tracks[ i ],\n\t\t\t\ttrackName = track.name;\n\n\t\t\tlet binding = bindingsByName[ trackName ];\n\n\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\t++ binding.referenceCount;\n\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t} else {\n\n\t\t\t\tbinding = bindings[ i ];\n\n\t\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\t\t// existing binding, make sure the cache knows\n\n\t\t\t\t\tif ( binding._cacheIndex === null ) {\n\n\t\t\t\t\t\t++ binding.referenceCount;\n\t\t\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tconst path = prototypeAction && prototypeAction.\n\t\t\t\t\t_propertyBindings[ i ].binding.parsedPath;\n\n\t\t\t\tbinding = new PropertyMixer(\n\t\t\t\t\tPropertyBinding.create( root, trackName, path ),\n\t\t\t\t\ttrack.ValueTypeName, track.getValueSize() );\n\n\t\t\t\t++ binding.referenceCount;\n\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t}\n\n\t\t\tinterpolants[ i ].resultBuffer = binding.buffer;\n\n\t\t}\n\n\t}\n\n\t_activateAction( action ) {\n\n\t\tif ( ! this._isActiveAction( action ) ) {\n\n\t\t\tif ( action._cacheIndex === null ) {\n\n\t\t\t\t// this action has been forgotten by the cache, but the user\n\t\t\t\t// appears to be still using it -> rebind\n\n\t\t\t\tconst rootUuid = ( action._localRoot || this._root ).uuid,\n\t\t\t\t\tclipUuid = action._clip.uuid,\n\t\t\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\t\t\tthis._bindAction( action,\n\t\t\t\t\tactionsForClip && actionsForClip.knownActions[ 0 ] );\n\n\t\t\t\tthis._addInactiveAction( action, clipUuid, rootUuid );\n\n\t\t\t}\n\n\t\t\tconst bindings = action._propertyBindings;\n\n\t\t\t// increment reference counts / sort out state\n\t\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tconst binding = bindings[ i ];\n\n\t\t\t\tif ( binding.useCount ++ === 0 ) {\n\n\t\t\t\t\tthis._lendBinding( binding );\n\t\t\t\t\tbinding.saveOriginalState();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._lendAction( action );\n\n\t\t}\n\n\t}\n\n\t_deactivateAction( action ) {\n\n\t\tif ( this._isActiveAction( action ) ) {\n\n\t\t\tconst bindings = action._propertyBindings;\n\n\t\t\t// decrement reference counts / sort out state\n\t\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tconst binding = bindings[ i ];\n\n\t\t\t\tif ( -- binding.useCount === 0 ) {\n\n\t\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\t\tthis._takeBackBinding( binding );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._takeBackAction( action );\n\n\t\t}\n\n\t}\n\n\t// Memory manager\n\n\t_initMemoryManager() {\n\n\t\tthis._actions = []; // 'nActiveActions' followed by inactive ones\n\t\tthis._nActiveActions = 0;\n\n\t\tthis._actionsByClip = {};\n\t\t// inside:\n\t\t// {\n\t\t// \tknownActions: Array< AnimationAction > - used as prototypes\n\t\t// \tactionByRoot: AnimationAction - lookup\n\t\t// }\n\n\n\t\tthis._bindings = []; // 'nActiveBindings' followed by inactive ones\n\t\tthis._nActiveBindings = 0;\n\n\t\tthis._bindingsByRootAndName = {}; // inside: Map< name, PropertyMixer >\n\n\n\t\tthis._controlInterpolants = []; // same game as above\n\t\tthis._nActiveControlInterpolants = 0;\n\n\t\tconst scope = this;\n\n\t\tthis.stats = {\n\n\t\t\tactions: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._actions.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveActions;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tbindings: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._bindings.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveBindings;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tcontrolInterpolants: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._controlInterpolants.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveControlInterpolants;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t// Memory management for AnimationAction objects\n\n\t_isActiveAction( action ) {\n\n\t\tconst index = action._cacheIndex;\n\t\treturn index !== null && index < this._nActiveActions;\n\n\t}\n\n\t_addInactiveAction( action, clipUuid, rootUuid ) {\n\n\t\tconst actions = this._actions,\n\t\t\tactionsByClip = this._actionsByClip;\n\n\t\tlet actionsForClip = actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip === undefined ) {\n\n\t\t\tactionsForClip = {\n\n\t\t\t\tknownActions: [ action ],\n\t\t\t\tactionByRoot: {}\n\n\t\t\t};\n\n\t\t\taction._byClipCacheIndex = 0;\n\n\t\t\tactionsByClip[ clipUuid ] = actionsForClip;\n\n\t\t} else {\n\n\t\t\tconst knownActions = actionsForClip.knownActions;\n\n\t\t\taction._byClipCacheIndex = knownActions.length;\n\t\t\tknownActions.push( action );\n\n\t\t}\n\n\t\taction._cacheIndex = actions.length;\n\t\tactions.push( action );\n\n\t\tactionsForClip.actionByRoot[ rootUuid ] = action;\n\n\t}\n\n\t_removeInactiveAction( action ) {\n\n\t\tconst actions = this._actions,\n\t\t\tlastInactiveAction = actions[ actions.length - 1 ],\n\t\t\tcacheIndex = action._cacheIndex;\n\n\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\tactions.pop();\n\n\t\taction._cacheIndex = null;\n\n\n\t\tconst clipUuid = action._clip.uuid,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ],\n\t\t\tknownActionsForClip = actionsForClip.knownActions,\n\n\t\t\tlastKnownAction =\n\t\t\t\tknownActionsForClip[ knownActionsForClip.length - 1 ],\n\n\t\t\tbyClipCacheIndex = action._byClipCacheIndex;\n\n\t\tlastKnownAction._byClipCacheIndex = byClipCacheIndex;\n\t\tknownActionsForClip[ byClipCacheIndex ] = lastKnownAction;\n\t\tknownActionsForClip.pop();\n\n\t\taction._byClipCacheIndex = null;\n\n\n\t\tconst actionByRoot = actionsForClip.actionByRoot,\n\t\t\trootUuid = ( action._localRoot || this._root ).uuid;\n\n\t\tdelete actionByRoot[ rootUuid ];\n\n\t\tif ( knownActionsForClip.length === 0 ) {\n\n\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t}\n\n\t\tthis._removeInactiveBindingsForAction( action );\n\n\t}\n\n\t_removeInactiveBindingsForAction( action ) {\n\n\t\tconst bindings = action._propertyBindings;\n\n\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tconst binding = bindings[ i ];\n\n\t\t\tif ( -- binding.referenceCount === 0 ) {\n\n\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_lendAction( action ) {\n\n\t\t// [ active actions |  inactive actions  ]\n\t\t// [  active actions >| inactive actions ]\n\t\t//                 s        a\n\t\t//                  <-swap->\n\t\t//                 a        s\n\n\t\tconst actions = this._actions,\n\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\tlastActiveIndex = this._nActiveActions ++,\n\n\t\t\tfirstInactiveAction = actions[ lastActiveIndex ];\n\n\t\taction._cacheIndex = lastActiveIndex;\n\t\tactions[ lastActiveIndex ] = action;\n\n\t\tfirstInactiveAction._cacheIndex = prevIndex;\n\t\tactions[ prevIndex ] = firstInactiveAction;\n\n\t}\n\n\t_takeBackAction( action ) {\n\n\t\t// [  active actions  | inactive actions ]\n\t\t// [ active actions |< inactive actions  ]\n\t\t//        a        s\n\t\t//         <-swap->\n\t\t//        s        a\n\n\t\tconst actions = this._actions,\n\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveActions,\n\n\t\t\tlastActiveAction = actions[ firstInactiveIndex ];\n\n\t\taction._cacheIndex = firstInactiveIndex;\n\t\tactions[ firstInactiveIndex ] = action;\n\n\t\tlastActiveAction._cacheIndex = prevIndex;\n\t\tactions[ prevIndex ] = lastActiveAction;\n\n\t}\n\n\t// Memory management for PropertyMixer objects\n\n\t_addInactiveBinding( binding, rootUuid, trackName ) {\n\n\t\tconst bindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindings = this._bindings;\n\n\t\tlet bindingByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingByName === undefined ) {\n\n\t\t\tbindingByName = {};\n\t\t\tbindingsByRoot[ rootUuid ] = bindingByName;\n\n\t\t}\n\n\t\tbindingByName[ trackName ] = binding;\n\n\t\tbinding._cacheIndex = bindings.length;\n\t\tbindings.push( binding );\n\n\t}\n\n\t_removeInactiveBinding( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tpropBinding = binding.binding,\n\t\t\trootUuid = propBinding.rootNode.uuid,\n\t\t\ttrackName = propBinding.path,\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\n\n\t\t\tlastInactiveBinding = bindings[ bindings.length - 1 ],\n\t\t\tcacheIndex = binding._cacheIndex;\n\n\t\tlastInactiveBinding._cacheIndex = cacheIndex;\n\t\tbindings[ cacheIndex ] = lastInactiveBinding;\n\t\tbindings.pop();\n\n\t\tdelete bindingByName[ trackName ];\n\n\t\tif ( Object.keys( bindingByName ).length === 0 ) {\n\n\t\t\tdelete bindingsByRoot[ rootUuid ];\n\n\t\t}\n\n\t}\n\n\t_lendBinding( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\tlastActiveIndex = this._nActiveBindings ++,\n\n\t\t\tfirstInactiveBinding = bindings[ lastActiveIndex ];\n\n\t\tbinding._cacheIndex = lastActiveIndex;\n\t\tbindings[ lastActiveIndex ] = binding;\n\n\t\tfirstInactiveBinding._cacheIndex = prevIndex;\n\t\tbindings[ prevIndex ] = firstInactiveBinding;\n\n\t}\n\n\t_takeBackBinding( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveBindings,\n\n\t\t\tlastActiveBinding = bindings[ firstInactiveIndex ];\n\n\t\tbinding._cacheIndex = firstInactiveIndex;\n\t\tbindings[ firstInactiveIndex ] = binding;\n\n\t\tlastActiveBinding._cacheIndex = prevIndex;\n\t\tbindings[ prevIndex ] = lastActiveBinding;\n\n\t}\n\n\n\t// Memory management of Interpolants for weight and time scale\n\n\t_lendControlInterpolant() {\n\n\t\tconst interpolants = this._controlInterpolants,\n\t\t\tlastActiveIndex = this._nActiveControlInterpolants ++;\n\n\t\tlet interpolant = interpolants[ lastActiveIndex ];\n\n\t\tif ( interpolant === undefined ) {\n\n\t\t\tinterpolant = new LinearInterpolant(\n\t\t\t\tnew Float32Array( 2 ), new Float32Array( 2 ),\n\t\t\t\t1, _controlInterpolantsResultBuffer );\n\n\t\t\tinterpolant.__cacheIndex = lastActiveIndex;\n\t\t\tinterpolants[ lastActiveIndex ] = interpolant;\n\n\t\t}\n\n\t\treturn interpolant;\n\n\t}\n\n\t_takeBackControlInterpolant( interpolant ) {\n\n\t\tconst interpolants = this._controlInterpolants,\n\t\t\tprevIndex = interpolant.__cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveControlInterpolants,\n\n\t\t\tlastActiveInterpolant = interpolants[ firstInactiveIndex ];\n\n\t\tinterpolant.__cacheIndex = firstInactiveIndex;\n\t\tinterpolants[ firstInactiveIndex ] = interpolant;\n\n\t\tlastActiveInterpolant.__cacheIndex = prevIndex;\n\t\tinterpolants[ prevIndex ] = lastActiveInterpolant;\n\n\t}\n\n\t// return an action for a clip optionally using a custom root target\n\t// object (this method allocates a lot of dynamic memory in case a\n\t// previously unknown clip/root combination is specified)\n\tclipAction( clip, optionalRoot, blendMode ) {\n\n\t\tconst root = optionalRoot || this._root,\n\t\t\trootUuid = root.uuid;\n\n\t\tlet clipObject = typeof clip === 'string' ? AnimationClip.findByName( root, clip ) : clip;\n\n\t\tconst clipUuid = clipObject !== null ? clipObject.uuid : clip;\n\n\t\tconst actionsForClip = this._actionsByClip[ clipUuid ];\n\t\tlet prototypeAction = null;\n\n\t\tif ( blendMode === undefined ) {\n\n\t\t\tif ( clipObject !== null ) {\n\n\t\t\t\tblendMode = clipObject.blendMode;\n\n\t\t\t} else {\n\n\t\t\t\tblendMode = NormalAnimationBlendMode;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\tconst existingAction = actionsForClip.actionByRoot[ rootUuid ];\n\n\t\t\tif ( existingAction !== undefined && existingAction.blendMode === blendMode ) {\n\n\t\t\t\treturn existingAction;\n\n\t\t\t}\n\n\t\t\t// we know the clip, so we don't have to parse all\n\t\t\t// the bindings again but can just copy\n\t\t\tprototypeAction = actionsForClip.knownActions[ 0 ];\n\n\t\t\t// also, take the clip from the prototype action\n\t\t\tif ( clipObject === null )\n\t\t\t\tclipObject = prototypeAction._clip;\n\n\t\t}\n\n\t\t// clip must be known when specified via string\n\t\tif ( clipObject === null ) return null;\n\n\t\t// allocate all resources required to run it\n\t\tconst newAction = new AnimationAction( this, clipObject, optionalRoot, blendMode );\n\n\t\tthis._bindAction( newAction, prototypeAction );\n\n\t\t// and make the action known to the memory manager\n\t\tthis._addInactiveAction( newAction, clipUuid, rootUuid );\n\n\t\treturn newAction;\n\n\t}\n\n\t// get an existing action\n\texistingAction( clip, optionalRoot ) {\n\n\t\tconst root = optionalRoot || this._root,\n\t\t\trootUuid = root.uuid,\n\n\t\t\tclipObject = typeof clip === 'string' ?\n\t\t\t\tAnimationClip.findByName( root, clip ) : clip,\n\n\t\t\tclipUuid = clipObject ? clipObject.uuid : clip,\n\n\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\treturn actionsForClip.actionByRoot[ rootUuid ] || null;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t// deactivates all previously scheduled actions\n\tstopAllAction() {\n\n\t\tconst actions = this._actions,\n\t\t\tnActions = this._nActiveActions;\n\n\t\tfor ( let i = nActions - 1; i >= 0; -- i ) {\n\n\t\t\tactions[ i ].stop();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// advance the time and update apply the animation\n\tupdate( deltaTime ) {\n\n\t\tdeltaTime *= this.timeScale;\n\n\t\tconst actions = this._actions,\n\t\t\tnActions = this._nActiveActions,\n\n\t\t\ttime = this.time += deltaTime,\n\t\t\ttimeDirection = Math.sign( deltaTime ),\n\n\t\t\taccuIndex = this._accuIndex ^= 1;\n\n\t\t// run active actions\n\n\t\tfor ( let i = 0; i !== nActions; ++ i ) {\n\n\t\t\tconst action = actions[ i ];\n\n\t\t\taction._update( time, deltaTime, timeDirection, accuIndex );\n\n\t\t}\n\n\t\t// update scene graph\n\n\t\tconst bindings = this._bindings,\n\t\t\tnBindings = this._nActiveBindings;\n\n\t\tfor ( let i = 0; i !== nBindings; ++ i ) {\n\n\t\t\tbindings[ i ].apply( accuIndex );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Allows you to seek to a specific time in an animation.\n\tsetTime( timeInSeconds ) {\n\n\t\tthis.time = 0; // Zero out time attribute for AnimationMixer object;\n\t\tfor ( let i = 0; i < this._actions.length; i ++ ) {\n\n\t\t\tthis._actions[ i ].time = 0; // Zero out time attribute for all associated AnimationAction objects.\n\n\t\t}\n\n\t\treturn this.update( timeInSeconds ); // Update used to set exact time. Returns \"this\" AnimationMixer object.\n\n\t}\n\n\t// return this mixer's root target object\n\tgetRoot() {\n\n\t\treturn this._root;\n\n\t}\n\n\t// free all resources specific to a particular clip\n\tuncacheClip( clip ) {\n\n\t\tconst actions = this._actions,\n\t\t\tclipUuid = clip.uuid,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\t// note: just calling _removeInactiveAction would mess up the\n\t\t\t// iteration state and also require updating the state we can\n\t\t\t// just throw away\n\n\t\t\tconst actionsToRemove = actionsForClip.knownActions;\n\n\t\t\tfor ( let i = 0, n = actionsToRemove.length; i !== n; ++ i ) {\n\n\t\t\t\tconst action = actionsToRemove[ i ];\n\n\t\t\t\tthis._deactivateAction( action );\n\n\t\t\t\tconst cacheIndex = action._cacheIndex,\n\t\t\t\t\tlastInactiveAction = actions[ actions.length - 1 ];\n\n\t\t\t\taction._cacheIndex = null;\n\t\t\t\taction._byClipCacheIndex = null;\n\n\t\t\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\t\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\t\t\tactions.pop();\n\n\t\t\t\tthis._removeInactiveBindingsForAction( action );\n\n\t\t\t}\n\n\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t}\n\n\t}\n\n\t// free all resources specific to a particular root target object\n\tuncacheRoot( root ) {\n\n\t\tconst rootUuid = root.uuid,\n\t\t\tactionsByClip = this._actionsByClip;\n\n\t\tfor ( const clipUuid in actionsByClip ) {\n\n\t\t\tconst actionByRoot = actionsByClip[ clipUuid ].actionByRoot,\n\t\t\t\taction = actionByRoot[ rootUuid ];\n\n\t\t\tif ( action !== undefined ) {\n\n\t\t\t\tthis._deactivateAction( action );\n\t\t\t\tthis._removeInactiveAction( action );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst bindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingByName !== undefined ) {\n\n\t\t\tfor ( const trackName in bindingByName ) {\n\n\t\t\t\tconst binding = bindingByName[ trackName ];\n\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// remove a targeted clip from the cache\n\tuncacheAction( clip, optionalRoot ) {\n\n\t\tconst action = this.existingAction( clip, optionalRoot );\n\n\t\tif ( action !== null ) {\n\n\t\t\tthis._deactivateAction( action );\n\t\t\tthis._removeInactiveAction( action );\n\n\t\t}\n\n\t}\n\n}\n\nclass Uniform {\n\n\tconstructor( value ) {\n\n\t\tthis.value = value;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Uniform( this.value.clone === undefined ? this.value : this.value.clone() );\n\n\t}\n\n}\n\nlet id = 0;\n\nclass UniformsGroup extends EventDispatcher {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isUniformsGroup = true;\n\n\t\tObject.defineProperty( this, 'id', { value: id ++ } );\n\n\t\tthis.name = '';\n\n\t\tthis.usage = StaticDrawUsage;\n\t\tthis.uniforms = [];\n\n\t}\n\n\tadd( uniform ) {\n\n\t\tthis.uniforms.push( uniform );\n\n\t\treturn this;\n\n\t}\n\n\tremove( uniform ) {\n\n\t\tconst index = this.uniforms.indexOf( uniform );\n\n\t\tif ( index !== - 1 ) this.uniforms.splice( index, 1 );\n\n\t\treturn this;\n\n\t}\n\n\tsetName( name ) {\n\n\t\tthis.name = name;\n\n\t\treturn this;\n\n\t}\n\n\tsetUsage( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.name = source.name;\n\t\tthis.usage = source.usage;\n\n\t\tconst uniformsSource = source.uniforms;\n\n\t\tthis.uniforms.length = 0;\n\n\t\tfor ( let i = 0, l = uniformsSource.length; i < l; i ++ ) {\n\n\t\t\tthis.uniforms.push( uniformsSource[ i ].clone() );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nclass InstancedInterleavedBuffer extends InterleavedBuffer {\n\n\tconstructor( array, stride, meshPerAttribute = 1 ) {\n\n\t\tsuper( array, stride );\n\n\t\tthis.isInstancedInterleavedBuffer = true;\n\n\t\tthis.meshPerAttribute = meshPerAttribute;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\n\n\t\treturn this;\n\n\t}\n\n\tclone( data ) {\n\n\t\tconst ib = super.clone( data );\n\n\t\tib.meshPerAttribute = this.meshPerAttribute;\n\n\t\treturn ib;\n\n\t}\n\n\ttoJSON( data ) {\n\n\t\tconst json = super.toJSON( data );\n\n\t\tjson.isInstancedInterleavedBuffer = true;\n\t\tjson.meshPerAttribute = this.meshPerAttribute;\n\n\t\treturn json;\n\n\t}\n\n}\n\nclass GLBufferAttribute {\n\n\tconstructor( buffer, type, itemSize, elementSize, count ) {\n\n\t\tthis.isGLBufferAttribute = true;\n\n\t\tthis.buffer = buffer;\n\t\tthis.type = type;\n\t\tthis.itemSize = itemSize;\n\t\tthis.elementSize = elementSize;\n\t\tthis.count = count;\n\n\t\tthis.version = 0;\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n\tsetBuffer( buffer ) {\n\n\t\tthis.buffer = buffer;\n\n\t\treturn this;\n\n\t}\n\n\tsetType( type, elementSize ) {\n\n\t\tthis.type = type;\n\t\tthis.elementSize = elementSize;\n\n\t\treturn this;\n\n\t}\n\n\tsetItemSize( itemSize ) {\n\n\t\tthis.itemSize = itemSize;\n\n\t\treturn this;\n\n\t}\n\n\tsetCount( count ) {\n\n\t\tthis.count = count;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass Raycaster {\n\n\tconstructor( origin, direction, near = 0, far = Infinity ) {\n\n\t\tthis.ray = new Ray( origin, direction );\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\tthis.near = near;\n\t\tthis.far = far;\n\t\tthis.camera = null;\n\t\tthis.layers = new Layers();\n\n\t\tthis.params = {\n\t\t\tMesh: {},\n\t\t\tLine: { threshold: 1 },\n\t\t\tLOD: {},\n\t\t\tPoints: { threshold: 1 },\n\t\t\tSprite: {}\n\t\t};\n\n\t}\n\n\tset( origin, direction ) {\n\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\tthis.ray.set( origin, direction );\n\n\t}\n\n\tsetFromCamera( coords, camera ) {\n\n\t\tif ( camera.isPerspectiveCamera ) {\n\n\t\t\tthis.ray.origin.setFromMatrixPosition( camera.matrixWorld );\n\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\n\t\t\tthis.camera = camera;\n\n\t\t} else if ( camera.isOrthographicCamera ) {\n\n\t\t\tthis.ray.origin.set( coords.x, coords.y, ( camera.near + camera.far ) / ( camera.near - camera.far ) ).unproject( camera ); // set origin in plane of camera\n\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\n\t\t\tthis.camera = camera;\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type: ' + camera.type );\n\n\t\t}\n\n\t}\n\n\tintersectObject( object, recursive = true, intersects = [] ) {\n\n\t\tintersectObject( object, this, intersects, recursive );\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t}\n\n\tintersectObjects( objects, recursive = true, intersects = [] ) {\n\n\t\tfor ( let i = 0, l = objects.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\n\n\t\t}\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t}\n\n}\n\nfunction ascSort( a, b ) {\n\n\treturn a.distance - b.distance;\n\n}\n\nfunction intersectObject( object, raycaster, intersects, recursive ) {\n\n\tif ( object.layers.test( raycaster.layers ) ) {\n\n\t\tobject.raycast( raycaster, intersects );\n\n\t}\n\n\tif ( recursive === true ) {\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\n *\n * The polar angle (phi) is measured from the positive y-axis. The positive y-axis is up.\n * The azimuthal angle (theta) is measured from the positive z-axis.\n */\n\nclass Spherical {\n\n\tconstructor( radius = 1, phi = 0, theta = 0 ) {\n\n\t\tthis.radius = radius;\n\t\tthis.phi = phi; // polar angle\n\t\tthis.theta = theta; // azimuthal angle\n\n\t\treturn this;\n\n\t}\n\n\tset( radius, phi, theta ) {\n\n\t\tthis.radius = radius;\n\t\tthis.phi = phi;\n\t\tthis.theta = theta;\n\n\t\treturn this;\n\n\t}\n\n\tcopy( other ) {\n\n\t\tthis.radius = other.radius;\n\t\tthis.phi = other.phi;\n\t\tthis.theta = other.theta;\n\n\t\treturn this;\n\n\t}\n\n\t// restrict phi to be between EPS and PI-EPS\n\tmakeSafe() {\n\n\t\tconst EPS = 0.000001;\n\t\tthis.phi = Math.max( EPS, Math.min( Math.PI - EPS, this.phi ) );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromVector3( v ) {\n\n\t\treturn this.setFromCartesianCoords( v.x, v.y, v.z );\n\n\t}\n\n\tsetFromCartesianCoords( x, y, z ) {\n\n\t\tthis.radius = Math.sqrt( x * x + y * y + z * z );\n\n\t\tif ( this.radius === 0 ) {\n\n\t\t\tthis.theta = 0;\n\t\t\tthis.phi = 0;\n\n\t\t} else {\n\n\t\t\tthis.theta = Math.atan2( x, z );\n\t\t\tthis.phi = Math.acos( clamp( y / this.radius, - 1, 1 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\n/**\n * Ref: https://en.wikipedia.org/wiki/Cylindrical_coordinate_system\n */\n\nclass Cylindrical {\n\n\tconstructor( radius = 1, theta = 0, y = 0 ) {\n\n\t\tthis.radius = radius; // distance from the origin to a point in the x-z plane\n\t\tthis.theta = theta; // counterclockwise angle in the x-z plane measured in radians from the positive z-axis\n\t\tthis.y = y; // height above the x-z plane\n\n\t\treturn this;\n\n\t}\n\n\tset( radius, theta, y ) {\n\n\t\tthis.radius = radius;\n\t\tthis.theta = theta;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tcopy( other ) {\n\n\t\tthis.radius = other.radius;\n\t\tthis.theta = other.theta;\n\t\tthis.y = other.y;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromVector3( v ) {\n\n\t\treturn this.setFromCartesianCoords( v.x, v.y, v.z );\n\n\t}\n\n\tsetFromCartesianCoords( x, y, z ) {\n\n\t\tthis.radius = Math.sqrt( x * x + z * z );\n\t\tthis.theta = Math.atan2( x, z );\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nconst _vector$4 = /*@__PURE__*/ new Vector2();\n\nclass Box2 {\n\n\tconstructor( min = new Vector2( + Infinity, + Infinity ), max = new Vector2( - Infinity, - Infinity ) ) {\n\n\t\tthis.isBox2 = true;\n\n\t\tthis.min = min;\n\t\tthis.max = max;\n\n\t}\n\n\tset( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCenterAndSize( center, size ) {\n\n\t\tconst halfSize = _vector$4.copy( size ).multiplyScalar( 0.5 );\n\t\tthis.min.copy( center ).sub( halfSize );\n\t\tthis.max.copy( center ).add( halfSize );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.min.x = this.min.y = + Infinity;\n\t\tthis.max.x = this.max.y = - Infinity;\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\n\n\t}\n\n\tgetCenter( target ) {\n\n\t\treturn this.isEmpty() ? target.set( 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t}\n\n\tgetSize( target ) {\n\n\t\treturn this.isEmpty() ? target.set( 0, 0 ) : target.subVectors( this.max, this.min );\n\n\t}\n\n\texpandByPoint( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t}\n\n\texpandByVector( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t}\n\n\texpandByScalar( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ? false : true;\n\n\t}\n\n\tcontainsBox( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y;\n\n\t}\n\n\tgetParameter( point, target ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\treturn target.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\n\t\t);\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\t// using 4 splitting planes to rule out intersections\n\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ? false : true;\n\n\t}\n\n\tclampPoint( point, target ) {\n\n\t\treturn target.copy( point ).clamp( this.min, this.max );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\tconst clampedPoint = _vector$4.copy( point ).clamp( this.min, this.max );\n\t\treturn clampedPoint.sub( point ).length();\n\n\t}\n\n\tintersect( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tunion( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t}\n\n\tequals( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n}\n\nconst _startP = /*@__PURE__*/ new Vector3();\nconst _startEnd = /*@__PURE__*/ new Vector3();\n\nclass Line3 {\n\n\tconstructor( start = new Vector3(), end = new Vector3() ) {\n\n\t\tthis.start = start;\n\t\tthis.end = end;\n\n\t}\n\n\tset( start, end ) {\n\n\t\tthis.start.copy( start );\n\t\tthis.end.copy( end );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( line ) {\n\n\t\tthis.start.copy( line.start );\n\t\tthis.end.copy( line.end );\n\n\t\treturn this;\n\n\t}\n\n\tgetCenter( target ) {\n\n\t\treturn target.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\n\n\t}\n\n\tdelta( target ) {\n\n\t\treturn target.subVectors( this.end, this.start );\n\n\t}\n\n\tdistanceSq() {\n\n\t\treturn this.start.distanceToSquared( this.end );\n\n\t}\n\n\tdistance() {\n\n\t\treturn this.start.distanceTo( this.end );\n\n\t}\n\n\tat( t, target ) {\n\n\t\treturn this.delta( target ).multiplyScalar( t ).add( this.start );\n\n\t}\n\n\tclosestPointToPointParameter( point, clampToLine ) {\n\n\t\t_startP.subVectors( point, this.start );\n\t\t_startEnd.subVectors( this.end, this.start );\n\n\t\tconst startEnd2 = _startEnd.dot( _startEnd );\n\t\tconst startEnd_startP = _startEnd.dot( _startP );\n\n\t\tlet t = startEnd_startP / startEnd2;\n\n\t\tif ( clampToLine ) {\n\n\t\t\tt = clamp( t, 0, 1 );\n\n\t\t}\n\n\t\treturn t;\n\n\t}\n\n\tclosestPointToPoint( point, clampToLine, target ) {\n\n\t\tconst t = this.closestPointToPointParameter( point, clampToLine );\n\n\t\treturn this.delta( target ).multiplyScalar( t ).add( this.start );\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tthis.start.applyMatrix4( matrix );\n\t\tthis.end.applyMatrix4( matrix );\n\n\t\treturn this;\n\n\t}\n\n\tequals( line ) {\n\n\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nconst _vector$3 = /*@__PURE__*/ new Vector3();\n\nclass SpotLightHelper extends Object3D {\n\n\tconstructor( light, color ) {\n\n\t\tsuper();\n\n\t\tthis.light = light;\n\n\t\tthis.matrix = light.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.color = color;\n\n\t\tthis.type = 'SpotLightHelper';\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tconst positions = [\n\t\t\t0, 0, 0, \t0, 0, 1,\n\t\t\t0, 0, 0, \t1, 0, 1,\n\t\t\t0, 0, 0,\t- 1, 0, 1,\n\t\t\t0, 0, 0, \t0, 1, 1,\n\t\t\t0, 0, 0, \t0, - 1, 1\n\t\t];\n\n\t\tfor ( let i = 0, j = 1, l = 32; i < l; i ++, j ++ ) {\n\n\t\t\tconst p1 = ( i / l ) * Math.PI * 2;\n\t\t\tconst p2 = ( j / l ) * Math.PI * 2;\n\n\t\t\tpositions.push(\n\t\t\t\tMath.cos( p1 ), Math.sin( p1 ), 1,\n\t\t\t\tMath.cos( p2 ), Math.sin( p2 ), 1\n\t\t\t);\n\n\t\t}\n\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { fog: false, toneMapped: false } );\n\n\t\tthis.cone = new LineSegments( geometry, material );\n\t\tthis.add( this.cone );\n\n\t\tthis.update();\n\n\t}\n\n\tdispose() {\n\n\t\tthis.cone.geometry.dispose();\n\t\tthis.cone.material.dispose();\n\n\t}\n\n\tupdate() {\n\n\t\tthis.light.updateWorldMatrix( true, false );\n\t\tthis.light.target.updateWorldMatrix( true, false );\n\n\t\tconst coneLength = this.light.distance ? this.light.distance : 1000;\n\t\tconst coneWidth = coneLength * Math.tan( this.light.angle );\n\n\t\tthis.cone.scale.set( coneWidth, coneWidth, coneLength );\n\n\t\t_vector$3.setFromMatrixPosition( this.light.target.matrixWorld );\n\n\t\tthis.cone.lookAt( _vector$3 );\n\n\t\tif ( this.color !== undefined ) {\n\n\t\t\tthis.cone.material.color.set( this.color );\n\n\t\t} else {\n\n\t\t\tthis.cone.material.color.copy( this.light.color );\n\n\t\t}\n\n\t}\n\n}\n\nconst _vector$2 = /*@__PURE__*/ new Vector3();\nconst _boneMatrix = /*@__PURE__*/ new Matrix4();\nconst _matrixWorldInv = /*@__PURE__*/ new Matrix4();\n\n\nclass SkeletonHelper extends LineSegments {\n\n\tconstructor( object ) {\n\n\t\tconst bones = getBoneList( object );\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tconst vertices = [];\n\t\tconst colors = [];\n\n\t\tconst color1 = new Color( 0, 0, 1 );\n\t\tconst color2 = new Color( 0, 1, 0 );\n\n\t\tfor ( let i = 0; i < bones.length; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\n\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\tvertices.push( 0, 0, 0 );\n\t\t\t\tvertices.push( 0, 0, 0 );\n\t\t\t\tcolors.push( color1.r, color1.g, color1.b );\n\t\t\t\tcolors.push( color2.r, color2.g, color2.b );\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { vertexColors: true, depthTest: false, depthWrite: false, toneMapped: false, transparent: true } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.isSkeletonHelper = true;\n\n\t\tthis.type = 'SkeletonHelper';\n\n\t\tthis.root = object;\n\t\tthis.bones = bones;\n\n\t\tthis.matrix = object.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tconst bones = this.bones;\n\n\t\tconst geometry = this.geometry;\n\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\t_matrixWorldInv.copy( this.root.matrixWorld ).invert();\n\n\t\tfor ( let i = 0, j = 0; i < bones.length; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\n\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\t_boneMatrix.multiplyMatrices( _matrixWorldInv, bone.matrixWorld );\n\t\t\t\t_vector$2.setFromMatrixPosition( _boneMatrix );\n\t\t\t\tposition.setXYZ( j, _vector$2.x, _vector$2.y, _vector$2.z );\n\n\t\t\t\t_boneMatrix.multiplyMatrices( _matrixWorldInv, bone.parent.matrixWorld );\n\t\t\t\t_vector$2.setFromMatrixPosition( _boneMatrix );\n\t\t\t\tposition.setXYZ( j + 1, _vector$2.x, _vector$2.y, _vector$2.z );\n\n\t\t\t\tj += 2;\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.getAttribute( 'position' ).needsUpdate = true;\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\n\nfunction getBoneList( object ) {\n\n\tconst boneList = [];\n\n\tif ( object.isBone === true ) {\n\n\t\tboneList.push( object );\n\n\t}\n\n\tfor ( let i = 0; i < object.children.length; i ++ ) {\n\n\t\tboneList.push.apply( boneList, getBoneList( object.children[ i ] ) );\n\n\t}\n\n\treturn boneList;\n\n}\n\nclass PointLightHelper extends Mesh {\n\n\tconstructor( light, sphereSize, color ) {\n\n\t\tconst geometry = new SphereGeometry( sphereSize, 4, 2 );\n\t\tconst material = new MeshBasicMaterial( { wireframe: true, fog: false, toneMapped: false } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.light = light;\n\n\t\tthis.color = color;\n\n\t\tthis.type = 'PointLightHelper';\n\n\t\tthis.matrix = this.light.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.update();\n\n\n\t\t/*\n\t// TODO: delete this comment?\n\tconst distanceGeometry = new THREE.IcosahedronGeometry( 1, 2 );\n\tconst distanceMaterial = new THREE.MeshBasicMaterial( { color: hexColor, fog: false, wireframe: true, opacity: 0.1, transparent: true } );\n\n\tthis.lightSphere = new THREE.Mesh( bulbGeometry, bulbMaterial );\n\tthis.lightDistance = new THREE.Mesh( distanceGeometry, distanceMaterial );\n\n\tconst d = light.distance;\n\n\tif ( d === 0.0 ) {\n\n\t\tthis.lightDistance.visible = false;\n\n\t} else {\n\n\t\tthis.lightDistance.scale.set( d, d, d );\n\n\t}\n\n\tthis.add( this.lightDistance );\n\t*/\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n\tupdate() {\n\n\t\tthis.light.updateWorldMatrix( true, false );\n\n\t\tif ( this.color !== undefined ) {\n\n\t\t\tthis.material.color.set( this.color );\n\n\t\t} else {\n\n\t\t\tthis.material.color.copy( this.light.color );\n\n\t\t}\n\n\t\t/*\n\t\tconst d = this.light.distance;\n\n\t\tif ( d === 0.0 ) {\n\n\t\t\tthis.lightDistance.visible = false;\n\n\t\t} else {\n\n\t\t\tthis.lightDistance.visible = true;\n\t\t\tthis.lightDistance.scale.set( d, d, d );\n\n\t\t}\n\t\t*/\n\n\t}\n\n}\n\nconst _vector$1 = /*@__PURE__*/ new Vector3();\nconst _color1 = /*@__PURE__*/ new Color();\nconst _color2 = /*@__PURE__*/ new Color();\n\nclass HemisphereLightHelper extends Object3D {\n\n\tconstructor( light, size, color ) {\n\n\t\tsuper();\n\n\t\tthis.light = light;\n\n\t\tthis.matrix = light.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.color = color;\n\n\t\tthis.type = 'HemisphereLightHelper';\n\n\t\tconst geometry = new OctahedronGeometry( size );\n\t\tgeometry.rotateY( Math.PI * 0.5 );\n\n\t\tthis.material = new MeshBasicMaterial( { wireframe: true, fog: false, toneMapped: false } );\n\t\tif ( this.color === undefined ) this.material.vertexColors = true;\n\n\t\tconst position = geometry.getAttribute( 'position' );\n\t\tconst colors = new Float32Array( position.count * 3 );\n\n\t\tgeometry.setAttribute( 'color', new BufferAttribute( colors, 3 ) );\n\n\t\tthis.add( new Mesh( geometry, this.material ) );\n\n\t\tthis.update();\n\n\t}\n\n\tdispose() {\n\n\t\tthis.children[ 0 ].geometry.dispose();\n\t\tthis.children[ 0 ].material.dispose();\n\n\t}\n\n\tupdate() {\n\n\t\tconst mesh = this.children[ 0 ];\n\n\t\tif ( this.color !== undefined ) {\n\n\t\t\tthis.material.color.set( this.color );\n\n\t\t} else {\n\n\t\t\tconst colors = mesh.geometry.getAttribute( 'color' );\n\n\t\t\t_color1.copy( this.light.color );\n\t\t\t_color2.copy( this.light.groundColor );\n\n\t\t\tfor ( let i = 0, l = colors.count; i < l; i ++ ) {\n\n\t\t\t\tconst color = ( i < ( l / 2 ) ) ? _color1 : _color2;\n\n\t\t\t\tcolors.setXYZ( i, color.r, color.g, color.b );\n\n\t\t\t}\n\n\t\t\tcolors.needsUpdate = true;\n\n\t\t}\n\n\t\tthis.light.updateWorldMatrix( true, false );\n\n\t\tmesh.lookAt( _vector$1.setFromMatrixPosition( this.light.matrixWorld ).negate() );\n\n\t}\n\n}\n\nclass GridHelper extends LineSegments {\n\n\tconstructor( size = 10, divisions = 10, color1 = 0x444444, color2 = 0x888888 ) {\n\n\t\tcolor1 = new Color( color1 );\n\t\tcolor2 = new Color( color2 );\n\n\t\tconst center = divisions / 2;\n\t\tconst step = size / divisions;\n\t\tconst halfSize = size / 2;\n\n\t\tconst vertices = [], colors = [];\n\n\t\tfor ( let i = 0, j = 0, k = - halfSize; i <= divisions; i ++, k += step ) {\n\n\t\t\tvertices.push( - halfSize, 0, k, halfSize, 0, k );\n\t\t\tvertices.push( k, 0, - halfSize, k, 0, halfSize );\n\n\t\t\tconst color = i === center ? color1 : color2;\n\n\t\t\tcolor.toArray( colors, j ); j += 3;\n\t\t\tcolor.toArray( colors, j ); j += 3;\n\t\t\tcolor.toArray( colors, j ); j += 3;\n\t\t\tcolor.toArray( colors, j ); j += 3;\n\n\t\t}\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.type = 'GridHelper';\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\nclass PolarGridHelper extends LineSegments {\n\n\tconstructor( radius = 10, sectors = 16, rings = 8, divisions = 64, color1 = 0x444444, color2 = 0x888888 ) {\n\n\t\tcolor1 = new Color( color1 );\n\t\tcolor2 = new Color( color2 );\n\n\t\tconst vertices = [];\n\t\tconst colors = [];\n\n\t\t// create the sectors\n\n\t\tif ( sectors > 1 ) {\n\n\t\t\tfor ( let i = 0; i < sectors; i ++ ) {\n\n\t\t\t\tconst v = ( i / sectors ) * ( Math.PI * 2 );\n\n\t\t\t\tconst x = Math.sin( v ) * radius;\n\t\t\t\tconst z = Math.cos( v ) * radius;\n\n\t\t\t\tvertices.push( 0, 0, 0 );\n\t\t\t\tvertices.push( x, 0, z );\n\n\t\t\t\tconst color = ( i & 1 ) ? color1 : color2;\n\n\t\t\t\tcolors.push( color.r, color.g, color.b );\n\t\t\t\tcolors.push( color.r, color.g, color.b );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// create the rings\n\n\t\tfor ( let i = 0; i < rings; i ++ ) {\n\n\t\t\tconst color = ( i & 1 ) ? color1 : color2;\n\n\t\t\tconst r = radius - ( radius / rings * i );\n\n\t\t\tfor ( let j = 0; j < divisions; j ++ ) {\n\n\t\t\t\t// first vertex\n\n\t\t\t\tlet v = ( j / divisions ) * ( Math.PI * 2 );\n\n\t\t\t\tlet x = Math.sin( v ) * r;\n\t\t\t\tlet z = Math.cos( v ) * r;\n\n\t\t\t\tvertices.push( x, 0, z );\n\t\t\t\tcolors.push( color.r, color.g, color.b );\n\n\t\t\t\t// second vertex\n\n\t\t\t\tv = ( ( j + 1 ) / divisions ) * ( Math.PI * 2 );\n\n\t\t\t\tx = Math.sin( v ) * r;\n\t\t\t\tz = Math.cos( v ) * r;\n\n\t\t\t\tvertices.push( x, 0, z );\n\t\t\t\tcolors.push( color.r, color.g, color.b );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.type = 'PolarGridHelper';\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\nconst _v1 = /*@__PURE__*/ new Vector3();\nconst _v2 = /*@__PURE__*/ new Vector3();\nconst _v3 = /*@__PURE__*/ new Vector3();\n\nclass DirectionalLightHelper extends Object3D {\n\n\tconstructor( light, size, color ) {\n\n\t\tsuper();\n\n\t\tthis.light = light;\n\n\t\tthis.matrix = light.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.color = color;\n\n\t\tthis.type = 'DirectionalLightHelper';\n\n\t\tif ( size === undefined ) size = 1;\n\n\t\tlet geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( [\n\t\t\t- size, size, 0,\n\t\t\tsize, size, 0,\n\t\t\tsize, - size, 0,\n\t\t\t- size, - size, 0,\n\t\t\t- size, size, 0\n\t\t], 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { fog: false, toneMapped: false } );\n\n\t\tthis.lightPlane = new Line( geometry, material );\n\t\tthis.add( this.lightPlane );\n\n\t\tgeometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 0, 0, 1 ], 3 ) );\n\n\t\tthis.targetLine = new Line( geometry, material );\n\t\tthis.add( this.targetLine );\n\n\t\tthis.update();\n\n\t}\n\n\tdispose() {\n\n\t\tthis.lightPlane.geometry.dispose();\n\t\tthis.lightPlane.material.dispose();\n\t\tthis.targetLine.geometry.dispose();\n\t\tthis.targetLine.material.dispose();\n\n\t}\n\n\tupdate() {\n\n\t\tthis.light.updateWorldMatrix( true, false );\n\t\tthis.light.target.updateWorldMatrix( true, false );\n\n\t\t_v1.setFromMatrixPosition( this.light.matrixWorld );\n\t\t_v2.setFromMatrixPosition( this.light.target.matrixWorld );\n\t\t_v3.subVectors( _v2, _v1 );\n\n\t\tthis.lightPlane.lookAt( _v2 );\n\n\t\tif ( this.color !== undefined ) {\n\n\t\t\tthis.lightPlane.material.color.set( this.color );\n\t\t\tthis.targetLine.material.color.set( this.color );\n\n\t\t} else {\n\n\t\t\tthis.lightPlane.material.color.copy( this.light.color );\n\t\t\tthis.targetLine.material.color.copy( this.light.color );\n\n\t\t}\n\n\t\tthis.targetLine.lookAt( _v2 );\n\t\tthis.targetLine.scale.z = _v3.length();\n\n\t}\n\n}\n\nconst _vector = /*@__PURE__*/ new Vector3();\nconst _camera = /*@__PURE__*/ new Camera();\n\n/**\n *\t- shows frustum, line of sight and up of the camera\n *\t- suitable for fast updates\n * \t- based on frustum visualization in lightgl.js shadowmap example\n *\t\thttps://github.com/evanw/lightgl.js/blob/master/tests/shadowmap.html\n */\n\nclass CameraHelper extends LineSegments {\n\n\tconstructor( camera ) {\n\n\t\tconst geometry = new BufferGeometry();\n\t\tconst material = new LineBasicMaterial( { color: 0xffffff, vertexColors: true, toneMapped: false } );\n\n\t\tconst vertices = [];\n\t\tconst colors = [];\n\n\t\tconst pointMap = {};\n\n\t\t// near\n\n\t\taddLine( 'n1', 'n2' );\n\t\taddLine( 'n2', 'n4' );\n\t\taddLine( 'n4', 'n3' );\n\t\taddLine( 'n3', 'n1' );\n\n\t\t// far\n\n\t\taddLine( 'f1', 'f2' );\n\t\taddLine( 'f2', 'f4' );\n\t\taddLine( 'f4', 'f3' );\n\t\taddLine( 'f3', 'f1' );\n\n\t\t// sides\n\n\t\taddLine( 'n1', 'f1' );\n\t\taddLine( 'n2', 'f2' );\n\t\taddLine( 'n3', 'f3' );\n\t\taddLine( 'n4', 'f4' );\n\n\t\t// cone\n\n\t\taddLine( 'p', 'n1' );\n\t\taddLine( 'p', 'n2' );\n\t\taddLine( 'p', 'n3' );\n\t\taddLine( 'p', 'n4' );\n\n\t\t// up\n\n\t\taddLine( 'u1', 'u2' );\n\t\taddLine( 'u2', 'u3' );\n\t\taddLine( 'u3', 'u1' );\n\n\t\t// target\n\n\t\taddLine( 'c', 't' );\n\t\taddLine( 'p', 'c' );\n\n\t\t// cross\n\n\t\taddLine( 'cn1', 'cn2' );\n\t\taddLine( 'cn3', 'cn4' );\n\n\t\taddLine( 'cf1', 'cf2' );\n\t\taddLine( 'cf3', 'cf4' );\n\n\t\tfunction addLine( a, b ) {\n\n\t\t\taddPoint( a );\n\t\t\taddPoint( b );\n\n\t\t}\n\n\t\tfunction addPoint( id ) {\n\n\t\t\tvertices.push( 0, 0, 0 );\n\t\t\tcolors.push( 0, 0, 0 );\n\n\t\t\tif ( pointMap[ id ] === undefined ) {\n\n\t\t\t\tpointMap[ id ] = [];\n\n\t\t\t}\n\n\t\t\tpointMap[ id ].push( ( vertices.length / 3 ) - 1 );\n\n\t\t}\n\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.type = 'CameraHelper';\n\n\t\tthis.camera = camera;\n\t\tif ( this.camera.updateProjectionMatrix ) this.camera.updateProjectionMatrix();\n\n\t\tthis.matrix = camera.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.pointMap = pointMap;\n\n\t\tthis.update();\n\n\t\t// colors\n\n\t\tconst colorFrustum = new Color( 0xffaa00 );\n\t\tconst colorCone = new Color( 0xff0000 );\n\t\tconst colorUp = new Color( 0x00aaff );\n\t\tconst colorTarget = new Color( 0xffffff );\n\t\tconst colorCross = new Color( 0x333333 );\n\n\t\tthis.setColors( colorFrustum, colorCone, colorUp, colorTarget, colorCross );\n\n\t}\n\n\tsetColors( frustum, cone, up, target, cross ) {\n\n\t\tconst geometry = this.geometry;\n\n\t\tconst colorAttribute = geometry.getAttribute( 'color' );\n\n\t\t// near\n\n\t\tcolorAttribute.setXYZ( 0, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 1, frustum.r, frustum.g, frustum.b ); // n1, n2\n\t\tcolorAttribute.setXYZ( 2, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 3, frustum.r, frustum.g, frustum.b ); // n2, n4\n\t\tcolorAttribute.setXYZ( 4, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 5, frustum.r, frustum.g, frustum.b ); // n4, n3\n\t\tcolorAttribute.setXYZ( 6, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 7, frustum.r, frustum.g, frustum.b ); // n3, n1\n\n\t\t// far\n\n\t\tcolorAttribute.setXYZ( 8, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 9, frustum.r, frustum.g, frustum.b ); // f1, f2\n\t\tcolorAttribute.setXYZ( 10, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 11, frustum.r, frustum.g, frustum.b ); // f2, f4\n\t\tcolorAttribute.setXYZ( 12, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 13, frustum.r, frustum.g, frustum.b ); // f4, f3\n\t\tcolorAttribute.setXYZ( 14, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 15, frustum.r, frustum.g, frustum.b ); // f3, f1\n\n\t\t// sides\n\n\t\tcolorAttribute.setXYZ( 16, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 17, frustum.r, frustum.g, frustum.b ); // n1, f1\n\t\tcolorAttribute.setXYZ( 18, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 19, frustum.r, frustum.g, frustum.b ); // n2, f2\n\t\tcolorAttribute.setXYZ( 20, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 21, frustum.r, frustum.g, frustum.b ); // n3, f3\n\t\tcolorAttribute.setXYZ( 22, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 23, frustum.r, frustum.g, frustum.b ); // n4, f4\n\n\t\t// cone\n\n\t\tcolorAttribute.setXYZ( 24, cone.r, cone.g, cone.b ); colorAttribute.setXYZ( 25, cone.r, cone.g, cone.b ); // p, n1\n\t\tcolorAttribute.setXYZ( 26, cone.r, cone.g, cone.b ); colorAttribute.setXYZ( 27, cone.r, cone.g, cone.b ); // p, n2\n\t\tcolorAttribute.setXYZ( 28, cone.r, cone.g, cone.b ); colorAttribute.setXYZ( 29, cone.r, cone.g, cone.b ); // p, n3\n\t\tcolorAttribute.setXYZ( 30, cone.r, cone.g, cone.b ); colorAttribute.setXYZ( 31, cone.r, cone.g, cone.b ); // p, n4\n\n\t\t// up\n\n\t\tcolorAttribute.setXYZ( 32, up.r, up.g, up.b ); colorAttribute.setXYZ( 33, up.r, up.g, up.b ); // u1, u2\n\t\tcolorAttribute.setXYZ( 34, up.r, up.g, up.b ); colorAttribute.setXYZ( 35, up.r, up.g, up.b ); // u2, u3\n\t\tcolorAttribute.setXYZ( 36, up.r, up.g, up.b ); colorAttribute.setXYZ( 37, up.r, up.g, up.b ); // u3, u1\n\n\t\t// target\n\n\t\tcolorAttribute.setXYZ( 38, target.r, target.g, target.b ); colorAttribute.setXYZ( 39, target.r, target.g, target.b ); // c, t\n\t\tcolorAttribute.setXYZ( 40, cross.r, cross.g, cross.b ); colorAttribute.setXYZ( 41, cross.r, cross.g, cross.b ); // p, c\n\n\t\t// cross\n\n\t\tcolorAttribute.setXYZ( 42, cross.r, cross.g, cross.b ); colorAttribute.setXYZ( 43, cross.r, cross.g, cross.b ); // cn1, cn2\n\t\tcolorAttribute.setXYZ( 44, cross.r, cross.g, cross.b ); colorAttribute.setXYZ( 45, cross.r, cross.g, cross.b ); // cn3, cn4\n\n\t\tcolorAttribute.setXYZ( 46, cross.r, cross.g, cross.b ); colorAttribute.setXYZ( 47, cross.r, cross.g, cross.b ); // cf1, cf2\n\t\tcolorAttribute.setXYZ( 48, cross.r, cross.g, cross.b ); colorAttribute.setXYZ( 49, cross.r, cross.g, cross.b ); // cf3, cf4\n\n\t\tcolorAttribute.needsUpdate = true;\n\n\t}\n\n\tupdate() {\n\n\t\tconst geometry = this.geometry;\n\t\tconst pointMap = this.pointMap;\n\n\t\tconst w = 1, h = 1;\n\n\t\t// we need just camera projection matrix inverse\n\t\t// world matrix must be identity\n\n\t\t_camera.projectionMatrixInverse.copy( this.camera.projectionMatrixInverse );\n\n\t\t// center / target\n\n\t\tsetPoint( 'c', pointMap, geometry, _camera, 0, 0, - 1 );\n\t\tsetPoint( 't', pointMap, geometry, _camera, 0, 0, 1 );\n\n\t\t// near\n\n\t\tsetPoint( 'n1', pointMap, geometry, _camera, - w, - h, - 1 );\n\t\tsetPoint( 'n2', pointMap, geometry, _camera, w, - h, - 1 );\n\t\tsetPoint( 'n3', pointMap, geometry, _camera, - w, h, - 1 );\n\t\tsetPoint( 'n4', pointMap, geometry, _camera, w, h, - 1 );\n\n\t\t// far\n\n\t\tsetPoint( 'f1', pointMap, geometry, _camera, - w, - h, 1 );\n\t\tsetPoint( 'f2', pointMap, geometry, _camera, w, - h, 1 );\n\t\tsetPoint( 'f3', pointMap, geometry, _camera, - w, h, 1 );\n\t\tsetPoint( 'f4', pointMap, geometry, _camera, w, h, 1 );\n\n\t\t// up\n\n\t\tsetPoint( 'u1', pointMap, geometry, _camera, w * 0.7, h * 1.1, - 1 );\n\t\tsetPoint( 'u2', pointMap, geometry, _camera, - w * 0.7, h * 1.1, - 1 );\n\t\tsetPoint( 'u3', pointMap, geometry, _camera, 0, h * 2, - 1 );\n\n\t\t// cross\n\n\t\tsetPoint( 'cf1', pointMap, geometry, _camera, - w, 0, 1 );\n\t\tsetPoint( 'cf2', pointMap, geometry, _camera, w, 0, 1 );\n\t\tsetPoint( 'cf3', pointMap, geometry, _camera, 0, - h, 1 );\n\t\tsetPoint( 'cf4', pointMap, geometry, _camera, 0, h, 1 );\n\n\t\tsetPoint( 'cn1', pointMap, geometry, _camera, - w, 0, - 1 );\n\t\tsetPoint( 'cn2', pointMap, geometry, _camera, w, 0, - 1 );\n\t\tsetPoint( 'cn3', pointMap, geometry, _camera, 0, - h, - 1 );\n\t\tsetPoint( 'cn4', pointMap, geometry, _camera, 0, h, - 1 );\n\n\t\tgeometry.getAttribute( 'position' ).needsUpdate = true;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\n\nfunction setPoint( point, pointMap, geometry, camera, x, y, z ) {\n\n\t_vector.set( x, y, z ).unproject( camera );\n\n\tconst points = pointMap[ point ];\n\n\tif ( points !== undefined ) {\n\n\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tposition.setXYZ( points[ i ], _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t}\n\n}\n\nconst _box = /*@__PURE__*/ new Box3();\n\nclass BoxHelper extends LineSegments {\n\n\tconstructor( object, color = 0xffff00 ) {\n\n\t\tconst indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\n\t\tconst positions = new Float32Array( 8 * 3 );\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setIndex( new BufferAttribute( indices, 1 ) );\n\t\tgeometry.setAttribute( 'position', new BufferAttribute( positions, 3 ) );\n\n\t\tsuper( geometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\n\n\t\tthis.object = object;\n\t\tthis.type = 'BoxHelper';\n\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.update();\n\n\t}\n\n\tupdate( object ) {\n\n\t\tif ( object !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.BoxHelper: .update() has no longer arguments.' );\n\n\t\t}\n\n\t\tif ( this.object !== undefined ) {\n\n\t\t\t_box.setFromObject( this.object );\n\n\t\t}\n\n\t\tif ( _box.isEmpty() ) return;\n\n\t\tconst min = _box.min;\n\t\tconst max = _box.max;\n\n\t\t/*\n\t\t\t5____4\n\t\t1/___0/|\n\t\t| 6__|_7\n\t\t2/___3/\n\n\t\t0: max.x, max.y, max.z\n\t\t1: min.x, max.y, max.z\n\t\t2: min.x, min.y, max.z\n\t\t3: max.x, min.y, max.z\n\t\t4: max.x, max.y, min.z\n\t\t5: min.x, max.y, min.z\n\t\t6: min.x, min.y, min.z\n\t\t7: max.x, min.y, min.z\n\t\t*/\n\n\t\tconst position = this.geometry.attributes.position;\n\t\tconst array = position.array;\n\n\t\tarray[ 0 ] = max.x; array[ 1 ] = max.y; array[ 2 ] = max.z;\n\t\tarray[ 3 ] = min.x; array[ 4 ] = max.y; array[ 5 ] = max.z;\n\t\tarray[ 6 ] = min.x; array[ 7 ] = min.y; array[ 8 ] = max.z;\n\t\tarray[ 9 ] = max.x; array[ 10 ] = min.y; array[ 11 ] = max.z;\n\t\tarray[ 12 ] = max.x; array[ 13 ] = max.y; array[ 14 ] = min.z;\n\t\tarray[ 15 ] = min.x; array[ 16 ] = max.y; array[ 17 ] = min.z;\n\t\tarray[ 18 ] = min.x; array[ 19 ] = min.y; array[ 20 ] = min.z;\n\t\tarray[ 21 ] = max.x; array[ 22 ] = min.y; array[ 23 ] = min.z;\n\n\t\tposition.needsUpdate = true;\n\n\t\tthis.geometry.computeBoundingSphere();\n\n\t}\n\n\tsetFromObject( object ) {\n\n\t\tthis.object = object;\n\t\tthis.update();\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.object = source.object;\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\nclass Box3Helper extends LineSegments {\n\n\tconstructor( box, color = 0xffff00 ) {\n\n\t\tconst indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\n\n\t\tconst positions = [ 1, 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, - 1, 1, 1, 1, - 1, - 1, 1, - 1, - 1, - 1, - 1, 1, - 1, - 1 ];\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tgeometry.setIndex( new BufferAttribute( indices, 1 ) );\n\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\n\n\t\tsuper( geometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\n\n\t\tthis.box = box;\n\n\t\tthis.type = 'Box3Helper';\n\n\t\tthis.geometry.computeBoundingSphere();\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tconst box = this.box;\n\n\t\tif ( box.isEmpty() ) return;\n\n\t\tbox.getCenter( this.position );\n\n\t\tbox.getSize( this.scale );\n\n\t\tthis.scale.multiplyScalar( 0.5 );\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\nclass PlaneHelper extends Line {\n\n\tconstructor( plane, size = 1, hex = 0xffff00 ) {\n\n\t\tconst color = hex;\n\n\t\tconst positions = [ 1, - 1, 0, - 1, 1, 0, - 1, - 1, 0, 1, 1, 0, - 1, 1, 0, - 1, - 1, 0, 1, - 1, 0, 1, 1, 0 ];\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\n\t\tgeometry.computeBoundingSphere();\n\n\t\tsuper( geometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\n\n\t\tthis.type = 'PlaneHelper';\n\n\t\tthis.plane = plane;\n\n\t\tthis.size = size;\n\n\t\tconst positions2 = [ 1, 1, 0, - 1, 1, 0, - 1, - 1, 0, 1, 1, 0, - 1, - 1, 0, 1, - 1, 0 ];\n\n\t\tconst geometry2 = new BufferGeometry();\n\t\tgeometry2.setAttribute( 'position', new Float32BufferAttribute( positions2, 3 ) );\n\t\tgeometry2.computeBoundingSphere();\n\n\t\tthis.add( new Mesh( geometry2, new MeshBasicMaterial( { color: color, opacity: 0.2, transparent: true, depthWrite: false, toneMapped: false } ) ) );\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tthis.position.set( 0, 0, 0 );\n\n\t\tthis.scale.set( 0.5 * this.size, 0.5 * this.size, 1 );\n\n\t\tthis.lookAt( this.plane.normal );\n\n\t\tthis.translateZ( - this.plane.constant );\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\t\tthis.children[ 0 ].geometry.dispose();\n\t\tthis.children[ 0 ].material.dispose();\n\n\t}\n\n}\n\nconst _axis = /*@__PURE__*/ new Vector3();\nlet _lineGeometry, _coneGeometry;\n\nclass ArrowHelper extends Object3D {\n\n\t// dir is assumed to be normalized\n\n\tconstructor( dir = new Vector3( 0, 0, 1 ), origin = new Vector3( 0, 0, 0 ), length = 1, color = 0xffff00, headLength = length * 0.2, headWidth = headLength * 0.2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'ArrowHelper';\n\n\t\tif ( _lineGeometry === undefined ) {\n\n\t\t\t_lineGeometry = new BufferGeometry();\n\t\t\t_lineGeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 0, 1, 0 ], 3 ) );\n\n\t\t\t_coneGeometry = new CylinderGeometry( 0, 0.5, 1, 5, 1 );\n\t\t\t_coneGeometry.translate( 0, - 0.5, 0 );\n\n\t\t}\n\n\t\tthis.position.copy( origin );\n\n\t\tthis.line = new Line( _lineGeometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\n\t\tthis.line.matrixAutoUpdate = false;\n\t\tthis.add( this.line );\n\n\t\tthis.cone = new Mesh( _coneGeometry, new MeshBasicMaterial( { color: color, toneMapped: false } ) );\n\t\tthis.cone.matrixAutoUpdate = false;\n\t\tthis.add( this.cone );\n\n\t\tthis.setDirection( dir );\n\t\tthis.setLength( length, headLength, headWidth );\n\n\t}\n\n\tsetDirection( dir ) {\n\n\t\t// dir is assumed to be normalized\n\n\t\tif ( dir.y > 0.99999 ) {\n\n\t\t\tthis.quaternion.set( 0, 0, 0, 1 );\n\n\t\t} else if ( dir.y < - 0.99999 ) {\n\n\t\t\tthis.quaternion.set( 1, 0, 0, 0 );\n\n\t\t} else {\n\n\t\t\t_axis.set( dir.z, 0, - dir.x ).normalize();\n\n\t\t\tconst radians = Math.acos( dir.y );\n\n\t\t\tthis.quaternion.setFromAxisAngle( _axis, radians );\n\n\t\t}\n\n\t}\n\n\tsetLength( length, headLength = length * 0.2, headWidth = headLength * 0.2 ) {\n\n\t\tthis.line.scale.set( 1, Math.max( 0.0001, length - headLength ), 1 ); // see #17458\n\t\tthis.line.updateMatrix();\n\n\t\tthis.cone.scale.set( headWidth, headLength, headWidth );\n\t\tthis.cone.position.y = length;\n\t\tthis.cone.updateMatrix();\n\n\t}\n\n\tsetColor( color ) {\n\n\t\tthis.line.material.color.set( color );\n\t\tthis.cone.material.color.set( color );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source, false );\n\n\t\tthis.line.copy( source.line );\n\t\tthis.cone.copy( source.cone );\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.line.geometry.dispose();\n\t\tthis.line.material.dispose();\n\t\tthis.cone.geometry.dispose();\n\t\tthis.cone.material.dispose();\n\n\t}\n\n}\n\nclass AxesHelper extends LineSegments {\n\n\tconstructor( size = 1 ) {\n\n\t\tconst vertices = [\n\t\t\t0, 0, 0,\tsize, 0, 0,\n\t\t\t0, 0, 0,\t0, size, 0,\n\t\t\t0, 0, 0,\t0, 0, size\n\t\t];\n\n\t\tconst colors = [\n\t\t\t1, 0, 0,\t1, 0.6, 0,\n\t\t\t0, 1, 0,\t0.6, 1, 0,\n\t\t\t0, 0, 1,\t0, 0.6, 1\n\t\t];\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.type = 'AxesHelper';\n\n\t}\n\n\tsetColors( xAxisColor, yAxisColor, zAxisColor ) {\n\n\t\tconst color = new Color();\n\t\tconst array = this.geometry.attributes.color.array;\n\n\t\tcolor.set( xAxisColor );\n\t\tcolor.toArray( array, 0 );\n\t\tcolor.toArray( array, 3 );\n\n\t\tcolor.set( yAxisColor );\n\t\tcolor.toArray( array, 6 );\n\t\tcolor.toArray( array, 9 );\n\n\t\tcolor.set( zAxisColor );\n\t\tcolor.toArray( array, 12 );\n\t\tcolor.toArray( array, 15 );\n\n\t\tthis.geometry.attributes.color.needsUpdate = true;\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\nclass ShapePath {\n\n\tconstructor() {\n\n\t\tthis.type = 'ShapePath';\n\n\t\tthis.color = new Color();\n\n\t\tthis.subPaths = [];\n\t\tthis.currentPath = null;\n\n\t}\n\n\tmoveTo( x, y ) {\n\n\t\tthis.currentPath = new Path();\n\t\tthis.subPaths.push( this.currentPath );\n\t\tthis.currentPath.moveTo( x, y );\n\n\t\treturn this;\n\n\t}\n\n\tlineTo( x, y ) {\n\n\t\tthis.currentPath.lineTo( x, y );\n\n\t\treturn this;\n\n\t}\n\n\tquadraticCurveTo( aCPx, aCPy, aX, aY ) {\n\n\t\tthis.currentPath.quadraticCurveTo( aCPx, aCPy, aX, aY );\n\n\t\treturn this;\n\n\t}\n\n\tbezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tthis.currentPath.bezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY );\n\n\t\treturn this;\n\n\t}\n\n\tsplineThru( pts ) {\n\n\t\tthis.currentPath.splineThru( pts );\n\n\t\treturn this;\n\n\t}\n\n\ttoShapes( isCCW ) {\n\n\t\tfunction toShapesNoHoles( inSubpaths ) {\n\n\t\t\tconst shapes = [];\n\n\t\t\tfor ( let i = 0, l = inSubpaths.length; i < l; i ++ ) {\n\n\t\t\t\tconst tmpPath = inSubpaths[ i ];\n\n\t\t\t\tconst tmpShape = new Shape();\n\t\t\t\ttmpShape.curves = tmpPath.curves;\n\n\t\t\t\tshapes.push( tmpShape );\n\n\t\t\t}\n\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tfunction isPointInsidePolygon( inPt, inPolygon ) {\n\n\t\t\tconst polyLen = inPolygon.length;\n\n\t\t\t// inPt on polygon contour => immediate success    or\n\t\t\t// toggling of inside/outside at every single! intersection point of an edge\n\t\t\t//  with the horizontal line through inPt, left of inPt\n\t\t\t//  not counting lowerY endpoints of edges and whole edges on that line\n\t\t\tlet inside = false;\n\t\t\tfor ( let p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\n\n\t\t\t\tlet edgeLowPt = inPolygon[ p ];\n\t\t\t\tlet edgeHighPt = inPolygon[ q ];\n\n\t\t\t\tlet edgeDx = edgeHighPt.x - edgeLowPt.x;\n\t\t\t\tlet edgeDy = edgeHighPt.y - edgeLowPt.y;\n\n\t\t\t\tif ( Math.abs( edgeDy ) > Number.EPSILON ) {\n\n\t\t\t\t\t// not parallel\n\t\t\t\t\tif ( edgeDy < 0 ) {\n\n\t\t\t\t\t\tedgeLowPt = inPolygon[ q ]; edgeDx = - edgeDx;\n\t\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\n\n\t\t\t\t\tif ( inPt.y === edgeLowPt.y ) {\n\n\t\t\t\t\t\tif ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\n\t\t\t\t\t\tif ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\n\t\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// parallel or collinear\n\t\t\t\t\tif ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\n\t\t\t\t\t// edge lies on the same horizontal line as inPt\n\t\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\n\t\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\n\t\t\t\t\t// continue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn\tinside;\n\n\t\t}\n\n\t\tconst isClockWise = ShapeUtils.isClockWise;\n\n\t\tconst subPaths = this.subPaths;\n\t\tif ( subPaths.length === 0 ) return [];\n\n\t\tlet solid, tmpPath, tmpShape;\n\t\tconst shapes = [];\n\n\t\tif ( subPaths.length === 1 ) {\n\n\t\t\ttmpPath = subPaths[ 0 ];\n\t\t\ttmpShape = new Shape();\n\t\t\ttmpShape.curves = tmpPath.curves;\n\t\t\tshapes.push( tmpShape );\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tlet holesFirst = ! isClockWise( subPaths[ 0 ].getPoints() );\n\t\tholesFirst = isCCW ? ! holesFirst : holesFirst;\n\n\t\t// console.log(\"Holes first\", holesFirst);\n\n\t\tconst betterShapeHoles = [];\n\t\tconst newShapes = [];\n\t\tlet newShapeHoles = [];\n\t\tlet mainIdx = 0;\n\t\tlet tmpPoints;\n\n\t\tnewShapes[ mainIdx ] = undefined;\n\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\tfor ( let i = 0, l = subPaths.length; i < l; i ++ ) {\n\n\t\t\ttmpPath = subPaths[ i ];\n\t\t\ttmpPoints = tmpPath.getPoints();\n\t\t\tsolid = isClockWise( tmpPoints );\n\t\t\tsolid = isCCW ? ! solid : solid;\n\n\t\t\tif ( solid ) {\n\n\t\t\t\tif ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\n\n\t\t\t\tnewShapes[ mainIdx ] = { s: new Shape(), p: tmpPoints };\n\t\t\t\tnewShapes[ mainIdx ].s.curves = tmpPath.curves;\n\n\t\t\t\tif ( holesFirst )\tmainIdx ++;\n\t\t\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\t\t\t//console.log('cw', i);\n\n\t\t\t} else {\n\n\t\t\t\tnewShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\n\n\t\t\t\t//console.log('ccw', i);\n\n\t\t\t}\n\n\t\t}\n\n\t\t// only Holes? -> probably all Shapes with wrong orientation\n\t\tif ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\tif ( newShapes.length > 1 ) {\n\n\t\t\tlet ambiguous = false;\n\t\t\tlet toChange = 0;\n\n\t\t\tfor ( let sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tbetterShapeHoles[ sIdx ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( let sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tconst sho = newShapeHoles[ sIdx ];\n\n\t\t\t\tfor ( let hIdx = 0; hIdx < sho.length; hIdx ++ ) {\n\n\t\t\t\t\tconst ho = sho[ hIdx ];\n\t\t\t\t\tlet hole_unassigned = true;\n\n\t\t\t\t\tfor ( let s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\n\n\t\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\n\n\t\t\t\t\t\t\tif ( sIdx !== s2Idx )\ttoChange ++;\n\n\t\t\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\t\t\thole_unassigned = false;\n\t\t\t\t\t\t\t\tbetterShapeHoles[ s2Idx ].push( ho );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tambiguous = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\tbetterShapeHoles[ sIdx ].push( ho );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( toChange > 0 && ambiguous === false ) {\n\n\t\t\t\tnewShapeHoles = betterShapeHoles;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet tmpHoles;\n\n\t\tfor ( let i = 0, il = newShapes.length; i < il; i ++ ) {\n\n\t\t\ttmpShape = newShapes[ i ].s;\n\t\t\tshapes.push( tmpShape );\n\t\t\ttmpHoles = newShapeHoles[ i ];\n\n\t\t\tfor ( let j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\n\n\t\t\t\ttmpShape.holes.push( tmpHoles[ j ].h );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//console.log(\"shape\", shapes);\n\n\t\treturn shapes;\n\n\t}\n\n}\n\n// Fast Half Float Conversions, http://www.fox-toolkit.org/ftp/fasthalffloatconversion.pdf\n\nconst _tables = /*@__PURE__*/ _generateTables();\n\nfunction _generateTables() {\n\n\t// float32 to float16 helpers\n\n\tconst buffer = new ArrayBuffer( 4 );\n\tconst floatView = new Float32Array( buffer );\n\tconst uint32View = new Uint32Array( buffer );\n\n\tconst baseTable = new Uint32Array( 512 );\n\tconst shiftTable = new Uint32Array( 512 );\n\n\tfor ( let i = 0; i < 256; ++ i ) {\n\n\t\tconst e = i - 127;\n\n\t\t// very small number (0, -0)\n\n\t\tif ( e < - 27 ) {\n\n\t\t\tbaseTable[ i ] = 0x0000;\n\t\t\tbaseTable[ i | 0x100 ] = 0x8000;\n\t\t\tshiftTable[ i ] = 24;\n\t\t\tshiftTable[ i | 0x100 ] = 24;\n\n\t\t\t// small number (denorm)\n\n\t\t} else if ( e < - 14 ) {\n\n\t\t\tbaseTable[ i ] = 0x0400 >> ( - e - 14 );\n\t\t\tbaseTable[ i | 0x100 ] = ( 0x0400 >> ( - e - 14 ) ) | 0x8000;\n\t\t\tshiftTable[ i ] = - e - 1;\n\t\t\tshiftTable[ i | 0x100 ] = - e - 1;\n\n\t\t\t// normal number\n\n\t\t} else if ( e <= 15 ) {\n\n\t\t\tbaseTable[ i ] = ( e + 15 ) << 10;\n\t\t\tbaseTable[ i | 0x100 ] = ( ( e + 15 ) << 10 ) | 0x8000;\n\t\t\tshiftTable[ i ] = 13;\n\t\t\tshiftTable[ i | 0x100 ] = 13;\n\n\t\t\t// large number (Infinity, -Infinity)\n\n\t\t} else if ( e < 128 ) {\n\n\t\t\tbaseTable[ i ] = 0x7c00;\n\t\t\tbaseTable[ i | 0x100 ] = 0xfc00;\n\t\t\tshiftTable[ i ] = 24;\n\t\t\tshiftTable[ i | 0x100 ] = 24;\n\n\t\t\t// stay (NaN, Infinity, -Infinity)\n\n\t\t} else {\n\n\t\t\tbaseTable[ i ] = 0x7c00;\n\t\t\tbaseTable[ i | 0x100 ] = 0xfc00;\n\t\t\tshiftTable[ i ] = 13;\n\t\t\tshiftTable[ i | 0x100 ] = 13;\n\n\t\t}\n\n\t}\n\n\t// float16 to float32 helpers\n\n\tconst mantissaTable = new Uint32Array( 2048 );\n\tconst exponentTable = new Uint32Array( 64 );\n\tconst offsetTable = new Uint32Array( 64 );\n\n\tfor ( let i = 1; i < 1024; ++ i ) {\n\n\t\tlet m = i << 13; // zero pad mantissa bits\n\t\tlet e = 0; // zero exponent\n\n\t\t// normalized\n\t\twhile ( ( m & 0x00800000 ) === 0 ) {\n\n\t\t\tm <<= 1;\n\t\t\te -= 0x00800000; // decrement exponent\n\n\t\t}\n\n\t\tm &= ~ 0x00800000; // clear leading 1 bit\n\t\te += 0x38800000; // adjust bias\n\n\t\tmantissaTable[ i ] = m | e;\n\n\t}\n\n\tfor ( let i = 1024; i < 2048; ++ i ) {\n\n\t\tmantissaTable[ i ] = 0x38000000 + ( ( i - 1024 ) << 13 );\n\n\t}\n\n\tfor ( let i = 1; i < 31; ++ i ) {\n\n\t\texponentTable[ i ] = i << 23;\n\n\t}\n\n\texponentTable[ 31 ] = 0x47800000;\n\texponentTable[ 32 ] = 0x80000000;\n\n\tfor ( let i = 33; i < 63; ++ i ) {\n\n\t\texponentTable[ i ] = 0x80000000 + ( ( i - 32 ) << 23 );\n\n\t}\n\n\texponentTable[ 63 ] = 0xc7800000;\n\n\tfor ( let i = 1; i < 64; ++ i ) {\n\n\t\tif ( i !== 32 ) {\n\n\t\t\toffsetTable[ i ] = 1024;\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tfloatView: floatView,\n\t\tuint32View: uint32View,\n\t\tbaseTable: baseTable,\n\t\tshiftTable: shiftTable,\n\t\tmantissaTable: mantissaTable,\n\t\texponentTable: exponentTable,\n\t\toffsetTable: offsetTable\n\t};\n\n}\n\n// float32 to float16\n\nfunction toHalfFloat( val ) {\n\n\tif ( Math.abs( val ) > 65504 ) console.warn( 'THREE.DataUtils.toHalfFloat(): Value out of range.' );\n\n\tval = clamp( val, - 65504, 65504 );\n\n\t_tables.floatView[ 0 ] = val;\n\tconst f = _tables.uint32View[ 0 ];\n\tconst e = ( f >> 23 ) & 0x1ff;\n\treturn _tables.baseTable[ e ] + ( ( f & 0x007fffff ) >> _tables.shiftTable[ e ] );\n\n}\n\n// float16 to float32\n\nfunction fromHalfFloat( val ) {\n\n\tconst m = val >> 10;\n\t_tables.uint32View[ 0 ] = _tables.mantissaTable[ _tables.offsetTable[ m ] + ( val & 0x3ff ) ] + _tables.exponentTable[ m ];\n\treturn _tables.floatView[ 0 ];\n\n}\n\nvar DataUtils = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\ttoHalfFloat: toHalfFloat,\n\tfromHalfFloat: fromHalfFloat\n});\n\n// r134, d65e0af06644fe5a84a6fc0e372f4318f95a04c0\n\nfunction ImmediateRenderObject() {\n\n\tconsole.error( 'THREE.ImmediateRenderObject has been removed.' );\n\n}\n\n// r138, 48b05d3500acc084df50be9b4c90781ad9b8cb17\n\nclass WebGLMultisampleRenderTarget extends WebGLRenderTarget {\n\n\tconstructor( width, height, options ) {\n\n\t\tconsole.error( 'THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the \"samples\" property to greater 0 to enable multisampling.' );\n\t\tsuper( width, height, options );\n\t\tthis.samples = 4;\n\n\t}\n\n}\n\n// r138, f9cd9cab03b7b64244e304900a3a2eeaa3a588ce\n\nclass DataTexture2DArray extends DataArrayTexture {\n\n\tconstructor( data, width, height, depth ) {\n\n\t\tconsole.warn( 'THREE.DataTexture2DArray has been renamed to DataArrayTexture.' );\n\t\tsuper( data, width, height, depth );\n\n\t}\n\n}\n\n// r138, f9cd9cab03b7b64244e304900a3a2eeaa3a588ce\n\nclass DataTexture3D extends Data3DTexture {\n\n\tconstructor( data, width, height, depth ) {\n\n\t\tconsole.warn( 'THREE.DataTexture3D has been renamed to Data3DTexture.' );\n\t\tsuper( data, width, height, depth );\n\n\t}\n\n}\n\n// r144\n\nclass BoxBufferGeometry extends BoxGeometry {\n\n\tconstructor( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\t\tconsole.warn( 'THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry.' );\n\t\tsuper( width, height, depth, widthSegments, heightSegments, depthSegments );\n\n\n\t}\n\n}\n\n// r144\n\nclass CapsuleBufferGeometry extends CapsuleGeometry {\n\n\tconstructor( radius, length, capSegments, radialSegments ) {\n\n\t\tconsole.warn( 'THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry.' );\n\t\tsuper( radius, length, capSegments, radialSegments );\n\n\t}\n\n}\n\n// r144\n\nclass CircleBufferGeometry extends CircleGeometry {\n\n\tconstructor( radius, segments, thetaStart, thetaLength ) {\n\n\t\tconsole.warn( 'THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry.' );\n\t\tsuper( radius, segments, thetaStart, thetaLength );\n\n\t}\n\n}\n\n// r144\n\nclass ConeBufferGeometry extends ConeGeometry {\n\n\tconstructor( radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\t\tconsole.warn( 'THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry.' );\n\t\tsuper( radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\n\n\t}\n\n}\n\n// r144\n\nclass CylinderBufferGeometry extends CylinderGeometry {\n\n\tconstructor( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\t\tconsole.warn( 'THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry.' );\n\t\tsuper( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\n\n\t}\n\n}\n\n// r144\n\nclass DodecahedronBufferGeometry extends DodecahedronGeometry {\n\n\tconstructor( radius, detail ) {\n\n\t\tconsole.warn( 'THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry.' );\n\t\tsuper( radius, detail );\n\n\t}\n\n}\n\n// r144\n\nclass ExtrudeBufferGeometry extends ExtrudeGeometry {\n\n\tconstructor( shapes, options ) {\n\n\t\tconsole.warn( 'THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry.' );\n\t\tsuper( shapes, options );\n\n\t}\n\n}\n\n// r144\n\nclass IcosahedronBufferGeometry extends IcosahedronGeometry {\n\n\tconstructor( radius, detail ) {\n\n\t\tconsole.warn( 'THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry.' );\n\t\tsuper( radius, detail );\n\n\t}\n\n}\n\n// r144\n\nclass LatheBufferGeometry extends LatheGeometry {\n\n\tconstructor( points, segments, phiStart, phiLength ) {\n\n\t\tconsole.warn( 'THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry.' );\n\t\tsuper( points, segments, phiStart, phiLength );\n\n\t}\n\n}\n\n// r144\n\nclass OctahedronBufferGeometry extends OctahedronGeometry {\n\n\tconstructor( radius, detail ) {\n\n\t\tconsole.warn( 'THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry.' );\n\t\tsuper( radius, detail );\n\n\t}\n\n}\n\n// r144\n\nclass PlaneBufferGeometry extends PlaneGeometry {\n\n\tconstructor( width, height, widthSegments, heightSegments ) {\n\n\t\tconsole.warn( 'THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry.' );\n\t\tsuper( width, height, widthSegments, heightSegments );\n\n\t}\n\n}\n\n// r144\n\nclass PolyhedronBufferGeometry extends PolyhedronGeometry {\n\n\tconstructor( vertices, indices, radius, detail ) {\n\n\t\tconsole.warn( 'THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry.' );\n\t\tsuper( vertices, indices, radius, detail );\n\n\t}\n\n}\n\n// r144\n\nclass RingBufferGeometry extends RingGeometry {\n\n\tconstructor( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\n\n\t\tconsole.warn( 'THREE.RingBufferGeometry has been renamed to THREE.RingGeometry.' );\n\t\tsuper( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength );\n\n\t}\n\n}\n\n// r144\n\nclass ShapeBufferGeometry extends ShapeGeometry {\n\n\tconstructor( shapes, curveSegments ) {\n\n\t\tconsole.warn( 'THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry.' );\n\t\tsuper( shapes, curveSegments );\n\n\t}\n\n}\n\n// r144\n\nclass SphereBufferGeometry extends SphereGeometry {\n\n\tconstructor( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\n\n\t\tconsole.warn( 'THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry.' );\n\t\tsuper( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength );\n\n\t}\n\n}\n\n// r144\n\nclass TetrahedronBufferGeometry extends TetrahedronGeometry {\n\n\tconstructor( radius, detail ) {\n\n\t\tconsole.warn( 'THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry.' );\n\t\tsuper( radius, detail );\n\n\t}\n\n}\n\n// r144\n\nclass TorusBufferGeometry extends TorusGeometry {\n\n\tconstructor( radius, tube, radialSegments, tubularSegments, arc ) {\n\n\t\tconsole.warn( 'THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry.' );\n\t\tsuper( radius, tube, radialSegments, tubularSegments, arc );\n\n\t}\n\n}\n\n// r144\n\nclass TorusKnotBufferGeometry extends TorusKnotGeometry {\n\n\tconstructor( radius, tube, tubularSegments, radialSegments, p, q ) {\n\n\t\tconsole.warn( 'THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry.' );\n\t\tsuper( radius, tube, tubularSegments, radialSegments, p, q );\n\n\t}\n\n}\n\n// r144\n\nclass TubeBufferGeometry extends TubeGeometry {\n\n\tconstructor( path, tubularSegments, radius, radialSegments, closed ) {\n\n\t\tconsole.warn( 'THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry.' );\n\t\tsuper( path, tubularSegments, radius, radialSegments, closed );\n\n\t}\n\n}\n\nif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'register', { detail: {\n\t\trevision: REVISION,\n\t} } ) );\n\n}\n\nif ( typeof window !== 'undefined' ) {\n\n\tif ( window.__THREE__ ) {\n\n\t\tconsole.warn( 'WARNING: Multiple instances of Three.js being imported.' );\n\n\t} else {\n\n\t\twindow.__THREE__ = REVISION;\n\n\t}\n\n}\n\nexport { ACESFilmicToneMapping, AddEquation, AddOperation, AdditiveAnimationBlendMode, AdditiveBlending, AlphaFormat, AlwaysDepth, AlwaysStencilFunc, AmbientLight, AmbientLightProbe, AnimationClip, AnimationLoader, AnimationMixer, AnimationObjectGroup, AnimationUtils, ArcCurve, ArrayCamera, ArrowHelper, Audio, AudioAnalyser, AudioContext, AudioListener, AudioLoader, AxesHelper, BackSide, BasicDepthPacking, BasicShadowMap, Bone, BooleanKeyframeTrack, Box2, Box3, Box3Helper, BoxBufferGeometry, BoxGeometry, BoxHelper, BufferAttribute, BufferGeometry, BufferGeometryLoader, ByteType, Cache, Camera, CameraHelper, CanvasTexture, CapsuleBufferGeometry, CapsuleGeometry, CatmullRomCurve3, CineonToneMapping, CircleBufferGeometry, CircleGeometry, ClampToEdgeWrapping, Clock, Color, ColorKeyframeTrack, ColorManagement, CompressedArrayTexture, CompressedTexture, CompressedTextureLoader, ConeBufferGeometry, ConeGeometry, CubeCamera, CubeReflectionMapping, CubeRefractionMapping, CubeTexture, CubeTextureLoader, CubeUVReflectionMapping, CubicBezierCurve, CubicBezierCurve3, CubicInterpolant, CullFaceBack, CullFaceFront, CullFaceFrontBack, CullFaceNone, Curve, CurvePath, CustomBlending, CustomToneMapping, CylinderBufferGeometry, CylinderGeometry, Cylindrical, Data3DTexture, DataArrayTexture, DataTexture, DataTexture2DArray, DataTexture3D, DataTextureLoader, DataUtils, DecrementStencilOp, DecrementWrapStencilOp, DefaultLoadingManager, DepthFormat, DepthStencilFormat, DepthTexture, DirectionalLight, DirectionalLightHelper, DiscreteInterpolant, DodecahedronBufferGeometry, DodecahedronGeometry, DoubleSide, DstAlphaFactor, DstColorFactor, DynamicCopyUsage, DynamicDrawUsage, DynamicReadUsage, EdgesGeometry, EllipseCurve, EqualDepth, EqualStencilFunc, EquirectangularReflectionMapping, EquirectangularRefractionMapping, Euler, EventDispatcher, ExtrudeBufferGeometry, ExtrudeGeometry, FileLoader, Float16BufferAttribute, Float32BufferAttribute, Float64BufferAttribute, FloatType, Fog, FogExp2, FramebufferTexture, FrontSide, Frustum, GLBufferAttribute, GLSL1, GLSL3, GreaterDepth, GreaterEqualDepth, GreaterEqualStencilFunc, GreaterStencilFunc, GridHelper, Group, HalfFloatType, HemisphereLight, HemisphereLightHelper, HemisphereLightProbe, IcosahedronBufferGeometry, IcosahedronGeometry, ImageBitmapLoader, ImageLoader, ImageUtils, ImmediateRenderObject, IncrementStencilOp, IncrementWrapStencilOp, InstancedBufferAttribute, InstancedBufferGeometry, InstancedInterleavedBuffer, InstancedMesh, Int16BufferAttribute, Int32BufferAttribute, Int8BufferAttribute, IntType, InterleavedBuffer, InterleavedBufferAttribute, Interpolant, InterpolateDiscrete, InterpolateLinear, InterpolateSmooth, InvertStencilOp, KeepStencilOp, KeyframeTrack, LOD, LatheBufferGeometry, LatheGeometry, Layers, LessDepth, LessEqualDepth, LessEqualStencilFunc, LessStencilFunc, Light, LightProbe, Line, Line3, LineBasicMaterial, LineCurve, LineCurve3, LineDashedMaterial, LineLoop, LineSegments, LinearEncoding, LinearFilter, LinearInterpolant, LinearMipMapLinearFilter, LinearMipMapNearestFilter, LinearMipmapLinearFilter, LinearMipmapNearestFilter, LinearSRGBColorSpace, LinearToneMapping, Loader, LoaderUtils, LoadingManager, LoopOnce, LoopPingPong, LoopRepeat, LuminanceAlphaFormat, LuminanceFormat, MOUSE, Material, MaterialLoader, MathUtils, Matrix3, Matrix4, MaxEquation, Mesh, MeshBasicMaterial, MeshDepthMaterial, MeshDistanceMaterial, MeshLambertMaterial, MeshMatcapMaterial, MeshNormalMaterial, MeshPhongMaterial, MeshPhysicalMaterial, MeshStandardMaterial, MeshToonMaterial, MinEquation, MirroredRepeatWrapping, MixOperation, MultiplyBlending, MultiplyOperation, NearestFilter, NearestMipMapLinearFilter, NearestMipMapNearestFilter, NearestMipmapLinearFilter, NearestMipmapNearestFilter, NeverDepth, NeverStencilFunc, NoBlending, NoColorSpace, NoToneMapping, NormalAnimationBlendMode, NormalBlending, NotEqualDepth, NotEqualStencilFunc, NumberKeyframeTrack, Object3D, ObjectLoader, ObjectSpaceNormalMap, OctahedronBufferGeometry, OctahedronGeometry, OneFactor, OneMinusDstAlphaFactor, OneMinusDstColorFactor, OneMinusSrcAlphaFactor, OneMinusSrcColorFactor, OrthographicCamera, PCFShadowMap, PCFSoftShadowMap, PMREMGenerator, Path, PerspectiveCamera, Plane, PlaneBufferGeometry, PlaneGeometry, PlaneHelper, PointLight, PointLightHelper, Points, PointsMaterial, PolarGridHelper, PolyhedronBufferGeometry, PolyhedronGeometry, PositionalAudio, PropertyBinding, PropertyMixer, QuadraticBezierCurve, QuadraticBezierCurve3, Quaternion, QuaternionKeyframeTrack, QuaternionLinearInterpolant, REVISION, RGBADepthPacking, RGBAFormat, RGBAIntegerFormat, RGBA_ASTC_10x10_Format, RGBA_ASTC_10x5_Format, RGBA_ASTC_10x6_Format, RGBA_ASTC_10x8_Format, RGBA_ASTC_12x10_Format, RGBA_ASTC_12x12_Format, RGBA_ASTC_4x4_Format, RGBA_ASTC_5x4_Format, RGBA_ASTC_5x5_Format, RGBA_ASTC_6x5_Format, RGBA_ASTC_6x6_Format, RGBA_ASTC_8x5_Format, RGBA_ASTC_8x6_Format, RGBA_ASTC_8x8_Format, RGBA_BPTC_Format, RGBA_ETC2_EAC_Format, RGBA_PVRTC_2BPPV1_Format, RGBA_PVRTC_4BPPV1_Format, RGBA_S3TC_DXT1_Format, RGBA_S3TC_DXT3_Format, RGBA_S3TC_DXT5_Format, RGBFormat, RGB_ETC1_Format, RGB_ETC2_Format, RGB_PVRTC_2BPPV1_Format, RGB_PVRTC_4BPPV1_Format, RGB_S3TC_DXT1_Format, RGFormat, RGIntegerFormat, RawShaderMaterial, Ray, Raycaster, RectAreaLight, RedFormat, RedIntegerFormat, ReinhardToneMapping, RepeatWrapping, ReplaceStencilOp, ReverseSubtractEquation, RingBufferGeometry, RingGeometry, SRGBColorSpace, Scene, ShaderChunk, ShaderLib, ShaderMaterial, ShadowMaterial, Shape, ShapeBufferGeometry, ShapeGeometry, ShapePath, ShapeUtils, ShortType, Skeleton, SkeletonHelper, SkinnedMesh, Source, Sphere, SphereBufferGeometry, SphereGeometry, Spherical, SphericalHarmonics3, SplineCurve, SpotLight, SpotLightHelper, Sprite, SpriteMaterial, SrcAlphaFactor, SrcAlphaSaturateFactor, SrcColorFactor, StaticCopyUsage, StaticDrawUsage, StaticReadUsage, StereoCamera, StreamCopyUsage, StreamDrawUsage, StreamReadUsage, StringKeyframeTrack, SubtractEquation, SubtractiveBlending, TOUCH, TangentSpaceNormalMap, TetrahedronBufferGeometry, TetrahedronGeometry, Texture, TextureLoader, TorusBufferGeometry, TorusGeometry, TorusKnotBufferGeometry, TorusKnotGeometry, Triangle, TriangleFanDrawMode, TriangleStripDrawMode, TrianglesDrawMode, TubeBufferGeometry, TubeGeometry, TwoPassDoubleSide, UVMapping, Uint16BufferAttribute, Uint32BufferAttribute, Uint8BufferAttribute, Uint8ClampedBufferAttribute, Uniform, UniformsGroup, UniformsLib, UniformsUtils, UnsignedByteType, UnsignedInt248Type, UnsignedIntType, UnsignedShort4444Type, UnsignedShort5551Type, UnsignedShortType, VSMShadowMap, Vector2, Vector3, Vector4, VectorKeyframeTrack, VideoTexture, WebGL1Renderer, WebGL3DRenderTarget, WebGLArrayRenderTarget, WebGLCubeRenderTarget, WebGLMultipleRenderTargets, WebGLMultisampleRenderTarget, WebGLRenderTarget, WebGLRenderer, WebGLUtils, WireframeGeometry, WrapAroundEnding, ZeroCurvatureEnding, ZeroFactor, ZeroSlopeEnding, ZeroStencilOp, _SRGBAFormat, sRGBEncoding };\n",";(function() {\r\n  'use strict'\r\n\r\n  var root = this\r\n\r\n  var has_require = typeof require !== 'undefined'\r\n\r\n  var THREE = root.THREE || (has_require && require('three'))\r\n  if (!THREE) throw new Error('MeshLine requires three.js')\r\n\r\n  class MeshLine extends THREE.BufferGeometry {\r\n    constructor()\r\n    {\r\n      super();\r\n      this.isMeshLine = true;\r\n      this.type = 'MeshLine'\r\n\r\n      this.positions = []\r\n\r\n      this.previous = []\r\n      this.next = []\r\n      this.side = []\r\n      this.width = []\r\n      this.indices_array = []\r\n      this.uvs = []\r\n      this.counters = []\r\n      this._points = []\r\n      this._geom = null\r\n\r\n      this.widthCallback = null\r\n\r\n      // Used to raycast\r\n      this.matrixWorld = new THREE.Matrix4()\r\n\r\n      Object.defineProperties(this, {\r\n        // this is now a bufferGeometry\r\n        // add getter to support previous api\r\n        geometry: {\r\n          enumerable: true,\r\n          get: function() {\r\n            return this\r\n          },\r\n        },\r\n        geom: {\r\n          enumerable: true,\r\n          get: function() {\r\n            return this._geom\r\n          },\r\n          set: function(value) {\r\n            this.setGeometry(value, this.widthCallback)\r\n          },\r\n        },\r\n        // for declaritive architectures\r\n        // to return the same value that sets the points\r\n        // eg. this.points = points\r\n        // console.log(this.points) -> points\r\n        points: {\r\n          enumerable: true,\r\n          get: function() {\r\n            return this._points\r\n          },\r\n          set: function(value) {\r\n            this.setPoints(value, this.widthCallback)\r\n          },\r\n        },\r\n      })\r\n    }\r\n  }\r\n\r\n  MeshLine.prototype.setMatrixWorld = function(matrixWorld) {\r\n    this.matrixWorld = matrixWorld\r\n  }\r\n\r\n  // setting via a geometry is rather superfluous\r\n  // as you're creating a unecessary geometry just to throw away\r\n  // but exists to support previous api\r\n  MeshLine.prototype.setGeometry = function(g, c) {\r\n\t\t// as the input geometry are mutated we store them\r\n\t\t// for later retreival when necessary (declaritive architectures)\r\n\t\tthis._geometry = g;\r\n        this.setPoints(g.getAttribute(\"position\").array, c);\r\n  }\r\n\r\n  MeshLine.prototype.setPoints = function(points, wcb) {\r\n\t\tif (!(points instanceof Float32Array) && !(points instanceof Array)) {\r\n\t\t\tconsole.error(\r\n\t\t\t\t\"ERROR: The BufferArray of points is not instancied correctly.\"\r\n\t\t\t);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// as the points are mutated we store them\r\n\t\t// for later retreival when necessary (declaritive architectures)\r\n\t\tthis._points = points;\r\n\t\tthis.widthCallback = wcb;\r\n\t\tthis.positions = [];\r\n\t\tthis.counters = [];\r\n\t\tif (points.length && points[0] instanceof THREE.Vector3) {\r\n\t\t\t// could transform Vector3 array into the array used below\r\n\t\t\t// but this approach will only loop through the array once\r\n\t\t\t// and is more performant\r\n\t\t\tfor (var j = 0; j < points.length; j++) {\r\n\t\t\t\tvar p = points[j];\r\n\t\t\t\tvar c = j / points.length;\r\n\t\t\t\tthis.positions.push(p.x, p.y, p.z);\r\n\t\t\t\tthis.positions.push(p.x, p.y, p.z);\r\n\t\t\t\tthis.counters.push(c);\r\n\t\t\t\tthis.counters.push(c);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor (var j = 0; j < points.length; j += 3) {\r\n\t\t\t\tvar c = j / points.length;\r\n\t\t\t\tthis.positions.push(points[j], points[j + 1], points[j + 2]);\r\n\t\t\t\tthis.positions.push(points[j], points[j + 1], points[j + 2]);\r\n\t\t\t\tthis.counters.push(c);\r\n\t\t\t\tthis.counters.push(c);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.process();\r\n  }\r\n\r\n  function MeshLineRaycast(raycaster, intersects) {\r\n    var inverseMatrix = new THREE.Matrix4()\r\n    var ray = new THREE.Ray()\r\n    var sphere = new THREE.Sphere()\r\n    var interRay = new THREE.Vector3()\r\n    var geometry = this.geometry\r\n    // Checking boundingSphere distance to ray\r\n\r\n    if (!geometry.boundingSphere) geometry.computeBoundingSphere()\r\n    sphere.copy(geometry.boundingSphere)\r\n    sphere.applyMatrix4(this.matrixWorld)\r\n\r\n    if (raycaster.ray.intersectSphere(sphere, interRay) === false) {\r\n      return\r\n    }\r\n\r\n    inverseMatrix.copy( this.matrixWorld ).invert();\r\n    ray.copy(raycaster.ray).applyMatrix4(inverseMatrix)\r\n\r\n    var vStart = new THREE.Vector3()\r\n    var vEnd = new THREE.Vector3()\r\n    var interSegment = new THREE.Vector3()\r\n    var step = this instanceof THREE.LineSegments ? 2 : 1\r\n    var index = geometry.index\r\n    var attributes = geometry.attributes\r\n\r\n    if (index !== null) {\r\n      var indices = index.array\r\n      var positions = attributes.position.array\r\n      var widths = attributes.width.array\r\n\r\n      for (var i = 0, l = indices.length - 1; i < l; i += step) {\r\n        var a = indices[i]\r\n        var b = indices[i + 1]\r\n\r\n        vStart.fromArray(positions, a * 3)\r\n        vEnd.fromArray(positions, b * 3)\r\n        var width = widths[Math.floor(i / 3)] !== undefined ? widths[Math.floor(i / 3)] : 1\r\n        var precision = raycaster.params.Line.threshold + (this.material.lineWidth * width) / 2\r\n        var precisionSq = precision * precision\r\n\r\n        var distSq = ray.distanceSqToSegment(vStart, vEnd, interRay, interSegment)\r\n\r\n        if (distSq > precisionSq) continue\r\n\r\n        interRay.applyMatrix4(this.matrixWorld) //Move back to world space for distance calculation\r\n\r\n        var distance = raycaster.ray.origin.distanceTo(interRay)\r\n\r\n        if (distance < raycaster.near || distance > raycaster.far) continue\r\n\r\n        intersects.push({\r\n          distance: distance,\r\n          // What do we want? intersection point on the ray or on the segment??\r\n          // point: raycaster.ray.at( distance ),\r\n          point: interSegment.clone().applyMatrix4(this.matrixWorld),\r\n          index: i,\r\n          face: null,\r\n          faceIndex: null,\r\n          object: this,\r\n        })\r\n        // make event only fire once\r\n        i = l\r\n      }\r\n    }\r\n  }\r\n  MeshLine.prototype.raycast = MeshLineRaycast\r\n  MeshLine.prototype.compareV3 = function(a, b) {\r\n    var aa = a * 6\r\n    var ab = b * 6\r\n    return (\r\n      this.positions[aa] === this.positions[ab] &&\r\n      this.positions[aa + 1] === this.positions[ab + 1] &&\r\n      this.positions[aa + 2] === this.positions[ab + 2]\r\n    )\r\n  }\r\n\r\n  MeshLine.prototype.copyV3 = function(a) {\r\n    var aa = a * 6\r\n    return [this.positions[aa], this.positions[aa + 1], this.positions[aa + 2]]\r\n  }\r\n\r\n  MeshLine.prototype.process = function() {\r\n    var l = this.positions.length / 6\r\n\r\n    this.previous = []\r\n    this.next = []\r\n    this.side = []\r\n    this.width = []\r\n    this.indices_array = []\r\n    this.uvs = []\r\n\r\n    var w\r\n\r\n    var v\r\n    // initial previous points\r\n    if (this.compareV3(0, l - 1)) {\r\n      v = this.copyV3(l - 2)\r\n    } else {\r\n      v = this.copyV3(0)\r\n    }\r\n    this.previous.push(v[0], v[1], v[2])\r\n    this.previous.push(v[0], v[1], v[2])\r\n\r\n    for (var j = 0; j < l; j++) {\r\n      // sides\r\n      this.side.push(1)\r\n      this.side.push(-1)\r\n\r\n      // widths\r\n      if (this.widthCallback) w = this.widthCallback(j / (l - 1))\r\n      else w = 1\r\n      this.width.push(w)\r\n      this.width.push(w)\r\n\r\n      // uvs\r\n      this.uvs.push(j / (l - 1), 0)\r\n      this.uvs.push(j / (l - 1), 1)\r\n\r\n      if (j < l - 1) {\r\n        // points previous to poisitions\r\n        v = this.copyV3(j)\r\n        this.previous.push(v[0], v[1], v[2])\r\n        this.previous.push(v[0], v[1], v[2])\r\n\r\n        // indices\r\n        var n = j * 2\r\n        this.indices_array.push(n, n + 1, n + 2)\r\n        this.indices_array.push(n + 2, n + 1, n + 3)\r\n      }\r\n      if (j > 0) {\r\n        // points after poisitions\r\n        v = this.copyV3(j)\r\n        this.next.push(v[0], v[1], v[2])\r\n        this.next.push(v[0], v[1], v[2])\r\n      }\r\n    }\r\n\r\n    // last next point\r\n    if (this.compareV3(l - 1, 0)) {\r\n      v = this.copyV3(1)\r\n    } else {\r\n      v = this.copyV3(l - 1)\r\n    }\r\n    this.next.push(v[0], v[1], v[2])\r\n    this.next.push(v[0], v[1], v[2])\r\n\r\n    // redefining the attribute seems to prevent range errors\r\n    // if the user sets a differing number of vertices\r\n    if (!this._attributes || this._attributes.position.count !== this.positions.length) {\r\n      this._attributes = {\r\n        position: new THREE.BufferAttribute(new Float32Array(this.positions), 3),\r\n        previous: new THREE.BufferAttribute(new Float32Array(this.previous), 3),\r\n        next: new THREE.BufferAttribute(new Float32Array(this.next), 3),\r\n        side: new THREE.BufferAttribute(new Float32Array(this.side), 1),\r\n        width: new THREE.BufferAttribute(new Float32Array(this.width), 1),\r\n        uv: new THREE.BufferAttribute(new Float32Array(this.uvs), 2),\r\n        index: new THREE.BufferAttribute(new Uint16Array(this.indices_array), 1),\r\n        counters: new THREE.BufferAttribute(new Float32Array(this.counters), 1),\r\n      }\r\n    } else {\r\n      this._attributes.position.copyArray(new Float32Array(this.positions))\r\n      this._attributes.position.needsUpdate = true\r\n      this._attributes.previous.copyArray(new Float32Array(this.previous))\r\n      this._attributes.previous.needsUpdate = true\r\n      this._attributes.next.copyArray(new Float32Array(this.next))\r\n      this._attributes.next.needsUpdate = true\r\n      this._attributes.side.copyArray(new Float32Array(this.side))\r\n      this._attributes.side.needsUpdate = true\r\n      this._attributes.width.copyArray(new Float32Array(this.width))\r\n      this._attributes.width.needsUpdate = true\r\n      this._attributes.uv.copyArray(new Float32Array(this.uvs))\r\n      this._attributes.uv.needsUpdate = true\r\n      this._attributes.index.copyArray(new Uint16Array(this.indices_array))\r\n      this._attributes.index.needsUpdate = true\r\n    }\r\n\r\n    this.setAttribute('position', this._attributes.position)\r\n    this.setAttribute('previous', this._attributes.previous)\r\n    this.setAttribute('next', this._attributes.next)\r\n    this.setAttribute('side', this._attributes.side)\r\n    this.setAttribute('width', this._attributes.width)\r\n    this.setAttribute('uv', this._attributes.uv)\r\n    this.setAttribute('counters', this._attributes.counters)\r\n\r\n    this.setIndex(this._attributes.index)\r\n\r\n    this.computeBoundingSphere()\r\n    this.computeBoundingBox()\r\n  }\r\n\r\n  function memcpy(src, srcOffset, dst, dstOffset, length) {\r\n    var i\r\n\r\n    src = src.subarray || src.slice ? src : src.buffer\r\n    dst = dst.subarray || dst.slice ? dst : dst.buffer\r\n\r\n    src = srcOffset\r\n      ? src.subarray\r\n        ? src.subarray(srcOffset, length && srcOffset + length)\r\n        : src.slice(srcOffset, length && srcOffset + length)\r\n      : src\r\n\r\n    if (dst.set) {\r\n      dst.set(src, dstOffset)\r\n    } else {\r\n      for (i = 0; i < src.length; i++) {\r\n        dst[i + dstOffset] = src[i]\r\n      }\r\n    }\r\n\r\n    return dst\r\n  }\r\n\r\n  /**\r\n   * Fast method to advance the line by one position.  The oldest position is removed.\r\n   * @param position\r\n   */\r\n  MeshLine.prototype.advance = function(position) {\r\n    var positions = this._attributes.position.array\r\n    var previous = this._attributes.previous.array\r\n    var next = this._attributes.next.array\r\n    var l = positions.length\r\n\r\n    // PREVIOUS\r\n    memcpy(positions, 0, previous, 0, l)\r\n\r\n    // POSITIONS\r\n    memcpy(positions, 6, positions, 0, l - 6)\r\n\r\n    positions[l - 6] = position.x\r\n    positions[l - 5] = position.y\r\n    positions[l - 4] = position.z\r\n    positions[l - 3] = position.x\r\n    positions[l - 2] = position.y\r\n    positions[l - 1] = position.z\r\n\r\n    // NEXT\r\n    memcpy(positions, 6, next, 0, l - 6)\r\n\r\n    next[l - 6] = position.x\r\n    next[l - 5] = position.y\r\n    next[l - 4] = position.z\r\n    next[l - 3] = position.x\r\n    next[l - 2] = position.y\r\n    next[l - 1] = position.z\r\n\r\n    this._attributes.position.needsUpdate = true\r\n    this._attributes.previous.needsUpdate = true\r\n    this._attributes.next.needsUpdate = true\r\n  }\r\n\r\n  THREE.ShaderChunk['meshline_vert'] = [\r\n    '',\r\n    THREE.ShaderChunk.logdepthbuf_pars_vertex,\r\n    THREE.ShaderChunk.fog_pars_vertex,\r\n    '',\r\n    'attribute vec3 previous;',\r\n    'attribute vec3 next;',\r\n    'attribute float side;',\r\n    'attribute float width;',\r\n    'attribute float counters;',\r\n    '',\r\n    'uniform vec2 resolution;',\r\n    'uniform float lineWidth;',\r\n    'uniform vec3 color;',\r\n    'uniform float opacity;',\r\n    'uniform float sizeAttenuation;',\r\n    '',\r\n    'varying vec2 vUV;',\r\n    'varying vec4 vColor;',\r\n    'varying float vCounters;',\r\n    '',\r\n    'vec2 fix( vec4 i, float aspect ) {',\r\n    '',\r\n    '    vec2 res = i.xy / i.w;',\r\n    '    res.x *= aspect;',\r\n    '\t vCounters = counters;',\r\n    '    return res;',\r\n    '',\r\n    '}',\r\n    '',\r\n    'void main() {',\r\n    '',\r\n    '    float aspect = resolution.x / resolution.y;',\r\n    '',\r\n    '    vColor = vec4( color, opacity );',\r\n    '    vUV = uv;',\r\n    '',\r\n    '    mat4 m = projectionMatrix * modelViewMatrix;',\r\n    '    vec4 finalPosition = m * vec4( position, 1.0 );',\r\n    '    vec4 prevPos = m * vec4( previous, 1.0 );',\r\n    '    vec4 nextPos = m * vec4( next, 1.0 );',\r\n    '',\r\n    '    vec2 currentP = fix( finalPosition, aspect );',\r\n    '    vec2 prevP = fix( prevPos, aspect );',\r\n    '    vec2 nextP = fix( nextPos, aspect );',\r\n    '',\r\n    '    float w = lineWidth * width;',\r\n    '',\r\n    '    vec2 dir;',\r\n    '    if( nextP == currentP ) dir = normalize( currentP - prevP );',\r\n    '    else if( prevP == currentP ) dir = normalize( nextP - currentP );',\r\n    '    else {',\r\n    '        vec2 dir1 = normalize( currentP - prevP );',\r\n    '        vec2 dir2 = normalize( nextP - currentP );',\r\n    '        dir = normalize( dir1 + dir2 );',\r\n    '',\r\n    '        vec2 perp = vec2( -dir1.y, dir1.x );',\r\n    '        vec2 miter = vec2( -dir.y, dir.x );',\r\n    '        //w = clamp( w / dot( miter, perp ), 0., 4. * lineWidth * width );',\r\n    '',\r\n    '    }',\r\n    '',\r\n    '    //vec2 normal = ( cross( vec3( dir, 0. ), vec3( 0., 0., 1. ) ) ).xy;',\r\n    '    vec4 normal = vec4( -dir.y, dir.x, 0., 1. );',\r\n    '    normal.xy *= .5 * w;',\r\n    '    normal *= projectionMatrix;',\r\n    '    if( sizeAttenuation == 0. ) {',\r\n    '        normal.xy *= finalPosition.w;',\r\n    '        normal.xy /= ( vec4( resolution, 0., 1. ) * projectionMatrix ).xy;',\r\n    '    }',\r\n    '',\r\n    '    finalPosition.xy += normal.xy * side;',\r\n    '',\r\n    '    gl_Position = finalPosition;',\r\n    '',\r\n    THREE.ShaderChunk.logdepthbuf_vertex,\r\n    THREE.ShaderChunk.fog_vertex && '    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );',\r\n    THREE.ShaderChunk.fog_vertex,\r\n    '}',\r\n  ].join('\\n')\r\n\r\n  THREE.ShaderChunk['meshline_frag'] = [\r\n    '',\r\n    THREE.ShaderChunk.fog_pars_fragment,\r\n    THREE.ShaderChunk.logdepthbuf_pars_fragment,\r\n    '',\r\n    'uniform sampler2D map;',\r\n    'uniform sampler2D alphaMap;',\r\n    'uniform float useMap;',\r\n    'uniform float useAlphaMap;',\r\n    'uniform float useDash;',\r\n    'uniform float dashArray;',\r\n    'uniform float dashOffset;',\r\n    'uniform float dashRatio;',\r\n    'uniform float visibility;',\r\n    'uniform float alphaTest;',\r\n    'uniform vec2 repeat;',\r\n    '',\r\n    'varying vec2 vUV;',\r\n    'varying vec4 vColor;',\r\n    'varying float vCounters;',\r\n    '',\r\n    'void main() {',\r\n    '',\r\n    THREE.ShaderChunk.logdepthbuf_fragment,\r\n    '',\r\n    '    vec4 c = vColor;',\r\n    '    if( useMap == 1. ) c *= texture2D( map, vUV * repeat );',\r\n    '    if( useAlphaMap == 1. ) c.a *= texture2D( alphaMap, vUV * repeat ).a;',\r\n    '    if( c.a < alphaTest ) discard;',\r\n    '    if( useDash == 1. ){',\r\n    '        c.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));',\r\n    '    }',\r\n    '    gl_FragColor = c;',\r\n    '    gl_FragColor.a *= step(vCounters, visibility);',\r\n    '',\r\n    THREE.ShaderChunk.fog_fragment,\r\n    '}',\r\n  ].join('\\n')\r\n\r\n  class MeshLineMaterial extends THREE.ShaderMaterial {\r\n    constructor(parameters)\r\n    {\r\n      super({\r\n        uniforms: Object.assign({}, THREE.UniformsLib.fog, {\r\n          lineWidth: { value: 1 },\r\n          map: { value: null },\r\n          useMap: { value: 0 },\r\n          alphaMap: { value: null },\r\n          useAlphaMap: { value: 0 },\r\n          color: { value: new THREE.Color(0xffffff) },\r\n          opacity: { value: 1 },\r\n          resolution: { value: new THREE.Vector2(1, 1) },\r\n          sizeAttenuation: { value: 1 },\r\n          dashArray: { value: 0 },\r\n          dashOffset: { value: 0 },\r\n          dashRatio: { value: 0.5 },\r\n          useDash: { value: 0 },\r\n          visibility: { value: 1 },\r\n          alphaTest: { value: 0 },\r\n          repeat: { value: new THREE.Vector2(1, 1) },\r\n        }),\r\n\r\n        vertexShader: THREE.ShaderChunk.meshline_vert,\r\n\r\n        fragmentShader: THREE.ShaderChunk.meshline_frag,\r\n      });\r\n      this.isMeshLineMaterial = true\r\n      this.type = 'MeshLineMaterial'\r\n\r\n      Object.defineProperties(this, {\r\n        lineWidth: {\r\n          enumerable: true,\r\n          get: function() {\r\n            return this.uniforms.lineWidth.value\r\n          },\r\n          set: function(value) {\r\n            this.uniforms.lineWidth.value = value\r\n          },\r\n        },\r\n        map: {\r\n          enumerable: true,\r\n          get: function() {\r\n            return this.uniforms.map.value\r\n          },\r\n          set: function(value) {\r\n            this.uniforms.map.value = value\r\n          },\r\n        },\r\n        useMap: {\r\n          enumerable: true,\r\n          get: function() {\r\n            return this.uniforms.useMap.value\r\n          },\r\n          set: function(value) {\r\n            this.uniforms.useMap.value = value\r\n          },\r\n        },\r\n        alphaMap: {\r\n          enumerable: true,\r\n          get: function() {\r\n            return this.uniforms.alphaMap.value\r\n          },\r\n          set: function(value) {\r\n            this.uniforms.alphaMap.value = value\r\n          },\r\n        },\r\n        useAlphaMap: {\r\n          enumerable: true,\r\n          get: function() {\r\n            return this.uniforms.useAlphaMap.value\r\n          },\r\n          set: function(value) {\r\n            this.uniforms.useAlphaMap.value = value\r\n          },\r\n        },\r\n        color: {\r\n          enumerable: true,\r\n          get: function() {\r\n            return this.uniforms.color.value\r\n          },\r\n          set: function(value) {\r\n            this.uniforms.color.value = value\r\n          },\r\n        },\r\n        opacity: {\r\n          enumerable: true,\r\n          get: function() {\r\n            return this.uniforms.opacity.value\r\n          },\r\n          set: function(value) {\r\n            this.uniforms.opacity.value = value\r\n          },\r\n        },\r\n        resolution: {\r\n          enumerable: true,\r\n          get: function() {\r\n            return this.uniforms.resolution.value\r\n          },\r\n          set: function(value) {\r\n            this.uniforms.resolution.value.copy(value)\r\n          },\r\n        },\r\n        sizeAttenuation: {\r\n          enumerable: true,\r\n          get: function() {\r\n            return this.uniforms.sizeAttenuation.value\r\n          },\r\n          set: function(value) {\r\n            this.uniforms.sizeAttenuation.value = value\r\n          },\r\n        },\r\n        dashArray: {\r\n          enumerable: true,\r\n          get: function() {\r\n            return this.uniforms.dashArray.value\r\n          },\r\n          set: function(value) {\r\n            this.uniforms.dashArray.value = value\r\n            this.useDash = value !== 0 ? 1 : 0\r\n          },\r\n        },\r\n        dashOffset: {\r\n          enumerable: true,\r\n          get: function() {\r\n            return this.uniforms.dashOffset.value\r\n          },\r\n          set: function(value) {\r\n            this.uniforms.dashOffset.value = value\r\n          },\r\n        },\r\n        dashRatio: {\r\n          enumerable: true,\r\n          get: function() {\r\n            return this.uniforms.dashRatio.value\r\n          },\r\n          set: function(value) {\r\n            this.uniforms.dashRatio.value = value\r\n          },\r\n        },\r\n        useDash: {\r\n          enumerable: true,\r\n          get: function() {\r\n            return this.uniforms.useDash.value\r\n          },\r\n          set: function(value) {\r\n            this.uniforms.useDash.value = value\r\n          },\r\n        },\r\n        visibility: {\r\n          enumerable: true,\r\n          get: function() {\r\n            return this.uniforms.visibility.value\r\n          },\r\n          set: function(value) {\r\n            this.uniforms.visibility.value = value\r\n          },\r\n        },\r\n        alphaTest: {\r\n          enumerable: true,\r\n          get: function() {\r\n            return this.uniforms.alphaTest.value\r\n          },\r\n          set: function(value) {\r\n            this.uniforms.alphaTest.value = value\r\n          },\r\n        },\r\n        repeat: {\r\n          enumerable: true,\r\n          get: function() {\r\n            return this.uniforms.repeat.value\r\n          },\r\n          set: function(value) {\r\n            this.uniforms.repeat.value.copy(value)\r\n          },\r\n        },\r\n      })\r\n\r\n      this.setValues(parameters)\r\n    }\r\n  }\r\n\r\n  MeshLineMaterial.prototype.copy = function(source) {\r\n    THREE.ShaderMaterial.prototype.copy.call(this, source)\r\n\r\n    this.lineWidth = source.lineWidth\r\n    this.map = source.map\r\n    this.useMap = source.useMap\r\n    this.alphaMap = source.alphaMap\r\n    this.useAlphaMap = source.useAlphaMap\r\n    this.color.copy(source.color)\r\n    this.opacity = source.opacity\r\n    this.resolution.copy(source.resolution)\r\n    this.sizeAttenuation = source.sizeAttenuation\r\n    this.dashArray.copy(source.dashArray)\r\n    this.dashOffset.copy(source.dashOffset)\r\n    this.dashRatio.copy(source.dashRatio)\r\n    this.useDash = source.useDash\r\n    this.visibility = source.visibility\r\n    this.alphaTest = source.alphaTest\r\n    this.repeat.copy(source.repeat)\r\n\r\n    return this\r\n  }\r\n\r\n  if (typeof exports !== 'undefined') {\r\n    if (typeof module !== 'undefined' && module.exports) {\r\n      exports = module.exports = {\r\n        MeshLine: MeshLine,\r\n        MeshLineMaterial: MeshLineMaterial,\r\n        MeshLineRaycast: MeshLineRaycast,\r\n      }\r\n    }\r\n    exports.MeshLine = MeshLine\r\n    exports.MeshLineMaterial = MeshLineMaterial\r\n    exports.MeshLineRaycast = MeshLineRaycast\r\n  } else {\r\n    root.MeshLine = MeshLine\r\n    root.MeshLineMaterial = MeshLineMaterial\r\n    root.MeshLineRaycast = MeshLineRaycast\r\n  }\r\n}.call(this))\r\n","import { Mesh, SphereGeometry, MeshBasicMaterial, Scene, PerspectiveCamera, WebGLRenderer} from 'three';\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\r\nimport { MeshLine, MeshLineMaterial } from 'three.meshline';\r\nimport { Color, Fog, Vector3 } from 'three';\r\n\r\nimport ObjectPool from './ObjectPool';\r\nimport { createGui } from './Gui';\r\n\r\n\r\nconst buffer: Vector3[] = [];\r\nconst vectorPool = new ObjectPool<Vector3>(10_000, () => new Vector3());\r\nconst scene = new Scene();\r\nscene.fog = new Fog(new Color(0x0), 0, 1000);\r\n\r\nconst camera = new PerspectiveCamera(\r\n    75,\r\n    window.innerWidth / window.innerHeight,\r\n    0.1,\r\n    1000\r\n);\r\ncamera.position.z = 75;\r\n\r\nconst renderer = new WebGLRenderer({\r\n    antialias: true\r\n});\r\n\r\nrenderer.setSize(window.innerWidth, window.innerHeight)\r\ndocument.body.appendChild(renderer.domElement)\r\n\r\nconst controls = new OrbitControls(camera, renderer.domElement)\r\n\r\nwindow.addEventListener('resize', onWindowResize, false)\r\nfunction onWindowResize() {\r\n    camera.aspect = window.innerWidth / window.innerHeight;\r\n    camera.updateProjectionMatrix();\r\n    renderer.setSize(window.innerWidth, window.innerHeight);\r\n    render();\r\n}\r\n\r\nconst parameters = {\r\n    playing: true,\r\n    iterations: 5000,\r\n    a: 10,\r\n    b: 28,\r\n    c: 8.0 / 3.0,\r\n    dt: 0.02,\r\n    segments: 3,\r\n    color: new Color(0xffffff),\r\n    background: new Color(0x0),\r\n    start: { x: 0, y: 0, z: 0 },\r\n    linewidth: 0.2,\r\n    showFixedPoints: true,\r\n    line: new MeshLine(),\r\n}\r\n\r\n// Add fixed points\r\nconst geometry = new SphereGeometry(0.5, 16, 16);\r\nconst sphere = new Mesh(geometry, new MeshBasicMaterial({ color: 0x6289cc }));\r\nsphere.position.set(-Math.sqrt(parameters.b - 1) * Math.sqrt(parameters.c), -Math.sqrt(parameters.b - 1) * Math.sqrt(parameters.c), parameters.b - 1);\r\nscene.add(sphere);\r\n\r\nconst sphere2 = new Mesh(geometry, new MeshBasicMaterial({ color: 0xbecc62 }));\r\nsphere2.position.set(Math.sqrt(parameters.b - 1) * Math.sqrt(parameters.c), Math.sqrt(parameters.b - 1) * Math.sqrt(parameters.c), parameters.b - 1);\r\nscene.add(sphere2);\r\n\r\nconst center = sphere2.position.clone().add(sphere.position).divideScalar(2);\r\ncontrols.target = center;\r\n\r\nconst [pane, fpsGraph] = createGui(parameters, {\r\n    play: (button) => {\r\n        parameters.playing = !parameters.playing;\r\n        button.title = parameters.playing ? 'pause' : 'play';\r\n    },\r\n    reset: () => {\r\n        x = 0.1;\r\n        y = 0;\r\n        z = 0;\r\n        buffer.splice(0, buffer.length);\r\n    }\r\n});\r\n\r\nconst material = new MeshLineMaterial({\r\n    color: parameters.color,\r\n    lineWidth: parameters.linewidth,\r\n});\r\nconst line = new MeshLine();\r\nconst mesh = new Mesh(line, material);\r\nscene.add(mesh);\r\n\r\npane.on('change', (e) => {\r\n    if (e.presetKey === 'color') {\r\n        mesh.material.color = e.value;\r\n    }\r\n    else if (e.presetKey === 'linewidth') {\r\n        mesh.material.lineWidth = e.value;\r\n    }\r\n\r\n    sphere.position.set(-Math.sqrt(parameters.b - 1) * Math.sqrt(parameters.c), -Math.sqrt(parameters.b - 1) * Math.sqrt(parameters.c), parameters.b - 1);\r\n    sphere2.position.set(Math.sqrt(parameters.b - 1) * Math.sqrt(parameters.c), Math.sqrt(parameters.b - 1) * Math.sqrt(parameters.c), parameters.b - 1);\r\n});\r\n\r\nfunction generateLine(points: Vector3[],): Mesh {\r\n    line.setPoints(points);\r\n    mesh.geometry = line;\r\n    return mesh;\r\n}\r\n\r\nlet x = 0.01;\r\nlet y = 0;\r\nlet z = 0;\r\n\r\ndocument.addEventListener(\"keydown\", onDocumentKeyDown, false);\r\nfunction onDocumentKeyDown(event: KeyboardEvent) {\r\n    switch (event.code) {\r\n        case 'Space':\r\n            parameters.playing = !parameters.playing;\r\n            event.preventDefault();\r\n            pane.refresh();\r\n            break;\r\n    }\r\n};\r\n\r\ncontrols.autoRotate = true;\r\n\r\nrenderer.domElement.addEventListener('mousedown', () => {\r\n    controls.autoRotate = false;\r\n});\r\n\r\nconst animate: FrameRequestCallback = (time) => {\r\n    controls.update();\r\n\r\n    sphere.visible = parameters.showFixedPoints;\r\n    sphere2.visible = parameters.showFixedPoints;\r\n    \r\n    if (!parameters.playing) return;\r\n    const { iterations, a, b, c, dt, background, segments } = parameters;\r\n    \r\n    fpsGraph.begin();\r\n    \r\n    scene.background = background;\r\n    \r\n    for (let i = 0; i < segments; i++) {\r\n        if (buffer.length >= iterations) {\r\n            buffer.shift();\r\n        }\r\n        \r\n        x += (a * (y - x)) * dt / segments;\r\n        y += (x * (b - z) - y) * dt / segments;\r\n        z += (x * y - c * z) * dt / segments;\r\n        const v = vectorPool.get();\r\n        v.set(x, y, z);\r\n        buffer.push(v);\r\n    }\r\n    \r\n    generateLine(buffer);\r\n    render();\r\n    fpsGraph.end();\r\n\r\n    requestAnimationFrame(animate);\r\n}\r\n\r\nfunction render() {\r\n    renderer.render(scene, camera)\r\n}\r\n\r\nanimate(0)","import {\n\tEventDispatcher,\n\tMOUSE,\n\tQuaternion,\n\tSpherical,\n\tTOUCH,\n\tVector2,\n\tVector3\n} from 'three';\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nconst _changeEvent = { type: 'change' };\nconst _startEvent = { type: 'start' };\nconst _endEvent = { type: 'end' };\n\nclass OrbitControls extends EventDispatcher {\n\n\tconstructor( object, domElement ) {\n\n\t\tsuper();\n\n\t\tthis.object = object;\n\t\tthis.domElement = domElement;\n\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\n\n\t\t// Set to false to disable this control\n\t\tthis.enabled = true;\n\n\t\t// \"target\" sets the location of focus, where the object orbits around\n\t\tthis.target = new Vector3();\n\n\t\t// How far you can dolly in and out ( PerspectiveCamera only )\n\t\tthis.minDistance = 0;\n\t\tthis.maxDistance = Infinity;\n\n\t\t// How far you can zoom in and out ( OrthographicCamera only )\n\t\tthis.minZoom = 0;\n\t\tthis.maxZoom = Infinity;\n\n\t\t// How far you can orbit vertically, upper and lower limits.\n\t\t// Range is 0 to Math.PI radians.\n\t\tthis.minPolarAngle = 0; // radians\n\t\tthis.maxPolarAngle = Math.PI; // radians\n\n\t\t// How far you can orbit horizontally, upper and lower limits.\n\t\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n\t\tthis.minAzimuthAngle = - Infinity; // radians\n\t\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t\t// Set to true to enable damping (inertia)\n\t\t// If damping is enabled, you must call controls.update() in your animation loop\n\t\tthis.enableDamping = false;\n\t\tthis.dampingFactor = 0.05;\n\n\t\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t\t// Set to false to disable zooming\n\t\tthis.enableZoom = true;\n\t\tthis.zoomSpeed = 1.0;\n\n\t\t// Set to false to disable rotating\n\t\tthis.enableRotate = true;\n\t\tthis.rotateSpeed = 1.0;\n\n\t\t// Set to false to disable panning\n\t\tthis.enablePan = true;\n\t\tthis.panSpeed = 1.0;\n\t\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n\t\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t\t// Set to true to automatically rotate around the target\n\t\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\t\tthis.autoRotate = false;\n\t\tthis.autoRotateSpeed = 2.0; // 30 seconds per orbit when fps is 60\n\n\t\t// The four arrow keys\n\t\tthis.keys = { LEFT: 'ArrowLeft', UP: 'ArrowUp', RIGHT: 'ArrowRight', BOTTOM: 'ArrowDown' };\n\n\t\t// Mouse buttons\n\t\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t\t// Touch fingers\n\t\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n\t\t// for reset\n\t\tthis.target0 = this.target.clone();\n\t\tthis.position0 = this.object.position.clone();\n\t\tthis.zoom0 = this.object.zoom;\n\n\t\t// the target DOM element for key events\n\t\tthis._domElementKeyEvents = null;\n\n\t\t//\n\t\t// public methods\n\t\t//\n\n\t\tthis.getPolarAngle = function () {\n\n\t\t\treturn spherical.phi;\n\n\t\t};\n\n\t\tthis.getAzimuthalAngle = function () {\n\n\t\t\treturn spherical.theta;\n\n\t\t};\n\n\t\tthis.getDistance = function () {\n\n\t\t\treturn this.object.position.distanceTo( this.target );\n\n\t\t};\n\n\t\tthis.listenToKeyEvents = function ( domElement ) {\n\n\t\t\tdomElement.addEventListener( 'keydown', onKeyDown );\n\t\t\tthis._domElementKeyEvents = domElement;\n\n\t\t};\n\n\t\tthis.saveState = function () {\n\n\t\t\tscope.target0.copy( scope.target );\n\t\t\tscope.position0.copy( scope.object.position );\n\t\t\tscope.zoom0 = scope.object.zoom;\n\n\t\t};\n\n\t\tthis.reset = function () {\n\n\t\t\tscope.target.copy( scope.target0 );\n\t\t\tscope.object.position.copy( scope.position0 );\n\t\t\tscope.object.zoom = scope.zoom0;\n\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\tscope.update();\n\n\t\t\tstate = STATE.NONE;\n\n\t\t};\n\n\t\t// this method is exposed, but perhaps it would be better if we can make it private...\n\t\tthis.update = function () {\n\n\t\t\tconst offset = new Vector3();\n\n\t\t\t// so camera.up is the orbit axis\n\t\t\tconst quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\n\t\t\tconst quatInverse = quat.clone().invert();\n\n\t\t\tconst lastPosition = new Vector3();\n\t\t\tconst lastQuaternion = new Quaternion();\n\n\t\t\tconst twoPI = 2 * Math.PI;\n\n\t\t\treturn function update() {\n\n\t\t\t\tconst position = scope.object.position;\n\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t\t// angle from z-axis around y-axis\n\t\t\t\tspherical.setFromVector3( offset );\n\n\t\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t\t}\n\n\t\t\t\tif ( scope.enableDamping ) {\n\n\t\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\n\t\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t\t}\n\n\t\t\t\t// restrict theta to be between desired limits\n\n\t\t\t\tlet min = scope.minAzimuthAngle;\n\t\t\t\tlet max = scope.maxAzimuthAngle;\n\n\t\t\t\tif ( isFinite( min ) && isFinite( max ) ) {\n\n\t\t\t\t\tif ( min < - Math.PI ) min += twoPI; else if ( min > Math.PI ) min -= twoPI;\n\n\t\t\t\t\tif ( max < - Math.PI ) max += twoPI; else if ( max > Math.PI ) max -= twoPI;\n\n\t\t\t\t\tif ( min <= max ) {\n\n\t\t\t\t\t\tspherical.theta = Math.max( min, Math.min( max, spherical.theta ) );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tspherical.theta = ( spherical.theta > ( min + max ) / 2 ) ?\n\t\t\t\t\t\t\tMath.max( min, spherical.theta ) :\n\t\t\t\t\t\t\tMath.min( max, spherical.theta );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// restrict phi to be between desired limits\n\t\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\t\tspherical.makeSafe();\n\n\n\t\t\t\tspherical.radius *= scale;\n\n\t\t\t\t// restrict radius to be between desired limits\n\t\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t\t// move target to panned location\n\n\t\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tscope.target.add( panOffset );\n\n\t\t\t\t}\n\n\t\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tscale = 1;\n\n\t\t\t\t// update condition is:\n\t\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\t\tif ( zoomChanged ||\n\t\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\t\tzoomChanged = false;\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t};\n\n\t\t}();\n\n\t\tthis.dispose = function () {\n\n\t\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu );\n\n\t\t\tscope.domElement.removeEventListener( 'pointerdown', onPointerDown );\n\t\t\tscope.domElement.removeEventListener( 'pointercancel', onPointerCancel );\n\t\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel );\n\n\t\t\tscope.domElement.removeEventListener( 'pointermove', onPointerMove );\n\t\t\tscope.domElement.removeEventListener( 'pointerup', onPointerUp );\n\n\n\t\t\tif ( scope._domElementKeyEvents !== null ) {\n\n\t\t\t\tscope._domElementKeyEvents.removeEventListener( 'keydown', onKeyDown );\n\n\t\t\t}\n\n\t\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t\t};\n\n\t\t//\n\t\t// internals\n\t\t//\n\n\t\tconst scope = this;\n\n\t\tconst STATE = {\n\t\t\tNONE: - 1,\n\t\t\tROTATE: 0,\n\t\t\tDOLLY: 1,\n\t\t\tPAN: 2,\n\t\t\tTOUCH_ROTATE: 3,\n\t\t\tTOUCH_PAN: 4,\n\t\t\tTOUCH_DOLLY_PAN: 5,\n\t\t\tTOUCH_DOLLY_ROTATE: 6\n\t\t};\n\n\t\tlet state = STATE.NONE;\n\n\t\tconst EPS = 0.000001;\n\n\t\t// current position in spherical coordinates\n\t\tconst spherical = new Spherical();\n\t\tconst sphericalDelta = new Spherical();\n\n\t\tlet scale = 1;\n\t\tconst panOffset = new Vector3();\n\t\tlet zoomChanged = false;\n\n\t\tconst rotateStart = new Vector2();\n\t\tconst rotateEnd = new Vector2();\n\t\tconst rotateDelta = new Vector2();\n\n\t\tconst panStart = new Vector2();\n\t\tconst panEnd = new Vector2();\n\t\tconst panDelta = new Vector2();\n\n\t\tconst dollyStart = new Vector2();\n\t\tconst dollyEnd = new Vector2();\n\t\tconst dollyDelta = new Vector2();\n\n\t\tconst pointers = [];\n\t\tconst pointerPositions = {};\n\n\t\tfunction getAutoRotationAngle() {\n\n\t\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t\t}\n\n\t\tfunction getZoomScale() {\n\n\t\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t\t}\n\n\t\tfunction rotateLeft( angle ) {\n\n\t\t\tsphericalDelta.theta -= angle;\n\n\t\t}\n\n\t\tfunction rotateUp( angle ) {\n\n\t\t\tsphericalDelta.phi -= angle;\n\n\t\t}\n\n\t\tconst panLeft = function () {\n\n\t\t\tconst v = new Vector3();\n\n\t\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\t\tv.multiplyScalar( - distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\tconst panUp = function () {\n\n\t\t\tconst v = new Vector3();\n\n\t\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t\t}\n\n\t\t\t\tv.multiplyScalar( distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\t// deltaX and deltaY are in pixels; right and down are positive\n\t\tconst pan = function () {\n\n\t\t\tconst offset = new Vector3();\n\n\t\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\t\tconst element = scope.domElement;\n\n\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t// perspective\n\t\t\t\t\tconst position = scope.object.position;\n\t\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\t\tlet targetDistance = offset.length();\n\n\t\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\t// orthographic\n\t\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\t\tscope.enablePan = false;\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}();\n\n\t\tfunction dollyOut( dollyScale ) {\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\tscale /= dollyScale;\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\t\tscope.enableZoom = false;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction dollyIn( dollyScale ) {\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\tscale *= dollyScale;\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\t\tscope.enableZoom = false;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\t\t// event callbacks - update the object state\n\t\t//\n\n\t\tfunction handleMouseDownRotate( event ) {\n\n\t\t\trotateStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseDownDolly( event ) {\n\n\t\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseDownPan( event ) {\n\n\t\t\tpanStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseMoveRotate( event ) {\n\n\t\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\t\tconst element = scope.domElement;\n\n\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\t\trotateStart.copy( rotateEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseMoveDolly( event ) {\n\n\t\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\t\tdollyOut( getZoomScale() );\n\n\t\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\t\tdollyIn( getZoomScale() );\n\n\t\t\t}\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseMovePan( event ) {\n\n\t\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseWheel( event ) {\n\n\t\t\tif ( event.deltaY < 0 ) {\n\n\t\t\t\tdollyIn( getZoomScale() );\n\n\t\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\t\tdollyOut( getZoomScale() );\n\n\t\t\t}\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleKeyDown( event ) {\n\n\t\t\tlet needsUpdate = false;\n\n\t\t\tswitch ( event.code ) {\n\n\t\t\t\tcase scope.keys.UP:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\trotateUp( 2 * Math.PI * scope.rotateSpeed / scope.domElement.clientHeight );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpan( 0, scope.keyPanSpeed );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.BOTTOM:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\trotateUp( - 2 * Math.PI * scope.rotateSpeed / scope.domElement.clientHeight );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.LEFT:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\trotateLeft( 2 * Math.PI * scope.rotateSpeed / scope.domElement.clientHeight );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.RIGHT:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\trotateLeft( - 2 * Math.PI * scope.rotateSpeed / scope.domElement.clientHeight );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( needsUpdate ) {\n\n\t\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tscope.update();\n\n\t\t\t}\n\n\n\t\t}\n\n\t\tfunction handleTouchStartRotate() {\n\n\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\trotateStart.set( pointers[ 0 ].pageX, pointers[ 0 ].pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst x = 0.5 * ( pointers[ 0 ].pageX + pointers[ 1 ].pageX );\n\t\t\t\tconst y = 0.5 * ( pointers[ 0 ].pageY + pointers[ 1 ].pageY );\n\n\t\t\t\trotateStart.set( x, y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction handleTouchStartPan() {\n\n\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\tpanStart.set( pointers[ 0 ].pageX, pointers[ 0 ].pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst x = 0.5 * ( pointers[ 0 ].pageX + pointers[ 1 ].pageX );\n\t\t\t\tconst y = 0.5 * ( pointers[ 0 ].pageY + pointers[ 1 ].pageY );\n\n\t\t\t\tpanStart.set( x, y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction handleTouchStartDolly() {\n\n\t\t\tconst dx = pointers[ 0 ].pageX - pointers[ 1 ].pageX;\n\t\t\tconst dy = pointers[ 0 ].pageY - pointers[ 1 ].pageY;\n\n\t\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyStart.set( 0, distance );\n\n\t\t}\n\n\t\tfunction handleTouchStartDollyPan() {\n\n\t\t\tif ( scope.enableZoom ) handleTouchStartDolly();\n\n\t\t\tif ( scope.enablePan ) handleTouchStartPan();\n\n\t\t}\n\n\t\tfunction handleTouchStartDollyRotate() {\n\n\t\t\tif ( scope.enableZoom ) handleTouchStartDolly();\n\n\t\t\tif ( scope.enableRotate ) handleTouchStartRotate();\n\n\t\t}\n\n\t\tfunction handleTouchMoveRotate( event ) {\n\n\t\t\tif ( pointers.length == 1 ) {\n\n\t\t\t\trotateEnd.set( event.pageX, event.pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\t\trotateEnd.set( x, y );\n\n\t\t\t}\n\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\t\tconst element = scope.domElement;\n\n\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\t\trotateStart.copy( rotateEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMovePan( event ) {\n\n\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\tpanEnd.set( event.pageX, event.pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\t\tpanEnd.set( x, y );\n\n\t\t\t}\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDolly( event ) {\n\n\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\tconst dx = event.pageX - position.x;\n\t\t\tconst dy = event.pageY - position.y;\n\n\t\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyEnd.set( 0, distance );\n\n\t\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\t\tdollyOut( dollyDelta.y );\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\t\tif ( scope.enablePan ) handleTouchMovePan( event );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDollyRotate( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\n\n\t\t}\n\n\t\t//\n\t\t// event handlers - FSM: listen for events and reset state\n\t\t//\n\n\t\tfunction onPointerDown( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( pointers.length === 0 ) {\n\n\t\t\t\tscope.domElement.setPointerCapture( event.pointerId );\n\n\t\t\t\tscope.domElement.addEventListener( 'pointermove', onPointerMove );\n\t\t\t\tscope.domElement.addEventListener( 'pointerup', onPointerUp );\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\taddPointer( event );\n\n\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\tonTouchStart( event );\n\n\t\t\t} else {\n\n\t\t\t\tonMouseDown( event );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\tonTouchMove( event );\n\n\t\t\t} else {\n\n\t\t\t\tonMouseMove( event );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerUp( event ) {\n\n\t\t    removePointer( event );\n\n\t\t    if ( pointers.length === 0 ) {\n\n\t\t        scope.domElement.releasePointerCapture( event.pointerId );\n\n\t\t        scope.domElement.removeEventListener( 'pointermove', onPointerMove );\n\t\t        scope.domElement.removeEventListener( 'pointerup', onPointerUp );\n\n\t\t    }\n\n\t\t    scope.dispatchEvent( _endEvent );\n\n\t\t    state = STATE.NONE;\n\n\t\t}\n\n\t\tfunction onPointerCancel( event ) {\n\n\t\t\tremovePointer( event );\n\n\t\t}\n\n\t\tfunction onMouseDown( event ) {\n\n\t\t\tlet mouseAction;\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase 0:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.LEFT;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.RIGHT;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tmouseAction = - 1;\n\n\t\t\t}\n\n\t\t\tswitch ( mouseAction ) {\n\n\t\t\t\tcase MOUSE.DOLLY:\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MOUSE.ROTATE:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MOUSE.PAN:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseMove( event ) {\n\n\t\t\tswitch ( state ) {\n\n\t\t\t\tcase STATE.ROTATE:\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.DOLLY:\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.PAN:\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseWheel( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\thandleMouseWheel( event );\n\n\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t}\n\n\t\tfunction onKeyDown( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enablePan === false ) return;\n\n\t\t\thandleKeyDown( event );\n\n\t\t}\n\n\t\tfunction onTouchStart( event ) {\n\n\t\t\ttrackPointer( event );\n\n\t\t\tswitch ( pointers.length ) {\n\n\t\t\t\tcase 1:\n\n\t\t\t\t\tswitch ( scope.touches.ONE ) {\n\n\t\t\t\t\t\tcase TOUCH.ROTATE:\n\n\t\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartRotate();\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase TOUCH.PAN:\n\n\t\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartPan();\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\n\t\t\t\t\tswitch ( scope.touches.TWO ) {\n\n\t\t\t\t\t\tcase TOUCH.DOLLY_PAN:\n\n\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartDollyPan();\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase TOUCH.DOLLY_ROTATE:\n\n\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartDollyRotate();\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onTouchMove( event ) {\n\n\t\t\ttrackPointer( event );\n\n\t\t\tswitch ( state ) {\n\n\t\t\t\tcase STATE.TOUCH_ROTATE:\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_PAN:\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_DOLLY_PAN:\n\n\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleTouchMoveDollyRotate( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onContextMenu( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t}\n\n\t\tfunction addPointer( event ) {\n\n\t\t\tpointers.push( event );\n\n\t\t}\n\n\t\tfunction removePointer( event ) {\n\n\t\t\tdelete pointerPositions[ event.pointerId ];\n\n\t\t\tfor ( let i = 0; i < pointers.length; i ++ ) {\n\n\t\t\t\tif ( pointers[ i ].pointerId == event.pointerId ) {\n\n\t\t\t\t\tpointers.splice( i, 1 );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction trackPointer( event ) {\n\n\t\t\tlet position = pointerPositions[ event.pointerId ];\n\n\t\t\tif ( position === undefined ) {\n\n\t\t\t\tposition = new Vector2();\n\t\t\t\tpointerPositions[ event.pointerId ] = position;\n\n\t\t\t}\n\n\t\t\tposition.set( event.pageX, event.pageY );\n\n\t\t}\n\n\t\tfunction getSecondPointerPosition( event ) {\n\n\t\t\tconst pointer = ( event.pointerId === pointers[ 0 ].pointerId ) ? pointers[ 1 ] : pointers[ 0 ];\n\n\t\t\treturn pointerPositions[ pointer.pointerId ];\n\n\t\t}\n\n\t\t//\n\n\t\tscope.domElement.addEventListener( 'contextmenu', onContextMenu );\n\n\t\tscope.domElement.addEventListener( 'pointerdown', onPointerDown );\n\t\tscope.domElement.addEventListener( 'pointercancel', onPointerCancel );\n\t\tscope.domElement.addEventListener( 'wheel', onMouseWheel, { passive: false } );\n\n\t\t// force an update at start\n\n\t\tthis.update();\n\n\t}\n\n}\n\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\nclass MapControls extends OrbitControls {\n\n\tconstructor( object, domElement ) {\n\n\t\tsuper( object, domElement );\n\n\t\tthis.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\n\n\t\tthis.mouseButtons.LEFT = MOUSE.PAN;\n\t\tthis.mouseButtons.RIGHT = MOUSE.ROTATE;\n\n\t\tthis.touches.ONE = TOUCH.PAN;\n\t\tthis.touches.TWO = TOUCH.DOLLY_ROTATE;\n\n\t}\n\n}\n\nexport { OrbitControls, MapControls };\n","/*! Tweakpane 3.1.4 (c) 2016 cocopon, licensed under the MIT license. */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.Tweakpane = {}));\n})(this, (function (exports) { 'use strict';\n\n    /***\n     * A simple semantic versioning perser.\n     */\n    class Semver {\n        /**\n         * @hidden\n         */\n        constructor(text) {\n            const [core, prerelease] = text.split('-');\n            const coreComps = core.split('.');\n            this.major = parseInt(coreComps[0], 10);\n            this.minor = parseInt(coreComps[1], 10);\n            this.patch = parseInt(coreComps[2], 10);\n            this.prerelease = prerelease !== null && prerelease !== void 0 ? prerelease : null;\n        }\n        toString() {\n            const core = [this.major, this.minor, this.patch].join('.');\n            return this.prerelease !== null ? [core, this.prerelease].join('-') : core;\n        }\n    }\n\n    class BladeApi {\n        constructor(controller) {\n            this.controller_ = controller;\n        }\n        get element() {\n            return this.controller_.view.element;\n        }\n        get disabled() {\n            return this.controller_.viewProps.get('disabled');\n        }\n        set disabled(disabled) {\n            this.controller_.viewProps.set('disabled', disabled);\n        }\n        get hidden() {\n            return this.controller_.viewProps.get('hidden');\n        }\n        set hidden(hidden) {\n            this.controller_.viewProps.set('hidden', hidden);\n        }\n        dispose() {\n            this.controller_.viewProps.set('disposed', true);\n        }\n    }\n\n    class TpEvent {\n        constructor(target) {\n            this.target = target;\n        }\n    }\n    class TpChangeEvent extends TpEvent {\n        constructor(target, value, presetKey, last) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n            this.last = last !== null && last !== void 0 ? last : true;\n        }\n    }\n    class TpUpdateEvent extends TpEvent {\n        constructor(target, value, presetKey) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n        }\n    }\n    class TpFoldEvent extends TpEvent {\n        constructor(target, expanded) {\n            super(target);\n            this.expanded = expanded;\n        }\n    }\n    class TpTabSelectEvent extends TpEvent {\n        constructor(target, index) {\n            super(target);\n            this.index = index;\n        }\n    }\n\n    function forceCast(v) {\n        return v;\n    }\n    function isEmpty(value) {\n        return value === null || value === undefined;\n    }\n    function deepEqualsArray(a1, a2) {\n        if (a1.length !== a2.length) {\n            return false;\n        }\n        for (let i = 0; i < a1.length; i++) {\n            if (a1[i] !== a2[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    function isPropertyWritable(obj, key) {\n        let target = obj;\n        do {\n            const d = Object.getOwnPropertyDescriptor(target, key);\n            if (d && (d.set !== undefined || d.writable === true)) {\n                return true;\n            }\n            target = Object.getPrototypeOf(target);\n        } while (target !== null);\n        return false;\n    }\n\n    const CREATE_MESSAGE_MAP = {\n        alreadydisposed: () => 'View has been already disposed',\n        invalidparams: (context) => `Invalid parameters for '${context.name}'`,\n        nomatchingcontroller: (context) => `No matching controller for '${context.key}'`,\n        nomatchingview: (context) => `No matching view for '${JSON.stringify(context.params)}'`,\n        notbindable: () => `Value is not bindable`,\n        propertynotfound: (context) => `Property '${context.name}' not found`,\n        shouldneverhappen: () => 'This error should never happen',\n    };\n    class TpError {\n        constructor(config) {\n            var _a;\n            this.message =\n                (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : 'Unexpected error';\n            this.name = this.constructor.name;\n            this.stack = new Error(this.message).stack;\n            this.type = config.type;\n        }\n        static alreadyDisposed() {\n            return new TpError({ type: 'alreadydisposed' });\n        }\n        static notBindable() {\n            return new TpError({\n                type: 'notbindable',\n            });\n        }\n        static propertyNotFound(name) {\n            return new TpError({\n                type: 'propertynotfound',\n                context: {\n                    name: name,\n                },\n            });\n        }\n        static shouldNeverHappen() {\n            return new TpError({ type: 'shouldneverhappen' });\n        }\n    }\n\n    class BindingTarget {\n        constructor(obj, key, opt_id) {\n            this.obj_ = obj;\n            this.key_ = key;\n            this.presetKey_ = opt_id !== null && opt_id !== void 0 ? opt_id : key;\n        }\n        static isBindable(obj) {\n            if (obj === null) {\n                return false;\n            }\n            if (typeof obj !== 'object') {\n                return false;\n            }\n            return true;\n        }\n        get key() {\n            return this.key_;\n        }\n        get presetKey() {\n            return this.presetKey_;\n        }\n        read() {\n            return this.obj_[this.key_];\n        }\n        write(value) {\n            this.obj_[this.key_] = value;\n        }\n        writeProperty(name, value) {\n            const valueObj = this.read();\n            if (!BindingTarget.isBindable(valueObj)) {\n                throw TpError.notBindable();\n            }\n            if (!(name in valueObj)) {\n                throw TpError.propertyNotFound(name);\n            }\n            valueObj[name] = value;\n        }\n    }\n\n    class ButtonApi extends BladeApi {\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.valueController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.valueController.props.set('title', title);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            const emitter = this.controller_.valueController.emitter;\n            emitter.on(eventName, () => {\n                bh(new TpEvent(this));\n            });\n            return this;\n        }\n    }\n\n    class Emitter {\n        constructor() {\n            this.observers_ = {};\n        }\n        on(eventName, handler) {\n            let observers = this.observers_[eventName];\n            if (!observers) {\n                observers = this.observers_[eventName] = [];\n            }\n            observers.push({\n                handler: handler,\n            });\n            return this;\n        }\n        off(eventName, handler) {\n            const observers = this.observers_[eventName];\n            if (observers) {\n                this.observers_[eventName] = observers.filter((observer) => {\n                    return observer.handler !== handler;\n                });\n            }\n            return this;\n        }\n        emit(eventName, event) {\n            const observers = this.observers_[eventName];\n            if (!observers) {\n                return;\n            }\n            observers.forEach((observer) => {\n                observer.handler(event);\n            });\n        }\n    }\n\n    const PREFIX = 'tp';\n    function ClassName(viewName) {\n        const fn = (opt_elementName, opt_modifier) => {\n            return [\n                PREFIX,\n                '-',\n                viewName,\n                'v',\n                opt_elementName ? `_${opt_elementName}` : '',\n                opt_modifier ? `-${opt_modifier}` : '',\n            ].join('');\n        };\n        return fn;\n    }\n\n    function compose(h1, h2) {\n        return (input) => h2(h1(input));\n    }\n    function extractValue(ev) {\n        return ev.rawValue;\n    }\n    function bindValue(value, applyValue) {\n        value.emitter.on('change', compose(extractValue, applyValue));\n        applyValue(value.rawValue);\n    }\n    function bindValueMap(valueMap, key, applyValue) {\n        bindValue(valueMap.value(key), applyValue);\n    }\n\n    function applyClass(elem, className, active) {\n        if (active) {\n            elem.classList.add(className);\n        }\n        else {\n            elem.classList.remove(className);\n        }\n    }\n    function valueToClassName(elem, className) {\n        return (value) => {\n            applyClass(elem, className, value);\n        };\n    }\n    function bindValueToTextContent(value, elem) {\n        bindValue(value, (text) => {\n            elem.textContent = text !== null && text !== void 0 ? text : '';\n        });\n    }\n\n    const className$q = ClassName('btn');\n    class ButtonView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$q());\n            config.viewProps.bindClassModifiers(this.element);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$q('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$q('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n        }\n    }\n\n    class ButtonController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new ButtonView(doc, {\n                props: this.props,\n                viewProps: this.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class BoundValue {\n        constructor(initialValue, config) {\n            var _a;\n            this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n            this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : ((v1, v2) => v1 === v2);\n            this.emitter = new Emitter();\n            this.rawValue_ = initialValue;\n        }\n        get constraint() {\n            return this.constraint_;\n        }\n        get rawValue() {\n            return this.rawValue_;\n        }\n        set rawValue(rawValue) {\n            this.setRawValue(rawValue, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(rawValue, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            const constrainedValue = this.constraint_\n                ? this.constraint_.constrain(rawValue)\n                : rawValue;\n            const prevValue = this.rawValue_;\n            const changed = !this.equals_(prevValue, constrainedValue);\n            if (!changed && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.rawValue_ = constrainedValue;\n            this.emitter.emit('change', {\n                options: opts,\n                previousRawValue: prevValue,\n                rawValue: constrainedValue,\n                sender: this,\n            });\n        }\n    }\n\n    class PrimitiveValue {\n        constructor(initialValue) {\n            this.emitter = new Emitter();\n            this.value_ = initialValue;\n        }\n        get rawValue() {\n            return this.value_;\n        }\n        set rawValue(value) {\n            this.setRawValue(value, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(value, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            const prevValue = this.value_;\n            if (prevValue === value && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.value_ = value;\n            this.emitter.emit('change', {\n                options: opts,\n                previousRawValue: prevValue,\n                rawValue: this.value_,\n                sender: this,\n            });\n        }\n    }\n\n    function createValue(initialValue, config) {\n        const constraint = config === null || config === void 0 ? void 0 : config.constraint;\n        const equals = config === null || config === void 0 ? void 0 : config.equals;\n        if (!constraint && !equals) {\n            return new PrimitiveValue(initialValue);\n        }\n        return new BoundValue(initialValue, config);\n    }\n\n    class ValueMap {\n        constructor(valueMap) {\n            this.emitter = new Emitter();\n            this.valMap_ = valueMap;\n            for (const key in this.valMap_) {\n                const v = this.valMap_[key];\n                v.emitter.on('change', () => {\n                    this.emitter.emit('change', {\n                        key: key,\n                        sender: this,\n                    });\n                });\n            }\n        }\n        static createCore(initialValue) {\n            const keys = Object.keys(initialValue);\n            return keys.reduce((o, key) => {\n                return Object.assign(o, {\n                    [key]: createValue(initialValue[key]),\n                });\n            }, {});\n        }\n        static fromObject(initialValue) {\n            const core = this.createCore(initialValue);\n            return new ValueMap(core);\n        }\n        get(key) {\n            return this.valMap_[key].rawValue;\n        }\n        set(key, value) {\n            this.valMap_[key].rawValue = value;\n        }\n        value(key) {\n            return this.valMap_[key];\n        }\n    }\n\n    function parseObject(value, keyToParserMap) {\n        const keys = Object.keys(keyToParserMap);\n        const result = keys.reduce((tmp, key) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const parser = keyToParserMap[key];\n            const result = parser(value[key]);\n            return result.succeeded\n                ? Object.assign(Object.assign({}, tmp), { [key]: result.value }) : undefined;\n        }, {});\n        return forceCast(result);\n    }\n    function parseArray(value, parseItem) {\n        return value.reduce((tmp, item) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const result = parseItem(item);\n            if (!result.succeeded || result.value === undefined) {\n                return undefined;\n            }\n            return [...tmp, result.value];\n        }, []);\n    }\n    function isObject(value) {\n        if (value === null) {\n            return false;\n        }\n        return typeof value === 'object';\n    }\n    function createParamsParserBuilder(parse) {\n        return (optional) => (v) => {\n            if (!optional && v === undefined) {\n                return {\n                    succeeded: false,\n                    value: undefined,\n                };\n            }\n            if (optional && v === undefined) {\n                return {\n                    succeeded: true,\n                    value: undefined,\n                };\n            }\n            const result = parse(v);\n            return result !== undefined\n                ? {\n                    succeeded: true,\n                    value: result,\n                }\n                : {\n                    succeeded: false,\n                    value: undefined,\n                };\n        };\n    }\n    function createParamsParserBuilders(optional) {\n        return {\n            custom: (parse) => createParamsParserBuilder(parse)(optional),\n            boolean: createParamsParserBuilder((v) => typeof v === 'boolean' ? v : undefined)(optional),\n            number: createParamsParserBuilder((v) => typeof v === 'number' ? v : undefined)(optional),\n            string: createParamsParserBuilder((v) => typeof v === 'string' ? v : undefined)(optional),\n            function: createParamsParserBuilder((v) =>\n            typeof v === 'function' ? v : undefined)(optional),\n            constant: (value) => createParamsParserBuilder((v) => (v === value ? value : undefined))(optional),\n            raw: createParamsParserBuilder((v) => v)(optional),\n            object: (keyToParserMap) => createParamsParserBuilder((v) => {\n                if (!isObject(v)) {\n                    return undefined;\n                }\n                return parseObject(v, keyToParserMap);\n            })(optional),\n            array: (itemParser) => createParamsParserBuilder((v) => {\n                if (!Array.isArray(v)) {\n                    return undefined;\n                }\n                return parseArray(v, itemParser);\n            })(optional),\n        };\n    }\n    const ParamsParsers = {\n        optional: createParamsParserBuilders(true),\n        required: createParamsParserBuilders(false),\n    };\n    function parseParams(value, keyToParserMap) {\n        const result = ParamsParsers.required.object(keyToParserMap)(value);\n        return result.succeeded ? result.value : undefined;\n    }\n\n    function warnMissing(info) {\n        console.warn([\n            `Missing '${info.key}' of ${info.target} in ${info.place}.`,\n            'Please rebuild plugins with the latest core package.',\n        ].join(' '));\n    }\n\n    function disposeElement(elem) {\n        if (elem && elem.parentElement) {\n            elem.parentElement.removeChild(elem);\n        }\n        return null;\n    }\n\n    class ReadonlyValue {\n        constructor(value) {\n            this.value_ = value;\n        }\n        static create(value) {\n            return [\n                new ReadonlyValue(value),\n                (rawValue, options) => {\n                    value.setRawValue(rawValue, options);\n                },\n            ];\n        }\n        get emitter() {\n            return this.value_.emitter;\n        }\n        get rawValue() {\n            return this.value_.rawValue;\n        }\n    }\n\n    const className$p = ClassName('');\n    function valueToModifier(elem, modifier) {\n        return valueToClassName(elem, className$p(undefined, modifier));\n    }\n    class ViewProps extends ValueMap {\n        constructor(valueMap) {\n            var _a;\n            super(valueMap);\n            this.onDisabledChange_ = this.onDisabledChange_.bind(this);\n            this.onParentChange_ = this.onParentChange_.bind(this);\n            this.onParentGlobalDisabledChange_ =\n                this.onParentGlobalDisabledChange_.bind(this);\n            [this.globalDisabled_, this.setGlobalDisabled_] = ReadonlyValue.create(createValue(this.getGlobalDisabled_()));\n            this.value('disabled').emitter.on('change', this.onDisabledChange_);\n            this.value('parent').emitter.on('change', this.onParentChange_);\n            (_a = this.get('parent')) === null || _a === void 0 ? void 0 : _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\n        }\n        static create(opt_initialValue) {\n            var _a, _b, _c;\n            const initialValue = opt_initialValue !== null && opt_initialValue !== void 0 ? opt_initialValue : {};\n            return new ViewProps(ValueMap.createCore({\n                disabled: (_a = initialValue.disabled) !== null && _a !== void 0 ? _a : false,\n                disposed: false,\n                hidden: (_b = initialValue.hidden) !== null && _b !== void 0 ? _b : false,\n                parent: (_c = initialValue.parent) !== null && _c !== void 0 ? _c : null,\n            }));\n        }\n        get globalDisabled() {\n            return this.globalDisabled_;\n        }\n        bindClassModifiers(elem) {\n            bindValue(this.globalDisabled_, valueToModifier(elem, 'disabled'));\n            bindValueMap(this, 'hidden', valueToModifier(elem, 'hidden'));\n        }\n        bindDisabled(target) {\n            bindValue(this.globalDisabled_, (disabled) => {\n                target.disabled = disabled;\n            });\n        }\n        bindTabIndex(elem) {\n            bindValue(this.globalDisabled_, (disabled) => {\n                elem.tabIndex = disabled ? -1 : 0;\n            });\n        }\n        handleDispose(callback) {\n            this.value('disposed').emitter.on('change', (disposed) => {\n                if (disposed) {\n                    callback();\n                }\n            });\n        }\n        getGlobalDisabled_() {\n            const parent = this.get('parent');\n            const parentDisabled = parent ? parent.globalDisabled.rawValue : false;\n            return parentDisabled || this.get('disabled');\n        }\n        updateGlobalDisabled_() {\n            this.setGlobalDisabled_(this.getGlobalDisabled_());\n        }\n        onDisabledChange_() {\n            this.updateGlobalDisabled_();\n        }\n        onParentGlobalDisabledChange_() {\n            this.updateGlobalDisabled_();\n        }\n        onParentChange_(ev) {\n            var _a;\n            const prevParent = ev.previousRawValue;\n            prevParent === null || prevParent === void 0 ? void 0 : prevParent.globalDisabled.emitter.off('change', this.onParentGlobalDisabledChange_);\n            (_a = this.get('parent')) === null || _a === void 0 ? void 0 : _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\n            this.updateGlobalDisabled_();\n        }\n    }\n\n    function getAllBladePositions() {\n        return ['veryfirst', 'first', 'last', 'verylast'];\n    }\n\n    const className$o = ClassName('');\n    const POS_TO_CLASS_NAME_MAP = {\n        veryfirst: 'vfst',\n        first: 'fst',\n        last: 'lst',\n        verylast: 'vlst',\n    };\n    class BladeController {\n        constructor(config) {\n            this.parent_ = null;\n            this.blade = config.blade;\n            this.view = config.view;\n            this.viewProps = config.viewProps;\n            const elem = this.view.element;\n            this.blade.value('positions').emitter.on('change', () => {\n                getAllBladePositions().forEach((pos) => {\n                    elem.classList.remove(className$o(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n                this.blade.get('positions').forEach((pos) => {\n                    elem.classList.add(className$o(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n            });\n            this.viewProps.handleDispose(() => {\n                disposeElement(elem);\n            });\n        }\n        get parent() {\n            return this.parent_;\n        }\n        set parent(parent) {\n            this.parent_ = parent;\n            if (!('parent' in this.viewProps.valMap_)) {\n                warnMissing({\n                    key: 'parent',\n                    target: ViewProps.name,\n                    place: 'BladeController.parent',\n                });\n                return;\n            }\n            this.viewProps.set('parent', this.parent_ ? this.parent_.viewProps : null);\n        }\n    }\n\n    const SVG_NS = 'http://www.w3.org/2000/svg';\n    function forceReflow(element) {\n        element.offsetHeight;\n    }\n    function disableTransitionTemporarily(element, callback) {\n        const t = element.style.transition;\n        element.style.transition = 'none';\n        callback();\n        element.style.transition = t;\n    }\n    function supportsTouch(doc) {\n        return doc.ontouchstart !== undefined;\n    }\n    function getGlobalObject() {\n        return globalThis;\n    }\n    function getWindowDocument() {\n        const globalObj = forceCast(getGlobalObject());\n        return globalObj.document;\n    }\n    function getCanvasContext(canvasElement) {\n        const win = canvasElement.ownerDocument.defaultView;\n        if (!win) {\n            return null;\n        }\n        const isBrowser = 'document' in win;\n        return isBrowser\n            ? canvasElement.getContext('2d', {\n                willReadFrequently: true,\n            })\n            : null;\n    }\n    const ICON_ID_TO_INNER_HTML_MAP = {\n        check: '<path d=\"M2 8l4 4l8 -8\"/>',\n        dropdown: '<path d=\"M5 7h6l-3 3 z\"/>',\n        p2dpad: '<path d=\"M8 4v8\"/><path d=\"M4 8h8\"/><circle cx=\"12\" cy=\"12\" r=\"1.2\"/>',\n    };\n    function createSvgIconElement(document, iconId) {\n        const elem = document.createElementNS(SVG_NS, 'svg');\n        elem.innerHTML = ICON_ID_TO_INNER_HTML_MAP[iconId];\n        return elem;\n    }\n    function insertElementAt(parentElement, element, index) {\n        parentElement.insertBefore(element, parentElement.children[index]);\n    }\n    function removeElement(element) {\n        if (element.parentElement) {\n            element.parentElement.removeChild(element);\n        }\n    }\n    function removeChildElements(element) {\n        while (element.children.length > 0) {\n            element.removeChild(element.children[0]);\n        }\n    }\n    function removeChildNodes(element) {\n        while (element.childNodes.length > 0) {\n            element.removeChild(element.childNodes[0]);\n        }\n    }\n    function findNextTarget(ev) {\n        if (ev.relatedTarget) {\n            return forceCast(ev.relatedTarget);\n        }\n        if ('explicitOriginalTarget' in ev) {\n            return ev.explicitOriginalTarget;\n        }\n        return null;\n    }\n\n    const className$n = ClassName('lbl');\n    function createLabelNode(doc, label) {\n        const frag = doc.createDocumentFragment();\n        const lineNodes = label.split('\\n').map((line) => {\n            return doc.createTextNode(line);\n        });\n        lineNodes.forEach((lineNode, index) => {\n            if (index > 0) {\n                frag.appendChild(doc.createElement('br'));\n            }\n            frag.appendChild(lineNode);\n        });\n        return frag;\n    }\n    class LabelView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$n());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('div');\n            labelElem.classList.add(className$n('l'));\n            bindValueMap(config.props, 'label', (value) => {\n                if (isEmpty(value)) {\n                    this.element.classList.add(className$n(undefined, 'nol'));\n                }\n                else {\n                    this.element.classList.remove(className$n(undefined, 'nol'));\n                    removeChildNodes(labelElem);\n                    labelElem.appendChild(createLabelNode(doc, value));\n                }\n            });\n            this.element.appendChild(labelElem);\n            this.labelElement = labelElem;\n            const valueElem = doc.createElement('div');\n            valueElem.classList.add(className$n('v'));\n            this.element.appendChild(valueElem);\n            this.valueElement = valueElem;\n        }\n    }\n\n    class LabelController extends BladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    const ButtonBladePlugin = {\n        id: 'button',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant('button'),\n                label: p.optional.string,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new LabelController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: new ButtonController(args.document, {\n                    props: ValueMap.fromObject({\n                        title: args.params.title,\n                    }),\n                    viewProps: args.viewProps,\n                }),\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabelController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof ButtonController)) {\n                return null;\n            }\n            return new ButtonApi(args.controller);\n        },\n    };\n\n    class ValueBladeController extends BladeController {\n        constructor(config) {\n            super(config);\n            this.value = config.value;\n        }\n    }\n\n    function createBlade() {\n        return new ValueMap({\n            positions: createValue([], {\n                equals: deepEqualsArray,\n            }),\n        });\n    }\n\n    class Foldable extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(expanded) {\n            const coreObj = {\n                completed: true,\n                expanded: expanded,\n                expandedHeight: null,\n                shouldFixHeight: false,\n                temporaryExpanded: null,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new Foldable(core);\n        }\n        get styleExpanded() {\n            var _a;\n            return (_a = this.get('temporaryExpanded')) !== null && _a !== void 0 ? _a : this.get('expanded');\n        }\n        get styleHeight() {\n            if (!this.styleExpanded) {\n                return '0';\n            }\n            const exHeight = this.get('expandedHeight');\n            if (this.get('shouldFixHeight') && !isEmpty(exHeight)) {\n                return `${exHeight}px`;\n            }\n            return 'auto';\n        }\n        bindExpandedClass(elem, expandedClassName) {\n            const onExpand = () => {\n                const expanded = this.styleExpanded;\n                if (expanded) {\n                    elem.classList.add(expandedClassName);\n                }\n                else {\n                    elem.classList.remove(expandedClassName);\n                }\n            };\n            bindValueMap(this, 'expanded', onExpand);\n            bindValueMap(this, 'temporaryExpanded', onExpand);\n        }\n        cleanUpTransition() {\n            this.set('shouldFixHeight', false);\n            this.set('expandedHeight', null);\n            this.set('completed', true);\n        }\n    }\n    function computeExpandedFolderHeight(folder, containerElement) {\n        let height = 0;\n        disableTransitionTemporarily(containerElement, () => {\n            folder.set('expandedHeight', null);\n            folder.set('temporaryExpanded', true);\n            forceReflow(containerElement);\n            height = containerElement.clientHeight;\n            folder.set('temporaryExpanded', null);\n            forceReflow(containerElement);\n        });\n        return height;\n    }\n    function applyHeight(foldable, elem) {\n        elem.style.height = foldable.styleHeight;\n    }\n    function bindFoldable(foldable, elem) {\n        foldable.value('expanded').emitter.on('beforechange', () => {\n            foldable.set('completed', false);\n            if (isEmpty(foldable.get('expandedHeight'))) {\n                foldable.set('expandedHeight', computeExpandedFolderHeight(foldable, elem));\n            }\n            foldable.set('shouldFixHeight', true);\n            forceReflow(elem);\n        });\n        foldable.emitter.on('change', () => {\n            applyHeight(foldable, elem);\n        });\n        applyHeight(foldable, elem);\n        elem.addEventListener('transitionend', (ev) => {\n            if (ev.propertyName !== 'height') {\n                return;\n            }\n            foldable.cleanUpTransition();\n        });\n    }\n\n    class RackLikeApi extends BladeApi {\n        constructor(controller, rackApi) {\n            super(controller);\n            this.rackApi_ = rackApi;\n        }\n    }\n\n    function addButtonAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'button' }));\n    }\n    function addFolderAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'folder' }));\n    }\n    function addSeparatorAsBlade(api, opt_params) {\n        const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'separator' }));\n    }\n    function addTabAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'tab' }));\n    }\n\n    class NestedOrderedSet {\n        constructor(extract) {\n            this.emitter = new Emitter();\n            this.items_ = [];\n            this.cache_ = new Set();\n            this.onSubListAdd_ = this.onSubListAdd_.bind(this);\n            this.onSubListRemove_ = this.onSubListRemove_.bind(this);\n            this.extract_ = extract;\n        }\n        get items() {\n            return this.items_;\n        }\n        allItems() {\n            return Array.from(this.cache_);\n        }\n        find(callback) {\n            for (const item of this.allItems()) {\n                if (callback(item)) {\n                    return item;\n                }\n            }\n            return null;\n        }\n        includes(item) {\n            return this.cache_.has(item);\n        }\n        add(item, opt_index) {\n            if (this.includes(item)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const index = opt_index !== undefined ? opt_index : this.items_.length;\n            this.items_.splice(index, 0, item);\n            this.cache_.add(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.on('add', this.onSubListAdd_);\n                subList.emitter.on('remove', this.onSubListRemove_);\n                subList.allItems().forEach((item) => {\n                    this.cache_.add(item);\n                });\n            }\n            this.emitter.emit('add', {\n                index: index,\n                item: item,\n                root: this,\n                target: this,\n            });\n        }\n        remove(item) {\n            const index = this.items_.indexOf(item);\n            if (index < 0) {\n                return;\n            }\n            this.items_.splice(index, 1);\n            this.cache_.delete(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.off('add', this.onSubListAdd_);\n                subList.emitter.off('remove', this.onSubListRemove_);\n            }\n            this.emitter.emit('remove', {\n                index: index,\n                item: item,\n                root: this,\n                target: this,\n            });\n        }\n        onSubListAdd_(ev) {\n            this.cache_.add(ev.item);\n            this.emitter.emit('add', {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target,\n            });\n        }\n        onSubListRemove_(ev) {\n            this.cache_.delete(ev.item);\n            this.emitter.emit('remove', {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target,\n            });\n        }\n    }\n\n    class InputBindingApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.onBindingChange_ = this.onBindingChange_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on('change', this.onBindingChange_);\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingChange_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit('change', {\n                event: new TpChangeEvent(this, forceCast(value), this.controller_.binding.target.presetKey, ev.options.last),\n            });\n        }\n    }\n\n    class InputBindingController extends LabelController {\n        constructor(doc, config) {\n            super(doc, config);\n            this.binding = config.binding;\n        }\n    }\n\n    class MonitorBindingApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.onBindingUpdate_ = this.onBindingUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on('update', this.onBindingUpdate_);\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingUpdate_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit('update', {\n                event: new TpUpdateEvent(this, forceCast(value), this.controller_.binding.target.presetKey),\n            });\n        }\n    }\n\n    class MonitorBindingController extends LabelController {\n        constructor(doc, config) {\n            super(doc, config);\n            this.binding = config.binding;\n            this.viewProps.bindDisabled(this.binding.ticker);\n            this.viewProps.handleDispose(() => {\n                this.binding.dispose();\n            });\n        }\n    }\n\n    function findSubBladeApiSet(api) {\n        if (api instanceof RackApi) {\n            return api['apiSet_'];\n        }\n        if (api instanceof RackLikeApi) {\n            return api['rackApi_']['apiSet_'];\n        }\n        return null;\n    }\n    function getApiByController(apiSet, controller) {\n        const api = apiSet.find((api) => api.controller_ === controller);\n        if (!api) {\n            throw TpError.shouldNeverHappen();\n        }\n        return api;\n    }\n    function createBindingTarget(obj, key, opt_id) {\n        if (!BindingTarget.isBindable(obj)) {\n            throw TpError.notBindable();\n        }\n        return new BindingTarget(obj, key, opt_id);\n    }\n    class RackApi extends BladeApi {\n        constructor(controller, pool) {\n            super(controller);\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            this.onRackInputChange_ = this.onRackInputChange_.bind(this);\n            this.onRackMonitorUpdate_ = this.onRackMonitorUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.apiSet_ = new NestedOrderedSet(findSubBladeApiSet);\n            this.pool_ = pool;\n            const rack = this.controller_.rack;\n            rack.emitter.on('add', this.onRackAdd_);\n            rack.emitter.on('remove', this.onRackRemove_);\n            rack.emitter.on('inputchange', this.onRackInputChange_);\n            rack.emitter.on('monitorupdate', this.onRackMonitorUpdate_);\n            rack.children.forEach((bc) => {\n                this.setUpApi_(bc);\n            });\n        }\n        get children() {\n            return this.controller_.rack.children.map((bc) => getApiByController(this.apiSet_, bc));\n        }\n        addInput(object, key, opt_params) {\n            const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createInput(doc, createBindingTarget(object, key, params.presetKey), params);\n            const api = new InputBindingApi(bc);\n            return this.add(api, params.index);\n        }\n        addMonitor(object, key, opt_params) {\n            const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createMonitor(doc, createBindingTarget(object, key), params);\n            const api = new MonitorBindingApi(bc);\n            return forceCast(this.add(api, params.index));\n        }\n        addFolder(params) {\n            return addFolderAsBlade(this, params);\n        }\n        addButton(params) {\n            return addButtonAsBlade(this, params);\n        }\n        addSeparator(opt_params) {\n            return addSeparatorAsBlade(this, opt_params);\n        }\n        addTab(params) {\n            return addTabAsBlade(this, params);\n        }\n        add(api, opt_index) {\n            this.controller_.rack.add(api.controller_, opt_index);\n            const gapi = this.apiSet_.find((a) => a.controller_ === api.controller_);\n            if (gapi) {\n                this.apiSet_.remove(gapi);\n            }\n            this.apiSet_.add(api);\n            return api;\n        }\n        remove(api) {\n            this.controller_.rack.remove(api.controller_);\n        }\n        addBlade(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createBlade(doc, params);\n            const api = this.pool_.createBladeApi(bc);\n            return this.add(api, params.index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpApi_(bc) {\n            const api = this.apiSet_.find((api) => api.controller_ === bc);\n            if (!api) {\n                this.apiSet_.add(this.pool_.createBladeApi(bc));\n            }\n        }\n        onRackAdd_(ev) {\n            this.setUpApi_(ev.bladeController);\n        }\n        onRackRemove_(ev) {\n            if (ev.isRoot) {\n                const api = getApiByController(this.apiSet_, ev.bladeController);\n                this.apiSet_.remove(api);\n            }\n        }\n        onRackInputChange_(ev) {\n            const bc = ev.bladeController;\n            if (bc instanceof InputBindingController) {\n                const api = getApiByController(this.apiSet_, bc);\n                const binding = bc.binding;\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(api, forceCast(binding.target.read()), binding.target.presetKey, ev.options.last),\n                });\n            }\n            else if (bc instanceof ValueBladeController) {\n                const api = getApiByController(this.apiSet_, bc);\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(api, bc.value.rawValue, undefined, ev.options.last),\n                });\n            }\n        }\n        onRackMonitorUpdate_(ev) {\n            if (!(ev.bladeController instanceof MonitorBindingController)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const api = getApiByController(this.apiSet_, ev.bladeController);\n            const binding = ev.bladeController.binding;\n            this.emitter_.emit('update', {\n                event: new TpUpdateEvent(api, forceCast(binding.target.read()), binding.target.presetKey),\n            });\n        }\n    }\n\n    class FolderApi extends RackLikeApi {\n        constructor(controller, pool) {\n            super(controller, new RackApi(controller.rackController, pool));\n            this.emitter_ = new Emitter();\n            this.controller_.foldable\n                .value('expanded')\n                .emitter.on('change', (ev) => {\n                this.emitter_.emit('fold', {\n                    event: new TpFoldEvent(this, ev.sender.rawValue),\n                });\n            });\n            this.rackApi_.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: ev,\n                });\n            });\n            this.rackApi_.on('update', (ev) => {\n                this.emitter_.emit('update', {\n                    event: ev,\n                });\n            });\n        }\n        get expanded() {\n            return this.controller_.foldable.get('expanded');\n        }\n        set expanded(expanded) {\n            this.controller_.foldable.set('expanded', expanded);\n        }\n        get title() {\n            return this.controller_.props.get('title');\n        }\n        set title(title) {\n            this.controller_.props.set('title', title);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            return this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class RackLikeController extends BladeController {\n        constructor(config) {\n            super({\n                blade: config.blade,\n                view: config.view,\n                viewProps: config.rackController.viewProps,\n            });\n            this.rackController = config.rackController;\n        }\n    }\n\n    class PlainView {\n        constructor(doc, config) {\n            const className = ClassName(config.viewName);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n        }\n    }\n\n    function findInputBindingController(bcs, b) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof InputBindingController && bc.binding === b) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findMonitorBindingController(bcs, b) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof MonitorBindingController && bc.binding === b) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findValueBladeController(bcs, v) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof ValueBladeController && bc.value === v) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findSubRack(bc) {\n        if (bc instanceof RackController) {\n            return bc.rack;\n        }\n        if (bc instanceof RackLikeController) {\n            return bc.rackController.rack;\n        }\n        return null;\n    }\n    function findSubBladeControllerSet(bc) {\n        const rack = findSubRack(bc);\n        return rack ? rack['bcSet_'] : null;\n    }\n    class BladeRack {\n        constructor(config) {\n            var _a, _b;\n            this.onBladePositionsChange_ = this.onBladePositionsChange_.bind(this);\n            this.onSetAdd_ = this.onSetAdd_.bind(this);\n            this.onSetRemove_ = this.onSetRemove_.bind(this);\n            this.onChildDispose_ = this.onChildDispose_.bind(this);\n            this.onChildPositionsChange_ = this.onChildPositionsChange_.bind(this);\n            this.onChildInputChange_ = this.onChildInputChange_.bind(this);\n            this.onChildMonitorUpdate_ = this.onChildMonitorUpdate_.bind(this);\n            this.onChildValueChange_ = this.onChildValueChange_.bind(this);\n            this.onChildViewPropsChange_ = this.onChildViewPropsChange_.bind(this);\n            this.onDescendantLayout_ = this.onDescendantLayout_.bind(this);\n            this.onDescendantInputChange_ = this.onDescendantInputChange_.bind(this);\n            this.onDescendantMonitorUpdate_ =\n                this.onDescendantMonitorUpdate_.bind(this);\n            this.emitter = new Emitter();\n            this.blade_ = (_a = config.blade) !== null && _a !== void 0 ? _a : null;\n            (_b = this.blade_) === null || _b === void 0 ? void 0 : _b.value('positions').emitter.on('change', this.onBladePositionsChange_);\n            this.viewProps = config.viewProps;\n            this.bcSet_ = new NestedOrderedSet(findSubBladeControllerSet);\n            this.bcSet_.emitter.on('add', this.onSetAdd_);\n            this.bcSet_.emitter.on('remove', this.onSetRemove_);\n        }\n        get children() {\n            return this.bcSet_.items;\n        }\n        add(bc, opt_index) {\n            var _a;\n            (_a = bc.parent) === null || _a === void 0 ? void 0 : _a.remove(bc);\n            if (isPropertyWritable(bc, 'parent')) {\n                bc.parent = this;\n            }\n            else {\n                bc['parent_'] = this;\n                warnMissing({\n                    key: 'parent',\n                    target: 'BladeController',\n                    place: 'BladeRack.add',\n                });\n            }\n            this.bcSet_.add(bc, opt_index);\n        }\n        remove(bc) {\n            if (isPropertyWritable(bc, 'parent')) {\n                bc.parent = null;\n            }\n            else {\n                bc['parent_'] = null;\n                warnMissing({\n                    key: 'parent',\n                    target: 'BladeController',\n                    place: 'BladeRack.remove',\n                });\n            }\n            this.bcSet_.remove(bc);\n        }\n        find(controllerClass) {\n            return forceCast(this.bcSet_.allItems().filter((bc) => {\n                return bc instanceof controllerClass;\n            }));\n        }\n        onSetAdd_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit('add', {\n                bladeController: ev.item,\n                index: ev.index,\n                isRoot: isRoot,\n                sender: this,\n            });\n            if (!isRoot) {\n                return;\n            }\n            const bc = ev.item;\n            bc.viewProps.emitter.on('change', this.onChildViewPropsChange_);\n            bc.blade\n                .value('positions')\n                .emitter.on('change', this.onChildPositionsChange_);\n            bc.viewProps.handleDispose(this.onChildDispose_);\n            if (bc instanceof InputBindingController) {\n                bc.binding.emitter.on('change', this.onChildInputChange_);\n            }\n            else if (bc instanceof MonitorBindingController) {\n                bc.binding.emitter.on('update', this.onChildMonitorUpdate_);\n            }\n            else if (bc instanceof ValueBladeController) {\n                bc.value.emitter.on('change', this.onChildValueChange_);\n            }\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.on('layout', this.onDescendantLayout_);\n                    emitter.on('inputchange', this.onDescendantInputChange_);\n                    emitter.on('monitorupdate', this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        onSetRemove_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit('remove', {\n                bladeController: ev.item,\n                isRoot: isRoot,\n                sender: this,\n            });\n            if (!isRoot) {\n                return;\n            }\n            const bc = ev.item;\n            if (bc instanceof InputBindingController) {\n                bc.binding.emitter.off('change', this.onChildInputChange_);\n            }\n            else if (bc instanceof MonitorBindingController) {\n                bc.binding.emitter.off('update', this.onChildMonitorUpdate_);\n            }\n            else if (bc instanceof ValueBladeController) {\n                bc.value.emitter.off('change', this.onChildValueChange_);\n            }\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.off('layout', this.onDescendantLayout_);\n                    emitter.off('inputchange', this.onDescendantInputChange_);\n                    emitter.off('monitorupdate', this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        updatePositions_() {\n            const visibleItems = this.bcSet_.items.filter((bc) => !bc.viewProps.get('hidden'));\n            const firstVisibleItem = visibleItems[0];\n            const lastVisibleItem = visibleItems[visibleItems.length - 1];\n            this.bcSet_.items.forEach((bc) => {\n                const ps = [];\n                if (bc === firstVisibleItem) {\n                    ps.push('first');\n                    if (!this.blade_ ||\n                        this.blade_.get('positions').includes('veryfirst')) {\n                        ps.push('veryfirst');\n                    }\n                }\n                if (bc === lastVisibleItem) {\n                    ps.push('last');\n                    if (!this.blade_ || this.blade_.get('positions').includes('verylast')) {\n                        ps.push('verylast');\n                    }\n                }\n                bc.blade.set('positions', ps);\n            });\n        }\n        onChildPositionsChange_() {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onChildViewPropsChange_(_ev) {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onChildDispose_() {\n            const disposedUcs = this.bcSet_.items.filter((bc) => {\n                return bc.viewProps.get('disposed');\n            });\n            disposedUcs.forEach((bc) => {\n                this.bcSet_.remove(bc);\n            });\n        }\n        onChildInputChange_(ev) {\n            const bc = findInputBindingController(this.find(InputBindingController), ev.sender);\n            if (!bc) {\n                throw TpError.alreadyDisposed();\n            }\n            this.emitter.emit('inputchange', {\n                bladeController: bc,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onChildMonitorUpdate_(ev) {\n            const bc = findMonitorBindingController(this.find(MonitorBindingController), ev.sender);\n            if (!bc) {\n                throw TpError.alreadyDisposed();\n            }\n            this.emitter.emit('monitorupdate', {\n                bladeController: bc,\n                sender: this,\n            });\n        }\n        onChildValueChange_(ev) {\n            const bc = findValueBladeController(this.find(ValueBladeController), ev.sender);\n            if (!bc) {\n                throw TpError.alreadyDisposed();\n            }\n            this.emitter.emit('inputchange', {\n                bladeController: bc,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onDescendantLayout_(_) {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onDescendantInputChange_(ev) {\n            this.emitter.emit('inputchange', {\n                bladeController: ev.bladeController,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onDescendantMonitorUpdate_(ev) {\n            this.emitter.emit('monitorupdate', {\n                bladeController: ev.bladeController,\n                sender: this,\n            });\n        }\n        onBladePositionsChange_() {\n            this.updatePositions_();\n        }\n    }\n\n    class RackController extends BladeController {\n        constructor(doc, config) {\n            super(Object.assign(Object.assign({}, config), { view: new PlainView(doc, {\n                    viewName: 'brk',\n                    viewProps: config.viewProps,\n                }) }));\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            const rack = new BladeRack({\n                blade: config.root ? undefined : config.blade,\n                viewProps: config.viewProps,\n            });\n            rack.emitter.on('add', this.onRackAdd_);\n            rack.emitter.on('remove', this.onRackRemove_);\n            this.rack = rack;\n            this.viewProps.handleDispose(() => {\n                for (let i = this.rack.children.length - 1; i >= 0; i--) {\n                    const bc = this.rack.children[i];\n                    bc.viewProps.set('disposed', true);\n                }\n            });\n        }\n        onRackAdd_(ev) {\n            if (!ev.isRoot) {\n                return;\n            }\n            insertElementAt(this.view.element, ev.bladeController.view.element, ev.index);\n        }\n        onRackRemove_(ev) {\n            if (!ev.isRoot) {\n                return;\n            }\n            removeElement(ev.bladeController.view.element);\n        }\n    }\n\n    const bladeContainerClassName = ClassName('cnt');\n\n    class FolderView {\n        constructor(doc, config) {\n            var _a;\n            this.className_ = ClassName((_a = config.viewName) !== null && _a !== void 0 ? _a : 'fld');\n            this.element = doc.createElement('div');\n            this.element.classList.add(this.className_(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            this.foldable_ = config.foldable;\n            this.foldable_.bindExpandedClass(this.element, this.className_(undefined, 'expanded'));\n            bindValueMap(this.foldable_, 'completed', valueToClassName(this.element, this.className_(undefined, 'cpl')));\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(this.className_('b'));\n            bindValueMap(config.props, 'title', (title) => {\n                if (isEmpty(title)) {\n                    this.element.classList.add(this.className_(undefined, 'not'));\n                }\n                else {\n                    this.element.classList.remove(this.className_(undefined, 'not'));\n                }\n            });\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const indentElem = doc.createElement('div');\n            indentElem.classList.add(this.className_('i'));\n            this.element.appendChild(indentElem);\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(this.className_('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n            const markElem = doc.createElement('div');\n            markElem.classList.add(this.className_('m'));\n            this.buttonElement.appendChild(markElem);\n            const containerElem = config.containerElement;\n            containerElem.classList.add(this.className_('c'));\n            this.element.appendChild(containerElem);\n            this.containerElement = containerElem;\n        }\n    }\n\n    class FolderController extends RackLikeController {\n        constructor(doc, config) {\n            var _a;\n            const foldable = Foldable.create((_a = config.expanded) !== null && _a !== void 0 ? _a : true);\n            const rc = new RackController(doc, {\n                blade: config.blade,\n                root: config.root,\n                viewProps: config.viewProps,\n            });\n            super(Object.assign(Object.assign({}, config), { rackController: rc, view: new FolderView(doc, {\n                    containerElement: rc.view.element,\n                    foldable: foldable,\n                    props: config.props,\n                    viewName: config.root ? 'rot' : undefined,\n                    viewProps: config.viewProps,\n                }) }));\n            this.onTitleClick_ = this.onTitleClick_.bind(this);\n            this.props = config.props;\n            this.foldable = foldable;\n            bindFoldable(this.foldable, this.view.containerElement);\n            this.rackController.rack.emitter.on('add', () => {\n                this.foldable.cleanUpTransition();\n            });\n            this.rackController.rack.emitter.on('remove', () => {\n                this.foldable.cleanUpTransition();\n            });\n            this.view.buttonElement.addEventListener('click', this.onTitleClick_);\n        }\n        get document() {\n            return this.view.element.ownerDocument;\n        }\n        onTitleClick_() {\n            this.foldable.set('expanded', !this.foldable.get('expanded'));\n        }\n    }\n\n    const FolderBladePlugin = {\n        id: 'folder',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant('folder'),\n                expanded: p.optional.boolean,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new FolderController(args.document, {\n                blade: args.blade,\n                expanded: args.params.expanded,\n                props: ValueMap.fromObject({\n                    title: args.params.title,\n                }),\n                viewProps: args.viewProps,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof FolderController)) {\n                return null;\n            }\n            return new FolderApi(args.controller, args.pool);\n        },\n    };\n\n    class LabeledValueController extends ValueBladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { value: config.valueController.value, view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    class SeparatorApi extends BladeApi {\n    }\n\n    const className$m = ClassName('spr');\n    class SeparatorView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$m());\n            config.viewProps.bindClassModifiers(this.element);\n            const hrElem = doc.createElement('hr');\n            hrElem.classList.add(className$m('r'));\n            this.element.appendChild(hrElem);\n        }\n    }\n\n    class SeparatorController extends BladeController {\n        constructor(doc, config) {\n            super(Object.assign(Object.assign({}, config), { view: new SeparatorView(doc, {\n                    viewProps: config.viewProps,\n                }) }));\n        }\n    }\n\n    const SeparatorBladePlugin = {\n        id: 'separator',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                view: p.required.constant('separator'),\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new SeparatorController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof SeparatorController)) {\n                return null;\n            }\n            return new SeparatorApi(args.controller);\n        },\n    };\n\n    const className$l = ClassName('tbi');\n    class TabItemView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$l());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValueMap(config.props, 'selected', (selected) => {\n                if (selected) {\n                    this.element.classList.add(className$l(undefined, 'sel'));\n                }\n                else {\n                    this.element.classList.remove(className$l(undefined, 'sel'));\n                }\n            });\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$l('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$l('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n        }\n    }\n\n    class TabItemController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new TabItemView(doc, {\n                props: config.props,\n                viewProps: config.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class TabPageController {\n        constructor(doc, config) {\n            this.onItemClick_ = this.onItemClick_.bind(this);\n            this.ic_ = new TabItemController(doc, {\n                props: config.itemProps,\n                viewProps: ViewProps.create(),\n            });\n            this.ic_.emitter.on('click', this.onItemClick_);\n            this.cc_ = new RackController(doc, {\n                blade: createBlade(),\n                viewProps: ViewProps.create(),\n            });\n            this.props = config.props;\n            bindValueMap(this.props, 'selected', (selected) => {\n                this.itemController.props.set('selected', selected);\n                this.contentController.viewProps.set('hidden', !selected);\n            });\n        }\n        get itemController() {\n            return this.ic_;\n        }\n        get contentController() {\n            return this.cc_;\n        }\n        onItemClick_() {\n            this.props.set('selected', true);\n        }\n    }\n\n    class TabPageApi {\n        constructor(controller, contentRackApi) {\n            this.controller_ = controller;\n            this.rackApi_ = contentRackApi;\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.itemController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.itemController.props.set('title', title);\n        }\n        get selected() {\n            return this.controller_.props.get('selected');\n        }\n        set selected(selected) {\n            this.controller_.props.set('selected', selected);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n    }\n\n    class TabApi extends RackLikeApi {\n        constructor(controller, pool) {\n            super(controller, new RackApi(controller.rackController, pool));\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.onSelect_ = this.onSelect_.bind(this);\n            this.emitter_ = new Emitter();\n            this.pageApiMap_ = new Map();\n            this.rackApi_.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: ev,\n                });\n            });\n            this.rackApi_.on('update', (ev) => {\n                this.emitter_.emit('update', {\n                    event: ev,\n                });\n            });\n            this.controller_.tab.selectedIndex.emitter.on('change', this.onSelect_);\n            this.controller_.pageSet.emitter.on('add', this.onPageAdd_);\n            this.controller_.pageSet.emitter.on('remove', this.onPageRemove_);\n            this.controller_.pageSet.items.forEach((pc) => {\n                this.setUpPageApi_(pc);\n            });\n        }\n        get pages() {\n            return this.controller_.pageSet.items.map((pc) => {\n                const api = this.pageApiMap_.get(pc);\n                if (!api) {\n                    throw TpError.shouldNeverHappen();\n                }\n                return api;\n            });\n        }\n        addPage(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const pc = new TabPageController(doc, {\n                itemProps: ValueMap.fromObject({\n                    selected: false,\n                    title: params.title,\n                }),\n                props: ValueMap.fromObject({\n                    selected: false,\n                }),\n            });\n            this.controller_.add(pc, params.index);\n            const api = this.pageApiMap_.get(pc);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            return api;\n        }\n        removePage(index) {\n            this.controller_.remove(index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpPageApi_(pc) {\n            const rackApi = this.rackApi_['apiSet_'].find((api) => api.controller_ === pc.contentController);\n            if (!rackApi) {\n                throw TpError.shouldNeverHappen();\n            }\n            const api = new TabPageApi(pc, rackApi);\n            this.pageApiMap_.set(pc, api);\n        }\n        onPageAdd_(ev) {\n            this.setUpPageApi_(ev.item);\n        }\n        onPageRemove_(ev) {\n            const api = this.pageApiMap_.get(ev.item);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.pageApiMap_.delete(ev.item);\n        }\n        onSelect_(ev) {\n            this.emitter_.emit('select', {\n                event: new TpTabSelectEvent(this, ev.rawValue),\n            });\n        }\n    }\n\n    const INDEX_NOT_SELECTED = -1;\n    class Tab {\n        constructor() {\n            this.onItemSelectedChange_ = this.onItemSelectedChange_.bind(this);\n            this.empty = createValue(true);\n            this.selectedIndex = createValue(INDEX_NOT_SELECTED);\n            this.items_ = [];\n        }\n        add(item, opt_index) {\n            const index = opt_index !== null && opt_index !== void 0 ? opt_index : this.items_.length;\n            this.items_.splice(index, 0, item);\n            item.emitter.on('change', this.onItemSelectedChange_);\n            this.keepSelection_();\n        }\n        remove(item) {\n            const index = this.items_.indexOf(item);\n            if (index < 0) {\n                return;\n            }\n            this.items_.splice(index, 1);\n            item.emitter.off('change', this.onItemSelectedChange_);\n            this.keepSelection_();\n        }\n        keepSelection_() {\n            if (this.items_.length === 0) {\n                this.selectedIndex.rawValue = INDEX_NOT_SELECTED;\n                this.empty.rawValue = true;\n                return;\n            }\n            const firstSelIndex = this.items_.findIndex((s) => s.rawValue);\n            if (firstSelIndex < 0) {\n                this.items_.forEach((s, i) => {\n                    s.rawValue = i === 0;\n                });\n                this.selectedIndex.rawValue = 0;\n            }\n            else {\n                this.items_.forEach((s, i) => {\n                    s.rawValue = i === firstSelIndex;\n                });\n                this.selectedIndex.rawValue = firstSelIndex;\n            }\n            this.empty.rawValue = false;\n        }\n        onItemSelectedChange_(ev) {\n            if (ev.rawValue) {\n                const index = this.items_.findIndex((s) => s === ev.sender);\n                this.items_.forEach((s, i) => {\n                    s.rawValue = i === index;\n                });\n                this.selectedIndex.rawValue = index;\n            }\n            else {\n                this.keepSelection_();\n            }\n        }\n    }\n\n    const className$k = ClassName('tab');\n    class TabView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$k(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.empty, valueToClassName(this.element, className$k(undefined, 'nop')));\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$k('t'));\n            this.element.appendChild(titleElem);\n            this.itemsElement = titleElem;\n            const indentElem = doc.createElement('div');\n            indentElem.classList.add(className$k('i'));\n            this.element.appendChild(indentElem);\n            const contentsElem = config.contentsElement;\n            contentsElem.classList.add(className$k('c'));\n            this.element.appendChild(contentsElem);\n            this.contentsElement = contentsElem;\n        }\n    }\n\n    class TabController extends RackLikeController {\n        constructor(doc, config) {\n            const cr = new RackController(doc, {\n                blade: config.blade,\n                viewProps: config.viewProps,\n            });\n            const tab = new Tab();\n            super({\n                blade: config.blade,\n                rackController: cr,\n                view: new TabView(doc, {\n                    contentsElement: cr.view.element,\n                    empty: tab.empty,\n                    viewProps: config.viewProps,\n                }),\n            });\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.pageSet_ = new NestedOrderedSet(() => null);\n            this.pageSet_.emitter.on('add', this.onPageAdd_);\n            this.pageSet_.emitter.on('remove', this.onPageRemove_);\n            this.tab = tab;\n        }\n        get pageSet() {\n            return this.pageSet_;\n        }\n        add(pc, opt_index) {\n            this.pageSet_.add(pc, opt_index);\n        }\n        remove(index) {\n            this.pageSet_.remove(this.pageSet_.items[index]);\n        }\n        onPageAdd_(ev) {\n            const pc = ev.item;\n            insertElementAt(this.view.itemsElement, pc.itemController.view.element, ev.index);\n            pc.itemController.viewProps.set('parent', this.viewProps);\n            this.rackController.rack.add(pc.contentController, ev.index);\n            this.tab.add(pc.props.value('selected'));\n        }\n        onPageRemove_(ev) {\n            const pc = ev.item;\n            removeElement(pc.itemController.view.element);\n            pc.itemController.viewProps.set('parent', null);\n            this.rackController.rack.remove(pc.contentController);\n            this.tab.remove(pc.props.value('selected'));\n        }\n    }\n\n    const TabBladePlugin = {\n        id: 'tab',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                pages: p.required.array(p.required.object({ title: p.required.string })),\n                view: p.required.constant('tab'),\n            });\n            if (!result || result.pages.length === 0) {\n                return null;\n            }\n            return { params: result };\n        },\n        controller(args) {\n            const c = new TabController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps,\n            });\n            args.params.pages.forEach((p) => {\n                const pc = new TabPageController(args.document, {\n                    itemProps: ValueMap.fromObject({\n                        selected: false,\n                        title: p.title,\n                    }),\n                    props: ValueMap.fromObject({\n                        selected: false,\n                    }),\n                });\n                c.add(pc);\n            });\n            return c;\n        },\n        api(args) {\n            if (!(args.controller instanceof TabController)) {\n                return null;\n            }\n            return new TabApi(args.controller, args.pool);\n        },\n    };\n\n    function createBladeController(plugin, args) {\n        const ac = plugin.accept(args.params);\n        if (!ac) {\n            return null;\n        }\n        const disabled = ParamsParsers.optional.boolean(args.params['disabled']).value;\n        const hidden = ParamsParsers.optional.boolean(args.params['hidden']).value;\n        return plugin.controller({\n            blade: createBlade(),\n            document: args.document,\n            params: forceCast(Object.assign(Object.assign({}, ac.params), { disabled: disabled, hidden: hidden })),\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n    }\n\n    class ManualTicker {\n        constructor() {\n            this.disabled = false;\n            this.emitter = new Emitter();\n        }\n        dispose() { }\n        tick() {\n            if (this.disabled) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class IntervalTicker {\n        constructor(doc, interval) {\n            this.disabled_ = false;\n            this.timerId_ = null;\n            this.onTick_ = this.onTick_.bind(this);\n            this.doc_ = doc;\n            this.emitter = new Emitter();\n            this.interval_ = interval;\n            this.setTimer_();\n        }\n        get disabled() {\n            return this.disabled_;\n        }\n        set disabled(inactive) {\n            this.disabled_ = inactive;\n            if (this.disabled_) {\n                this.clearTimer_();\n            }\n            else {\n                this.setTimer_();\n            }\n        }\n        dispose() {\n            this.clearTimer_();\n        }\n        clearTimer_() {\n            if (this.timerId_ === null) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                win.clearInterval(this.timerId_);\n            }\n            this.timerId_ = null;\n        }\n        setTimer_() {\n            this.clearTimer_();\n            if (this.interval_ <= 0) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                this.timerId_ = win.setInterval(this.onTick_, this.interval_);\n            }\n        }\n        onTick_() {\n            if (this.disabled_) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class CompositeConstraint {\n        constructor(constraints) {\n            this.constraints = constraints;\n        }\n        constrain(value) {\n            return this.constraints.reduce((result, c) => {\n                return c.constrain(result);\n            }, value);\n        }\n    }\n    function findConstraint(c, constraintClass) {\n        if (c instanceof constraintClass) {\n            return c;\n        }\n        if (c instanceof CompositeConstraint) {\n            const result = c.constraints.reduce((tmpResult, sc) => {\n                if (tmpResult) {\n                    return tmpResult;\n                }\n                return sc instanceof constraintClass ? sc : null;\n            }, null);\n            if (result) {\n                return result;\n            }\n        }\n        return null;\n    }\n\n    class DefiniteRangeConstraint {\n        constructor(config) {\n            this.values = ValueMap.fromObject({\n                max: config.max,\n                min: config.min,\n            });\n        }\n        constrain(value) {\n            const max = this.values.get('max');\n            const min = this.values.get('min');\n            return Math.min(Math.max(value, min), max);\n        }\n    }\n\n    class ListConstraint {\n        constructor(options) {\n            this.values = ValueMap.fromObject({\n                options: options,\n            });\n        }\n        get options() {\n            return this.values.get('options');\n        }\n        constrain(value) {\n            const opts = this.values.get('options');\n            if (opts.length === 0) {\n                return value;\n            }\n            const matched = opts.filter((item) => {\n                return item.value === value;\n            }).length > 0;\n            return matched ? value : opts[0].value;\n        }\n    }\n\n    class RangeConstraint {\n        constructor(config) {\n            this.values = ValueMap.fromObject({\n                max: config.max,\n                min: config.min,\n            });\n        }\n        get maxValue() {\n            return this.values.get('max');\n        }\n        get minValue() {\n            return this.values.get('min');\n        }\n        constrain(value) {\n            const max = this.values.get('max');\n            const min = this.values.get('min');\n            let result = value;\n            if (!isEmpty(min)) {\n                result = Math.max(result, min);\n            }\n            if (!isEmpty(max)) {\n                result = Math.min(result, max);\n            }\n            return result;\n        }\n    }\n\n    class StepConstraint {\n        constructor(step, origin = 0) {\n            this.step = step;\n            this.origin = origin;\n        }\n        constrain(value) {\n            const o = this.origin % this.step;\n            const r = Math.round((value - o) / this.step);\n            return o + r * this.step;\n        }\n    }\n\n    const className$j = ClassName('lst');\n    class ListView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.props_ = config.props;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$j());\n            config.viewProps.bindClassModifiers(this.element);\n            const selectElem = doc.createElement('select');\n            selectElem.classList.add(className$j('s'));\n            bindValueMap(this.props_, 'options', (opts) => {\n                removeChildElements(selectElem);\n                opts.forEach((item, index) => {\n                    const optionElem = doc.createElement('option');\n                    optionElem.dataset.index = String(index);\n                    optionElem.textContent = item.text;\n                    optionElem.value = String(item.value);\n                    selectElem.appendChild(optionElem);\n                });\n            });\n            config.viewProps.bindDisabled(selectElem);\n            this.element.appendChild(selectElem);\n            this.selectElement = selectElem;\n            const markElem = doc.createElement('div');\n            markElem.classList.add(className$j('m'));\n            markElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n            this.element.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value_ = config.value;\n            this.update_();\n        }\n        update_() {\n            this.selectElement.value = String(this.value_.rawValue);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class ListController {\n        constructor(doc, config) {\n            this.onSelectChange_ = this.onSelectChange_.bind(this);\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ListView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.selectElement.addEventListener('change', this.onSelectChange_);\n        }\n        onSelectChange_(e) {\n            const selectElem = forceCast(e.currentTarget);\n            const optElem = selectElem.selectedOptions.item(0);\n            if (!optElem) {\n                return;\n            }\n            const itemIndex = Number(optElem.dataset.index);\n            this.value.rawValue = this.props.get('options')[itemIndex].value;\n        }\n    }\n\n    const className$i = ClassName('pop');\n    class PopupView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$i());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.shows, valueToClassName(this.element, className$i(undefined, 'v')));\n        }\n    }\n\n    class PopupController {\n        constructor(doc, config) {\n            this.shows = createValue(false);\n            this.viewProps = config.viewProps;\n            this.view = new PopupView(doc, {\n                shows: this.shows,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$h = ClassName('txt');\n    class TextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$h());\n            config.viewProps.bindClassModifiers(this.element);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$h('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value_ = config.value;\n            this.refresh();\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value_.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class TextController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new TextView(doc, {\n                props: config.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.refresh();\n        }\n    }\n\n    function boolToString(value) {\n        return String(value);\n    }\n    function boolFromUnknown(value) {\n        if (value === 'false') {\n            return false;\n        }\n        return !!value;\n    }\n    function BooleanFormatter(value) {\n        return boolToString(value);\n    }\n\n    class NumberLiteralNode {\n        constructor(text) {\n            this.text = text;\n        }\n        evaluate() {\n            return Number(this.text);\n        }\n        toString() {\n            return this.text;\n        }\n    }\n    const BINARY_OPERATION_MAP = {\n        '**': (v1, v2) => Math.pow(v1, v2),\n        '*': (v1, v2) => v1 * v2,\n        '/': (v1, v2) => v1 / v2,\n        '%': (v1, v2) => v1 % v2,\n        '+': (v1, v2) => v1 + v2,\n        '-': (v1, v2) => v1 - v2,\n        '<<': (v1, v2) => v1 << v2,\n        '>>': (v1, v2) => v1 >> v2,\n        '>>>': (v1, v2) => v1 >>> v2,\n        '&': (v1, v2) => v1 & v2,\n        '^': (v1, v2) => v1 ^ v2,\n        '|': (v1, v2) => v1 | v2,\n    };\n    class BinaryOperationNode {\n        constructor(operator, left, right) {\n            this.left = left;\n            this.operator = operator;\n            this.right = right;\n        }\n        evaluate() {\n            const op = BINARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected binary operator: '${this.operator}`);\n            }\n            return op(this.left.evaluate(), this.right.evaluate());\n        }\n        toString() {\n            return [\n                'b(',\n                this.left.toString(),\n                this.operator,\n                this.right.toString(),\n                ')',\n            ].join(' ');\n        }\n    }\n    const UNARY_OPERATION_MAP = {\n        '+': (v) => v,\n        '-': (v) => -v,\n        '~': (v) => ~v,\n    };\n    class UnaryOperationNode {\n        constructor(operator, expr) {\n            this.operator = operator;\n            this.expression = expr;\n        }\n        evaluate() {\n            const op = UNARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected unary operator: '${this.operator}`);\n            }\n            return op(this.expression.evaluate());\n        }\n        toString() {\n            return ['u(', this.operator, this.expression.toString(), ')'].join(' ');\n        }\n    }\n\n    function combineReader(parsers) {\n        return (text, cursor) => {\n            for (let i = 0; i < parsers.length; i++) {\n                const result = parsers[i](text, cursor);\n                if (result !== '') {\n                    return result;\n                }\n            }\n            return '';\n        };\n    }\n    function readWhitespace(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^\\s+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readNonZeroDigit(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        return ch.match(/^[1-9]$/) ? ch : '';\n    }\n    function readDecimalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readSignedInteger(text, cursor) {\n        const ds = readDecimalDigits(text, cursor);\n        if (ds !== '') {\n            return ds;\n        }\n        const sign = text.substr(cursor, 1);\n        cursor += 1;\n        if (sign !== '-' && sign !== '+') {\n            return '';\n        }\n        const sds = readDecimalDigits(text, cursor);\n        if (sds === '') {\n            return '';\n        }\n        return sign + sds;\n    }\n    function readExponentPart(text, cursor) {\n        const e = text.substr(cursor, 1);\n        cursor += 1;\n        if (e.toLowerCase() !== 'e') {\n            return '';\n        }\n        const si = readSignedInteger(text, cursor);\n        if (si === '') {\n            return '';\n        }\n        return e + si;\n    }\n    function readDecimalIntegerLiteral(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        if (ch === '0') {\n            return ch;\n        }\n        const nzd = readNonZeroDigit(text, cursor);\n        cursor += nzd.length;\n        if (nzd === '') {\n            return '';\n        }\n        return nzd + readDecimalDigits(text, cursor);\n    }\n    function readDecimalLiteral1(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        return dil + dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral2(text, cursor) {\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        if (dds === '') {\n            return '';\n        }\n        return dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral3(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        return dil + readExponentPart(text, cursor);\n    }\n    const readDecimalLiteral = combineReader([\n        readDecimalLiteral1,\n        readDecimalLiteral2,\n        readDecimalLiteral3,\n    ]);\n    function parseBinaryDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[01]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readBinaryIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0b') {\n            return '';\n        }\n        const bds = parseBinaryDigits(text, cursor);\n        if (bds === '') {\n            return '';\n        }\n        return prefix + bds;\n    }\n    function readOctalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-7]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readOctalIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0o') {\n            return '';\n        }\n        const ods = readOctalDigits(text, cursor);\n        if (ods === '') {\n            return '';\n        }\n        return prefix + ods;\n    }\n    function readHexDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9a-f]+/i);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readHexIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0x') {\n            return '';\n        }\n        const hds = readHexDigits(text, cursor);\n        if (hds === '') {\n            return '';\n        }\n        return prefix + hds;\n    }\n    const readNonDecimalIntegerLiteral = combineReader([\n        readBinaryIntegerLiteral,\n        readOctalIntegerLiteral,\n        readHexIntegerLiteral,\n    ]);\n    const readNumericLiteral = combineReader([\n        readNonDecimalIntegerLiteral,\n        readDecimalLiteral,\n    ]);\n\n    function parseLiteral(text, cursor) {\n        const num = readNumericLiteral(text, cursor);\n        cursor += num.length;\n        if (num === '') {\n            return null;\n        }\n        return {\n            evaluable: new NumberLiteralNode(num),\n            cursor: cursor,\n        };\n    }\n    function parseParenthesizedExpression(text, cursor) {\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '(') {\n            return null;\n        }\n        const expr = parseExpression(text, cursor);\n        if (!expr) {\n            return null;\n        }\n        cursor = expr.cursor;\n        cursor += readWhitespace(text, cursor).length;\n        const cl = text.substr(cursor, 1);\n        cursor += cl.length;\n        if (cl !== ')') {\n            return null;\n        }\n        return {\n            evaluable: expr.evaluable,\n            cursor: cursor,\n        };\n    }\n    function parsePrimaryExpression(text, cursor) {\n        var _a;\n        return ((_a = parseLiteral(text, cursor)) !== null && _a !== void 0 ? _a : parseParenthesizedExpression(text, cursor));\n    }\n    function parseUnaryExpression(text, cursor) {\n        const expr = parsePrimaryExpression(text, cursor);\n        if (expr) {\n            return expr;\n        }\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '+' && op !== '-' && op !== '~') {\n            return null;\n        }\n        const num = parseUnaryExpression(text, cursor);\n        if (!num) {\n            return null;\n        }\n        cursor = num.cursor;\n        return {\n            cursor: cursor,\n            evaluable: new UnaryOperationNode(op, num.evaluable),\n        };\n    }\n    function readBinaryOperator(ops, text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        const op = ops.filter((op) => text.startsWith(op, cursor))[0];\n        if (!op) {\n            return null;\n        }\n        cursor += op.length;\n        cursor += readWhitespace(text, cursor).length;\n        return {\n            cursor: cursor,\n            operator: op,\n        };\n    }\n    function createBinaryOperationExpressionParser(exprParser, ops) {\n        return (text, cursor) => {\n            const firstExpr = exprParser(text, cursor);\n            if (!firstExpr) {\n                return null;\n            }\n            cursor = firstExpr.cursor;\n            let expr = firstExpr.evaluable;\n            for (;;) {\n                const op = readBinaryOperator(ops, text, cursor);\n                if (!op) {\n                    break;\n                }\n                cursor = op.cursor;\n                const nextExpr = exprParser(text, cursor);\n                if (!nextExpr) {\n                    return null;\n                }\n                cursor = nextExpr.cursor;\n                expr = new BinaryOperationNode(op.operator, expr, nextExpr.evaluable);\n            }\n            return expr\n                ? {\n                    cursor: cursor,\n                    evaluable: expr,\n                }\n                : null;\n        };\n    }\n    const parseBinaryOperationExpression = [\n        ['**'],\n        ['*', '/', '%'],\n        ['+', '-'],\n        ['<<', '>>>', '>>'],\n        ['&'],\n        ['^'],\n        ['|'],\n    ].reduce((parser, ops) => {\n        return createBinaryOperationExpressionParser(parser, ops);\n    }, parseUnaryExpression);\n    function parseExpression(text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        return parseBinaryOperationExpression(text, cursor);\n    }\n    function parseEcmaNumberExpression(text) {\n        const expr = parseExpression(text, 0);\n        if (!expr) {\n            return null;\n        }\n        const cursor = expr.cursor + readWhitespace(text, expr.cursor).length;\n        if (cursor !== text.length) {\n            return null;\n        }\n        return expr.evaluable;\n    }\n\n    function parseNumber(text) {\n        var _a;\n        const r = parseEcmaNumberExpression(text);\n        return (_a = r === null || r === void 0 ? void 0 : r.evaluate()) !== null && _a !== void 0 ? _a : null;\n    }\n    function numberFromUnknown(value) {\n        if (typeof value === 'number') {\n            return value;\n        }\n        if (typeof value === 'string') {\n            const pv = parseNumber(value);\n            if (!isEmpty(pv)) {\n                return pv;\n            }\n        }\n        return 0;\n    }\n    function numberToString(value) {\n        return String(value);\n    }\n    function createNumberFormatter(digits) {\n        return (value) => {\n            return value.toFixed(Math.max(Math.min(digits, 20), 0));\n        };\n    }\n\n    const innerFormatter = createNumberFormatter(0);\n    function formatPercentage(value) {\n        return innerFormatter(value) + '%';\n    }\n\n    function stringFromUnknown(value) {\n        return String(value);\n    }\n    function formatString(value) {\n        return value;\n    }\n\n    function fillBuffer(buffer, bufferSize) {\n        while (buffer.length < bufferSize) {\n            buffer.push(undefined);\n        }\n    }\n    function initializeBuffer(bufferSize) {\n        const buffer = [];\n        fillBuffer(buffer, bufferSize);\n        return createValue(buffer);\n    }\n    function createTrimmedBuffer(buffer) {\n        const index = buffer.indexOf(undefined);\n        return forceCast(index < 0 ? buffer : buffer.slice(0, index));\n    }\n    function createPushedBuffer(buffer, newValue) {\n        const newBuffer = [...createTrimmedBuffer(buffer), newValue];\n        if (newBuffer.length > buffer.length) {\n            newBuffer.splice(0, newBuffer.length - buffer.length);\n        }\n        else {\n            fillBuffer(newBuffer, buffer.length);\n        }\n        return newBuffer;\n    }\n\n    function connectValues({ primary, secondary, forward, backward, }) {\n        let changing = false;\n        function preventFeedback(callback) {\n            if (changing) {\n                return;\n            }\n            changing = true;\n            callback();\n            changing = false;\n        }\n        primary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        secondary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                primary.setRawValue(backward(primary, secondary), ev.options);\n            });\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        preventFeedback(() => {\n            secondary.setRawValue(forward(primary, secondary), {\n                forceEmit: false,\n                last: true,\n            });\n        });\n    }\n\n    function getStepForKey(baseStep, keys) {\n        const step = baseStep * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\n        if (keys.upKey) {\n            return +step;\n        }\n        else if (keys.downKey) {\n            return -step;\n        }\n        return 0;\n    }\n    function getVerticalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowDown',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowUp',\n        };\n    }\n    function getHorizontalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowLeft',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowRight',\n        };\n    }\n    function isVerticalArrowKey(key) {\n        return key === 'ArrowUp' || key === 'ArrowDown';\n    }\n    function isArrowKey(key) {\n        return isVerticalArrowKey(key) || key === 'ArrowLeft' || key === 'ArrowRight';\n    }\n\n    function computeOffset$1(ev, elem) {\n        var _a, _b;\n        const win = elem.ownerDocument.defaultView;\n        const rect = elem.getBoundingClientRect();\n        return {\n            x: ev.pageX - (((_a = (win && win.scrollX)) !== null && _a !== void 0 ? _a : 0) + rect.left),\n            y: ev.pageY - (((_b = (win && win.scrollY)) !== null && _b !== void 0 ? _b : 0) + rect.top),\n        };\n    }\n    class PointerHandler {\n        constructor(element) {\n            this.lastTouch_ = null;\n            this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\n            this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\n            this.onMouseDown_ = this.onMouseDown_.bind(this);\n            this.onTouchEnd_ = this.onTouchEnd_.bind(this);\n            this.onTouchMove_ = this.onTouchMove_.bind(this);\n            this.onTouchStart_ = this.onTouchStart_.bind(this);\n            this.elem_ = element;\n            this.emitter = new Emitter();\n            element.addEventListener('touchstart', this.onTouchStart_, {\n                passive: false,\n            });\n            element.addEventListener('touchmove', this.onTouchMove_, {\n                passive: true,\n            });\n            element.addEventListener('touchend', this.onTouchEnd_);\n            element.addEventListener('mousedown', this.onMouseDown_);\n        }\n        computePosition_(offset) {\n            const rect = this.elem_.getBoundingClientRect();\n            return {\n                bounds: {\n                    width: rect.width,\n                    height: rect.height,\n                },\n                point: offset\n                    ? {\n                        x: offset.x,\n                        y: offset.y,\n                    }\n                    : null,\n            };\n        }\n        onMouseDown_(ev) {\n            var _a;\n            ev.preventDefault();\n            (_a = ev.currentTarget) === null || _a === void 0 ? void 0 : _a.focus();\n            const doc = this.elem_.ownerDocument;\n            doc.addEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.addEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseMove_(ev) {\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseUp_(ev) {\n            const doc = this.elem_.ownerDocument;\n            doc.removeEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.removeEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onTouchStart_(ev) {\n            ev.preventDefault();\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchMove_(ev) {\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchEnd_(ev) {\n            var _a;\n            const touch = (_a = ev.targetTouches.item(0)) !== null && _a !== void 0 ? _a : this.lastTouch_;\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n    }\n\n    function mapRange(value, start1, end1, start2, end2) {\n        const p = (value - start1) / (end1 - start1);\n        return start2 + p * (end2 - start2);\n    }\n    function getDecimalDigits(value) {\n        const text = String(value.toFixed(10));\n        const frac = text.split('.')[1];\n        return frac.replace(/0+$/, '').length;\n    }\n    function constrainRange(value, min, max) {\n        return Math.min(Math.max(value, min), max);\n    }\n    function loopRange(value, max) {\n        return ((value % max) + max) % max;\n    }\n\n    const className$g = ClassName('txt');\n    class NumberTextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$g(), className$g(undefined, 'num'));\n            if (config.arrayPosition) {\n                this.element.classList.add(className$g(undefined, config.arrayPosition));\n            }\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$g('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            this.onDraggingChange_ = this.onDraggingChange_.bind(this);\n            this.dragging_ = config.dragging;\n            this.dragging_.emitter.on('change', this.onDraggingChange_);\n            this.element.classList.add(className$g());\n            this.inputElement.classList.add(className$g('i'));\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$g('k'));\n            this.element.appendChild(knobElem);\n            this.knobElement = knobElem;\n            const guideElem = doc.createElementNS(SVG_NS, 'svg');\n            guideElem.classList.add(className$g('g'));\n            this.knobElement.appendChild(guideElem);\n            const bodyElem = doc.createElementNS(SVG_NS, 'path');\n            bodyElem.classList.add(className$g('gb'));\n            guideElem.appendChild(bodyElem);\n            this.guideBodyElem_ = bodyElem;\n            const headElem = doc.createElementNS(SVG_NS, 'path');\n            headElem.classList.add(className$g('gh'));\n            guideElem.appendChild(headElem);\n            this.guideHeadElem_ = headElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(ClassName('tt')());\n            this.knobElement.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.refresh();\n        }\n        onDraggingChange_(ev) {\n            if (ev.rawValue === null) {\n                this.element.classList.remove(className$g(undefined, 'drg'));\n                return;\n            }\n            this.element.classList.add(className$g(undefined, 'drg'));\n            const x = ev.rawValue / this.props_.get('draggingScale');\n            const aox = x + (x > 0 ? -1 : x < 0 ? +1 : 0);\n            const adx = constrainRange(-aox, -4, +4);\n            this.guideHeadElem_.setAttributeNS(null, 'd', [`M ${aox + adx},0 L${aox},4 L${aox + adx},8`, `M ${x},-1 L${x},9`].join(' '));\n            this.guideBodyElem_.setAttributeNS(null, 'd', `M 0,4 L${x},4`);\n            const formatter = this.props_.get('formatter');\n            this.tooltipElem_.textContent = formatter(this.value.rawValue);\n            this.tooltipElem_.style.left = `${x}px`;\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class NumberTextController {\n        constructor(doc, config) {\n            var _a;\n            this.originRawValue_ = 0;\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n            this.onInputKeyUp_ = this.onInputKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.sliderProps_ = (_a = config.sliderProps) !== null && _a !== void 0 ? _a : null;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.dragging_ = createValue(null);\n            this.view = new NumberTextView(doc, {\n                arrayPosition: config.arrayPosition,\n                dragging: this.dragging_,\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n            this.view.inputElement.addEventListener('keydown', this.onInputKeyDown_);\n            this.view.inputElement.addEventListener('keyup', this.onInputKeyUp_);\n            const ph = new PointerHandler(this.view.knobElement);\n            ph.emitter.on('down', this.onPointerDown_);\n            ph.emitter.on('move', this.onPointerMove_);\n            ph.emitter.on('up', this.onPointerUp_);\n        }\n        constrainValue_(value) {\n            var _a, _b;\n            const min = (_a = this.sliderProps_) === null || _a === void 0 ? void 0 : _a.get('minValue');\n            const max = (_b = this.sliderProps_) === null || _b === void 0 ? void 0 : _b.get('maxValue');\n            let v = value;\n            if (min !== undefined) {\n                v = Math.max(v, min);\n            }\n            if (max !== undefined) {\n                v = Math.min(v, max);\n            }\n            return v;\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = this.constrainValue_(parsedValue);\n            }\n            this.view.refresh();\n        }\n        onInputKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.constrainValue_(this.value.rawValue + step), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onInputKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPointerDown_() {\n            this.originRawValue_ = this.value.rawValue;\n            this.dragging_.rawValue = 0;\n        }\n        computeDraggingValue_(data) {\n            if (!data.point) {\n                return null;\n            }\n            const dx = data.point.x - data.bounds.width / 2;\n            return this.constrainValue_(this.originRawValue_ + dx * this.props.get('draggingScale'));\n        }\n        onPointerMove_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: false,\n                last: false,\n            });\n            this.dragging_.rawValue = this.value.rawValue - this.originRawValue_;\n        }\n        onPointerUp_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: true,\n                last: true,\n            });\n            this.dragging_.rawValue = null;\n        }\n    }\n\n    const className$f = ClassName('sld');\n    class SliderView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$f());\n            config.viewProps.bindClassModifiers(this.element);\n            const trackElem = doc.createElement('div');\n            trackElem.classList.add(className$f('t'));\n            config.viewProps.bindTabIndex(trackElem);\n            this.element.appendChild(trackElem);\n            this.trackElement = trackElem;\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$f('k'));\n            this.trackElement.appendChild(knobElem);\n            this.knobElement = knobElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const p = constrainRange(mapRange(this.value.rawValue, this.props_.get('minValue'), this.props_.get('maxValue'), 0, 100), 0, 100);\n            this.knobElement.style.width = `${p}%`;\n        }\n        onChange_() {\n            this.update_();\n        }\n    }\n\n    class SliderController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDownOrMove_ = this.onPointerDownOrMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.props = config.props;\n            this.view = new SliderView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.trackElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on('move', this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.trackElement.addEventListener('keydown', this.onKeyDown_);\n            this.view.trackElement.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            this.value.setRawValue(mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, this.props.get('minValue'), this.props.get('maxValue')), opts);\n        }\n        onPointerDownOrMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue + step, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$e = ClassName('sldtxt');\n    class SliderTextView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$e());\n            const sliderElem = doc.createElement('div');\n            sliderElem.classList.add(className$e('s'));\n            this.sliderView_ = config.sliderView;\n            sliderElem.appendChild(this.sliderView_.element);\n            this.element.appendChild(sliderElem);\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$e('t'));\n            this.textView_ = config.textView;\n            textElem.appendChild(this.textView_.element);\n            this.element.appendChild(textElem);\n        }\n    }\n\n    class SliderTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.sliderC_ = new SliderController(doc, {\n                baseStep: config.baseStep,\n                props: config.sliderProps,\n                value: config.value,\n                viewProps: this.viewProps,\n            });\n            this.textC_ = new NumberTextController(doc, {\n                baseStep: config.baseStep,\n                parser: config.parser,\n                props: config.textProps,\n                sliderProps: config.sliderProps,\n                value: config.value,\n                viewProps: config.viewProps,\n            });\n            this.view = new SliderTextView(doc, {\n                sliderView: this.sliderC_.view,\n                textView: this.textC_.view,\n            });\n        }\n        get sliderController() {\n            return this.sliderC_;\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n\n    function writePrimitive(target, value) {\n        target.write(value);\n    }\n\n    function parseListOptions(value) {\n        const p = ParamsParsers;\n        if (Array.isArray(value)) {\n            return p.required.array(p.required.object({\n                text: p.required.string,\n                value: p.required.raw,\n            }))(value).value;\n        }\n        if (typeof value === 'object') {\n            return p.required.raw(value)\n                .value;\n        }\n        return undefined;\n    }\n    function parsePickerLayout(value) {\n        if (value === 'inline' || value === 'popup') {\n            return value;\n        }\n        return undefined;\n    }\n    function parsePointDimensionParams(value) {\n        const p = ParamsParsers;\n        return p.required.object({\n            max: p.optional.number,\n            min: p.optional.number,\n            step: p.optional.number,\n        })(value).value;\n    }\n    function normalizeListOptions(options) {\n        if (Array.isArray(options)) {\n            return options;\n        }\n        const items = [];\n        Object.keys(options).forEach((text) => {\n            items.push({ text: text, value: options[text] });\n        });\n        return items;\n    }\n    function createListConstraint(options) {\n        return !isEmpty(options)\n            ? new ListConstraint(normalizeListOptions(forceCast(options)))\n            : null;\n    }\n    function findStep(constraint) {\n        const c = constraint ? findConstraint(constraint, StepConstraint) : null;\n        if (!c) {\n            return null;\n        }\n        return c.step;\n    }\n    function getSuitableDecimalDigits(constraint, rawValue) {\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        if (sc) {\n            return getDecimalDigits(sc.step);\n        }\n        return Math.max(getDecimalDigits(rawValue), 2);\n    }\n    function getBaseStep(constraint) {\n        const step = findStep(constraint);\n        return step !== null && step !== void 0 ? step : 1;\n    }\n    function getSuitableDraggingScale(constraint, rawValue) {\n        var _a;\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        const base = Math.abs((_a = sc === null || sc === void 0 ? void 0 : sc.step) !== null && _a !== void 0 ? _a : rawValue);\n        return base === 0 ? 0.1 : Math.pow(10, Math.floor(Math.log10(base)) - 1);\n    }\n\n    const className$d = ClassName('ckb');\n    class CheckboxView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$d());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('label');\n            labelElem.classList.add(className$d('l'));\n            this.element.appendChild(labelElem);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$d('i'));\n            inputElem.type = 'checkbox';\n            labelElem.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.viewProps.bindDisabled(this.inputElement);\n            const wrapperElem = doc.createElement('div');\n            wrapperElem.classList.add(className$d('w'));\n            labelElem.appendChild(wrapperElem);\n            const markElem = createSvgIconElement(doc, 'check');\n            wrapperElem.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            this.inputElement.checked = this.value.rawValue;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class CheckboxController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new CheckboxView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            this.value.rawValue = inputElem.checked;\n        }\n    }\n\n    function createConstraint$6(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const BooleanInputPlugin = {\n        id: 'input-bool',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'boolean') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => boolFromUnknown,\n            constraint: (args) => createConstraint$6(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            const lc = c && findConstraint(c, ListConstraint);\n            if (lc) {\n                return new ListController(doc, {\n                    props: new ValueMap({\n                        options: lc.values.value('options'),\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new CheckboxController(doc, {\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const className$c = ClassName('col');\n    class ColorView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$c());\n            config.foldable.bindExpandedClass(this.element, className$c(undefined, 'expanded'));\n            bindValueMap(config.foldable, 'completed', valueToClassName(this.element, className$c(undefined, 'cpl')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$c('h'));\n            this.element.appendChild(headElem);\n            const swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$c('s'));\n            headElem.appendChild(swatchElem);\n            this.swatchElement = swatchElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$c('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$c('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    function rgbToHslInt(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const c = cmax - cmin;\n        let h = 0;\n        let s = 0;\n        const l = (cmin + cmax) / 2;\n        if (c !== 0) {\n            s = c / (1 - Math.abs(cmax + cmin - 1));\n            if (rp === cmax) {\n                h = (gp - bp) / c;\n            }\n            else if (gp === cmax) {\n                h = 2 + (bp - rp) / c;\n            }\n            else {\n                h = 4 + (rp - gp) / c;\n            }\n            h = h / 6 + (h < 0 ? 1 : 0);\n        }\n        return [h * 360, s * 100, l * 100];\n    }\n    function hslToRgbInt(h, s, l) {\n        const hp = ((h % 360) + 360) % 360;\n        const sp = constrainRange(s / 100, 0, 1);\n        const lp = constrainRange(l / 100, 0, 1);\n        const c = (1 - Math.abs(2 * lp - 1)) * sp;\n        const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        const m = lp - c / 2;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            [rp, gp, bp] = [c, x, 0];\n        }\n        else if (hp >= 60 && hp < 120) {\n            [rp, gp, bp] = [x, c, 0];\n        }\n        else if (hp >= 120 && hp < 180) {\n            [rp, gp, bp] = [0, c, x];\n        }\n        else if (hp >= 180 && hp < 240) {\n            [rp, gp, bp] = [0, x, c];\n        }\n        else if (hp >= 240 && hp < 300) {\n            [rp, gp, bp] = [x, 0, c];\n        }\n        else {\n            [rp, gp, bp] = [c, 0, x];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    function rgbToHsvInt(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const d = cmax - cmin;\n        let h;\n        if (d === 0) {\n            h = 0;\n        }\n        else if (cmax === rp) {\n            h = 60 * (((((gp - bp) / d) % 6) + 6) % 6);\n        }\n        else if (cmax === gp) {\n            h = 60 * ((bp - rp) / d + 2);\n        }\n        else {\n            h = 60 * ((rp - gp) / d + 4);\n        }\n        const s = cmax === 0 ? 0 : d / cmax;\n        const v = cmax;\n        return [h, s * 100, v * 100];\n    }\n    function hsvToRgbInt(h, s, v) {\n        const hp = loopRange(h, 360);\n        const sp = constrainRange(s / 100, 0, 1);\n        const vp = constrainRange(v / 100, 0, 1);\n        const c = vp * sp;\n        const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        const m = vp - c;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            [rp, gp, bp] = [c, x, 0];\n        }\n        else if (hp >= 60 && hp < 120) {\n            [rp, gp, bp] = [x, c, 0];\n        }\n        else if (hp >= 120 && hp < 180) {\n            [rp, gp, bp] = [0, c, x];\n        }\n        else if (hp >= 180 && hp < 240) {\n            [rp, gp, bp] = [0, x, c];\n        }\n        else if (hp >= 240 && hp < 300) {\n            [rp, gp, bp] = [x, 0, c];\n        }\n        else {\n            [rp, gp, bp] = [c, 0, x];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    function hslToHsvInt(h, s, l) {\n        const sd = l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100);\n        return [\n            h,\n            sd !== 0 ? (s * (100 - Math.abs(2 * l - 100))) / sd : 0,\n            l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100),\n        ];\n    }\n    function hsvToHslInt(h, s, v) {\n        const sd = 100 - Math.abs((v * (200 - s)) / 100 - 100);\n        return [h, sd !== 0 ? (s * v) / sd : 0, (v * (200 - s)) / (2 * 100)];\n    }\n    function removeAlphaComponent(comps) {\n        return [comps[0], comps[1], comps[2]];\n    }\n    function appendAlphaComponent(comps, alpha) {\n        return [comps[0], comps[1], comps[2], alpha];\n    }\n    const MODE_CONVERTER_MAP = {\n        hsl: {\n            hsl: (h, s, l) => [h, s, l],\n            hsv: hslToHsvInt,\n            rgb: hslToRgbInt,\n        },\n        hsv: {\n            hsl: hsvToHslInt,\n            hsv: (h, s, v) => [h, s, v],\n            rgb: hsvToRgbInt,\n        },\n        rgb: {\n            hsl: rgbToHslInt,\n            hsv: rgbToHsvInt,\n            rgb: (r, g, b) => [r, g, b],\n        },\n    };\n    function getColorMaxComponents(mode, type) {\n        return [\n            type === 'float' ? 1 : mode === 'rgb' ? 255 : 360,\n            type === 'float' ? 1 : mode === 'rgb' ? 255 : 100,\n            type === 'float' ? 1 : mode === 'rgb' ? 255 : 100,\n        ];\n    }\n    function loopHueRange(hue, max) {\n        return hue === max ? max : loopRange(hue, max);\n    }\n    function constrainColorComponents(components, mode, type) {\n        var _a;\n        const ms = getColorMaxComponents(mode, type);\n        return [\n            mode === 'rgb'\n                ? constrainRange(components[0], 0, ms[0])\n                : loopHueRange(components[0], ms[0]),\n            constrainRange(components[1], 0, ms[1]),\n            constrainRange(components[2], 0, ms[2]),\n            constrainRange((_a = components[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n        ];\n    }\n    function convertColorType(comps, mode, from, to) {\n        const fms = getColorMaxComponents(mode, from);\n        const tms = getColorMaxComponents(mode, to);\n        return comps.map((c, index) => (c / fms[index]) * tms[index]);\n    }\n    function convertColor(components, from, to) {\n        const intComps = convertColorType(components, from.mode, from.type, 'int');\n        const result = MODE_CONVERTER_MAP[from.mode][to.mode](...intComps);\n        return convertColorType(result, to.mode, 'int', to.type);\n    }\n\n    function isRgbColorComponent(obj, key) {\n        if (typeof obj !== 'object' || isEmpty(obj)) {\n            return false;\n        }\n        return key in obj && typeof obj[key] === 'number';\n    }\n    class Color {\n        constructor(comps, mode, type = 'int') {\n            this.mode = mode;\n            this.type = type;\n            this.comps_ = constrainColorComponents(comps, mode, type);\n        }\n        static black(type = 'int') {\n            return new Color([0, 0, 0], 'rgb', type);\n        }\n        static fromObject(obj, type = 'int') {\n            const comps = 'a' in obj ? [obj.r, obj.g, obj.b, obj.a] : [obj.r, obj.g, obj.b];\n            return new Color(comps, 'rgb', type);\n        }\n        static toRgbaObject(color, type = 'int') {\n            return color.toRgbaObject(type);\n        }\n        static isRgbColorObject(obj) {\n            return (isRgbColorComponent(obj, 'r') &&\n                isRgbColorComponent(obj, 'g') &&\n                isRgbColorComponent(obj, 'b'));\n        }\n        static isRgbaColorObject(obj) {\n            return this.isRgbColorObject(obj) && isRgbColorComponent(obj, 'a');\n        }\n        static isColorObject(obj) {\n            return this.isRgbColorObject(obj);\n        }\n        static equals(v1, v2) {\n            if (v1.mode !== v2.mode) {\n                return false;\n            }\n            const comps1 = v1.comps_;\n            const comps2 = v2.comps_;\n            for (let i = 0; i < comps1.length; i++) {\n                if (comps1[i] !== comps2[i]) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        getComponents(opt_mode, type = 'int') {\n            return appendAlphaComponent(convertColor(removeAlphaComponent(this.comps_), { mode: this.mode, type: this.type }, { mode: opt_mode !== null && opt_mode !== void 0 ? opt_mode : this.mode, type }), this.comps_[3]);\n        }\n        toRgbaObject(type = 'int') {\n            const rgbComps = this.getComponents('rgb', type);\n            return {\n                r: rgbComps[0],\n                g: rgbComps[1],\n                b: rgbComps[2],\n                a: rgbComps[3],\n            };\n        }\n    }\n\n    const className$b = ClassName('colp');\n    class ColorPickerView {\n        constructor(doc, config) {\n            this.alphaViews_ = null;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$b());\n            config.viewProps.bindClassModifiers(this.element);\n            const hsvElem = doc.createElement('div');\n            hsvElem.classList.add(className$b('hsv'));\n            const svElem = doc.createElement('div');\n            svElem.classList.add(className$b('sv'));\n            this.svPaletteView_ = config.svPaletteView;\n            svElem.appendChild(this.svPaletteView_.element);\n            hsvElem.appendChild(svElem);\n            const hElem = doc.createElement('div');\n            hElem.classList.add(className$b('h'));\n            this.hPaletteView_ = config.hPaletteView;\n            hElem.appendChild(this.hPaletteView_.element);\n            hsvElem.appendChild(hElem);\n            this.element.appendChild(hsvElem);\n            const rgbElem = doc.createElement('div');\n            rgbElem.classList.add(className$b('rgb'));\n            this.textView_ = config.textView;\n            rgbElem.appendChild(this.textView_.element);\n            this.element.appendChild(rgbElem);\n            if (config.alphaViews) {\n                this.alphaViews_ = {\n                    palette: config.alphaViews.palette,\n                    text: config.alphaViews.text,\n                };\n                const aElem = doc.createElement('div');\n                aElem.classList.add(className$b('a'));\n                const apElem = doc.createElement('div');\n                apElem.classList.add(className$b('ap'));\n                apElem.appendChild(this.alphaViews_.palette.element);\n                aElem.appendChild(apElem);\n                const atElem = doc.createElement('div');\n                atElem.classList.add(className$b('at'));\n                atElem.appendChild(this.alphaViews_.text.element);\n                aElem.appendChild(atElem);\n                this.element.appendChild(aElem);\n            }\n        }\n        get allFocusableElements() {\n            const elems = [\n                this.svPaletteView_.element,\n                this.hPaletteView_.element,\n                this.textView_.modeSelectElement,\n                ...this.textView_.textViews.map((v) => v.inputElement),\n            ];\n            if (this.alphaViews_) {\n                elems.push(this.alphaViews_.palette.element, this.alphaViews_.text.inputElement);\n            }\n            return elems;\n        }\n    }\n\n    function parseColorType(value) {\n        return value === 'int' ? 'int' : value === 'float' ? 'float' : undefined;\n    }\n    function parseColorInputParams(params) {\n        const p = ParamsParsers;\n        return parseParams(params, {\n            alpha: p.optional.boolean,\n            color: p.optional.object({\n                alpha: p.optional.boolean,\n                type: p.optional.custom(parseColorType),\n            }),\n            expanded: p.optional.boolean,\n            picker: p.optional.custom(parsePickerLayout),\n        });\n    }\n    function getBaseStepForColor(forAlpha) {\n        return forAlpha ? 0.1 : 1;\n    }\n    function extractColorType(params) {\n        var _a;\n        return (_a = params.color) === null || _a === void 0 ? void 0 : _a.type;\n    }\n\n    function equalsStringColorFormat(f1, f2) {\n        return (f1.alpha === f2.alpha &&\n            f1.mode === f2.mode &&\n            f1.notation === f2.notation &&\n            f1.type === f2.type);\n    }\n    function parseCssNumberOrPercentage(text, maxValue) {\n        const m = text.match(/^(.+)%$/);\n        if (!m) {\n            return Math.min(parseFloat(text), maxValue);\n        }\n        return Math.min(parseFloat(m[1]) * 0.01 * maxValue, maxValue);\n    }\n    const ANGLE_TO_DEG_MAP = {\n        deg: (angle) => angle,\n        grad: (angle) => (angle * 360) / 400,\n        rad: (angle) => (angle * 360) / (2 * Math.PI),\n        turn: (angle) => angle * 360,\n    };\n    function parseCssNumberOrAngle(text) {\n        const m = text.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);\n        if (!m) {\n            return parseFloat(text);\n        }\n        const angle = parseFloat(m[1]);\n        const unit = m[2];\n        return ANGLE_TO_DEG_MAP[unit](angle);\n    }\n    function parseFunctionalRgbColorComponents(text) {\n        const m = text.match(/^rgb\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseCssNumberOrPercentage(m[1], 255),\n            parseCssNumberOrPercentage(m[2], 255),\n            parseCssNumberOrPercentage(m[3], 255),\n        ];\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n            return null;\n        }\n        return comps;\n    }\n    function createFunctionalRgbColorParser(type) {\n        return (text) => {\n            const comps = parseFunctionalRgbColorComponents(text);\n            return comps ? new Color(comps, 'rgb', type) : null;\n        };\n    }\n    function parseFunctionalRgbaColorComponents(text) {\n        const m = text.match(/^rgba\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseCssNumberOrPercentage(m[1], 255),\n            parseCssNumberOrPercentage(m[2], 255),\n            parseCssNumberOrPercentage(m[3], 255),\n            parseCssNumberOrPercentage(m[4], 1),\n        ];\n        if (isNaN(comps[0]) ||\n            isNaN(comps[1]) ||\n            isNaN(comps[2]) ||\n            isNaN(comps[3])) {\n            return null;\n        }\n        return comps;\n    }\n    function createFunctionalRgbaColorParser(type) {\n        return (text) => {\n            const comps = parseFunctionalRgbaColorComponents(text);\n            return comps ? new Color(comps, 'rgb', type) : null;\n        };\n    }\n    function parseHslColorComponents(text) {\n        const m = text.match(/^hsl\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseCssNumberOrAngle(m[1]),\n            parseCssNumberOrPercentage(m[2], 100),\n            parseCssNumberOrPercentage(m[3], 100),\n        ];\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n            return null;\n        }\n        return comps;\n    }\n    function createHslColorParser(type) {\n        return (text) => {\n            const comps = parseHslColorComponents(text);\n            return comps ? new Color(comps, 'hsl', type) : null;\n        };\n    }\n    function parseHslaColorComponents(text) {\n        const m = text.match(/^hsla\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseCssNumberOrAngle(m[1]),\n            parseCssNumberOrPercentage(m[2], 100),\n            parseCssNumberOrPercentage(m[3], 100),\n            parseCssNumberOrPercentage(m[4], 1),\n        ];\n        if (isNaN(comps[0]) ||\n            isNaN(comps[1]) ||\n            isNaN(comps[2]) ||\n            isNaN(comps[3])) {\n            return null;\n        }\n        return comps;\n    }\n    function createHslaColorParser(type) {\n        return (text) => {\n            const comps = parseHslaColorComponents(text);\n            return comps ? new Color(comps, 'hsl', type) : null;\n        };\n    }\n    function parseHexRgbColorComponents(text) {\n        const mRgb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n        if (mRgb) {\n            return [\n                parseInt(mRgb[1] + mRgb[1], 16),\n                parseInt(mRgb[2] + mRgb[2], 16),\n                parseInt(mRgb[3] + mRgb[3], 16),\n            ];\n        }\n        const mRrggbb = text.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n        if (mRrggbb) {\n            return [\n                parseInt(mRrggbb[1], 16),\n                parseInt(mRrggbb[2], 16),\n                parseInt(mRrggbb[3], 16),\n            ];\n        }\n        return null;\n    }\n    function parseHexRgbColor(text) {\n        const comps = parseHexRgbColorComponents(text);\n        return comps ? new Color(comps, 'rgb', 'int') : null;\n    }\n    function parseHexRgbaColorComponents(text) {\n        const mRgb = text.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n        if (mRgb) {\n            return [\n                parseInt(mRgb[1] + mRgb[1], 16),\n                parseInt(mRgb[2] + mRgb[2], 16),\n                parseInt(mRgb[3] + mRgb[3], 16),\n                mapRange(parseInt(mRgb[4] + mRgb[4], 16), 0, 255, 0, 1),\n            ];\n        }\n        const mRrggbb = text.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n        if (mRrggbb) {\n            return [\n                parseInt(mRrggbb[1], 16),\n                parseInt(mRrggbb[2], 16),\n                parseInt(mRrggbb[3], 16),\n                mapRange(parseInt(mRrggbb[4], 16), 0, 255, 0, 1),\n            ];\n        }\n        return null;\n    }\n    function parseHexRgbaColor(text) {\n        const comps = parseHexRgbaColorComponents(text);\n        return comps ? new Color(comps, 'rgb', 'int') : null;\n    }\n    function parseObjectRgbColorComponents(text) {\n        const m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseFloat(m[1]),\n            parseFloat(m[2]),\n            parseFloat(m[3]),\n        ];\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n            return null;\n        }\n        return comps;\n    }\n    function createObjectRgbColorParser(type) {\n        return (text) => {\n            const comps = parseObjectRgbColorComponents(text);\n            return comps ? new Color(comps, 'rgb', type) : null;\n        };\n    }\n    function parseObjectRgbaColorComponents(text) {\n        const m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*a\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseFloat(m[1]),\n            parseFloat(m[2]),\n            parseFloat(m[3]),\n            parseFloat(m[4]),\n        ];\n        if (isNaN(comps[0]) ||\n            isNaN(comps[1]) ||\n            isNaN(comps[2]) ||\n            isNaN(comps[3])) {\n            return null;\n        }\n        return comps;\n    }\n    function createObjectRgbaColorParser(type) {\n        return (text) => {\n            const comps = parseObjectRgbaColorComponents(text);\n            return comps ? new Color(comps, 'rgb', type) : null;\n        };\n    }\n    const PARSER_AND_RESULT = [\n        {\n            parser: parseHexRgbColorComponents,\n            result: {\n                alpha: false,\n                mode: 'rgb',\n                notation: 'hex',\n            },\n        },\n        {\n            parser: parseHexRgbaColorComponents,\n            result: {\n                alpha: true,\n                mode: 'rgb',\n                notation: 'hex',\n            },\n        },\n        {\n            parser: parseFunctionalRgbColorComponents,\n            result: {\n                alpha: false,\n                mode: 'rgb',\n                notation: 'func',\n            },\n        },\n        {\n            parser: parseFunctionalRgbaColorComponents,\n            result: {\n                alpha: true,\n                mode: 'rgb',\n                notation: 'func',\n            },\n        },\n        {\n            parser: parseHslColorComponents,\n            result: {\n                alpha: false,\n                mode: 'hsl',\n                notation: 'func',\n            },\n        },\n        {\n            parser: parseHslaColorComponents,\n            result: {\n                alpha: true,\n                mode: 'hsl',\n                notation: 'func',\n            },\n        },\n        {\n            parser: parseObjectRgbColorComponents,\n            result: {\n                alpha: false,\n                mode: 'rgb',\n                notation: 'object',\n            },\n        },\n        {\n            parser: parseObjectRgbaColorComponents,\n            result: {\n                alpha: true,\n                mode: 'rgb',\n                notation: 'object',\n            },\n        },\n    ];\n    function detectStringColor(text) {\n        return PARSER_AND_RESULT.reduce((prev, { parser, result: detection }) => {\n            if (prev) {\n                return prev;\n            }\n            return parser(text) ? detection : null;\n        }, null);\n    }\n    function detectStringColorFormat(text, type = 'int') {\n        const r = detectStringColor(text);\n        if (!r) {\n            return null;\n        }\n        if (r.notation === 'hex' && type !== 'float') {\n            return Object.assign(Object.assign({}, r), { type: 'int' });\n        }\n        if (r.notation === 'func') {\n            return Object.assign(Object.assign({}, r), { type: type });\n        }\n        return null;\n    }\n    const TYPE_TO_PARSERS = {\n        int: [\n            parseHexRgbColor,\n            parseHexRgbaColor,\n            createFunctionalRgbColorParser('int'),\n            createFunctionalRgbaColorParser('int'),\n            createHslColorParser('int'),\n            createHslaColorParser('int'),\n            createObjectRgbColorParser('int'),\n            createObjectRgbaColorParser('int'),\n        ],\n        float: [\n            createFunctionalRgbColorParser('float'),\n            createFunctionalRgbaColorParser('float'),\n            createHslColorParser('float'),\n            createHslaColorParser('float'),\n            createObjectRgbColorParser('float'),\n            createObjectRgbaColorParser('float'),\n        ],\n    };\n    function createColorStringBindingReader(type) {\n        const parsers = TYPE_TO_PARSERS[type];\n        return (value) => {\n            if (typeof value !== 'string') {\n                return Color.black(type);\n            }\n            const result = parsers.reduce((prev, parser) => {\n                if (prev) {\n                    return prev;\n                }\n                return parser(value);\n            }, null);\n            return result !== null && result !== void 0 ? result : Color.black(type);\n        };\n    }\n    function createColorStringParser(type) {\n        const parsers = TYPE_TO_PARSERS[type];\n        return (value) => {\n            return parsers.reduce((prev, parser) => {\n                if (prev) {\n                    return prev;\n                }\n                return parser(value);\n            }, null);\n        };\n    }\n    function zerofill(comp) {\n        const hex = constrainRange(Math.floor(comp), 0, 255).toString(16);\n        return hex.length === 1 ? `0${hex}` : hex;\n    }\n    function colorToHexRgbString(value, prefix = '#') {\n        const hexes = removeAlphaComponent(value.getComponents('rgb'))\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToHexRgbaString(value, prefix = '#') {\n        const rgbaComps = value.getComponents('rgb');\n        const hexes = [rgbaComps[0], rgbaComps[1], rgbaComps[2], rgbaComps[3] * 255]\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToFunctionalRgbString(value, opt_type) {\n        const formatter = createNumberFormatter(opt_type === 'float' ? 2 : 0);\n        const comps = removeAlphaComponent(value.getComponents('rgb', opt_type)).map((comp) => formatter(comp));\n        return `rgb(${comps.join(', ')})`;\n    }\n    function createFunctionalRgbColorFormatter(type) {\n        return (value) => {\n            return colorToFunctionalRgbString(value, type);\n        };\n    }\n    function colorToFunctionalRgbaString(value, opt_type) {\n        const aFormatter = createNumberFormatter(2);\n        const rgbFormatter = createNumberFormatter(opt_type === 'float' ? 2 : 0);\n        const comps = value.getComponents('rgb', opt_type).map((comp, index) => {\n            const formatter = index === 3 ? aFormatter : rgbFormatter;\n            return formatter(comp);\n        });\n        return `rgba(${comps.join(', ')})`;\n    }\n    function createFunctionalRgbaColorFormatter(type) {\n        return (value) => {\n            return colorToFunctionalRgbaString(value, type);\n        };\n    }\n    function colorToFunctionalHslString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n        ];\n        const comps = removeAlphaComponent(value.getComponents('hsl')).map((comp, index) => formatters[index](comp));\n        return `hsl(${comps.join(', ')})`;\n    }\n    function colorToFunctionalHslaString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n            createNumberFormatter(2),\n        ];\n        const comps = value\n            .getComponents('hsl')\n            .map((comp, index) => formatters[index](comp));\n        return `hsla(${comps.join(', ')})`;\n    }\n    function colorToObjectRgbString(value, type) {\n        const formatter = createNumberFormatter(type === 'float' ? 2 : 0);\n        const names = ['r', 'g', 'b'];\n        const comps = removeAlphaComponent(value.getComponents('rgb', type)).map((comp, index) => `${names[index]}: ${formatter(comp)}`);\n        return `{${comps.join(', ')}}`;\n    }\n    function createObjectRgbColorFormatter(type) {\n        return (value) => colorToObjectRgbString(value, type);\n    }\n    function colorToObjectRgbaString(value, type) {\n        const aFormatter = createNumberFormatter(2);\n        const rgbFormatter = createNumberFormatter(type === 'float' ? 2 : 0);\n        const names = ['r', 'g', 'b', 'a'];\n        const comps = value.getComponents('rgb', type).map((comp, index) => {\n            const formatter = index === 3 ? aFormatter : rgbFormatter;\n            return `${names[index]}: ${formatter(comp)}`;\n        });\n        return `{${comps.join(', ')}}`;\n    }\n    function createObjectRgbaColorFormatter(type) {\n        return (value) => colorToObjectRgbaString(value, type);\n    }\n    const FORMAT_AND_STRINGIFIERS = [\n        {\n            format: {\n                alpha: false,\n                mode: 'rgb',\n                notation: 'hex',\n                type: 'int',\n            },\n            stringifier: colorToHexRgbString,\n        },\n        {\n            format: {\n                alpha: true,\n                mode: 'rgb',\n                notation: 'hex',\n                type: 'int',\n            },\n            stringifier: colorToHexRgbaString,\n        },\n        {\n            format: {\n                alpha: false,\n                mode: 'hsl',\n                notation: 'func',\n                type: 'int',\n            },\n            stringifier: colorToFunctionalHslString,\n        },\n        {\n            format: {\n                alpha: true,\n                mode: 'hsl',\n                notation: 'func',\n                type: 'int',\n            },\n            stringifier: colorToFunctionalHslaString,\n        },\n        ...['int', 'float'].reduce((prev, type) => {\n            return [\n                ...prev,\n                {\n                    format: {\n                        alpha: false,\n                        mode: 'rgb',\n                        notation: 'func',\n                        type: type,\n                    },\n                    stringifier: createFunctionalRgbColorFormatter(type),\n                },\n                {\n                    format: {\n                        alpha: true,\n                        mode: 'rgb',\n                        notation: 'func',\n                        type: type,\n                    },\n                    stringifier: createFunctionalRgbaColorFormatter(type),\n                },\n                {\n                    format: {\n                        alpha: false,\n                        mode: 'rgb',\n                        notation: 'object',\n                        type: type,\n                    },\n                    stringifier: createObjectRgbColorFormatter(type),\n                },\n                {\n                    format: {\n                        alpha: true,\n                        mode: 'rgb',\n                        notation: 'object',\n                        type: type,\n                    },\n                    stringifier: createObjectRgbaColorFormatter(type),\n                },\n            ];\n        }, []),\n    ];\n    function findColorStringifier(format) {\n        return FORMAT_AND_STRINGIFIERS.reduce((prev, fas) => {\n            if (prev) {\n                return prev;\n            }\n            return equalsStringColorFormat(fas.format, format)\n                ? fas.stringifier\n                : null;\n        }, null);\n    }\n\n    const className$a = ClassName('apl');\n    class APaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$a());\n            config.viewProps.bindClassModifiers(this.element);\n            config.viewProps.bindTabIndex(this.element);\n            const barElem = doc.createElement('div');\n            barElem.classList.add(className$a('b'));\n            this.element.appendChild(barElem);\n            const colorElem = doc.createElement('div');\n            colorElem.classList.add(className$a('c'));\n            barElem.appendChild(colorElem);\n            this.colorElem_ = colorElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$a('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            const previewElem = doc.createElement('div');\n            previewElem.classList.add(className$a('p'));\n            this.markerElem_.appendChild(previewElem);\n            this.previewElem_ = previewElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const rgbaComps = c.getComponents('rgb');\n            const leftColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 0], 'rgb');\n            const rightColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 255], 'rgb');\n            const gradientComps = [\n                'to right',\n                colorToFunctionalRgbaString(leftColor),\n                colorToFunctionalRgbaString(rightColor),\n            ];\n            this.colorElem_.style.background = `linear-gradient(${gradientComps.join(',')})`;\n            this.previewElem_.style.backgroundColor = colorToFunctionalRgbaString(c);\n            const left = mapRange(rgbaComps[3], 0, 1, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class APaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new APaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const alpha = d.point.x / d.bounds.width;\n            const c = this.value.rawValue;\n            const [h, s, v] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h, s, v, alpha], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h, s, v, a + step], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$9 = ClassName('coltxt');\n    function createModeSelectElement(doc) {\n        const selectElem = doc.createElement('select');\n        const items = [\n            { text: 'RGB', value: 'rgb' },\n            { text: 'HSL', value: 'hsl' },\n            { text: 'HSV', value: 'hsv' },\n        ];\n        selectElem.appendChild(items.reduce((frag, item) => {\n            const optElem = doc.createElement('option');\n            optElem.textContent = item.text;\n            optElem.value = item.value;\n            frag.appendChild(optElem);\n            return frag;\n        }, doc.createDocumentFragment()));\n        return selectElem;\n    }\n    class ColorTextView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$9());\n            config.viewProps.bindClassModifiers(this.element);\n            const modeElem = doc.createElement('div');\n            modeElem.classList.add(className$9('m'));\n            this.modeElem_ = createModeSelectElement(doc);\n            this.modeElem_.classList.add(className$9('ms'));\n            modeElem.appendChild(this.modeSelectElement);\n            config.viewProps.bindDisabled(this.modeElem_);\n            const modeMarkerElem = doc.createElement('div');\n            modeMarkerElem.classList.add(className$9('mm'));\n            modeMarkerElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n            modeElem.appendChild(modeMarkerElem);\n            this.element.appendChild(modeElem);\n            const textsElem = doc.createElement('div');\n            textsElem.classList.add(className$9('w'));\n            this.element.appendChild(textsElem);\n            this.textsElem_ = textsElem;\n            this.textViews_ = config.textViews;\n            this.applyTextViews_();\n            bindValue(config.colorMode, (mode) => {\n                this.modeElem_.value = mode;\n            });\n        }\n        get modeSelectElement() {\n            return this.modeElem_;\n        }\n        get textViews() {\n            return this.textViews_;\n        }\n        set textViews(textViews) {\n            this.textViews_ = textViews;\n            this.applyTextViews_();\n        }\n        applyTextViews_() {\n            removeChildElements(this.textsElem_);\n            const doc = this.element.ownerDocument;\n            this.textViews_.forEach((v) => {\n                const compElem = doc.createElement('div');\n                compElem.classList.add(className$9('c'));\n                compElem.appendChild(v.element);\n                this.textsElem_.appendChild(compElem);\n            });\n        }\n    }\n\n    function createFormatter$2(type) {\n        return createNumberFormatter(type === 'float' ? 2 : 0);\n    }\n    function createConstraint$5(mode, type, index) {\n        const max = getColorMaxComponents(mode, type)[index];\n        return new DefiniteRangeConstraint({\n            min: 0,\n            max: max,\n        });\n    }\n    function createComponentController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === 3 - 1 ? 'lst' : 'mid',\n            baseStep: getBaseStepForColor(false),\n            parser: config.parser,\n            props: ValueMap.fromObject({\n                draggingScale: config.colorType === 'float' ? 0.01 : 1,\n                formatter: createFormatter$2(config.colorType),\n            }),\n            value: createValue(0, {\n                constraint: createConstraint$5(config.colorMode, config.colorType, index),\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class ColorTextController {\n        constructor(doc, config) {\n            this.onModeSelectChange_ = this.onModeSelectChange_.bind(this);\n            this.colorType_ = config.colorType;\n            this.parser_ = config.parser;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.colorMode = createValue(this.value.rawValue.mode);\n            this.ccs_ = this.createComponentControllers_(doc);\n            this.view = new ColorTextView(doc, {\n                colorMode: this.colorMode,\n                textViews: [this.ccs_[0].view, this.ccs_[1].view, this.ccs_[2].view],\n                viewProps: this.viewProps,\n            });\n            this.view.modeSelectElement.addEventListener('change', this.onModeSelectChange_);\n        }\n        createComponentControllers_(doc) {\n            const cc = {\n                colorMode: this.colorMode.rawValue,\n                colorType: this.colorType_,\n                parser: this.parser_,\n                viewProps: this.viewProps,\n            };\n            const ccs = [\n                createComponentController(doc, cc, 0),\n                createComponentController(doc, cc, 1),\n                createComponentController(doc, cc, 2),\n            ];\n            ccs.forEach((cs, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: cs.value,\n                    forward: (p) => {\n                        return p.rawValue.getComponents(this.colorMode.rawValue, this.colorType_)[index];\n                    },\n                    backward: (p, s) => {\n                        const pickedMode = this.colorMode.rawValue;\n                        const comps = p.rawValue.getComponents(pickedMode, this.colorType_);\n                        comps[index] = s.rawValue;\n                        return new Color(appendAlphaComponent(removeAlphaComponent(comps), comps[3]), pickedMode, this.colorType_);\n                    },\n                });\n            });\n            return ccs;\n        }\n        onModeSelectChange_(ev) {\n            const selectElem = ev.currentTarget;\n            this.colorMode.rawValue = selectElem.value;\n            this.ccs_ = this.createComponentControllers_(this.view.element.ownerDocument);\n            this.view.textViews = [\n                this.ccs_[0].view,\n                this.ccs_[1].view,\n                this.ccs_[2].view,\n            ];\n        }\n    }\n\n    const className$8 = ClassName('hpl');\n    class HPaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$8());\n            config.viewProps.bindClassModifiers(this.element);\n            config.viewProps.bindTabIndex(this.element);\n            const colorElem = doc.createElement('div');\n            colorElem.classList.add(className$8('c'));\n            this.element.appendChild(colorElem);\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$8('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const [h] = c.getComponents('hsv');\n            this.markerElem_.style.backgroundColor = colorToFunctionalRgbString(new Color([h, 100, 100], 'hsv'));\n            const left = mapRange(h, 0, 360, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class HPaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new HPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const hue = mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, 0, 360);\n            const c = this.value.rawValue;\n            const [, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([hue, s, v, a], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h + step, s, v, a], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$7 = ClassName('svp');\n    const CANVAS_RESOL = 64;\n    class SvPaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$7());\n            config.viewProps.bindClassModifiers(this.element);\n            config.viewProps.bindTabIndex(this.element);\n            const canvasElem = doc.createElement('canvas');\n            canvasElem.height = CANVAS_RESOL;\n            canvasElem.width = CANVAS_RESOL;\n            canvasElem.classList.add(className$7('c'));\n            this.element.appendChild(canvasElem);\n            this.canvasElement = canvasElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$7('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const ctx = getCanvasContext(this.canvasElement);\n            if (!ctx) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const hsvComps = c.getComponents('hsv');\n            const width = this.canvasElement.width;\n            const height = this.canvasElement.height;\n            const imgData = ctx.getImageData(0, 0, width, height);\n            const data = imgData.data;\n            for (let iy = 0; iy < height; iy++) {\n                for (let ix = 0; ix < width; ix++) {\n                    const s = mapRange(ix, 0, width, 0, 100);\n                    const v = mapRange(iy, 0, height, 100, 0);\n                    const rgbComps = hsvToRgbInt(hsvComps[0], s, v);\n                    const i = (iy * width + ix) * 4;\n                    data[i] = rgbComps[0];\n                    data[i + 1] = rgbComps[1];\n                    data[i + 2] = rgbComps[2];\n                    data[i + 3] = 255;\n                }\n            }\n            ctx.putImageData(imgData, 0, 0);\n            const left = mapRange(hsvComps[1], 0, 100, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n            const top = mapRange(hsvComps[2], 0, 100, 100, 0);\n            this.markerElem_.style.top = `${top}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class SvPaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SvPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const saturation = mapRange(d.point.x, 0, d.bounds.width, 0, 100);\n            const value = mapRange(d.point.y, 0, d.bounds.height, 100, 0);\n            const [h, , , a] = this.value.rawValue.getComponents('hsv');\n            this.value.setRawValue(new Color([h, saturation, value, a], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const [h, s, v, a] = this.value.rawValue.getComponents('hsv');\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) {\n                return;\n            }\n            this.value.setRawValue(new Color([h, s + ds, v + dv, a], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class ColorPickerController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.hPaletteC_ = new HPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.svPaletteC_ = new SvPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.alphaIcs_ = config.supportsAlpha\n                ? {\n                    palette: new APaletteController(doc, {\n                        value: this.value,\n                        viewProps: this.viewProps,\n                    }),\n                    text: new NumberTextController(doc, {\n                        parser: parseNumber,\n                        baseStep: 0.1,\n                        props: ValueMap.fromObject({\n                            draggingScale: 0.01,\n                            formatter: createNumberFormatter(2),\n                        }),\n                        value: createValue(0, {\n                            constraint: new DefiniteRangeConstraint({ min: 0, max: 1 }),\n                        }),\n                        viewProps: this.viewProps,\n                    }),\n                }\n                : null;\n            if (this.alphaIcs_) {\n                connectValues({\n                    primary: this.value,\n                    secondary: this.alphaIcs_.text.value,\n                    forward: (p) => {\n                        return p.rawValue.getComponents()[3];\n                    },\n                    backward: (p, s) => {\n                        const comps = p.rawValue.getComponents();\n                        comps[3] = s.rawValue;\n                        return new Color(comps, p.rawValue.mode);\n                    },\n                });\n            }\n            this.textC_ = new ColorTextController(doc, {\n                colorType: config.colorType,\n                parser: parseNumber,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new ColorPickerView(doc, {\n                alphaViews: this.alphaIcs_\n                    ? {\n                        palette: this.alphaIcs_.palette.view,\n                        text: this.alphaIcs_.text.view,\n                    }\n                    : null,\n                hPaletteView: this.hPaletteC_.view,\n                supportsAlpha: config.supportsAlpha,\n                svPaletteView: this.svPaletteC_.view,\n                textView: this.textC_.view,\n                viewProps: this.viewProps,\n            });\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n\n    const className$6 = ClassName('colsw');\n    class ColorSwatchView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$6());\n            config.viewProps.bindClassModifiers(this.element);\n            const swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$6('sw'));\n            this.element.appendChild(swatchElem);\n            this.swatchElem_ = swatchElem;\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$6('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            this.update_();\n        }\n        update_() {\n            const value = this.value.rawValue;\n            this.swatchElem_.style.backgroundColor = colorToHexRgbaString(value);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class ColorSwatchController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ColorSwatchView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    class ColorController {\n        constructor(doc, config) {\n            this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n            this.onButtonClick_ = this.onButtonClick_.bind(this);\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.swatchC_ = new ColorSwatchController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            const buttonElem = this.swatchC_.view.buttonElement;\n            buttonElem.addEventListener('blur', this.onButtonBlur_);\n            buttonElem.addEventListener('click', this.onButtonClick_);\n            this.textC_ = new TextController(doc, {\n                parser: config.parser,\n                props: ValueMap.fromObject({\n                    formatter: config.formatter,\n                }),\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new ColorView(doc, {\n                foldable: this.foldable_,\n                pickerLayout: config.pickerLayout,\n            });\n            this.view.swatchElement.appendChild(this.swatchC_.view.element);\n            this.view.textElement.appendChild(this.textC_.view.element);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const pickerC = new ColorPickerController(doc, {\n                colorType: config.colorType,\n                supportsAlpha: config.supportsAlpha,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            pickerC.view.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = pickerC;\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(pickerC.view.element);\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        get textController() {\n            return this.textC_;\n        }\n        onButtonBlur_(e) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.view.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.swatchC_.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === 'Escape') {\n                    this.popC_.shows.rawValue = false;\n                }\n            }\n            else if (this.view.pickerElement) {\n                if (ev.key === 'Escape') {\n                    this.swatchC_.view.buttonElement.focus();\n                }\n            }\n        }\n    }\n\n    function colorFromObject(value, opt_type) {\n        if (Color.isColorObject(value)) {\n            return Color.fromObject(value, opt_type);\n        }\n        return Color.black(opt_type);\n    }\n    function colorToRgbNumber(value) {\n        return removeAlphaComponent(value.getComponents('rgb')).reduce((result, comp) => {\n            return (result << 8) | (Math.floor(comp) & 0xff);\n        }, 0);\n    }\n    function colorToRgbaNumber(value) {\n        return (value.getComponents('rgb').reduce((result, comp, index) => {\n            const hex = Math.floor(index === 3 ? comp * 255 : comp) & 0xff;\n            return (result << 8) | hex;\n        }, 0) >>> 0);\n    }\n    function numberToRgbColor(num) {\n        return new Color([(num >> 16) & 0xff, (num >> 8) & 0xff, num & 0xff], 'rgb');\n    }\n    function numberToRgbaColor(num) {\n        return new Color([\n            (num >> 24) & 0xff,\n            (num >> 16) & 0xff,\n            (num >> 8) & 0xff,\n            mapRange(num & 0xff, 0, 255, 0, 1),\n        ], 'rgb');\n    }\n    function colorFromRgbNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbColor(value);\n    }\n    function colorFromRgbaNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbaColor(value);\n    }\n\n    function createColorStringWriter(format) {\n        const stringify = findColorStringifier(format);\n        return stringify\n            ? (target, value) => {\n                writePrimitive(target, stringify(value));\n            }\n            : null;\n    }\n    function createColorNumberWriter(supportsAlpha) {\n        const colorToNumber = supportsAlpha ? colorToRgbaNumber : colorToRgbNumber;\n        return (target, value) => {\n            writePrimitive(target, colorToNumber(value));\n        };\n    }\n    function writeRgbaColorObject(target, value, opt_type) {\n        const obj = value.toRgbaObject(opt_type);\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n        target.writeProperty('a', obj.a);\n    }\n    function writeRgbColorObject(target, value, opt_type) {\n        const obj = value.toRgbaObject(opt_type);\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n    }\n    function createColorObjectWriter(supportsAlpha, opt_type) {\n        return (target, inValue) => {\n            if (supportsAlpha) {\n                writeRgbaColorObject(target, inValue, opt_type);\n            }\n            else {\n                writeRgbColorObject(target, inValue, opt_type);\n            }\n        };\n    }\n\n    function shouldSupportAlpha$1(inputParams) {\n        var _a;\n        if ((inputParams === null || inputParams === void 0 ? void 0 : inputParams.alpha) || ((_a = inputParams === null || inputParams === void 0 ? void 0 : inputParams.color) === null || _a === void 0 ? void 0 : _a.alpha)) {\n            return true;\n        }\n        return false;\n    }\n    function createFormatter$1(supportsAlpha) {\n        return supportsAlpha\n            ? (v) => colorToHexRgbaString(v, '0x')\n            : (v) => colorToHexRgbString(v, '0x');\n    }\n    function isForColor(params) {\n        if ('color' in params) {\n            return true;\n        }\n        if ('view' in params && params.view === 'color') {\n            return true;\n        }\n        return false;\n    }\n    const NumberColorInputPlugin = {\n        id: 'input-color-number',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            if (!isForColor(params)) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (args) => {\n                return shouldSupportAlpha$1(args.params)\n                    ? colorFromRgbaNumber\n                    : colorFromRgbNumber;\n            },\n            equals: Color.equals,\n            writer: (args) => {\n                return createColorNumberWriter(shouldSupportAlpha$1(args.params));\n            },\n        },\n        controller: (args) => {\n            const supportsAlpha = shouldSupportAlpha$1(args.params);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                colorType: 'int',\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: createFormatter$1(supportsAlpha),\n                parser: createColorStringParser('int'),\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function shouldSupportAlpha(initialValue) {\n        return Color.isRgbaColorObject(initialValue);\n    }\n    function createColorObjectReader(opt_type) {\n        return (value) => {\n            return colorFromObject(value, opt_type);\n        };\n    }\n    function createColorObjectFormatter(supportsAlpha, type) {\n        return (value) => {\n            if (supportsAlpha) {\n                return colorToObjectRgbaString(value, type);\n            }\n            return colorToObjectRgbString(value, type);\n        };\n    }\n    const ObjectColorInputPlugin = {\n        id: 'input-color-object',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Color.isColorObject(value)) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (args) => createColorObjectReader(extractColorType(args.params)),\n            equals: Color.equals,\n            writer: (args) => createColorObjectWriter(shouldSupportAlpha(args.initialValue), extractColorType(args.params)),\n        },\n        controller: (args) => {\n            var _a;\n            const supportsAlpha = Color.isRgbaColorObject(args.initialValue);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            const type = (_a = extractColorType(args.params)) !== null && _a !== void 0 ? _a : 'int';\n            return new ColorController(args.document, {\n                colorType: type,\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: createColorObjectFormatter(supportsAlpha, type),\n                parser: createColorStringParser(type),\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const StringColorInputPlugin = {\n        id: 'input-color-string',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            if ('view' in params && params.view === 'text') {\n                return null;\n            }\n            const format = detectStringColorFormat(value, extractColorType(params));\n            if (!format) {\n                return null;\n            }\n            const stringifier = findColorStringifier(format);\n            if (!stringifier) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (args) => { var _a; return createColorStringBindingReader((_a = extractColorType(args.params)) !== null && _a !== void 0 ? _a : 'int'); },\n            equals: Color.equals,\n            writer: (args) => {\n                const format = detectStringColorFormat(args.initialValue, extractColorType(args.params));\n                if (!format) {\n                    throw TpError.shouldNeverHappen();\n                }\n                const writer = createColorStringWriter(format);\n                if (!writer) {\n                    throw TpError.notBindable();\n                }\n                return writer;\n            },\n        },\n        controller: (args) => {\n            const format = detectStringColorFormat(args.initialValue, extractColorType(args.params));\n            if (!format) {\n                throw TpError.shouldNeverHappen();\n            }\n            const stringifier = findColorStringifier(format);\n            if (!stringifier) {\n                throw TpError.shouldNeverHappen();\n            }\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                colorType: format.type,\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: stringifier,\n                parser: createColorStringParser(format.type),\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: format.alpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class PointNdConstraint {\n        constructor(config) {\n            this.components = config.components;\n            this.asm_ = config.assembly;\n        }\n        constrain(value) {\n            const comps = this.asm_\n                .toComponents(value)\n                .map((comp, index) => { var _a, _b; return (_b = (_a = this.components[index]) === null || _a === void 0 ? void 0 : _a.constrain(comp)) !== null && _b !== void 0 ? _b : comp; });\n            return this.asm_.fromComponents(comps);\n        }\n    }\n\n    const className$5 = ClassName('pndtxt');\n    class PointNdTextView {\n        constructor(doc, config) {\n            this.textViews = config.textViews;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$5());\n            this.textViews.forEach((v) => {\n                const axisElem = doc.createElement('div');\n                axisElem.classList.add(className$5('a'));\n                axisElem.appendChild(v.element);\n                this.element.appendChild(axisElem);\n            });\n        }\n    }\n\n    function createAxisController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === config.axes.length - 1 ? 'lst' : 'mid',\n            baseStep: config.axes[index].baseStep,\n            parser: config.parser,\n            props: config.axes[index].textProps,\n            value: createValue(0, {\n                constraint: config.axes[index].constraint,\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class PointNdTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.acs_ = config.axes.map((_, index) => createAxisController(doc, config, index));\n            this.acs_.forEach((c, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: c.value,\n                    forward: (p) => {\n                        return config.assembly.toComponents(p.rawValue)[index];\n                    },\n                    backward: (p, s) => {\n                        const comps = config.assembly.toComponents(p.rawValue);\n                        comps[index] = s.rawValue;\n                        return config.assembly.fromComponents(comps);\n                    },\n                });\n            });\n            this.view = new PointNdTextView(doc, {\n                textViews: this.acs_.map((ac) => ac.view),\n            });\n        }\n    }\n\n    function createStepConstraint(params, initialValue) {\n        if ('step' in params && !isEmpty(params.step)) {\n            return new StepConstraint(params.step, initialValue);\n        }\n        return null;\n    }\n    function createRangeConstraint(params) {\n        if (!isEmpty(params.max) && !isEmpty(params.min)) {\n            return new DefiniteRangeConstraint({\n                max: params.max,\n                min: params.min,\n            });\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            return new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            });\n        }\n        return null;\n    }\n    function findNumberRange(c) {\n        const drc = findConstraint(c, DefiniteRangeConstraint);\n        if (drc) {\n            return [drc.values.get('min'), drc.values.get('max')];\n        }\n        const rc = findConstraint(c, RangeConstraint);\n        if (rc) {\n            return [rc.minValue, rc.maxValue];\n        }\n        return [undefined, undefined];\n    }\n    function createConstraint$4(params,\n    initialValue) {\n        const constraints = [];\n        const sc = createStepConstraint(params, initialValue);\n        if (sc) {\n            constraints.push(sc);\n        }\n        const rc = createRangeConstraint(params);\n        if (rc) {\n            constraints.push(rc);\n        }\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const NumberInputPlugin = {\n        id: 'input-number',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                max: p.optional.number,\n                min: p.optional.number,\n                options: p.optional.custom(parseListOptions),\n                step: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => numberFromUnknown,\n            constraint: (args) => createConstraint$4(args.params, args.initialValue),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a;\n            const value = args.value;\n            const c = args.constraint;\n            const lc = c && findConstraint(c, ListConstraint);\n            if (lc) {\n                return new ListController(args.document, {\n                    props: new ValueMap({\n                        options: lc.values.value('options'),\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            const formatter = (_a = ('format' in args.params ? args.params.format : undefined)) !== null && _a !== void 0 ? _a : createNumberFormatter(getSuitableDecimalDigits(c, value.rawValue));\n            const drc = c && findConstraint(c, DefiniteRangeConstraint);\n            if (drc) {\n                return new SliderTextController(args.document, {\n                    baseStep: getBaseStep(c),\n                    parser: parseNumber,\n                    sliderProps: new ValueMap({\n                        maxValue: drc.values.value('max'),\n                        minValue: drc.values.value('min'),\n                    }),\n                    textProps: ValueMap.fromObject({\n                        draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                        formatter: formatter,\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new NumberTextController(args.document, {\n                baseStep: getBaseStep(c),\n                parser: parseNumber,\n                props: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                    formatter: formatter,\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point2d {\n        constructor(x = 0, y = 0) {\n            this.x = x;\n            this.y = y;\n        }\n        getComponents() {\n            return [this.x, this.y];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            if (typeof x !== 'number' || typeof y !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n            };\n        }\n    }\n    const Point2dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point2d(...comps),\n    };\n\n    const className$4 = ClassName('p2d');\n    class Point2dView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$4());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.expanded, valueToClassName(this.element, className$4(undefined, 'expanded')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$4('h'));\n            this.element.appendChild(headElem);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$4('b'));\n            buttonElem.appendChild(createSvgIconElement(doc, 'p2dpad'));\n            config.viewProps.bindDisabled(buttonElem);\n            headElem.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$4('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$4('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    const className$3 = ClassName('p2dp');\n    class Point2dPickerView {\n        constructor(doc, config) {\n            this.onFoldableChange_ = this.onFoldableChange_.bind(this);\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.invertsY_ = config.invertsY;\n            this.maxValue_ = config.maxValue;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$3());\n            if (config.layout === 'popup') {\n                this.element.classList.add(className$3(undefined, 'p'));\n            }\n            config.viewProps.bindClassModifiers(this.element);\n            const padElem = doc.createElement('div');\n            padElem.classList.add(className$3('p'));\n            config.viewProps.bindTabIndex(padElem);\n            this.element.appendChild(padElem);\n            this.padElement = padElem;\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$3('g'));\n            this.padElement.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const xAxisElem = doc.createElementNS(SVG_NS, 'line');\n            xAxisElem.classList.add(className$3('ax'));\n            xAxisElem.setAttributeNS(null, 'x1', '0');\n            xAxisElem.setAttributeNS(null, 'y1', '50%');\n            xAxisElem.setAttributeNS(null, 'x2', '100%');\n            xAxisElem.setAttributeNS(null, 'y2', '50%');\n            this.svgElem_.appendChild(xAxisElem);\n            const yAxisElem = doc.createElementNS(SVG_NS, 'line');\n            yAxisElem.classList.add(className$3('ax'));\n            yAxisElem.setAttributeNS(null, 'x1', '50%');\n            yAxisElem.setAttributeNS(null, 'y1', '0');\n            yAxisElem.setAttributeNS(null, 'x2', '50%');\n            yAxisElem.setAttributeNS(null, 'y2', '100%');\n            this.svgElem_.appendChild(yAxisElem);\n            const lineElem = doc.createElementNS(SVG_NS, 'line');\n            lineElem.classList.add(className$3('l'));\n            lineElem.setAttributeNS(null, 'x1', '50%');\n            lineElem.setAttributeNS(null, 'y1', '50%');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$3('m'));\n            this.padElement.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        get allFocusableElements() {\n            return [this.padElement];\n        }\n        update_() {\n            const [x, y] = this.value.rawValue.getComponents();\n            const max = this.maxValue_;\n            const px = mapRange(x, -max, +max, 0, 100);\n            const py = mapRange(y, -max, +max, 0, 100);\n            const ipy = this.invertsY_ ? 100 - py : py;\n            this.lineElem_.setAttributeNS(null, 'x2', `${px}%`);\n            this.lineElem_.setAttributeNS(null, 'y2', `${ipy}%`);\n            this.markerElem_.style.left = `${px}%`;\n            this.markerElem_.style.top = `${ipy}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n        onFoldableChange_() {\n            this.update_();\n        }\n    }\n\n    function computeOffset(ev, baseSteps, invertsY) {\n        return [\n            getStepForKey(baseSteps[0], getHorizontalStepKeys(ev)),\n            getStepForKey(baseSteps[1], getVerticalStepKeys(ev)) * (invertsY ? 1 : -1),\n        ];\n    }\n    class Point2dPickerController {\n        constructor(doc, config) {\n            this.onPadKeyDown_ = this.onPadKeyDown_.bind(this);\n            this.onPadKeyUp_ = this.onPadKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.baseSteps_ = config.baseSteps;\n            this.maxValue_ = config.maxValue;\n            this.invertsY_ = config.invertsY;\n            this.view = new Point2dPickerView(doc, {\n                invertsY: this.invertsY_,\n                layout: config.layout,\n                maxValue: this.maxValue_,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.padElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.padElement.addEventListener('keydown', this.onPadKeyDown_);\n            this.view.padElement.addEventListener('keyup', this.onPadKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const max = this.maxValue_;\n            const px = mapRange(d.point.x, 0, d.bounds.width, -max, +max);\n            const py = mapRange(this.invertsY_ ? d.bounds.height - d.point.y : d.point.y, 0, d.bounds.height, -max, +max);\n            this.value.setRawValue(new Point2d(px, py), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPadKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) {\n                return;\n            }\n            this.value.setRawValue(new Point2d(this.value.rawValue.x + dx, this.value.rawValue.y + dy), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPadKeyUp_(ev) {\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class Point2dController {\n        constructor(doc, config) {\n            var _a, _b;\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.onPadButtonBlur_ = this.onPadButtonBlur_.bind(this);\n            this.onPadButtonClick_ = this.onPadButtonClick_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const padC = new Point2dPickerController(doc, {\n                baseSteps: [config.axes[0].baseStep, config.axes[1].baseStep],\n                invertsY: config.invertsY,\n                layout: config.pickerLayout,\n                maxValue: config.maxValue,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            padC.view.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = padC;\n            this.textC_ = new PointNdTextController(doc, {\n                assembly: Point2dAssembly,\n                axes: config.axes,\n                parser: config.parser,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new Point2dView(doc, {\n                expanded: this.foldable_.value('expanded'),\n                pickerLayout: config.pickerLayout,\n                viewProps: this.viewProps,\n            });\n            this.view.textElement.appendChild(this.textC_.view.element);\n            (_a = this.view.buttonElement) === null || _a === void 0 ? void 0 : _a.addEventListener('blur', this.onPadButtonBlur_);\n            (_b = this.view.buttonElement) === null || _b === void 0 ? void 0 : _b.addEventListener('click', this.onPadButtonClick_);\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(this.pickerC_.view.element);\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        onPadButtonBlur_(e) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onPadButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.view.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === 'Escape') {\n                    this.popC_.shows.rawValue = false;\n                }\n            }\n            else if (this.view.pickerElement) {\n                if (ev.key === 'Escape') {\n                    this.view.buttonElement.focus();\n                }\n            }\n        }\n    }\n\n    class Point3d {\n        constructor(x = 0, y = 0, z = 0) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n        }\n        getComponents() {\n            return [this.x, this.y, this.z];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            if (typeof x !== 'number' ||\n                typeof y !== 'number' ||\n                typeof z !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n            };\n        }\n    }\n    const Point3dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point3d(...comps),\n    };\n\n    function point3dFromUnknown(value) {\n        return Point3d.isObject(value)\n            ? new Point3d(value.x, value.y, value.z)\n            : new Point3d();\n    }\n    function writePoint3d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n    }\n\n    function createConstraint$3(params, initialValue) {\n        return new PointNdConstraint({\n            assembly: Point3dAssembly,\n            components: [\n                createDimensionConstraint('x' in params ? params.x : undefined, initialValue.x),\n                createDimensionConstraint('y' in params ? params.y : undefined, initialValue.y),\n                createDimensionConstraint('z' in params ? params.z : undefined, initialValue.z),\n            ],\n        });\n    }\n    function createAxis$2(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    const Point3dInputPlugin = {\n        id: 'input-point3d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point3d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point3dFromUnknown,\n            constraint: (args) => createConstraint$3(args.params, args.initialValue),\n            equals: Point3d.equals,\n            writer: (_args) => writePoint3d,\n        },\n        controller: (args) => {\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            return new PointNdTextController(args.document, {\n                assembly: Point3dAssembly,\n                axes: [\n                    createAxis$2(value.rawValue.x, c.components[0]),\n                    createAxis$2(value.rawValue.y, c.components[1]),\n                    createAxis$2(value.rawValue.z, c.components[2]),\n                ],\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point4d {\n        constructor(x = 0, y = 0, z = 0, w = 0) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n            this.w = w;\n        }\n        getComponents() {\n            return [this.x, this.y, this.z, this.w];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            const w = obj.w;\n            if (typeof x !== 'number' ||\n                typeof y !== 'number' ||\n                typeof z !== 'number' ||\n                typeof w !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z && v1.w === v2.w;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n                w: this.w,\n            };\n        }\n    }\n    const Point4dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point4d(...comps),\n    };\n\n    function point4dFromUnknown(value) {\n        return Point4d.isObject(value)\n            ? new Point4d(value.x, value.y, value.z, value.w)\n            : new Point4d();\n    }\n    function writePoint4d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n        target.writeProperty('w', value.w);\n    }\n\n    function createConstraint$2(params, initialValue) {\n        return new PointNdConstraint({\n            assembly: Point4dAssembly,\n            components: [\n                createDimensionConstraint('x' in params ? params.x : undefined, initialValue.x),\n                createDimensionConstraint('y' in params ? params.y : undefined, initialValue.y),\n                createDimensionConstraint('z' in params ? params.z : undefined, initialValue.z),\n                createDimensionConstraint('w' in params ? params.w : undefined, initialValue.w),\n            ],\n        });\n    }\n    function createAxis$1(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    const Point4dInputPlugin = {\n        id: 'input-point4d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point4d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams),\n                w: p.optional.custom(parsePointDimensionParams),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point4dFromUnknown,\n            constraint: (args) => createConstraint$2(args.params, args.initialValue),\n            equals: Point4d.equals,\n            writer: (_args) => writePoint4d,\n        },\n        controller: (args) => {\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            return new PointNdTextController(args.document, {\n                assembly: Point4dAssembly,\n                axes: value.rawValue\n                    .getComponents()\n                    .map((comp, index) => createAxis$1(comp, c.components[index])),\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function createConstraint$1(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const StringInputPlugin = {\n        id: 'input-string',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => stringFromUnknown,\n            constraint: (args) => createConstraint$1(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            const lc = c && findConstraint(c, ListConstraint);\n            if (lc) {\n                return new ListController(doc, {\n                    props: new ValueMap({\n                        options: lc.values.value('options'),\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new TextController(doc, {\n                parser: (v) => v,\n                props: ValueMap.fromObject({\n                    formatter: formatString,\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const Constants = {\n        monitor: {\n            defaultInterval: 200,\n            defaultLineCount: 3,\n        },\n    };\n\n    const className$2 = ClassName('mll');\n    class MultiLogView {\n        constructor(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$2());\n            config.viewProps.bindClassModifiers(this.element);\n            const textareaElem = doc.createElement('textarea');\n            textareaElem.classList.add(className$2('i'));\n            textareaElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            textareaElem.readOnly = true;\n            config.viewProps.bindDisabled(textareaElem);\n            this.element.appendChild(textareaElem);\n            this.textareaElem_ = textareaElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const elem = this.textareaElem_;\n            const shouldScroll = elem.scrollTop === elem.scrollHeight - elem.clientHeight;\n            const lines = [];\n            this.value.rawValue.forEach((value) => {\n                if (value !== undefined) {\n                    lines.push(this.formatter_(value));\n                }\n            });\n            elem.textContent = lines.join('\\n');\n            if (shouldScroll) {\n                elem.scrollTop = elem.scrollHeight;\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n\n    class MultiLogController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new MultiLogView(doc, {\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$1 = ClassName('sgl');\n    class SingleLogView {\n        constructor(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$1());\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$1('i'));\n            inputElem.readOnly = true;\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const values = this.value.rawValue;\n            const lastValue = values[values.length - 1];\n            this.inputElement.value =\n                lastValue !== undefined ? this.formatter_(lastValue) : '';\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n\n    class SingleLogController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SingleLogView(doc, {\n                formatter: config.formatter,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const BooleanMonitorPlugin = {\n        id: 'monitor-bool',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'boolean') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => boolFromUnknown,\n        },\n        controller: (args) => {\n            var _a;\n            if (args.value.rawValue.length === 1) {\n                return new SingleLogController(args.document, {\n                    formatter: BooleanFormatter,\n                    value: args.value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new MultiLogController(args.document, {\n                formatter: BooleanFormatter,\n                lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const className = ClassName('grl');\n    class GraphLogView {\n        constructor(doc, config) {\n            this.onCursorChange_ = this.onCursorChange_.bind(this);\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n            this.formatter_ = config.formatter;\n            this.props_ = config.props;\n            this.cursor_ = config.cursor;\n            this.cursor_.emitter.on('change', this.onCursorChange_);\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className('g'));\n            svgElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(className('t'), ClassName('tt')());\n            this.element.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        get graphElement() {\n            return this.svgElem_;\n        }\n        update_() {\n            const bounds = this.svgElem_.getBoundingClientRect();\n            const maxIndex = this.value.rawValue.length - 1;\n            const min = this.props_.get('minValue');\n            const max = this.props_.get('maxValue');\n            const points = [];\n            this.value.rawValue.forEach((v, index) => {\n                if (v === undefined) {\n                    return;\n                }\n                const x = mapRange(index, 0, maxIndex, 0, bounds.width);\n                const y = mapRange(v, min, max, bounds.height, 0);\n                points.push([x, y].join(','));\n            });\n            this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n            const tooltipElem = this.tooltipElem_;\n            const value = this.value.rawValue[this.cursor_.rawValue];\n            if (value === undefined) {\n                tooltipElem.classList.remove(className('t', 'a'));\n                return;\n            }\n            const tx = mapRange(this.cursor_.rawValue, 0, maxIndex, 0, bounds.width);\n            const ty = mapRange(value, min, max, bounds.height, 0);\n            tooltipElem.style.left = `${tx}px`;\n            tooltipElem.style.top = `${ty}px`;\n            tooltipElem.textContent = `${this.formatter_(value)}`;\n            if (!tooltipElem.classList.contains(className('t', 'a'))) {\n                tooltipElem.classList.add(className('t', 'a'), className('t', 'in'));\n                forceReflow(tooltipElem);\n                tooltipElem.classList.remove(className('t', 'in'));\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n        onCursorChange_() {\n            this.update_();\n        }\n    }\n\n    class GraphLogController {\n        constructor(doc, config) {\n            this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\n            this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\n            this.onGraphPointerDown_ = this.onGraphPointerDown_.bind(this);\n            this.onGraphPointerMove_ = this.onGraphPointerMove_.bind(this);\n            this.onGraphPointerUp_ = this.onGraphPointerUp_.bind(this);\n            this.props_ = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.cursor_ = createValue(-1);\n            this.view = new GraphLogView(doc, {\n                cursor: this.cursor_,\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                props: this.props_,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            if (!supportsTouch(doc)) {\n                this.view.element.addEventListener('mousemove', this.onGraphMouseMove_);\n                this.view.element.addEventListener('mouseleave', this.onGraphMouseLeave_);\n            }\n            else {\n                const ph = new PointerHandler(this.view.element);\n                ph.emitter.on('down', this.onGraphPointerDown_);\n                ph.emitter.on('move', this.onGraphPointerMove_);\n                ph.emitter.on('up', this.onGraphPointerUp_);\n            }\n        }\n        onGraphMouseLeave_() {\n            this.cursor_.rawValue = -1;\n        }\n        onGraphMouseMove_(ev) {\n            const bounds = this.view.element.getBoundingClientRect();\n            this.cursor_.rawValue = Math.floor(mapRange(ev.offsetX, 0, bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerDown_(ev) {\n            this.onGraphPointerMove_(ev);\n        }\n        onGraphPointerMove_(ev) {\n            if (!ev.data.point) {\n                this.cursor_.rawValue = -1;\n                return;\n            }\n            this.cursor_.rawValue = Math.floor(mapRange(ev.data.point.x, 0, ev.data.bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerUp_() {\n            this.cursor_.rawValue = -1;\n        }\n    }\n\n    function createFormatter(params) {\n        return 'format' in params && !isEmpty(params.format)\n            ? params.format\n            : createNumberFormatter(2);\n    }\n    function createTextMonitor(args) {\n        var _a;\n        if (args.value.rawValue.length === 1) {\n            return new SingleLogController(args.document, {\n                formatter: createFormatter(args.params),\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new MultiLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    function createGraphMonitor(args) {\n        var _a, _b, _c;\n        return new GraphLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            props: ValueMap.fromObject({\n                maxValue: (_b = ('max' in args.params ? args.params.max : null)) !== null && _b !== void 0 ? _b : 100,\n                minValue: (_c = ('min' in args.params ? args.params.min : null)) !== null && _c !== void 0 ? _c : 0,\n            }),\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    function shouldShowGraph(params) {\n        return 'view' in params && params.view === 'graph';\n    }\n    const NumberMonitorPlugin = {\n        id: 'monitor-number',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                lineCount: p.optional.number,\n                max: p.optional.number,\n                min: p.optional.number,\n                view: p.optional.string,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            defaultBufferSize: (params) => (shouldShowGraph(params) ? 64 : 1),\n            reader: (_args) => numberFromUnknown,\n        },\n        controller: (args) => {\n            if (shouldShowGraph(args.params)) {\n                return createGraphMonitor(args);\n            }\n            return createTextMonitor(args);\n        },\n    };\n\n    const StringMonitorPlugin = {\n        id: 'monitor-string',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number,\n                multiline: p.optional.boolean,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => stringFromUnknown,\n        },\n        controller: (args) => {\n            var _a;\n            const value = args.value;\n            const multiline = value.rawValue.length > 1 ||\n                ('multiline' in args.params && args.params.multiline);\n            if (multiline) {\n                return new MultiLogController(args.document, {\n                    formatter: formatString,\n                    lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new SingleLogController(args.document, {\n                formatter: formatString,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class InputBinding {\n        constructor(config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.reader = config.reader;\n            this.writer = config.writer;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.target = config.target;\n            this.read();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue !== undefined) {\n                this.value.rawValue = this.reader(targetValue);\n            }\n        }\n        write_(rawValue) {\n            this.writer(this.target, rawValue);\n        }\n        onValueChange_(ev) {\n            this.write_(ev.rawValue);\n            this.emitter.emit('change', {\n                options: ev.options,\n                rawValue: ev.rawValue,\n                sender: this,\n            });\n        }\n    }\n\n    function createInputBindingController(plugin, args) {\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) {\n            return null;\n        }\n        const p = ParamsParsers;\n        const valueArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params,\n        };\n        const reader = plugin.binding.reader(valueArgs);\n        const constraint = plugin.binding.constraint\n            ? plugin.binding.constraint(valueArgs)\n            : undefined;\n        const value = createValue(reader(result.initialValue), {\n            constraint: constraint,\n            equals: plugin.binding.equals,\n        });\n        const binding = new InputBinding({\n            reader: reader,\n            target: args.target,\n            value: value,\n            writer: plugin.binding.writer(valueArgs),\n        });\n        const disabled = p.optional.boolean(args.params.disabled).value;\n        const hidden = p.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            constraint: constraint,\n            document: args.document,\n            initialValue: result.initialValue,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n        const label = p.optional.string(args.params.label).value;\n        return new InputBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: label !== null && label !== void 0 ? label : args.target.key,\n            }),\n            valueController: controller,\n        });\n    }\n\n    class MonitorBinding {\n        constructor(config) {\n            this.onTick_ = this.onTick_.bind(this);\n            this.reader_ = config.reader;\n            this.target = config.target;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.ticker = config.ticker;\n            this.ticker.emitter.on('tick', this.onTick_);\n            this.read();\n        }\n        dispose() {\n            this.ticker.dispose();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue === undefined) {\n                return;\n            }\n            const buffer = this.value.rawValue;\n            const newValue = this.reader_(targetValue);\n            this.value.rawValue = createPushedBuffer(buffer, newValue);\n            this.emitter.emit('update', {\n                rawValue: newValue,\n                sender: this,\n            });\n        }\n        onTick_(_) {\n            this.read();\n        }\n    }\n\n    function createTicker(document, interval) {\n        return interval === 0\n            ? new ManualTicker()\n            : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n    }\n    function createMonitorBindingController(plugin, args) {\n        var _a, _b, _c;\n        const P = ParamsParsers;\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) {\n            return null;\n        }\n        const bindingArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params,\n        };\n        const reader = plugin.binding.reader(bindingArgs);\n        const bufferSize = (_b = (_a = P.optional.number(args.params.bufferSize).value) !== null && _a !== void 0 ? _a : (plugin.binding.defaultBufferSize &&\n            plugin.binding.defaultBufferSize(result.params))) !== null && _b !== void 0 ? _b : 1;\n        const interval = P.optional.number(args.params.interval).value;\n        const binding = new MonitorBinding({\n            reader: reader,\n            target: args.target,\n            ticker: createTicker(args.document, interval),\n            value: initializeBuffer(bufferSize),\n        });\n        const disabled = P.optional.boolean(args.params.disabled).value;\n        const hidden = P.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            document: args.document,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n        const label = (_c = P.optional.string(args.params.label).value) !== null && _c !== void 0 ? _c : args.target.key;\n        return new MonitorBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: label,\n            }),\n            valueController: controller,\n        });\n    }\n\n    class PluginPool {\n        constructor() {\n            this.pluginsMap_ = {\n                blades: [],\n                inputs: [],\n                monitors: [],\n            };\n        }\n        getAll() {\n            return [\n                ...this.pluginsMap_.blades,\n                ...this.pluginsMap_.inputs,\n                ...this.pluginsMap_.monitors,\n            ];\n        }\n        register(r) {\n            if (r.type === 'blade') {\n                this.pluginsMap_.blades.unshift(r);\n            }\n            else if (r.type === 'input') {\n                this.pluginsMap_.inputs.unshift(r);\n            }\n            else if (r.type === 'monitor') {\n                this.pluginsMap_.monitors.unshift(r);\n            }\n        }\n        createInput(document, target, params) {\n            const initialValue = target.read();\n            if (isEmpty(initialValue)) {\n                throw new TpError({\n                    context: {\n                        key: target.key,\n                    },\n                    type: 'nomatchingcontroller',\n                });\n            }\n            const bc = this.pluginsMap_.inputs.reduce((result, plugin) => result !== null && result !== void 0 ? result : createInputBindingController(plugin, {\n                document: document,\n                target: target,\n                params: params,\n            }), null);\n            if (bc) {\n                return bc;\n            }\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        createMonitor(document, target, params) {\n            const bc = this.pluginsMap_.monitors.reduce((result, plugin) => result !== null && result !== void 0 ? result : createMonitorBindingController(plugin, {\n                document: document,\n                params: params,\n                target: target,\n            }), null);\n            if (bc) {\n                return bc;\n            }\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        createBlade(document, params) {\n            const bc = this.pluginsMap_.blades.reduce((result, plugin) => result !== null && result !== void 0 ? result : createBladeController(plugin, {\n                document: document,\n                params: params,\n            }), null);\n            if (!bc) {\n                throw new TpError({\n                    type: 'nomatchingview',\n                    context: {\n                        params: params,\n                    },\n                });\n            }\n            return bc;\n        }\n        createBladeApi(bc) {\n            if (bc instanceof InputBindingController) {\n                return new InputBindingApi(bc);\n            }\n            if (bc instanceof MonitorBindingController) {\n                return new MonitorBindingApi(bc);\n            }\n            if (bc instanceof RackController) {\n                return new RackApi(bc, this);\n            }\n            const api = this.pluginsMap_.blades.reduce((result, plugin) => result !== null && result !== void 0 ? result : plugin.api({\n                controller: bc,\n                pool: this,\n            }), null);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            return api;\n        }\n    }\n\n    function createDefaultPluginPool() {\n        const pool = new PluginPool();\n        [\n            Point2dInputPlugin,\n            Point3dInputPlugin,\n            Point4dInputPlugin,\n            StringInputPlugin,\n            NumberInputPlugin,\n            StringColorInputPlugin,\n            ObjectColorInputPlugin,\n            NumberColorInputPlugin,\n            BooleanInputPlugin,\n            BooleanMonitorPlugin,\n            StringMonitorPlugin,\n            NumberMonitorPlugin,\n            ButtonBladePlugin,\n            FolderBladePlugin,\n            SeparatorBladePlugin,\n            TabBladePlugin,\n        ].forEach((p) => {\n            pool.register(p);\n        });\n        return pool;\n    }\n\n    function point2dFromUnknown(value) {\n        return Point2d.isObject(value)\n            ? new Point2d(value.x, value.y)\n            : new Point2d();\n    }\n    function writePoint2d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n    }\n\n    function createDimensionConstraint(params, initialValue) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        const cs = createStepConstraint(params, initialValue);\n        if (cs) {\n            constraints.push(cs);\n        }\n        const rs = createRangeConstraint(params);\n        if (rs) {\n            constraints.push(rs);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint(params, initialValue) {\n        return new PointNdConstraint({\n            assembly: Point2dAssembly,\n            components: [\n                createDimensionConstraint('x' in params ? params.x : undefined, initialValue.x),\n                createDimensionConstraint('y' in params ? params.y : undefined, initialValue.y),\n            ],\n        });\n    }\n    function getSuitableMaxDimensionValue(constraint, rawValue) {\n        const [min, max] = constraint ? findNumberRange(constraint) : [];\n        if (!isEmpty(min) || !isEmpty(max)) {\n            return Math.max(Math.abs(min !== null && min !== void 0 ? min : 0), Math.abs(max !== null && max !== void 0 ? max : 0));\n        }\n        const step = getBaseStep(constraint);\n        return Math.max(Math.abs(step) * 10, Math.abs(rawValue) * 10);\n    }\n    function getSuitableMaxValue(initialValue, constraint) {\n        const xc = constraint instanceof PointNdConstraint\n            ? constraint.components[0]\n            : undefined;\n        const yc = constraint instanceof PointNdConstraint\n            ? constraint.components[1]\n            : undefined;\n        const xr = getSuitableMaxDimensionValue(xc, initialValue.x);\n        const yr = getSuitableMaxDimensionValue(yc, initialValue.y);\n        return Math.max(xr, yr);\n    }\n    function createAxis(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    function shouldInvertY(params) {\n        if (!('y' in params)) {\n            return false;\n        }\n        const yParams = params.y;\n        if (!yParams) {\n            return false;\n        }\n        return 'inverted' in yParams ? !!yParams.inverted : false;\n    }\n    const Point2dInputPlugin = {\n        id: 'input-point2d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point2d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                expanded: p.optional.boolean,\n                picker: p.optional.custom(parsePickerLayout),\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.object({\n                    inverted: p.optional.boolean,\n                    max: p.optional.number,\n                    min: p.optional.number,\n                    step: p.optional.number,\n                }),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point2dFromUnknown,\n            constraint: (args) => createConstraint(args.params, args.initialValue),\n            equals: Point2d.equals,\n            writer: (_args) => writePoint2d,\n        },\n        controller: (args) => {\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new Point2dController(doc, {\n                axes: [\n                    createAxis(value.rawValue.x, c.components[0]),\n                    createAxis(value.rawValue.y, c.components[1]),\n                ],\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                invertsY: shouldInvertY(args.params),\n                maxValue: getSuitableMaxValue(value.rawValue, c),\n                parser: parseNumber,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class ListApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get options() {\n            return this.controller_.valueController.props.get('options');\n        }\n        set options(options) {\n            this.controller_.valueController.props.set('options', options);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class SliderApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get maxValue() {\n            return this.controller_.valueController.sliderController.props.get('maxValue');\n        }\n        set maxValue(maxValue) {\n            this.controller_.valueController.sliderController.props.set('maxValue', maxValue);\n        }\n        get minValue() {\n            return this.controller_.valueController.sliderController.props.get('minValue');\n        }\n        set minValue(minValue) {\n            this.controller_.valueController.sliderController.props.set('minValue', minValue);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class TextApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get formatter() {\n            return this.controller_.valueController.props.get('formatter');\n        }\n        set formatter(formatter) {\n            this.controller_.valueController.props.set('formatter', formatter);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    const ListBladePlugin = (function () {\n        return {\n            id: 'list',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    options: p.required.custom(parseListOptions),\n                    value: p.required.raw,\n                    view: p.required.constant('list'),\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                const lc = new ListConstraint(normalizeListOptions(args.params.options));\n                const value = createValue(args.params.value, {\n                    constraint: lc,\n                });\n                const ic = new ListController(args.document, {\n                    props: new ValueMap({\n                        options: lc.values.value('options'),\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: ic,\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof ListController)) {\n                    return null;\n                }\n                return new ListApi(args.controller);\n            },\n        };\n    })();\n\n    /**\n     * @hidden\n     */\n    function exportPresetJson(targets) {\n        return targets.reduce((result, target) => {\n            return Object.assign(result, {\n                [target.presetKey]: target.read(),\n            });\n        }, {});\n    }\n    /**\n     * @hidden\n     */\n    function importPresetJson(targets, preset) {\n        targets.forEach((target) => {\n            const value = preset[target.presetKey];\n            if (value !== undefined) {\n                target.write(value);\n            }\n        });\n    }\n\n    class RootApi extends FolderApi {\n        /**\n         * @hidden\n         */\n        constructor(controller, pool) {\n            super(controller, pool);\n        }\n        get element() {\n            return this.controller_.view.element;\n        }\n        /**\n         * Imports a preset of all inputs.\n         * @param preset The preset object to import.\n         */\n        importPreset(preset) {\n            const targets = this.controller_.rackController.rack\n                .find(InputBindingController)\n                .map((ibc) => {\n                return ibc.binding.target;\n            });\n            importPresetJson(targets, preset);\n            this.refresh();\n        }\n        /**\n         * Exports a preset of all inputs.\n         * @return An exported preset object.\n         */\n        exportPreset() {\n            const targets = this.controller_.rackController.rack\n                .find(InputBindingController)\n                .map((ibc) => {\n                return ibc.binding.target;\n            });\n            return exportPresetJson(targets);\n        }\n        /**\n         * Refreshes all bindings of the pane.\n         */\n        refresh() {\n            // Force-read all input bindings\n            this.controller_.rackController.rack\n                .find(InputBindingController)\n                .forEach((ibc) => {\n                ibc.binding.read();\n            });\n            // Force-read all monitor bindings\n            this.controller_.rackController.rack\n                .find(MonitorBindingController)\n                .forEach((mbc) => {\n                mbc.binding.read();\n            });\n        }\n    }\n\n    class RootController extends FolderController {\n        constructor(doc, config) {\n            super(doc, {\n                expanded: config.expanded,\n                blade: config.blade,\n                props: config.props,\n                root: true,\n                viewProps: config.viewProps,\n            });\n        }\n    }\n\n    const SliderBladePlugin = {\n        id: 'slider',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                max: p.required.number,\n                min: p.required.number,\n                view: p.required.constant('slider'),\n                format: p.optional.function,\n                label: p.optional.string,\n                value: p.optional.number,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            var _a, _b;\n            const initialValue = (_a = args.params.value) !== null && _a !== void 0 ? _a : 0;\n            const drc = new DefiniteRangeConstraint({\n                max: args.params.max,\n                min: args.params.min,\n            });\n            const vc = new SliderTextController(args.document, {\n                baseStep: 1,\n                parser: parseNumber,\n                sliderProps: new ValueMap({\n                    maxValue: drc.values.value('max'),\n                    minValue: drc.values.value('min'),\n                }),\n                textProps: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(undefined, initialValue),\n                    formatter: (_b = args.params.format) !== null && _b !== void 0 ? _b : numberToString,\n                }),\n                value: createValue(initialValue, {\n                    constraint: drc,\n                }),\n                viewProps: args.viewProps,\n            });\n            return new LabeledValueController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: vc,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabeledValueController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof SliderTextController)) {\n                return null;\n            }\n            return new SliderApi(args.controller);\n        },\n    };\n\n    const TextBladePlugin = (function () {\n        return {\n            id: 'text',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    parse: p.required.function,\n                    value: p.required.raw,\n                    view: p.required.constant('text'),\n                    format: p.optional.function,\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                var _a;\n                const ic = new TextController(args.document, {\n                    parser: args.params.parse,\n                    props: ValueMap.fromObject({\n                        formatter: (_a = args.params.format) !== null && _a !== void 0 ? _a : ((v) => String(v)),\n                    }),\n                    value: createValue(args.params.value),\n                    viewProps: args.viewProps,\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: ic,\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof TextController)) {\n                    return null;\n                }\n                return new TextApi(args.controller);\n            },\n        };\n    })();\n\n    function createDefaultWrapperElement(doc) {\n        const elem = doc.createElement('div');\n        elem.classList.add(ClassName('dfw')());\n        if (doc.body) {\n            doc.body.appendChild(elem);\n        }\n        return elem;\n    }\n    function embedStyle(doc, id, css) {\n        if (doc.querySelector(`style[data-tp-style=${id}]`)) {\n            return;\n        }\n        const styleElem = doc.createElement('style');\n        styleElem.dataset.tpStyle = id;\n        styleElem.textContent = css;\n        doc.head.appendChild(styleElem);\n    }\n    /**\n     * The root pane of Tweakpane.\n     */\n    class Pane extends RootApi {\n        constructor(opt_config) {\n            var _a, _b;\n            const config = opt_config !== null && opt_config !== void 0 ? opt_config : {};\n            const doc = (_a = config.document) !== null && _a !== void 0 ? _a : getWindowDocument();\n            const pool = createDefaultPluginPool();\n            const rootController = new RootController(doc, {\n                expanded: config.expanded,\n                blade: createBlade(),\n                props: ValueMap.fromObject({\n                    title: config.title,\n                }),\n                viewProps: ViewProps.create(),\n            });\n            super(rootController, pool);\n            this.pool_ = pool;\n            this.containerElem_ = (_b = config.container) !== null && _b !== void 0 ? _b : createDefaultWrapperElement(doc);\n            this.containerElem_.appendChild(this.element);\n            this.doc_ = doc;\n            this.usesDefaultWrapper_ = !config.container;\n            this.setUpDefaultPlugins_();\n        }\n        get document() {\n            if (!this.doc_) {\n                throw TpError.alreadyDisposed();\n            }\n            return this.doc_;\n        }\n        dispose() {\n            const containerElem = this.containerElem_;\n            if (!containerElem) {\n                throw TpError.alreadyDisposed();\n            }\n            if (this.usesDefaultWrapper_) {\n                const parentElem = containerElem.parentElement;\n                if (parentElem) {\n                    parentElem.removeChild(containerElem);\n                }\n            }\n            this.containerElem_ = null;\n            this.doc_ = null;\n            super.dispose();\n        }\n        registerPlugin(bundle) {\n            const plugins = 'plugin' in bundle\n                ? [bundle.plugin]\n                : 'plugins' in bundle\n                    ? bundle.plugins\n                    : [];\n            plugins.forEach((p) => {\n                this.pool_.register(p);\n                this.embedPluginStyle_(p);\n            });\n        }\n        embedPluginStyle_(plugin) {\n            if (plugin.css) {\n                embedStyle(this.document, `plugin-${plugin.id}`, plugin.css);\n            }\n        }\n        setUpDefaultPlugins_() {\n            // NOTE: This string literal will be replaced with the default CSS by Rollup at the compilation time\n            embedStyle(this.document, 'default', '.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, hsl(230deg, 7%, 17%));--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, hsl(230deg, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230deg, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230deg, 7%, 75%));--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230deg, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:\"\";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:\"\";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:\"\";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:\"\";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:\"\";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:\"\";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:\"\";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{padding-bottom:var(--cnt-v-p);padding-left:4px;padding-top:var(--cnt-v-p)}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:\"\";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:\"\";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}');\n            this.pool_.getAll().forEach((plugin) => {\n                this.embedPluginStyle_(plugin);\n            });\n            this.registerPlugin({\n                plugins: [\n                    SliderBladePlugin,\n                    ListBladePlugin,\n                    TabBladePlugin,\n                    TextBladePlugin,\n                ],\n            });\n        }\n    }\n\n    const VERSION = new Semver('3.1.4');\n\n    exports.BladeApi = BladeApi;\n    exports.ButtonApi = ButtonApi;\n    exports.FolderApi = FolderApi;\n    exports.InputBindingApi = InputBindingApi;\n    exports.ListApi = ListApi;\n    exports.MonitorBindingApi = MonitorBindingApi;\n    exports.Pane = Pane;\n    exports.SeparatorApi = SeparatorApi;\n    exports.SliderApi = SliderApi;\n    exports.TabApi = TabApi;\n    exports.TabPageApi = TabPageApi;\n    exports.TextApi = TextApi;\n    exports.TpChangeEvent = TpChangeEvent;\n    exports.VERSION = VERSION;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.TweakpaneEssentialsPlugin = {}));\n})(this, (function (exports) { 'use strict';\n\n    class BladeApi {\n        constructor(controller) {\n            this.controller_ = controller;\n        }\n        get element() {\n            return this.controller_.view.element;\n        }\n        get disabled() {\n            return this.controller_.viewProps.get('disabled');\n        }\n        set disabled(disabled) {\n            this.controller_.viewProps.set('disabled', disabled);\n        }\n        get hidden() {\n            return this.controller_.viewProps.get('hidden');\n        }\n        set hidden(hidden) {\n            this.controller_.viewProps.set('hidden', hidden);\n        }\n        dispose() {\n            this.controller_.viewProps.set('disposed', true);\n        }\n    }\n\n    class TpEvent {\n        constructor(target) {\n            this.target = target;\n        }\n    }\n    class TpChangeEvent extends TpEvent {\n        constructor(target, value, presetKey, last) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n            this.last = last !== null && last !== void 0 ? last : true;\n        }\n    }\n\n    function forceCast(v) {\n        return v;\n    }\n    function isEmpty(value) {\n        return value === null || value === undefined;\n    }\n\n    const CREATE_MESSAGE_MAP = {\n        alreadydisposed: () => 'View has been already disposed',\n        invalidparams: (context) => `Invalid parameters for '${context.name}'`,\n        nomatchingcontroller: (context) => `No matching controller for '${context.key}'`,\n        nomatchingview: (context) => `No matching view for '${JSON.stringify(context.params)}'`,\n        notbindable: () => `Value is not bindable`,\n        propertynotfound: (context) => `Property '${context.name}' not found`,\n        shouldneverhappen: () => 'This error should never happen',\n    };\n    class TpError {\n        constructor(config) {\n            var _a;\n            this.message =\n                (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : 'Unexpected error';\n            this.name = this.constructor.name;\n            this.stack = new Error(this.message).stack;\n            this.type = config.type;\n        }\n        static alreadyDisposed() {\n            return new TpError({ type: 'alreadydisposed' });\n        }\n        static notBindable() {\n            return new TpError({\n                type: 'notbindable',\n            });\n        }\n        static propertyNotFound(name) {\n            return new TpError({\n                type: 'propertynotfound',\n                context: {\n                    name: name,\n                },\n            });\n        }\n        static shouldNeverHappen() {\n            return new TpError({ type: 'shouldneverhappen' });\n        }\n    }\n\n    class Emitter {\n        constructor() {\n            this.observers_ = {};\n        }\n        on(eventName, handler) {\n            let observers = this.observers_[eventName];\n            if (!observers) {\n                observers = this.observers_[eventName] = [];\n            }\n            observers.push({\n                handler: handler,\n            });\n            return this;\n        }\n        off(eventName, handler) {\n            const observers = this.observers_[eventName];\n            if (observers) {\n                this.observers_[eventName] = observers.filter((observer) => {\n                    return observer.handler !== handler;\n                });\n            }\n            return this;\n        }\n        emit(eventName, event) {\n            const observers = this.observers_[eventName];\n            if (!observers) {\n                return;\n            }\n            observers.forEach((observer) => {\n                observer.handler(event);\n            });\n        }\n    }\n\n    const PREFIX = 'tp';\n    function ClassName(viewName) {\n        const fn = (opt_elementName, opt_modifier) => {\n            return [\n                PREFIX,\n                '-',\n                viewName,\n                'v',\n                opt_elementName ? `_${opt_elementName}` : '',\n                opt_modifier ? `-${opt_modifier}` : '',\n            ].join('');\n        };\n        return fn;\n    }\n\n    function compose$1(h1, h2) {\n        return (input) => h2(h1(input));\n    }\n    function extractValue(ev) {\n        return ev.rawValue;\n    }\n    function bindValue(value, applyValue) {\n        value.emitter.on('change', compose$1(extractValue, applyValue));\n        applyValue(value.rawValue);\n    }\n    function bindValueMap(valueMap, key, applyValue) {\n        bindValue(valueMap.value(key), applyValue);\n    }\n\n    function applyClass(elem, className, active) {\n        if (active) {\n            elem.classList.add(className);\n        }\n        else {\n            elem.classList.remove(className);\n        }\n    }\n    function valueToClassName(elem, className) {\n        return (value) => {\n            applyClass(elem, className, value);\n        };\n    }\n    function bindValueToTextContent(value, elem) {\n        bindValue(value, (text) => {\n            elem.textContent = text !== null && text !== void 0 ? text : '';\n        });\n    }\n\n    const className$g = ClassName('btn');\n    class ButtonView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$g());\n            config.viewProps.bindClassModifiers(this.element);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$g('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$g('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n        }\n    }\n\n    class ButtonController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new ButtonView(doc, {\n                props: this.props,\n                viewProps: this.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class BoundValue {\n        constructor(initialValue, config) {\n            var _a;\n            this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n            this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : ((v1, v2) => v1 === v2);\n            this.emitter = new Emitter();\n            this.rawValue_ = initialValue;\n        }\n        get constraint() {\n            return this.constraint_;\n        }\n        get rawValue() {\n            return this.rawValue_;\n        }\n        set rawValue(rawValue) {\n            this.setRawValue(rawValue, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(rawValue, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            const constrainedValue = this.constraint_\n                ? this.constraint_.constrain(rawValue)\n                : rawValue;\n            const prevValue = this.rawValue_;\n            const changed = !this.equals_(prevValue, constrainedValue);\n            if (!changed && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.rawValue_ = constrainedValue;\n            this.emitter.emit('change', {\n                options: opts,\n                previousRawValue: prevValue,\n                rawValue: constrainedValue,\n                sender: this,\n            });\n        }\n    }\n\n    class PrimitiveValue {\n        constructor(initialValue) {\n            this.emitter = new Emitter();\n            this.value_ = initialValue;\n        }\n        get rawValue() {\n            return this.value_;\n        }\n        set rawValue(value) {\n            this.setRawValue(value, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(value, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            const prevValue = this.value_;\n            if (prevValue === value && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.value_ = value;\n            this.emitter.emit('change', {\n                options: opts,\n                previousRawValue: prevValue,\n                rawValue: this.value_,\n                sender: this,\n            });\n        }\n    }\n\n    function createValue(initialValue, config) {\n        const constraint = config === null || config === void 0 ? void 0 : config.constraint;\n        const equals = config === null || config === void 0 ? void 0 : config.equals;\n        if (!constraint && !equals) {\n            return new PrimitiveValue(initialValue);\n        }\n        return new BoundValue(initialValue, config);\n    }\n\n    class ValueMap {\n        constructor(valueMap) {\n            this.emitter = new Emitter();\n            this.valMap_ = valueMap;\n            for (const key in this.valMap_) {\n                const v = this.valMap_[key];\n                v.emitter.on('change', () => {\n                    this.emitter.emit('change', {\n                        key: key,\n                        sender: this,\n                    });\n                });\n            }\n        }\n        static createCore(initialValue) {\n            const keys = Object.keys(initialValue);\n            return keys.reduce((o, key) => {\n                return Object.assign(o, {\n                    [key]: createValue(initialValue[key]),\n                });\n            }, {});\n        }\n        static fromObject(initialValue) {\n            const core = this.createCore(initialValue);\n            return new ValueMap(core);\n        }\n        get(key) {\n            return this.valMap_[key].rawValue;\n        }\n        set(key, value) {\n            this.valMap_[key].rawValue = value;\n        }\n        value(key) {\n            return this.valMap_[key];\n        }\n    }\n\n    function parseObject(value, keyToParserMap) {\n        const keys = Object.keys(keyToParserMap);\n        const result = keys.reduce((tmp, key) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const parser = keyToParserMap[key];\n            const result = parser(value[key]);\n            return result.succeeded\n                ? Object.assign(Object.assign({}, tmp), { [key]: result.value }) : undefined;\n        }, {});\n        return forceCast(result);\n    }\n    function parseArray(value, parseItem) {\n        return value.reduce((tmp, item) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const result = parseItem(item);\n            if (!result.succeeded || result.value === undefined) {\n                return undefined;\n            }\n            return [...tmp, result.value];\n        }, []);\n    }\n    function isObject(value) {\n        if (value === null) {\n            return false;\n        }\n        return typeof value === 'object';\n    }\n    function createParamsParserBuilder(parse) {\n        return (optional) => (v) => {\n            if (!optional && v === undefined) {\n                return {\n                    succeeded: false,\n                    value: undefined,\n                };\n            }\n            if (optional && v === undefined) {\n                return {\n                    succeeded: true,\n                    value: undefined,\n                };\n            }\n            const result = parse(v);\n            return result !== undefined\n                ? {\n                    succeeded: true,\n                    value: result,\n                }\n                : {\n                    succeeded: false,\n                    value: undefined,\n                };\n        };\n    }\n    function createParamsParserBuilders(optional) {\n        return {\n            custom: (parse) => createParamsParserBuilder(parse)(optional),\n            boolean: createParamsParserBuilder((v) => typeof v === 'boolean' ? v : undefined)(optional),\n            number: createParamsParserBuilder((v) => typeof v === 'number' ? v : undefined)(optional),\n            string: createParamsParserBuilder((v) => typeof v === 'string' ? v : undefined)(optional),\n            function: createParamsParserBuilder((v) =>\n            typeof v === 'function' ? v : undefined)(optional),\n            constant: (value) => createParamsParserBuilder((v) => (v === value ? value : undefined))(optional),\n            raw: createParamsParserBuilder((v) => v)(optional),\n            object: (keyToParserMap) => createParamsParserBuilder((v) => {\n                if (!isObject(v)) {\n                    return undefined;\n                }\n                return parseObject(v, keyToParserMap);\n            })(optional),\n            array: (itemParser) => createParamsParserBuilder((v) => {\n                if (!Array.isArray(v)) {\n                    return undefined;\n                }\n                return parseArray(v, itemParser);\n            })(optional),\n        };\n    }\n    const ParamsParsers = {\n        optional: createParamsParserBuilders(true),\n        required: createParamsParserBuilders(false),\n    };\n    function parseParams(value, keyToParserMap) {\n        const result = ParamsParsers.required.object(keyToParserMap)(value);\n        return result.succeeded ? result.value : undefined;\n    }\n\n    function warnMissing(info) {\n        console.warn([\n            `Missing '${info.key}' of ${info.target} in ${info.place}.`,\n            'Please rebuild plugins with the latest core package.',\n        ].join(' '));\n    }\n\n    function disposeElement(elem) {\n        if (elem && elem.parentElement) {\n            elem.parentElement.removeChild(elem);\n        }\n        return null;\n    }\n\n    class ReadonlyValue {\n        constructor(value) {\n            this.value_ = value;\n        }\n        static create(value) {\n            return [\n                new ReadonlyValue(value),\n                (rawValue, options) => {\n                    value.setRawValue(rawValue, options);\n                },\n            ];\n        }\n        get emitter() {\n            return this.value_.emitter;\n        }\n        get rawValue() {\n            return this.value_.rawValue;\n        }\n    }\n\n    const className$f = ClassName('');\n    function valueToModifier(elem, modifier) {\n        return valueToClassName(elem, className$f(undefined, modifier));\n    }\n    class ViewProps extends ValueMap {\n        constructor(valueMap) {\n            var _a;\n            super(valueMap);\n            this.onDisabledChange_ = this.onDisabledChange_.bind(this);\n            this.onParentChange_ = this.onParentChange_.bind(this);\n            this.onParentGlobalDisabledChange_ =\n                this.onParentGlobalDisabledChange_.bind(this);\n            [this.globalDisabled_, this.setGlobalDisabled_] = ReadonlyValue.create(createValue(this.getGlobalDisabled_()));\n            this.value('disabled').emitter.on('change', this.onDisabledChange_);\n            this.value('parent').emitter.on('change', this.onParentChange_);\n            (_a = this.get('parent')) === null || _a === void 0 ? void 0 : _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\n        }\n        static create(opt_initialValue) {\n            var _a, _b, _c;\n            const initialValue = opt_initialValue !== null && opt_initialValue !== void 0 ? opt_initialValue : {};\n            return new ViewProps(ValueMap.createCore({\n                disabled: (_a = initialValue.disabled) !== null && _a !== void 0 ? _a : false,\n                disposed: false,\n                hidden: (_b = initialValue.hidden) !== null && _b !== void 0 ? _b : false,\n                parent: (_c = initialValue.parent) !== null && _c !== void 0 ? _c : null,\n            }));\n        }\n        get globalDisabled() {\n            return this.globalDisabled_;\n        }\n        bindClassModifiers(elem) {\n            bindValue(this.globalDisabled_, valueToModifier(elem, 'disabled'));\n            bindValueMap(this, 'hidden', valueToModifier(elem, 'hidden'));\n        }\n        bindDisabled(target) {\n            bindValue(this.globalDisabled_, (disabled) => {\n                target.disabled = disabled;\n            });\n        }\n        bindTabIndex(elem) {\n            bindValue(this.globalDisabled_, (disabled) => {\n                elem.tabIndex = disabled ? -1 : 0;\n            });\n        }\n        handleDispose(callback) {\n            this.value('disposed').emitter.on('change', (disposed) => {\n                if (disposed) {\n                    callback();\n                }\n            });\n        }\n        getGlobalDisabled_() {\n            const parent = this.get('parent');\n            const parentDisabled = parent ? parent.globalDisabled.rawValue : false;\n            return parentDisabled || this.get('disabled');\n        }\n        updateGlobalDisabled_() {\n            this.setGlobalDisabled_(this.getGlobalDisabled_());\n        }\n        onDisabledChange_() {\n            this.updateGlobalDisabled_();\n        }\n        onParentGlobalDisabledChange_() {\n            this.updateGlobalDisabled_();\n        }\n        onParentChange_(ev) {\n            var _a;\n            const prevParent = ev.previousRawValue;\n            prevParent === null || prevParent === void 0 ? void 0 : prevParent.globalDisabled.emitter.off('change', this.onParentGlobalDisabledChange_);\n            (_a = this.get('parent')) === null || _a === void 0 ? void 0 : _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\n            this.updateGlobalDisabled_();\n        }\n    }\n\n    function getAllBladePositions() {\n        return ['veryfirst', 'first', 'last', 'verylast'];\n    }\n\n    const className$e = ClassName('');\n    const POS_TO_CLASS_NAME_MAP = {\n        veryfirst: 'vfst',\n        first: 'fst',\n        last: 'lst',\n        verylast: 'vlst',\n    };\n    class BladeController {\n        constructor(config) {\n            this.parent_ = null;\n            this.blade = config.blade;\n            this.view = config.view;\n            this.viewProps = config.viewProps;\n            const elem = this.view.element;\n            this.blade.value('positions').emitter.on('change', () => {\n                getAllBladePositions().forEach((pos) => {\n                    elem.classList.remove(className$e(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n                this.blade.get('positions').forEach((pos) => {\n                    elem.classList.add(className$e(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n            });\n            this.viewProps.handleDispose(() => {\n                disposeElement(elem);\n            });\n        }\n        get parent() {\n            return this.parent_;\n        }\n        set parent(parent) {\n            this.parent_ = parent;\n            if (!('parent' in this.viewProps.valMap_)) {\n                warnMissing({\n                    key: 'parent',\n                    target: ViewProps.name,\n                    place: 'BladeController.parent',\n                });\n                return;\n            }\n            this.viewProps.set('parent', this.parent_ ? this.parent_.viewProps : null);\n        }\n    }\n\n    const SVG_NS = 'http://www.w3.org/2000/svg';\n    function forceReflow(element) {\n        element.offsetHeight;\n    }\n    function disableTransitionTemporarily(element, callback) {\n        const t = element.style.transition;\n        element.style.transition = 'none';\n        callback();\n        element.style.transition = t;\n    }\n    function supportsTouch(doc) {\n        return doc.ontouchstart !== undefined;\n    }\n    function removeChildNodes(element) {\n        while (element.childNodes.length > 0) {\n            element.removeChild(element.childNodes[0]);\n        }\n    }\n    function findNextTarget(ev) {\n        if (ev.relatedTarget) {\n            return forceCast(ev.relatedTarget);\n        }\n        if ('explicitOriginalTarget' in ev) {\n            return ev.explicitOriginalTarget;\n        }\n        return null;\n    }\n\n    const className$d = ClassName('lbl');\n    function createLabelNode(doc, label) {\n        const frag = doc.createDocumentFragment();\n        const lineNodes = label.split('\\n').map((line) => {\n            return doc.createTextNode(line);\n        });\n        lineNodes.forEach((lineNode, index) => {\n            if (index > 0) {\n                frag.appendChild(doc.createElement('br'));\n            }\n            frag.appendChild(lineNode);\n        });\n        return frag;\n    }\n    class LabelView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$d());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('div');\n            labelElem.classList.add(className$d('l'));\n            bindValueMap(config.props, 'label', (value) => {\n                if (isEmpty(value)) {\n                    this.element.classList.add(className$d(undefined, 'nol'));\n                }\n                else {\n                    this.element.classList.remove(className$d(undefined, 'nol'));\n                    removeChildNodes(labelElem);\n                    labelElem.appendChild(createLabelNode(doc, value));\n                }\n            });\n            this.element.appendChild(labelElem);\n            this.labelElement = labelElem;\n            const valueElem = doc.createElement('div');\n            valueElem.classList.add(className$d('v'));\n            this.element.appendChild(valueElem);\n            this.valueElement = valueElem;\n        }\n    }\n\n    class LabelController extends BladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    class ValueBladeController extends BladeController {\n        constructor(config) {\n            super(config);\n            this.value = config.value;\n        }\n    }\n\n    class Foldable extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(expanded) {\n            const coreObj = {\n                completed: true,\n                expanded: expanded,\n                expandedHeight: null,\n                shouldFixHeight: false,\n                temporaryExpanded: null,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new Foldable(core);\n        }\n        get styleExpanded() {\n            var _a;\n            return (_a = this.get('temporaryExpanded')) !== null && _a !== void 0 ? _a : this.get('expanded');\n        }\n        get styleHeight() {\n            if (!this.styleExpanded) {\n                return '0';\n            }\n            const exHeight = this.get('expandedHeight');\n            if (this.get('shouldFixHeight') && !isEmpty(exHeight)) {\n                return `${exHeight}px`;\n            }\n            return 'auto';\n        }\n        bindExpandedClass(elem, expandedClassName) {\n            const onExpand = () => {\n                const expanded = this.styleExpanded;\n                if (expanded) {\n                    elem.classList.add(expandedClassName);\n                }\n                else {\n                    elem.classList.remove(expandedClassName);\n                }\n            };\n            bindValueMap(this, 'expanded', onExpand);\n            bindValueMap(this, 'temporaryExpanded', onExpand);\n        }\n        cleanUpTransition() {\n            this.set('shouldFixHeight', false);\n            this.set('expandedHeight', null);\n            this.set('completed', true);\n        }\n    }\n    function createFoldable(expanded) {\n        return Foldable.create(expanded);\n    }\n    function computeExpandedFolderHeight(folder, containerElement) {\n        let height = 0;\n        disableTransitionTemporarily(containerElement, () => {\n            folder.set('expandedHeight', null);\n            folder.set('temporaryExpanded', true);\n            forceReflow(containerElement);\n            height = containerElement.clientHeight;\n            folder.set('temporaryExpanded', null);\n            forceReflow(containerElement);\n        });\n        return height;\n    }\n    function applyHeight(foldable, elem) {\n        elem.style.height = foldable.styleHeight;\n    }\n    function bindFoldable(foldable, elem) {\n        foldable.value('expanded').emitter.on('beforechange', () => {\n            foldable.set('completed', false);\n            if (isEmpty(foldable.get('expandedHeight'))) {\n                foldable.set('expandedHeight', computeExpandedFolderHeight(foldable, elem));\n            }\n            foldable.set('shouldFixHeight', true);\n            forceReflow(elem);\n        });\n        foldable.emitter.on('change', () => {\n            applyHeight(foldable, elem);\n        });\n        applyHeight(foldable, elem);\n        elem.addEventListener('transitionend', (ev) => {\n            if (ev.propertyName !== 'height') {\n                return;\n            }\n            foldable.cleanUpTransition();\n        });\n    }\n\n    class PlainView {\n        constructor(doc, config) {\n            const className = ClassName(config.viewName);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n        }\n    }\n\n    class LabeledValueController extends ValueBladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { value: config.valueController.value, view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    class ManualTicker {\n        constructor() {\n            this.disabled = false;\n            this.emitter = new Emitter();\n        }\n        dispose() { }\n        tick() {\n            if (this.disabled) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class IntervalTicker {\n        constructor(doc, interval) {\n            this.disabled_ = false;\n            this.timerId_ = null;\n            this.onTick_ = this.onTick_.bind(this);\n            this.doc_ = doc;\n            this.emitter = new Emitter();\n            this.interval_ = interval;\n            this.setTimer_();\n        }\n        get disabled() {\n            return this.disabled_;\n        }\n        set disabled(inactive) {\n            this.disabled_ = inactive;\n            if (this.disabled_) {\n                this.clearTimer_();\n            }\n            else {\n                this.setTimer_();\n            }\n        }\n        dispose() {\n            this.clearTimer_();\n        }\n        clearTimer_() {\n            if (this.timerId_ === null) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                win.clearInterval(this.timerId_);\n            }\n            this.timerId_ = null;\n        }\n        setTimer_() {\n            this.clearTimer_();\n            if (this.interval_ <= 0) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                this.timerId_ = win.setInterval(this.onTick_, this.interval_);\n            }\n        }\n        onTick_() {\n            if (this.disabled_) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class CompositeConstraint {\n        constructor(constraints) {\n            this.constraints = constraints;\n        }\n        constrain(value) {\n            return this.constraints.reduce((result, c) => {\n                return c.constrain(result);\n            }, value);\n        }\n    }\n    function findConstraint(c, constraintClass) {\n        if (c instanceof constraintClass) {\n            return c;\n        }\n        if (c instanceof CompositeConstraint) {\n            const result = c.constraints.reduce((tmpResult, sc) => {\n                if (tmpResult) {\n                    return tmpResult;\n                }\n                return sc instanceof constraintClass ? sc : null;\n            }, null);\n            if (result) {\n                return result;\n            }\n        }\n        return null;\n    }\n\n    class DefiniteRangeConstraint {\n        constructor(config) {\n            this.values = ValueMap.fromObject({\n                max: config.max,\n                min: config.min,\n            });\n        }\n        constrain(value) {\n            const max = this.values.get('max');\n            const min = this.values.get('min');\n            return Math.min(Math.max(value, min), max);\n        }\n    }\n\n    class RangeConstraint {\n        constructor(config) {\n            this.values = ValueMap.fromObject({\n                max: config.max,\n                min: config.min,\n            });\n        }\n        get maxValue() {\n            return this.values.get('max');\n        }\n        get minValue() {\n            return this.values.get('min');\n        }\n        constrain(value) {\n            const max = this.values.get('max');\n            const min = this.values.get('min');\n            let result = value;\n            if (!isEmpty(min)) {\n                result = Math.max(result, min);\n            }\n            if (!isEmpty(max)) {\n                result = Math.min(result, max);\n            }\n            return result;\n        }\n    }\n\n    class StepConstraint {\n        constructor(step, origin = 0) {\n            this.step = step;\n            this.origin = origin;\n        }\n        constrain(value) {\n            const o = this.origin % this.step;\n            const r = Math.round((value - o) / this.step);\n            return o + r * this.step;\n        }\n    }\n\n    const className$c = ClassName('pop');\n    class PopupView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$c());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.shows, valueToClassName(this.element, className$c(undefined, 'v')));\n        }\n    }\n\n    class PopupController {\n        constructor(doc, config) {\n            this.shows = createValue(false);\n            this.viewProps = config.viewProps;\n            this.view = new PopupView(doc, {\n                shows: this.shows,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$b = ClassName('txt');\n    class TextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$b());\n            config.viewProps.bindClassModifiers(this.element);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$b('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value_ = config.value;\n            this.refresh();\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value_.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class TextController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new TextView(doc, {\n                props: config.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.refresh();\n        }\n    }\n\n    function boolFromUnknown(value) {\n        if (value === 'false') {\n            return false;\n        }\n        return !!value;\n    }\n\n    class NumberLiteralNode {\n        constructor(text) {\n            this.text = text;\n        }\n        evaluate() {\n            return Number(this.text);\n        }\n        toString() {\n            return this.text;\n        }\n    }\n    const BINARY_OPERATION_MAP = {\n        '**': (v1, v2) => Math.pow(v1, v2),\n        '*': (v1, v2) => v1 * v2,\n        '/': (v1, v2) => v1 / v2,\n        '%': (v1, v2) => v1 % v2,\n        '+': (v1, v2) => v1 + v2,\n        '-': (v1, v2) => v1 - v2,\n        '<<': (v1, v2) => v1 << v2,\n        '>>': (v1, v2) => v1 >> v2,\n        '>>>': (v1, v2) => v1 >>> v2,\n        '&': (v1, v2) => v1 & v2,\n        '^': (v1, v2) => v1 ^ v2,\n        '|': (v1, v2) => v1 | v2,\n    };\n    class BinaryOperationNode {\n        constructor(operator, left, right) {\n            this.left = left;\n            this.operator = operator;\n            this.right = right;\n        }\n        evaluate() {\n            const op = BINARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected binary operator: '${this.operator}`);\n            }\n            return op(this.left.evaluate(), this.right.evaluate());\n        }\n        toString() {\n            return [\n                'b(',\n                this.left.toString(),\n                this.operator,\n                this.right.toString(),\n                ')',\n            ].join(' ');\n        }\n    }\n    const UNARY_OPERATION_MAP = {\n        '+': (v) => v,\n        '-': (v) => -v,\n        '~': (v) => ~v,\n    };\n    class UnaryOperationNode {\n        constructor(operator, expr) {\n            this.operator = operator;\n            this.expression = expr;\n        }\n        evaluate() {\n            const op = UNARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected unary operator: '${this.operator}`);\n            }\n            return op(this.expression.evaluate());\n        }\n        toString() {\n            return ['u(', this.operator, this.expression.toString(), ')'].join(' ');\n        }\n    }\n\n    function combineReader(parsers) {\n        return (text, cursor) => {\n            for (let i = 0; i < parsers.length; i++) {\n                const result = parsers[i](text, cursor);\n                if (result !== '') {\n                    return result;\n                }\n            }\n            return '';\n        };\n    }\n    function readWhitespace(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^\\s+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readNonZeroDigit(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        return ch.match(/^[1-9]$/) ? ch : '';\n    }\n    function readDecimalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readSignedInteger(text, cursor) {\n        const ds = readDecimalDigits(text, cursor);\n        if (ds !== '') {\n            return ds;\n        }\n        const sign = text.substr(cursor, 1);\n        cursor += 1;\n        if (sign !== '-' && sign !== '+') {\n            return '';\n        }\n        const sds = readDecimalDigits(text, cursor);\n        if (sds === '') {\n            return '';\n        }\n        return sign + sds;\n    }\n    function readExponentPart(text, cursor) {\n        const e = text.substr(cursor, 1);\n        cursor += 1;\n        if (e.toLowerCase() !== 'e') {\n            return '';\n        }\n        const si = readSignedInteger(text, cursor);\n        if (si === '') {\n            return '';\n        }\n        return e + si;\n    }\n    function readDecimalIntegerLiteral(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        if (ch === '0') {\n            return ch;\n        }\n        const nzd = readNonZeroDigit(text, cursor);\n        cursor += nzd.length;\n        if (nzd === '') {\n            return '';\n        }\n        return nzd + readDecimalDigits(text, cursor);\n    }\n    function readDecimalLiteral1(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        return dil + dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral2(text, cursor) {\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        if (dds === '') {\n            return '';\n        }\n        return dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral3(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        return dil + readExponentPart(text, cursor);\n    }\n    const readDecimalLiteral = combineReader([\n        readDecimalLiteral1,\n        readDecimalLiteral2,\n        readDecimalLiteral3,\n    ]);\n    function parseBinaryDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[01]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readBinaryIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0b') {\n            return '';\n        }\n        const bds = parseBinaryDigits(text, cursor);\n        if (bds === '') {\n            return '';\n        }\n        return prefix + bds;\n    }\n    function readOctalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-7]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readOctalIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0o') {\n            return '';\n        }\n        const ods = readOctalDigits(text, cursor);\n        if (ods === '') {\n            return '';\n        }\n        return prefix + ods;\n    }\n    function readHexDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9a-f]+/i);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readHexIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0x') {\n            return '';\n        }\n        const hds = readHexDigits(text, cursor);\n        if (hds === '') {\n            return '';\n        }\n        return prefix + hds;\n    }\n    const readNonDecimalIntegerLiteral = combineReader([\n        readBinaryIntegerLiteral,\n        readOctalIntegerLiteral,\n        readHexIntegerLiteral,\n    ]);\n    const readNumericLiteral = combineReader([\n        readNonDecimalIntegerLiteral,\n        readDecimalLiteral,\n    ]);\n\n    function parseLiteral(text, cursor) {\n        const num = readNumericLiteral(text, cursor);\n        cursor += num.length;\n        if (num === '') {\n            return null;\n        }\n        return {\n            evaluable: new NumberLiteralNode(num),\n            cursor: cursor,\n        };\n    }\n    function parseParenthesizedExpression(text, cursor) {\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '(') {\n            return null;\n        }\n        const expr = parseExpression(text, cursor);\n        if (!expr) {\n            return null;\n        }\n        cursor = expr.cursor;\n        cursor += readWhitespace(text, cursor).length;\n        const cl = text.substr(cursor, 1);\n        cursor += cl.length;\n        if (cl !== ')') {\n            return null;\n        }\n        return {\n            evaluable: expr.evaluable,\n            cursor: cursor,\n        };\n    }\n    function parsePrimaryExpression(text, cursor) {\n        var _a;\n        return ((_a = parseLiteral(text, cursor)) !== null && _a !== void 0 ? _a : parseParenthesizedExpression(text, cursor));\n    }\n    function parseUnaryExpression(text, cursor) {\n        const expr = parsePrimaryExpression(text, cursor);\n        if (expr) {\n            return expr;\n        }\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '+' && op !== '-' && op !== '~') {\n            return null;\n        }\n        const num = parseUnaryExpression(text, cursor);\n        if (!num) {\n            return null;\n        }\n        cursor = num.cursor;\n        return {\n            cursor: cursor,\n            evaluable: new UnaryOperationNode(op, num.evaluable),\n        };\n    }\n    function readBinaryOperator(ops, text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        const op = ops.filter((op) => text.startsWith(op, cursor))[0];\n        if (!op) {\n            return null;\n        }\n        cursor += op.length;\n        cursor += readWhitespace(text, cursor).length;\n        return {\n            cursor: cursor,\n            operator: op,\n        };\n    }\n    function createBinaryOperationExpressionParser(exprParser, ops) {\n        return (text, cursor) => {\n            const firstExpr = exprParser(text, cursor);\n            if (!firstExpr) {\n                return null;\n            }\n            cursor = firstExpr.cursor;\n            let expr = firstExpr.evaluable;\n            for (;;) {\n                const op = readBinaryOperator(ops, text, cursor);\n                if (!op) {\n                    break;\n                }\n                cursor = op.cursor;\n                const nextExpr = exprParser(text, cursor);\n                if (!nextExpr) {\n                    return null;\n                }\n                cursor = nextExpr.cursor;\n                expr = new BinaryOperationNode(op.operator, expr, nextExpr.evaluable);\n            }\n            return expr\n                ? {\n                    cursor: cursor,\n                    evaluable: expr,\n                }\n                : null;\n        };\n    }\n    const parseBinaryOperationExpression = [\n        ['**'],\n        ['*', '/', '%'],\n        ['+', '-'],\n        ['<<', '>>>', '>>'],\n        ['&'],\n        ['^'],\n        ['|'],\n    ].reduce((parser, ops) => {\n        return createBinaryOperationExpressionParser(parser, ops);\n    }, parseUnaryExpression);\n    function parseExpression(text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        return parseBinaryOperationExpression(text, cursor);\n    }\n    function parseEcmaNumberExpression(text) {\n        const expr = parseExpression(text, 0);\n        if (!expr) {\n            return null;\n        }\n        const cursor = expr.cursor + readWhitespace(text, expr.cursor).length;\n        if (cursor !== text.length) {\n            return null;\n        }\n        return expr.evaluable;\n    }\n\n    function parseNumber(text) {\n        var _a;\n        const r = parseEcmaNumberExpression(text);\n        return (_a = r === null || r === void 0 ? void 0 : r.evaluate()) !== null && _a !== void 0 ? _a : null;\n    }\n    function numberFromUnknown(value) {\n        if (typeof value === 'number') {\n            return value;\n        }\n        if (typeof value === 'string') {\n            const pv = parseNumber(value);\n            if (!isEmpty(pv)) {\n                return pv;\n            }\n        }\n        return 0;\n    }\n    function createNumberFormatter(digits) {\n        return (value) => {\n            return value.toFixed(Math.max(Math.min(digits, 20), 0));\n        };\n    }\n\n    const innerFormatter = createNumberFormatter(0);\n    function formatPercentage(value) {\n        return innerFormatter(value) + '%';\n    }\n\n    function stringFromUnknown(value) {\n        return String(value);\n    }\n\n    function fillBuffer(buffer, bufferSize) {\n        while (buffer.length < bufferSize) {\n            buffer.push(undefined);\n        }\n    }\n    function initializeBuffer(bufferSize) {\n        const buffer = [];\n        fillBuffer(buffer, bufferSize);\n        return createValue(buffer);\n    }\n    function createTrimmedBuffer(buffer) {\n        const index = buffer.indexOf(undefined);\n        return forceCast(index < 0 ? buffer : buffer.slice(0, index));\n    }\n    function createPushedBuffer(buffer, newValue) {\n        const newBuffer = [...createTrimmedBuffer(buffer), newValue];\n        if (newBuffer.length > buffer.length) {\n            newBuffer.splice(0, newBuffer.length - buffer.length);\n        }\n        else {\n            fillBuffer(newBuffer, buffer.length);\n        }\n        return newBuffer;\n    }\n\n    function connectValues({ primary, secondary, forward, backward, }) {\n        let changing = false;\n        function preventFeedback(callback) {\n            if (changing) {\n                return;\n            }\n            changing = true;\n            callback();\n            changing = false;\n        }\n        primary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        secondary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                primary.setRawValue(backward(primary, secondary), ev.options);\n            });\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        preventFeedback(() => {\n            secondary.setRawValue(forward(primary, secondary), {\n                forceEmit: false,\n                last: true,\n            });\n        });\n    }\n\n    function getStepForKey(baseStep, keys) {\n        const step = baseStep * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\n        if (keys.upKey) {\n            return +step;\n        }\n        else if (keys.downKey) {\n            return -step;\n        }\n        return 0;\n    }\n    function getVerticalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowDown',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowUp',\n        };\n    }\n    function getHorizontalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowLeft',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowRight',\n        };\n    }\n    function isVerticalArrowKey(key) {\n        return key === 'ArrowUp' || key === 'ArrowDown';\n    }\n    function isArrowKey(key) {\n        return isVerticalArrowKey(key) || key === 'ArrowLeft' || key === 'ArrowRight';\n    }\n\n    function computeOffset(ev, elem) {\n        var _a, _b;\n        const win = elem.ownerDocument.defaultView;\n        const rect = elem.getBoundingClientRect();\n        return {\n            x: ev.pageX - (((_a = (win && win.scrollX)) !== null && _a !== void 0 ? _a : 0) + rect.left),\n            y: ev.pageY - (((_b = (win && win.scrollY)) !== null && _b !== void 0 ? _b : 0) + rect.top),\n        };\n    }\n    class PointerHandler {\n        constructor(element) {\n            this.lastTouch_ = null;\n            this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\n            this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\n            this.onMouseDown_ = this.onMouseDown_.bind(this);\n            this.onTouchEnd_ = this.onTouchEnd_.bind(this);\n            this.onTouchMove_ = this.onTouchMove_.bind(this);\n            this.onTouchStart_ = this.onTouchStart_.bind(this);\n            this.elem_ = element;\n            this.emitter = new Emitter();\n            element.addEventListener('touchstart', this.onTouchStart_, {\n                passive: false,\n            });\n            element.addEventListener('touchmove', this.onTouchMove_, {\n                passive: true,\n            });\n            element.addEventListener('touchend', this.onTouchEnd_);\n            element.addEventListener('mousedown', this.onMouseDown_);\n        }\n        computePosition_(offset) {\n            const rect = this.elem_.getBoundingClientRect();\n            return {\n                bounds: {\n                    width: rect.width,\n                    height: rect.height,\n                },\n                point: offset\n                    ? {\n                        x: offset.x,\n                        y: offset.y,\n                    }\n                    : null,\n            };\n        }\n        onMouseDown_(ev) {\n            var _a;\n            ev.preventDefault();\n            (_a = ev.currentTarget) === null || _a === void 0 ? void 0 : _a.focus();\n            const doc = this.elem_.ownerDocument;\n            doc.addEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.addEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseMove_(ev) {\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseUp_(ev) {\n            const doc = this.elem_.ownerDocument;\n            doc.removeEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.removeEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onTouchStart_(ev) {\n            ev.preventDefault();\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchMove_(ev) {\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchEnd_(ev) {\n            var _a;\n            const touch = (_a = ev.targetTouches.item(0)) !== null && _a !== void 0 ? _a : this.lastTouch_;\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n    }\n\n    function mapRange(value, start1, end1, start2, end2) {\n        const p = (value - start1) / (end1 - start1);\n        return start2 + p * (end2 - start2);\n    }\n    function getDecimalDigits(value) {\n        const text = String(value.toFixed(10));\n        const frac = text.split('.')[1];\n        return frac.replace(/0+$/, '').length;\n    }\n    function constrainRange(value, min, max) {\n        return Math.min(Math.max(value, min), max);\n    }\n\n    const className$a = ClassName('txt');\n    class NumberTextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$a(), className$a(undefined, 'num'));\n            if (config.arrayPosition) {\n                this.element.classList.add(className$a(undefined, config.arrayPosition));\n            }\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$a('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            this.onDraggingChange_ = this.onDraggingChange_.bind(this);\n            this.dragging_ = config.dragging;\n            this.dragging_.emitter.on('change', this.onDraggingChange_);\n            this.element.classList.add(className$a());\n            this.inputElement.classList.add(className$a('i'));\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$a('k'));\n            this.element.appendChild(knobElem);\n            this.knobElement = knobElem;\n            const guideElem = doc.createElementNS(SVG_NS, 'svg');\n            guideElem.classList.add(className$a('g'));\n            this.knobElement.appendChild(guideElem);\n            const bodyElem = doc.createElementNS(SVG_NS, 'path');\n            bodyElem.classList.add(className$a('gb'));\n            guideElem.appendChild(bodyElem);\n            this.guideBodyElem_ = bodyElem;\n            const headElem = doc.createElementNS(SVG_NS, 'path');\n            headElem.classList.add(className$a('gh'));\n            guideElem.appendChild(headElem);\n            this.guideHeadElem_ = headElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(ClassName('tt')());\n            this.knobElement.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.refresh();\n        }\n        onDraggingChange_(ev) {\n            if (ev.rawValue === null) {\n                this.element.classList.remove(className$a(undefined, 'drg'));\n                return;\n            }\n            this.element.classList.add(className$a(undefined, 'drg'));\n            const x = ev.rawValue / this.props_.get('draggingScale');\n            const aox = x + (x > 0 ? -1 : x < 0 ? +1 : 0);\n            const adx = constrainRange(-aox, -4, +4);\n            this.guideHeadElem_.setAttributeNS(null, 'd', [`M ${aox + adx},0 L${aox},4 L${aox + adx},8`, `M ${x},-1 L${x},9`].join(' '));\n            this.guideBodyElem_.setAttributeNS(null, 'd', `M 0,4 L${x},4`);\n            const formatter = this.props_.get('formatter');\n            this.tooltipElem_.textContent = formatter(this.value.rawValue);\n            this.tooltipElem_.style.left = `${x}px`;\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class NumberTextController {\n        constructor(doc, config) {\n            var _a;\n            this.originRawValue_ = 0;\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n            this.onInputKeyUp_ = this.onInputKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.sliderProps_ = (_a = config.sliderProps) !== null && _a !== void 0 ? _a : null;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.dragging_ = createValue(null);\n            this.view = new NumberTextView(doc, {\n                arrayPosition: config.arrayPosition,\n                dragging: this.dragging_,\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n            this.view.inputElement.addEventListener('keydown', this.onInputKeyDown_);\n            this.view.inputElement.addEventListener('keyup', this.onInputKeyUp_);\n            const ph = new PointerHandler(this.view.knobElement);\n            ph.emitter.on('down', this.onPointerDown_);\n            ph.emitter.on('move', this.onPointerMove_);\n            ph.emitter.on('up', this.onPointerUp_);\n        }\n        constrainValue_(value) {\n            var _a, _b;\n            const min = (_a = this.sliderProps_) === null || _a === void 0 ? void 0 : _a.get('minValue');\n            const max = (_b = this.sliderProps_) === null || _b === void 0 ? void 0 : _b.get('maxValue');\n            let v = value;\n            if (min !== undefined) {\n                v = Math.max(v, min);\n            }\n            if (max !== undefined) {\n                v = Math.min(v, max);\n            }\n            return v;\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = this.constrainValue_(parsedValue);\n            }\n            this.view.refresh();\n        }\n        onInputKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.constrainValue_(this.value.rawValue + step), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onInputKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPointerDown_() {\n            this.originRawValue_ = this.value.rawValue;\n            this.dragging_.rawValue = 0;\n        }\n        computeDraggingValue_(data) {\n            if (!data.point) {\n                return null;\n            }\n            const dx = data.point.x - data.bounds.width / 2;\n            return this.constrainValue_(this.originRawValue_ + dx * this.props.get('draggingScale'));\n        }\n        onPointerMove_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: false,\n                last: false,\n            });\n            this.dragging_.rawValue = this.value.rawValue - this.originRawValue_;\n        }\n        onPointerUp_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: true,\n                last: true,\n            });\n            this.dragging_.rawValue = null;\n        }\n    }\n\n    function writePrimitive(target, value) {\n        target.write(value);\n    }\n\n    function findStep(constraint) {\n        const c = constraint ? findConstraint(constraint, StepConstraint) : null;\n        if (!c) {\n            return null;\n        }\n        return c.step;\n    }\n    function getSuitableDecimalDigits(constraint, rawValue) {\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        if (sc) {\n            return getDecimalDigits(sc.step);\n        }\n        return Math.max(getDecimalDigits(rawValue), 2);\n    }\n    function getBaseStep(constraint) {\n        const step = findStep(constraint);\n        return step !== null && step !== void 0 ? step : 1;\n    }\n    function getSuitableDraggingScale(constraint, rawValue) {\n        var _a;\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        const base = Math.abs((_a = sc === null || sc === void 0 ? void 0 : sc.step) !== null && _a !== void 0 ? _a : rawValue);\n        return base === 0 ? 0.1 : Math.pow(10, Math.floor(Math.log10(base)) - 1);\n    }\n\n    function removeAlphaComponent(comps) {\n        return [comps[0], comps[1], comps[2]];\n    }\n\n    function zerofill(comp) {\n        const hex = constrainRange(Math.floor(comp), 0, 255).toString(16);\n        return hex.length === 1 ? `0${hex}` : hex;\n    }\n    function colorToHexRgbString(value, prefix = '#') {\n        const hexes = removeAlphaComponent(value.getComponents('rgb'))\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToHexRgbaString(value, prefix = '#') {\n        const rgbaComps = value.getComponents('rgb');\n        const hexes = [rgbaComps[0], rgbaComps[1], rgbaComps[2], rgbaComps[3] * 255]\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToFunctionalRgbString(value, opt_type) {\n        const formatter = createNumberFormatter(opt_type === 'float' ? 2 : 0);\n        const comps = removeAlphaComponent(value.getComponents('rgb', opt_type)).map((comp) => formatter(comp));\n        return `rgb(${comps.join(', ')})`;\n    }\n    function createFunctionalRgbColorFormatter(type) {\n        return (value) => {\n            return colorToFunctionalRgbString(value, type);\n        };\n    }\n    function colorToFunctionalRgbaString(value, opt_type) {\n        const aFormatter = createNumberFormatter(2);\n        const rgbFormatter = createNumberFormatter(opt_type === 'float' ? 2 : 0);\n        const comps = value.getComponents('rgb', opt_type).map((comp, index) => {\n            const formatter = index === 3 ? aFormatter : rgbFormatter;\n            return formatter(comp);\n        });\n        return `rgba(${comps.join(', ')})`;\n    }\n    function createFunctionalRgbaColorFormatter(type) {\n        return (value) => {\n            return colorToFunctionalRgbaString(value, type);\n        };\n    }\n    function colorToFunctionalHslString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n        ];\n        const comps = removeAlphaComponent(value.getComponents('hsl')).map((comp, index) => formatters[index](comp));\n        return `hsl(${comps.join(', ')})`;\n    }\n    function colorToFunctionalHslaString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n            createNumberFormatter(2),\n        ];\n        const comps = value\n            .getComponents('hsl')\n            .map((comp, index) => formatters[index](comp));\n        return `hsla(${comps.join(', ')})`;\n    }\n    function colorToObjectRgbString(value, type) {\n        const formatter = createNumberFormatter(type === 'float' ? 2 : 0);\n        const names = ['r', 'g', 'b'];\n        const comps = removeAlphaComponent(value.getComponents('rgb', type)).map((comp, index) => `${names[index]}: ${formatter(comp)}`);\n        return `{${comps.join(', ')}}`;\n    }\n    function createObjectRgbColorFormatter(type) {\n        return (value) => colorToObjectRgbString(value, type);\n    }\n    function colorToObjectRgbaString(value, type) {\n        const aFormatter = createNumberFormatter(2);\n        const rgbFormatter = createNumberFormatter(type === 'float' ? 2 : 0);\n        const names = ['r', 'g', 'b', 'a'];\n        const comps = value.getComponents('rgb', type).map((comp, index) => {\n            const formatter = index === 3 ? aFormatter : rgbFormatter;\n            return `${names[index]}: ${formatter(comp)}`;\n        });\n        return `{${comps.join(', ')}}`;\n    }\n    function createObjectRgbaColorFormatter(type) {\n        return (value) => colorToObjectRgbaString(value, type);\n    }\n    [\n        {\n            format: {\n                alpha: false,\n                mode: 'rgb',\n                notation: 'hex',\n                type: 'int',\n            },\n            stringifier: colorToHexRgbString,\n        },\n        {\n            format: {\n                alpha: true,\n                mode: 'rgb',\n                notation: 'hex',\n                type: 'int',\n            },\n            stringifier: colorToHexRgbaString,\n        },\n        {\n            format: {\n                alpha: false,\n                mode: 'hsl',\n                notation: 'func',\n                type: 'int',\n            },\n            stringifier: colorToFunctionalHslString,\n        },\n        {\n            format: {\n                alpha: true,\n                mode: 'hsl',\n                notation: 'func',\n                type: 'int',\n            },\n            stringifier: colorToFunctionalHslaString,\n        },\n        ...['int', 'float'].reduce((prev, type) => {\n            return [\n                ...prev,\n                {\n                    format: {\n                        alpha: false,\n                        mode: 'rgb',\n                        notation: 'func',\n                        type: type,\n                    },\n                    stringifier: createFunctionalRgbColorFormatter(type),\n                },\n                {\n                    format: {\n                        alpha: true,\n                        mode: 'rgb',\n                        notation: 'func',\n                        type: type,\n                    },\n                    stringifier: createFunctionalRgbaColorFormatter(type),\n                },\n                {\n                    format: {\n                        alpha: false,\n                        mode: 'rgb',\n                        notation: 'object',\n                        type: type,\n                    },\n                    stringifier: createObjectRgbColorFormatter(type),\n                },\n                {\n                    format: {\n                        alpha: true,\n                        mode: 'rgb',\n                        notation: 'object',\n                        type: type,\n                    },\n                    stringifier: createObjectRgbaColorFormatter(type),\n                },\n            ];\n        }, []),\n    ];\n\n    class PointNdConstraint {\n        constructor(config) {\n            this.components = config.components;\n            this.asm_ = config.assembly;\n        }\n        constrain(value) {\n            const comps = this.asm_\n                .toComponents(value)\n                .map((comp, index) => { var _a, _b; return (_b = (_a = this.components[index]) === null || _a === void 0 ? void 0 : _a.constrain(comp)) !== null && _b !== void 0 ? _b : comp; });\n            return this.asm_.fromComponents(comps);\n        }\n    }\n\n    const className$9 = ClassName('pndtxt');\n    class PointNdTextView {\n        constructor(doc, config) {\n            this.textViews = config.textViews;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$9());\n            this.textViews.forEach((v) => {\n                const axisElem = doc.createElement('div');\n                axisElem.classList.add(className$9('a'));\n                axisElem.appendChild(v.element);\n                this.element.appendChild(axisElem);\n            });\n        }\n    }\n\n    function createAxisController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === config.axes.length - 1 ? 'lst' : 'mid',\n            baseStep: config.axes[index].baseStep,\n            parser: config.parser,\n            props: config.axes[index].textProps,\n            value: createValue(0, {\n                constraint: config.axes[index].constraint,\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class PointNdTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.acs_ = config.axes.map((_, index) => createAxisController(doc, config, index));\n            this.acs_.forEach((c, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: c.value,\n                    forward: (p) => {\n                        return config.assembly.toComponents(p.rawValue)[index];\n                    },\n                    backward: (p, s) => {\n                        const comps = config.assembly.toComponents(p.rawValue);\n                        comps[index] = s.rawValue;\n                        return config.assembly.fromComponents(comps);\n                    },\n                });\n            });\n            this.view = new PointNdTextView(doc, {\n                textViews: this.acs_.map((ac) => ac.view),\n            });\n        }\n    }\n\n    function createStepConstraint(params, initialValue) {\n        if ('step' in params && !isEmpty(params.step)) {\n            return new StepConstraint(params.step, initialValue);\n        }\n        return null;\n    }\n    function createRangeConstraint(params) {\n        if (!isEmpty(params.max) && !isEmpty(params.min)) {\n            return new DefiniteRangeConstraint({\n                max: params.max,\n                min: params.min,\n            });\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            return new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            });\n        }\n        return null;\n    }\n\n    const Constants = {\n        monitor: {\n            defaultInterval: 200,\n            defaultLineCount: 3,\n        },\n    };\n\n    const className$8 = ClassName('grl');\n    class GraphLogView {\n        constructor(doc, config) {\n            this.onCursorChange_ = this.onCursorChange_.bind(this);\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$8());\n            config.viewProps.bindClassModifiers(this.element);\n            this.formatter_ = config.formatter;\n            this.props_ = config.props;\n            this.cursor_ = config.cursor;\n            this.cursor_.emitter.on('change', this.onCursorChange_);\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$8('g'));\n            svgElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(className$8('t'), ClassName('tt')());\n            this.element.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        get graphElement() {\n            return this.svgElem_;\n        }\n        update_() {\n            const bounds = this.svgElem_.getBoundingClientRect();\n            const maxIndex = this.value.rawValue.length - 1;\n            const min = this.props_.get('minValue');\n            const max = this.props_.get('maxValue');\n            const points = [];\n            this.value.rawValue.forEach((v, index) => {\n                if (v === undefined) {\n                    return;\n                }\n                const x = mapRange(index, 0, maxIndex, 0, bounds.width);\n                const y = mapRange(v, min, max, bounds.height, 0);\n                points.push([x, y].join(','));\n            });\n            this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n            const tooltipElem = this.tooltipElem_;\n            const value = this.value.rawValue[this.cursor_.rawValue];\n            if (value === undefined) {\n                tooltipElem.classList.remove(className$8('t', 'a'));\n                return;\n            }\n            const tx = mapRange(this.cursor_.rawValue, 0, maxIndex, 0, bounds.width);\n            const ty = mapRange(value, min, max, bounds.height, 0);\n            tooltipElem.style.left = `${tx}px`;\n            tooltipElem.style.top = `${ty}px`;\n            tooltipElem.textContent = `${this.formatter_(value)}`;\n            if (!tooltipElem.classList.contains(className$8('t', 'a'))) {\n                tooltipElem.classList.add(className$8('t', 'a'), className$8('t', 'in'));\n                forceReflow(tooltipElem);\n                tooltipElem.classList.remove(className$8('t', 'in'));\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n        onCursorChange_() {\n            this.update_();\n        }\n    }\n\n    class GraphLogController {\n        constructor(doc, config) {\n            this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\n            this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\n            this.onGraphPointerDown_ = this.onGraphPointerDown_.bind(this);\n            this.onGraphPointerMove_ = this.onGraphPointerMove_.bind(this);\n            this.onGraphPointerUp_ = this.onGraphPointerUp_.bind(this);\n            this.props_ = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.cursor_ = createValue(-1);\n            this.view = new GraphLogView(doc, {\n                cursor: this.cursor_,\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                props: this.props_,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            if (!supportsTouch(doc)) {\n                this.view.element.addEventListener('mousemove', this.onGraphMouseMove_);\n                this.view.element.addEventListener('mouseleave', this.onGraphMouseLeave_);\n            }\n            else {\n                const ph = new PointerHandler(this.view.element);\n                ph.emitter.on('down', this.onGraphPointerDown_);\n                ph.emitter.on('move', this.onGraphPointerMove_);\n                ph.emitter.on('up', this.onGraphPointerUp_);\n            }\n        }\n        onGraphMouseLeave_() {\n            this.cursor_.rawValue = -1;\n        }\n        onGraphMouseMove_(ev) {\n            const bounds = this.view.element.getBoundingClientRect();\n            this.cursor_.rawValue = Math.floor(mapRange(ev.offsetX, 0, bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerDown_(ev) {\n            this.onGraphPointerMove_(ev);\n        }\n        onGraphPointerMove_(ev) {\n            if (!ev.data.point) {\n                this.cursor_.rawValue = -1;\n                return;\n            }\n            this.cursor_.rawValue = Math.floor(mapRange(ev.data.point.x, 0, ev.data.bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerUp_() {\n            this.cursor_.rawValue = -1;\n        }\n    }\n\n    class ButtonCellApi {\n        constructor(controller) {\n            this.controller_ = controller;\n        }\n        get disabled() {\n            return this.controller_.viewProps.get('disabled');\n        }\n        set disabled(disabled) {\n            this.controller_.viewProps.set('disabled', disabled);\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.props.set('title', title);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            const emitter = this.controller_.emitter;\n            emitter.on(eventName, () => {\n                bh(new TpEvent(this));\n            });\n            return this;\n        }\n    }\n\n    class TpButtonGridEvent extends TpEvent {\n        constructor(target, cell, index) {\n            super(target);\n            this.cell = cell;\n            this.index = index;\n        }\n    }\n\n    class ButtonGridApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.cellToApiMap_ = new Map();\n            this.emitter_ = new Emitter();\n            const gc = this.controller_.valueController;\n            gc.cellControllers.forEach((cc, i) => {\n                const api = new ButtonCellApi(cc);\n                this.cellToApiMap_.set(cc, api);\n                cc.emitter.on('click', () => {\n                    const x = i % gc.size[0];\n                    const y = Math.floor(i / gc.size[0]);\n                    this.emitter_.emit('click', {\n                        event: new TpButtonGridEvent(this, api, [x, y]),\n                    });\n                });\n            });\n        }\n        cell(x, y) {\n            const gc = this.controller_.valueController;\n            const cc = gc.cellControllers[y * gc.size[0] + x];\n            return this.cellToApiMap_.get(cc);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class ButtonGridController {\n        constructor(doc, config) {\n            this.size = config.size;\n            const [w, h] = this.size;\n            const bcs = [];\n            for (let y = 0; y < h; y++) {\n                for (let x = 0; x < w; x++) {\n                    const bc = new ButtonController(doc, {\n                        props: ValueMap.fromObject(Object.assign({}, config.cellConfig(x, y))),\n                        viewProps: ViewProps.create(),\n                    });\n                    bcs.push(bc);\n                }\n            }\n            this.cellCs_ = bcs;\n            this.viewProps = ViewProps.create();\n            this.viewProps.handleDispose(() => {\n                this.cellCs_.forEach((c) => {\n                    c.viewProps.set('disposed', true);\n                });\n            });\n            this.view = new PlainView(doc, {\n                viewProps: this.viewProps,\n                viewName: 'btngrid',\n            });\n            this.view.element.style.gridTemplateColumns = `repeat(${w}, 1fr)`;\n            this.cellCs_.forEach((bc) => {\n                this.view.element.appendChild(bc.view.element);\n            });\n        }\n        get cellControllers() {\n            return this.cellCs_;\n        }\n    }\n\n    const ButtonGridBladePlugin = {\n        id: 'buttongrid',\n        type: 'blade',\n        // TODO:\n        css: '.tp-cbzgv,.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-radv_b:hover,.tp-rslv_k:hover,.tp-cbzv_b:hover{background-color:var(--btn-bg-h)}.tp-radv_b:focus,.tp-rslv_k:focus,.tp-cbzv_b:focus{background-color:var(--btn-bg-f)}.tp-radv_b:active,.tp-rslv_k:active,.tp-cbzv_b:active{background-color:var(--btn-bg-a)}.tp-radv_b:disabled,.tp-rslv_k:disabled,.tp-cbzv_b:disabled{opacity:.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us)*5);width:100%}.tp-cbzgv_u{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:rgba(0,0,0,0);stroke:var(--in-fg)}.tp-cbzgv_v{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity .2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:.2em;opacity:.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:\"\";height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:\"\";height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px)/-2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:.5}.tp-radgridv .tp-radv_b{border-radius:0}',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                cells: p.required.function,\n                size: p.required.array(p.required.number),\n                view: p.required.constant('buttongrid'),\n                label: p.optional.string,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new LabelController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: new ButtonGridController(args.document, {\n                    cellConfig: args.params.cells,\n                    size: args.params.size,\n                }),\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabelController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof ButtonGridController)) {\n                return null;\n            }\n            return new ButtonGridApi(args.controller);\n        },\n    };\n\n    class CubicBezierApi extends BladeApi {\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.controller_.valueController.value.emitter.on(eventName, (ev) => {\n                bh(new TpChangeEvent(this, ev.rawValue, undefined, ev.options.last));\n            });\n            return this;\n        }\n    }\n\n    function interpolate(x1, x2, t) {\n        return x1 * (1 - t) + x2 * t;\n    }\n    const MAX_ITERATION = 20;\n    const X_DELTA = 0.001;\n    const CACHE_RESOLUTION = 100;\n    function y(cb, x) {\n        let dt = 0.25;\n        let t = 0.5;\n        let y = -1;\n        for (let i = 0; i < MAX_ITERATION; i++) {\n            const [tx, ty] = cb.curve(t);\n            t += dt * (tx < x ? +1 : -1);\n            y = ty;\n            dt *= 0.5;\n            if (Math.abs(x - tx) < X_DELTA) {\n                break;\n            }\n        }\n        return y;\n    }\n    class CubicBezier {\n        constructor(x1 = 0, y1 = 0, x2 = 1, y2 = 1) {\n            this.cache_ = [];\n            this.comps_ = [x1, y1, x2, y2];\n        }\n        get x1() {\n            return this.comps_[0];\n        }\n        get y1() {\n            return this.comps_[1];\n        }\n        get x2() {\n            return this.comps_[2];\n        }\n        get y2() {\n            return this.comps_[3];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            if (!Array.isArray(obj)) {\n                return false;\n            }\n            return (typeof obj[0] === 'number' &&\n                typeof obj[1] === 'number' &&\n                typeof obj[2] === 'number' &&\n                typeof obj[3] === 'number');\n        }\n        static equals(v1, v2) {\n            return (v1.x1 === v2.x1 && v1.y1 === v2.y1 && v1.x2 === v2.x2 && v1.y2 === v2.y2);\n        }\n        curve(t) {\n            const x01 = interpolate(0, this.x1, t);\n            const y01 = interpolate(0, this.y1, t);\n            const x12 = interpolate(this.x1, this.x2, t);\n            const y12 = interpolate(this.y1, this.y2, t);\n            const x23 = interpolate(this.x2, 1, t);\n            const y23 = interpolate(this.y2, 1, t);\n            const xr0 = interpolate(x01, x12, t);\n            const yr0 = interpolate(y01, y12, t);\n            const xr1 = interpolate(x12, x23, t);\n            const yr1 = interpolate(y12, y23, t);\n            return [interpolate(xr0, xr1, t), interpolate(yr0, yr1, t)];\n        }\n        y(x) {\n            if (this.cache_.length === 0) {\n                const cache = [];\n                for (let i = 0; i < CACHE_RESOLUTION; i++) {\n                    cache.push(y(this, mapRange(i, 0, CACHE_RESOLUTION - 1, 0, 1)));\n                }\n                this.cache_ = cache;\n            }\n            return this.cache_[Math.round(mapRange(constrainRange(x, 0, 1), 0, 1, 0, CACHE_RESOLUTION - 1))];\n        }\n        toObject() {\n            return [this.comps_[0], this.comps_[1], this.comps_[2], this.comps_[3]];\n        }\n    }\n    const CubicBezierAssembly = {\n        toComponents: (p) => p.toObject(),\n        fromComponents: (comps) => new CubicBezier(...comps),\n    };\n\n    function cubicBezierToString(cb) {\n        const formatter = createNumberFormatter(2);\n        const comps = cb.toObject().map((c) => formatter(c));\n        return `cubic-bezier(${comps.join(', ')})`;\n    }\n    const COMPS_EMPTY = [0, 0.5, 0.5, 1];\n    function cubicBezierFromString(text) {\n        const m = text.match(/^cubic-bezier\\s*\\(\\s*([0-9.]+)\\s*,\\s*([0-9.]+)\\s*,\\s*([0-9.]+)\\s*,\\s*([0-9.]+)\\s*\\)$/);\n        if (!m) {\n            return new CubicBezier(...COMPS_EMPTY);\n        }\n        const comps = [m[1], m[2], m[3], m[4]].reduce((comps, comp) => {\n            if (!comps) {\n                return null;\n            }\n            const n = Number(comp);\n            if (isNaN(n)) {\n                return null;\n            }\n            return [...comps, n];\n        }, []);\n        return new CubicBezier(...(comps !== null && comps !== void 0 ? comps : COMPS_EMPTY));\n    }\n\n    const className$7 = ClassName('cbz');\n    class CubicBezierView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$7());\n            config.viewProps.bindClassModifiers(this.element);\n            config.foldable.bindExpandedClass(this.element, className$7(undefined, 'expanded'));\n            bindValueMap(config.foldable, 'completed', valueToClassName(this.element, className$7(undefined, 'cpl')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$7('h'));\n            this.element.appendChild(headElem);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$7('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            const iconElem = doc.createElementNS(SVG_NS, 'svg');\n            iconElem.innerHTML = '<path d=\"M2 13C8 13 8 3 14 3\"/>';\n            buttonElem.appendChild(iconElem);\n            headElem.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$7('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$7('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    const className$6 = ClassName('cbzp');\n    class CubicBezierPickerView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$6());\n            config.viewProps.bindClassModifiers(this.element);\n            const graphElem = doc.createElement('div');\n            graphElem.classList.add(className$6('g'));\n            this.element.appendChild(graphElem);\n            this.graphElement = graphElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$6('t'));\n            this.element.appendChild(textElem);\n            this.textElement = textElem;\n        }\n    }\n\n    function waitToBeAddedToDom(elem, callback) {\n        const ob = new MutationObserver((ml) => {\n            for (const m of ml) {\n                if (m.type !== 'childList') {\n                    continue;\n                }\n                m.addedNodes.forEach((elem) => {\n                    if (!elem.contains(elem)) {\n                        return;\n                    }\n                    callback();\n                    ob.disconnect();\n                });\n            }\n        });\n        const doc = elem.ownerDocument;\n        ob.observe(doc.body, {\n            attributes: true,\n            childList: true,\n            subtree: true,\n        });\n    }\n\n    const className$5 = ClassName('cbzg');\n    // TODO: Apply to core\n    function compose(h1, h2) {\n        return (input) => h2(h1(input));\n    }\n    class CubicBezierGraphView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$5());\n            config.viewProps.bindClassModifiers(this.element);\n            config.viewProps.bindTabIndex(this.element);\n            const previewElem = doc.createElement('div');\n            previewElem.classList.add(className$5('p'));\n            this.element.appendChild(previewElem);\n            this.previewElement = previewElem;\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$5('g'));\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const guideElem = doc.createElementNS(SVG_NS, 'path');\n            guideElem.classList.add(className$5('u'));\n            this.svgElem_.appendChild(guideElem);\n            this.guideElem_ = guideElem;\n            const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n            lineElem.classList.add(className$5('l'));\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            this.handleElems_ = [doc.createElement('div'), doc.createElement('div')];\n            this.handleElems_.forEach((elem) => {\n                elem.classList.add(className$5('h'));\n                this.element.appendChild(elem);\n            });\n            this.vectorElems_ = [\n                doc.createElementNS(SVG_NS, 'line'),\n                doc.createElementNS(SVG_NS, 'line'),\n            ];\n            this.vectorElems_.forEach((elem) => {\n                elem.classList.add(className$5('v'));\n                this.svgElem_.appendChild(elem);\n            });\n            this.value_ = config.value;\n            this.value_.emitter.on('change', this.onValueChange_.bind(this));\n            this.sel_ = config.selection;\n            this.handleElems_.forEach((elem, index) => {\n                bindValue(this.sel_, compose((selection) => selection === index, valueToClassName(elem, className$5('h', 'sel'))));\n            });\n            waitToBeAddedToDom(this.element, () => {\n                this.refresh();\n            });\n        }\n        getVertMargin_(h) {\n            return h * 0.25;\n        }\n        valueToPosition(x, y) {\n            const bounds = this.element.getBoundingClientRect();\n            const w = bounds.width;\n            const h = bounds.height;\n            const vm = this.getVertMargin_(h);\n            return {\n                x: mapRange(x, 0, 1, 0, w),\n                y: mapRange(y, 0, 1, h - vm, vm),\n            };\n        }\n        positionToValue(x, y) {\n            const bounds = this.element.getBoundingClientRect();\n            const w = bounds.width;\n            const h = bounds.height;\n            const vm = this.getVertMargin_(h);\n            return {\n                x: constrainRange(mapRange(x, 0, w, 0, 1), 0, 1),\n                y: mapRange(y, h - vm, vm, 0, 1),\n            };\n        }\n        refresh() {\n            this.guideElem_.setAttributeNS(null, 'd', [0, 1]\n                .map((index) => {\n                const p1 = this.valueToPosition(0, index);\n                const p2 = this.valueToPosition(1, index);\n                return [`M ${p1.x},${p1.y}`, `L ${p2.x},${p2.y}`].join(' ');\n            })\n                .join(' '));\n            const bezier = this.value_.rawValue;\n            const points = [];\n            let t = 0;\n            for (;;) {\n                const p = this.valueToPosition(...bezier.curve(t));\n                points.push([p.x, p.y].join(','));\n                if (t >= 1) {\n                    break;\n                }\n                t = Math.min(t + 0.05, 1);\n            }\n            this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n            const obj = bezier.toObject();\n            [0, 1].forEach((index) => {\n                const p1 = this.valueToPosition(index, index);\n                const p2 = this.valueToPosition(obj[index * 2], obj[index * 2 + 1]);\n                const vElem = this.vectorElems_[index];\n                vElem.setAttributeNS(null, 'x1', String(p1.x));\n                vElem.setAttributeNS(null, 'y1', String(p1.y));\n                vElem.setAttributeNS(null, 'x2', String(p2.x));\n                vElem.setAttributeNS(null, 'y2', String(p2.y));\n                const hElem = this.handleElems_[index];\n                hElem.style.left = `${p2.x}px`;\n                hElem.style.top = `${p2.y}px`;\n            });\n        }\n        onValueChange_() {\n            this.refresh();\n        }\n    }\n\n    const TICK_COUNT = 24;\n    const PREVIEW_DELAY = 400;\n    const PREVIEW_DURATION = 1000;\n    const className$4 = ClassName('cbzprv');\n    class CubicBezierPreviewView {\n        constructor(doc, config) {\n            this.stopped_ = true;\n            this.startTime_ = -1;\n            this.onDispose_ = this.onDispose_.bind(this);\n            this.onTimer_ = this.onTimer_.bind(this);\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$4());\n            config.viewProps.bindClassModifiers(this.element);\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$4('g'));\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const ticksElem = doc.createElementNS(SVG_NS, 'path');\n            ticksElem.classList.add(className$4('t'));\n            this.svgElem_.appendChild(ticksElem);\n            this.ticksElem_ = ticksElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$4('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.value_ = config.value;\n            this.value_.emitter.on('change', this.onValueChange_);\n            config.viewProps.handleDispose(this.onDispose_);\n            waitToBeAddedToDom(this.element, () => {\n                this.refresh();\n            });\n        }\n        play() {\n            this.stop();\n            this.updateMarker_(0);\n            this.markerElem_.classList.add(className$4('m', 'a'));\n            this.startTime_ = new Date().getTime() + PREVIEW_DELAY;\n            this.stopped_ = false;\n            requestAnimationFrame(this.onTimer_);\n        }\n        stop() {\n            this.stopped_ = true;\n            this.markerElem_.classList.remove(className$4('m', 'a'));\n        }\n        onDispose_() {\n            this.stop();\n        }\n        updateMarker_(progress) {\n            const p = this.value_.rawValue.y(constrainRange(progress, 0, 1));\n            this.markerElem_.style.left = `${p * 100}%`;\n        }\n        refresh() {\n            const bounds = this.svgElem_.getBoundingClientRect();\n            const w = bounds.width;\n            const h = bounds.height;\n            const ds = [];\n            const bezier = this.value_.rawValue;\n            for (let i = 0; i < TICK_COUNT; i++) {\n                const px = mapRange(i, 0, TICK_COUNT - 1, 0, 1);\n                const x = mapRange(bezier.y(px), 0, 1, 0, w);\n                ds.push(`M ${x},0 v${h}`);\n            }\n            this.ticksElem_.setAttributeNS(null, 'd', ds.join(' '));\n        }\n        onTimer_() {\n            if (this.startTime_ === null) {\n                return;\n            }\n            const dt = new Date().getTime() - this.startTime_;\n            const p = dt / PREVIEW_DURATION;\n            this.updateMarker_(p);\n            if (dt > PREVIEW_DURATION + PREVIEW_DELAY) {\n                this.stop();\n            }\n            if (!this.stopped_) {\n                requestAnimationFrame(this.onTimer_);\n            }\n        }\n        onValueChange_() {\n            this.refresh();\n            this.play();\n        }\n    }\n\n    function getDistance(x1, y1, x2, y2) {\n        const dx = x2 - x1;\n        const dy = y2 - y1;\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n    function lockAngle(x1, y1, x2, y2) {\n        const d = getDistance(x1, y1, x2, y2);\n        const a = Math.atan2(y2 - y1, x2 - x1);\n        const la = (Math.round(a / (Math.PI / 4)) * Math.PI) / 4;\n        return {\n            x: x1 + Math.cos(la) * d,\n            y: y1 + Math.sin(la) * d,\n        };\n    }\n    class CubicBezierGraphController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.value = config.value;\n            this.sel_ = createValue(0);\n            this.viewProps = config.viewProps;\n            this.view = new CubicBezierGraphView(doc, {\n                selection: this.sel_,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n            this.prevView_ = new CubicBezierPreviewView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.prevView_.element.addEventListener('mousedown', (ev) => {\n                ev.stopImmediatePropagation();\n                ev.preventDefault();\n                this.prevView_.play();\n            });\n            this.view.previewElement.appendChild(this.prevView_.element);\n            const ptHandler = new PointerHandler(this.view.element);\n            ptHandler.emitter.on('down', this.onPointerDown_);\n            ptHandler.emitter.on('move', this.onPointerMove_);\n            ptHandler.emitter.on('up', this.onPointerUp_);\n        }\n        refresh() {\n            this.view.refresh();\n            this.prevView_.refresh();\n            this.prevView_.play();\n        }\n        updateValue_(point, locksAngle, opts) {\n            const index = this.sel_.rawValue;\n            const comps = this.value.rawValue.toObject();\n            const vp = this.view.positionToValue(point.x, point.y);\n            const v = locksAngle ? lockAngle(index, index, vp.x, vp.y) : vp;\n            comps[index * 2] = v.x;\n            comps[index * 2 + 1] = v.y;\n            this.value.setRawValue(new CubicBezier(...comps), opts);\n        }\n        onPointerDown_(ev) {\n            const data = ev.data;\n            if (!data.point) {\n                return;\n            }\n            const bezier = this.value.rawValue;\n            const p1 = this.view.valueToPosition(bezier.x1, bezier.y1);\n            const d1 = getDistance(data.point.x, data.point.y, p1.x, p1.y);\n            const p2 = this.view.valueToPosition(bezier.x2, bezier.y2);\n            const d2 = getDistance(data.point.x, data.point.y, p2.x, p2.y);\n            this.sel_.rawValue = d1 <= d2 ? 0 : 1;\n            this.updateValue_(data.point, ev.shiftKey, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            const data = ev.data;\n            if (!data.point) {\n                return;\n            }\n            this.updateValue_(data.point, ev.shiftKey, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            const data = ev.data;\n            if (!data.point) {\n                return;\n            }\n            this.updateValue_(data.point, ev.shiftKey, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const index = this.sel_.rawValue;\n            const comps = this.value.rawValue.toObject();\n            comps[index * 2] += getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            comps[index * 2 + 1] += getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            this.value.setRawValue(new CubicBezier(...comps), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const xStep = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            const yStep = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (xStep === 0 && yStep === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class CubicBezierPickerController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new CubicBezierPickerView(doc, {\n                viewProps: this.viewProps,\n            });\n            this.gc_ = new CubicBezierGraphController(doc, {\n                baseStep: config.axis.baseStep,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.graphElement.appendChild(this.gc_.view.element);\n            const xAxis = Object.assign(Object.assign({}, config.axis), { constraint: new RangeConstraint({ max: 1, min: 0 }) });\n            const yAxis = Object.assign(Object.assign({}, config.axis), { constraint: undefined });\n            this.tc_ = new PointNdTextController(doc, {\n                assembly: CubicBezierAssembly,\n                axes: [xAxis, yAxis, xAxis, yAxis],\n                parser: parseNumber,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.textElement.appendChild(this.tc_.view.element);\n        }\n        get allFocusableElements() {\n            return [\n                this.gc_.view.element,\n                ...this.tc_.view.textViews.map((v) => v.inputElement),\n            ];\n        }\n        refresh() {\n            this.gc_.refresh();\n        }\n    }\n\n    class CubicBezierController {\n        constructor(doc, config) {\n            this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n            this.onButtonClick_ = this.onButtonClick_.bind(this);\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = createFoldable(config.expanded);\n            this.view = new CubicBezierView(doc, {\n                foldable: this.foldable_,\n                pickerLayout: config.pickerLayout,\n                viewProps: this.viewProps,\n            });\n            this.view.buttonElement.addEventListener('blur', this.onButtonBlur_);\n            this.view.buttonElement.addEventListener('click', this.onButtonClick_);\n            this.tc_ = new TextController(doc, {\n                parser: cubicBezierFromString,\n                props: ValueMap.fromObject({\n                    formatter: cubicBezierToString,\n                }),\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.textElement.appendChild(this.tc_.view.element);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const pickerC = new CubicBezierPickerController(doc, {\n                axis: config.axis,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            pickerC.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = pickerC;\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(this.pickerC_.view.element);\n                bindValue(this.popC_.shows, (shows) => {\n                    if (shows) {\n                        pickerC.refresh();\n                    }\n                });\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        onButtonBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const nextTarget = forceCast(ev.relatedTarget);\n            if (!nextTarget || !this.popC_.view.element.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                // Next target is in the popup\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                // Next target is the trigger button\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            if (ev.key === 'Escape') {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n    }\n\n    function createConstraint$1() {\n        return new PointNdConstraint({\n            assembly: CubicBezierAssembly,\n            components: [0, 1, 2, 3].map((index) => index % 2 === 0\n                ? new RangeConstraint({\n                    min: 0,\n                    max: 1,\n                })\n                : undefined),\n        });\n    }\n    const CubicBezierBladePlugin = {\n        id: 'cubic-bezier',\n        type: 'blade',\n        css: '.tp-cbzgv,.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-radv_b:hover,.tp-rslv_k:hover,.tp-cbzv_b:hover{background-color:var(--btn-bg-h)}.tp-radv_b:focus,.tp-rslv_k:focus,.tp-cbzv_b:focus{background-color:var(--btn-bg-f)}.tp-radv_b:active,.tp-rslv_k:active,.tp-cbzv_b:active{background-color:var(--btn-bg-a)}.tp-radv_b:disabled,.tp-rslv_k:disabled,.tp-cbzv_b:disabled{opacity:.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us)*5);width:100%}.tp-cbzgv_u{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:rgba(0,0,0,0);stroke:var(--in-fg)}.tp-cbzgv_v{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity .2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:.2em;opacity:.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:\"\";height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:\"\";height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px)/-2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:.5}.tp-radgridv .tp-radv_b{border-radius:0}',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                value: p.required.array(p.required.number),\n                view: p.required.constant('cubicbezier'),\n                expanded: p.optional.boolean,\n                label: p.optional.string,\n                picker: p.optional.custom((v) => {\n                    return v === 'inline' || v === 'popup' ? v : undefined;\n                }),\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            var _a, _b;\n            const rv = new CubicBezier(...args.params.value);\n            const v = createValue(rv, {\n                constraint: createConstraint$1(),\n                equals: CubicBezier.equals,\n            });\n            const vc = new CubicBezierController(args.document, {\n                axis: {\n                    baseStep: 0.1,\n                    textProps: ValueMap.fromObject({\n                        draggingScale: 0.01,\n                        formatter: createNumberFormatter(2),\n                    }),\n                },\n                expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n                pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n                value: v,\n                viewProps: args.viewProps,\n            });\n            return new LabeledValueController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: vc,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabeledValueController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof CubicBezierController)) {\n                return null;\n            }\n            return new CubicBezierApi(args.controller);\n        },\n    };\n\n    class FpsGraphBladeApi extends BladeApi {\n        begin() {\n            this.controller_.valueController.begin();\n        }\n        end() {\n            this.controller_.valueController.end();\n        }\n    }\n\n    const MAX_TIMESTAMPS = 20;\n    class Fpswatch {\n        constructor() {\n            this.start_ = null;\n            this.duration_ = 0;\n            this.fps_ = null;\n            this.frameCount_ = 0;\n            this.timestamps_ = [];\n        }\n        get duration() {\n            return this.duration_;\n        }\n        get fps() {\n            return this.fps_;\n        }\n        begin(now) {\n            this.start_ = now.getTime();\n        }\n        calculateFps_(nowTime) {\n            if (this.timestamps_.length === 0) {\n                return null;\n            }\n            const ts = this.timestamps_[0];\n            return (1000 * (this.frameCount_ - ts.frameCount)) / (nowTime - ts.time);\n        }\n        compactTimestamps_() {\n            if (this.timestamps_.length <= MAX_TIMESTAMPS) {\n                return;\n            }\n            const len = this.timestamps_.length - MAX_TIMESTAMPS;\n            this.timestamps_.splice(0, len);\n            const df = this.timestamps_[0].frameCount;\n            this.timestamps_.forEach((ts) => {\n                ts.frameCount -= df;\n            });\n            this.frameCount_ -= df;\n        }\n        end(now) {\n            if (this.start_ === null) {\n                return;\n            }\n            const t = now.getTime();\n            this.duration_ = t - this.start_;\n            this.start_ = null;\n            this.fps_ = this.calculateFps_(t);\n            this.timestamps_.push({\n                frameCount: this.frameCount_,\n                time: t,\n            });\n            ++this.frameCount_;\n            this.compactTimestamps_();\n        }\n    }\n\n    const className$3 = ClassName('fps');\n    class FpsView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$3());\n            config.viewProps.bindClassModifiers(this.element);\n            this.graphElement = doc.createElement('div');\n            this.graphElement.classList.add(className$3('g'));\n            this.element.appendChild(this.graphElement);\n            const labelElement = doc.createElement('div');\n            labelElement.classList.add(className$3('l'));\n            this.element.appendChild(labelElement);\n            const valueElement = doc.createElement('span');\n            valueElement.classList.add(className$3('v'));\n            valueElement.textContent = '--';\n            labelElement.appendChild(valueElement);\n            this.valueElement = valueElement;\n            const unitElement = doc.createElement('span');\n            unitElement.classList.add(className$3('u'));\n            unitElement.textContent = 'FPS';\n            labelElement.appendChild(unitElement);\n        }\n    }\n\n    class FpsGraphController {\n        constructor(doc, config) {\n            this.stopwatch_ = new Fpswatch();\n            this.onTick_ = this.onTick_.bind(this);\n            this.ticker_ = config.ticker;\n            this.ticker_.emitter.on('tick', this.onTick_);\n            this.value_ = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new FpsView(doc, {\n                viewProps: this.viewProps,\n            });\n            this.graphC_ = new GraphLogController(doc, {\n                formatter: createNumberFormatter(0),\n                lineCount: config.lineCount,\n                props: ValueMap.fromObject({\n                    maxValue: config.maxValue,\n                    minValue: config.minValue,\n                }),\n                value: this.value_,\n                viewProps: this.viewProps,\n            });\n            this.view.graphElement.appendChild(this.graphC_.view.element);\n            this.viewProps.handleDispose(() => {\n                this.graphC_.viewProps.set('disposed', true);\n                this.ticker_.dispose();\n            });\n        }\n        begin() {\n            this.stopwatch_.begin(new Date());\n        }\n        end() {\n            this.stopwatch_.end(new Date());\n        }\n        onTick_() {\n            const fps = this.stopwatch_.fps;\n            if (fps !== null) {\n                const buffer = this.value_.rawValue;\n                this.value_.rawValue = createPushedBuffer(buffer, fps);\n                this.view.valueElement.textContent = fps.toFixed(0);\n            }\n        }\n    }\n\n    function createTicker(document, interval) {\n        return interval === 0\n            ? new ManualTicker()\n            : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n    }\n    const FpsGraphBladePlugin = {\n        id: 'fpsgraph',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                view: p.required.constant('fpsgraph'),\n                interval: p.optional.number,\n                label: p.optional.string,\n                lineCount: p.optional.number,\n                max: p.optional.number,\n                min: p.optional.number,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            var _a, _b, _c, _d;\n            const interval = (_a = args.params.interval) !== null && _a !== void 0 ? _a : 500;\n            return new LabelController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: new FpsGraphController(args.document, {\n                    lineCount: (_b = args.params.lineCount) !== null && _b !== void 0 ? _b : 2,\n                    maxValue: (_c = args.params.max) !== null && _c !== void 0 ? _c : 90,\n                    minValue: (_d = args.params.min) !== null && _d !== void 0 ? _d : 0,\n                    ticker: createTicker(args.document, interval),\n                    value: initializeBuffer(80),\n                    viewProps: args.viewProps,\n                }),\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabelController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof FpsGraphController)) {\n                return null;\n            }\n            return new FpsGraphBladeApi(args.controller);\n        },\n    };\n\n    class Interval {\n        constructor(min, max) {\n            this.min = min;\n            this.max = max;\n        }\n        static isObject(obj) {\n            if (typeof obj !== 'object' || obj === null) {\n                return false;\n            }\n            const min = obj.min;\n            const max = obj.max;\n            if (typeof min !== 'number' || typeof max !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.min === v2.min && v1.max === v2.max;\n        }\n        get length() {\n            return this.max - this.min;\n        }\n        toObject() {\n            return {\n                min: this.min,\n                max: this.max,\n            };\n        }\n    }\n    const IntervalAssembly = {\n        fromComponents: (comps) => new Interval(comps[0], comps[1]),\n        toComponents: (p) => [p.min, p.max],\n    };\n\n    class IntervalConstraint {\n        constructor(edge) {\n            this.edge = edge;\n        }\n        constrain(value) {\n            var _a, _b, _c, _d, _e, _f, _g, _h;\n            if (value.min <= value.max) {\n                return new Interval((_b = (_a = this.edge) === null || _a === void 0 ? void 0 : _a.constrain(value.min)) !== null && _b !== void 0 ? _b : value.min, (_d = (_c = this.edge) === null || _c === void 0 ? void 0 : _c.constrain(value.max)) !== null && _d !== void 0 ? _d : value.max);\n            }\n            const c = (value.min + value.max) / 2;\n            return new Interval((_f = (_e = this.edge) === null || _e === void 0 ? void 0 : _e.constrain(c)) !== null && _f !== void 0 ? _f : c, (_h = (_g = this.edge) === null || _g === void 0 ? void 0 : _g.constrain(c)) !== null && _h !== void 0 ? _h : c);\n        }\n    }\n\n    const className$2 = ClassName('rsltxt');\n    class RangeSliderTextView {\n        constructor(doc, config) {\n            this.sliderView_ = config.sliderView;\n            this.textView_ = config.textView;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$2());\n            const sliderElem = doc.createElement('div');\n            sliderElem.classList.add(className$2('s'));\n            sliderElem.appendChild(this.sliderView_.element);\n            this.element.appendChild(sliderElem);\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$2('t'));\n            textElem.appendChild(this.textView_.element);\n            this.element.appendChild(textElem);\n        }\n    }\n\n    const className$1 = ClassName('rsl');\n    class RangeSliderView {\n        constructor(doc, config) {\n            this.onSliderPropsChange_ = this.onSliderPropsChange_.bind(this);\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.sliderProps_ = config.sliderProps;\n            this.sliderProps_.emitter.on('change', this.onSliderPropsChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$1());\n            config.viewProps.bindClassModifiers(this.element);\n            this.value_ = config.value;\n            this.value_.emitter.on('change', this.onValueChange_);\n            const trackElem = doc.createElement('div');\n            trackElem.classList.add(className$1('t'));\n            this.element.appendChild(trackElem);\n            this.trackElement = trackElem;\n            const barElem = doc.createElement('div');\n            barElem.classList.add(className$1('b'));\n            trackElem.appendChild(barElem);\n            this.barElement = barElem;\n            const knobElems = ['min', 'max'].map((modifier) => {\n                const elem = doc.createElement('div');\n                elem.classList.add(className$1('k'), className$1('k', modifier));\n                trackElem.appendChild(elem);\n                return elem;\n            });\n            this.knobElements = [knobElems[0], knobElems[1]];\n            this.update_();\n        }\n        valueToX_(value) {\n            const min = this.sliderProps_.get('minValue');\n            const max = this.sliderProps_.get('maxValue');\n            return constrainRange(mapRange(value, min, max, 0, 1), 0, 1) * 100;\n        }\n        update_() {\n            const v = this.value_.rawValue;\n            if (v.length === 0) {\n                this.element.classList.add(className$1(undefined, 'zero'));\n            }\n            else {\n                this.element.classList.remove(className$1(undefined, 'zero'));\n            }\n            const xs = [this.valueToX_(v.min), this.valueToX_(v.max)];\n            this.barElement.style.left = `${xs[0]}%`;\n            this.barElement.style.right = `${100 - xs[1]}%`;\n            this.knobElements.forEach((elem, index) => {\n                elem.style.left = `${xs[index]}%`;\n            });\n        }\n        onSliderPropsChange_() {\n            this.update_();\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class RangeSliderController {\n        constructor(doc, config) {\n            this.grabbing_ = null;\n            this.grabOffset_ = 0;\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.sliderProps = config.sliderProps;\n            this.viewProps = config.viewProps;\n            this.value = config.value;\n            this.view = new RangeSliderView(doc, {\n                sliderProps: this.sliderProps,\n                value: this.value,\n                viewProps: config.viewProps,\n            });\n            const ptHandler = new PointerHandler(this.view.trackElement);\n            ptHandler.emitter.on('down', this.onPointerDown_);\n            ptHandler.emitter.on('move', this.onPointerMove_);\n            ptHandler.emitter.on('up', this.onPointerUp_);\n        }\n        ofs_() {\n            if (this.grabbing_ === 'min') {\n                return this.view.knobElements[0].getBoundingClientRect().width / 2;\n            }\n            if (this.grabbing_ === 'max') {\n                return -this.view.knobElements[1].getBoundingClientRect().width / 2;\n            }\n            return 0;\n        }\n        valueFromData_(data) {\n            if (!data.point) {\n                return null;\n            }\n            const p = (data.point.x + this.ofs_()) / data.bounds.width;\n            const min = this.sliderProps.get('minValue');\n            const max = this.sliderProps.get('maxValue');\n            return mapRange(p, 0, 1, min, max);\n        }\n        onPointerDown_(ev) {\n            if (!ev.data.point) {\n                return;\n            }\n            const p = ev.data.point.x / ev.data.bounds.width;\n            const v = this.value.rawValue;\n            const min = this.sliderProps.get('minValue');\n            const max = this.sliderProps.get('maxValue');\n            const pmin = mapRange(v.min, min, max, 0, 1);\n            const pmax = mapRange(v.max, min, max, 0, 1);\n            if (Math.abs(pmax - p) <= 0.025) {\n                this.grabbing_ = 'max';\n            }\n            else if (Math.abs(pmin - p) <= 0.025) {\n                this.grabbing_ = 'min';\n            }\n            else if (p >= pmin && p <= pmax) {\n                this.grabbing_ = 'length';\n                this.grabOffset_ = mapRange(p - pmin, 0, 1, 0, max - min);\n            }\n            else if (p < pmin) {\n                this.grabbing_ = 'min';\n                this.onPointerMove_(ev);\n            }\n            else if (p > pmax) {\n                this.grabbing_ = 'max';\n                this.onPointerMove_(ev);\n            }\n        }\n        applyPointToValue_(data, opts) {\n            const v = this.valueFromData_(data);\n            if (v === null) {\n                return;\n            }\n            const rmin = this.sliderProps.get('minValue');\n            const rmax = this.sliderProps.get('maxValue');\n            if (this.grabbing_ === 'min') {\n                this.value.setRawValue(new Interval(v, this.value.rawValue.max), opts);\n            }\n            else if (this.grabbing_ === 'max') {\n                this.value.setRawValue(new Interval(this.value.rawValue.min, v), opts);\n            }\n            else if (this.grabbing_ === 'length') {\n                const len = this.value.rawValue.length;\n                let min = v - this.grabOffset_;\n                let max = min + len;\n                if (min < rmin) {\n                    min = rmin;\n                    max = rmin + len;\n                }\n                else if (max > rmax) {\n                    min = rmax - len;\n                    max = rmax;\n                }\n                this.value.setRawValue(new Interval(min, max), opts);\n            }\n        }\n        onPointerMove_(ev) {\n            this.applyPointToValue_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.applyPointToValue_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n            this.grabbing_ = null;\n        }\n    }\n\n    class RangeSliderTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.sc_ = new RangeSliderController(doc, config);\n            const axis = {\n                baseStep: config.baseStep,\n                constraint: config.constraint,\n                textProps: ValueMap.fromObject({\n                    draggingScale: config.draggingScale,\n                    formatter: config.formatter,\n                }),\n            };\n            this.tc_ = new PointNdTextController(doc, {\n                assembly: IntervalAssembly,\n                axes: [axis, axis],\n                parser: config.parser,\n                value: this.value,\n                viewProps: config.viewProps,\n            });\n            this.view = new RangeSliderTextView(doc, {\n                sliderView: this.sc_.view,\n                textView: this.tc_.view,\n            });\n        }\n        get textController() {\n            return this.tc_;\n        }\n    }\n\n    function intervalFromUnknown(value) {\n        return Interval.isObject(value)\n            ? new Interval(value.min, value.max)\n            : new Interval(0, 0);\n    }\n    function writeInterval(target, value) {\n        target.writeProperty('max', value.max);\n        target.writeProperty('min', value.min);\n    }\n\n    function createConstraint(params) {\n        const constraints = [];\n        const rc = createRangeConstraint(params);\n        if (rc) {\n            constraints.push(rc);\n        }\n        const sc = createStepConstraint(params);\n        if (sc) {\n            constraints.push(sc);\n        }\n        return new IntervalConstraint(new CompositeConstraint(constraints));\n    }\n    const IntervalInputPlugin = {\n        id: 'input-interval',\n        type: 'input',\n        css: '.tp-cbzgv,.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-radv_b:hover,.tp-rslv_k:hover,.tp-cbzv_b:hover{background-color:var(--btn-bg-h)}.tp-radv_b:focus,.tp-rslv_k:focus,.tp-cbzv_b:focus{background-color:var(--btn-bg-f)}.tp-radv_b:active,.tp-rslv_k:active,.tp-cbzv_b:active{background-color:var(--btn-bg-a)}.tp-radv_b:disabled,.tp-rslv_k:disabled,.tp-cbzv_b:disabled{opacity:.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us)*5);width:100%}.tp-cbzgv_u{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:rgba(0,0,0,0);stroke:var(--in-fg)}.tp-cbzgv_v{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity .2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:.2em;opacity:.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:\"\";height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:\"\";height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px)/-2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:.5}.tp-radgridv .tp-radv_b{border-radius:0}',\n        accept: (exValue, params) => {\n            if (!Interval.isObject(exValue)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                max: p.optional.number,\n                min: p.optional.number,\n                step: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: new Interval(exValue.min, exValue.max),\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => intervalFromUnknown,\n            constraint: (args) => createConstraint(args.params),\n            equals: Interval.equals,\n            writer: (_args) => writeInterval,\n        },\n        controller(args) {\n            var _a;\n            const v = args.value;\n            const c = args.constraint;\n            if (!(c instanceof IntervalConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const midValue = (v.rawValue.min + v.rawValue.max) / 2;\n            const formatter = (_a = args.params.format) !== null && _a !== void 0 ? _a : createNumberFormatter(getSuitableDecimalDigits(c.edge, midValue));\n            const drc = c.edge && findConstraint(c.edge, DefiniteRangeConstraint);\n            if (drc) {\n                return new RangeSliderTextController(args.document, {\n                    baseStep: getBaseStep(c.edge),\n                    constraint: c.edge,\n                    draggingScale: getSuitableDraggingScale(c.edge, midValue),\n                    formatter: formatter,\n                    parser: parseNumber,\n                    sliderProps: new ValueMap({\n                        maxValue: drc.values.value('max'),\n                        minValue: drc.values.value('min'),\n                    }),\n                    value: v,\n                    viewProps: args.viewProps,\n                });\n            }\n            const axis = {\n                baseStep: getBaseStep(c.edge),\n                constraint: c.edge,\n                textProps: ValueMap.fromObject({\n                    draggingScale: midValue,\n                    formatter: formatter,\n                }),\n            };\n            return new PointNdTextController(args.document, {\n                assembly: IntervalAssembly,\n                axes: [axis, axis],\n                parser: parseNumber,\n                value: v,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class RadioCellApi {\n        constructor(controller) {\n            this.controller_ = controller;\n        }\n        get disabled() {\n            return this.controller_.viewProps.get('disabled');\n        }\n        set disabled(disabled) {\n            this.controller_.viewProps.set('disabled', disabled);\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.props.set('title', title);\n        }\n    }\n\n    class TpRadioGridChangeEvent extends TpChangeEvent {\n        constructor(target, cell, index, value, presetKey) {\n            super(target, value, presetKey);\n            this.cell = cell;\n            this.index = index;\n        }\n    }\n\n    class RadioGridApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.cellToApiMap_ = new Map();\n            const gc = this.controller_.valueController;\n            gc.cellControllers.forEach((cc) => {\n                const api = new RadioCellApi(cc);\n                this.cellToApiMap_.set(cc, api);\n            });\n        }\n        get value() {\n            return this.controller_.value;\n        }\n        cell(x, y) {\n            const gc = this.controller_.valueController;\n            const cc = gc.cellControllers[y * gc.size[0] + x];\n            return this.cellToApiMap_.get(cc);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.controller_.value.emitter.on(eventName, (ev) => {\n                const gc = this.controller_.valueController;\n                const cc = gc.findCellByValue(ev.rawValue);\n                if (!cc) {\n                    return;\n                }\n                const capi = this.cellToApiMap_.get(cc);\n                if (!capi) {\n                    return;\n                }\n                const i = gc.cellControllers.indexOf(cc);\n                bh(new TpRadioGridChangeEvent(this, capi, [i % gc.size[0], Math.floor(i / gc.size[0])], ev.rawValue, undefined));\n            });\n        }\n    }\n\n    const className = ClassName('rad');\n    class RadioView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('label');\n            labelElem.classList.add(className('l'));\n            this.element.appendChild(labelElem);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className('i'));\n            inputElem.name = config.name;\n            inputElem.type = 'radio';\n            config.viewProps.bindDisabled(inputElem);\n            labelElem.appendChild(inputElem);\n            this.inputElement = inputElem;\n            const bodyElem = doc.createElement('div');\n            bodyElem.classList.add(className('b'));\n            labelElem.appendChild(bodyElem);\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className('t'));\n            bodyElem.appendChild(titleElem);\n            bindValueMap(config.props, 'title', (title) => {\n                titleElem.textContent = title;\n            });\n        }\n    }\n\n    class RadioController {\n        constructor(doc, config) {\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new RadioView(doc, {\n                name: config.name,\n                props: this.props,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    class RadioGridController {\n        constructor(doc, config) {\n            this.cellCs_ = [];\n            this.cellValues_ = [];\n            this.onCellInputChange_ = this.onCellInputChange_.bind(this);\n            this.size = config.size;\n            const [w, h] = this.size;\n            for (let y = 0; y < h; y++) {\n                for (let x = 0; x < w; x++) {\n                    const bc = new RadioController(doc, {\n                        name: config.groupName,\n                        props: ValueMap.fromObject(Object.assign({}, config.cellConfig(x, y))),\n                        viewProps: ViewProps.create(),\n                    });\n                    this.cellCs_.push(bc);\n                    this.cellValues_.push(config.cellConfig(x, y).value);\n                }\n            }\n            this.value = config.value;\n            bindValue(this.value, (value) => {\n                const cc = this.findCellByValue(value);\n                if (!cc) {\n                    return;\n                }\n                cc.view.inputElement.checked = true;\n            });\n            this.viewProps = ViewProps.create();\n            this.view = new PlainView(doc, {\n                viewProps: this.viewProps,\n                viewName: 'radgrid',\n            });\n            this.view.element.style.gridTemplateColumns = `repeat(${w}, 1fr)`;\n            this.cellCs_.forEach((bc) => {\n                bc.view.inputElement.addEventListener('change', this.onCellInputChange_);\n                this.view.element.appendChild(bc.view.element);\n            });\n        }\n        get cellControllers() {\n            return this.cellCs_;\n        }\n        findCellByValue(value) {\n            const index = this.cellValues_.findIndex((v) => v === value);\n            if (index < 0) {\n                return null;\n            }\n            return this.cellCs_[index];\n        }\n        onCellInputChange_(ev) {\n            const inputElem = ev.currentTarget;\n            const index = this.cellCs_.findIndex((c) => c.view.inputElement === inputElem);\n            if (index < 0) {\n                return;\n            }\n            this.value.rawValue = this.cellValues_[index];\n        }\n    }\n\n    const RadioGridBladePlugin = (function () {\n        return {\n            id: 'radiogrid',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    cells: p.required.function,\n                    groupName: p.required.string,\n                    size: p.required.array(p.required.number),\n                    value: p.required.raw,\n                    view: p.required.constant('radiogrid'),\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: new RadioGridController(args.document, {\n                        groupName: args.params.groupName,\n                        cellConfig: args.params.cells,\n                        size: args.params.size,\n                        value: createValue(args.params.value),\n                    }),\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof RadioGridController)) {\n                    return null;\n                }\n                return new RadioGridApi(args.controller);\n            },\n        };\n    })();\n\n    function createRadioGridInputPlugin(config) {\n        return {\n            id: 'input-radiogrid',\n            type: 'input',\n            accept(value, params) {\n                if (!config.isType(value)) {\n                    return null;\n                }\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    cells: p.required.function,\n                    groupName: p.required.string,\n                    size: p.required.array(p.required.number),\n                    view: p.required.constant('radiogrid'),\n                });\n                return result\n                    ? {\n                        initialValue: value,\n                        params: result,\n                    }\n                    : null;\n            },\n            binding: config.binding,\n            controller: (args) => {\n                return new RadioGridController(args.document, {\n                    cellConfig: args.params.cells,\n                    groupName: args.params.groupName,\n                    size: args.params.size,\n                    value: args.value,\n                });\n            },\n        };\n    }\n    const RadioGruidNumberInputPlugin = createRadioGridInputPlugin({\n        isType: (value) => {\n            return typeof value === 'number';\n        },\n        binding: {\n            reader: (_args) => numberFromUnknown,\n            writer: (_args) => writePrimitive,\n        },\n    });\n    const RadioGruidStringInputPlugin = createRadioGridInputPlugin({\n        isType: (value) => {\n            return typeof value === 'string';\n        },\n        binding: {\n            reader: (_args) => stringFromUnknown,\n            writer: (_args) => writePrimitive,\n        },\n    });\n    const RadioGruidBooleanInputPlugin = createRadioGridInputPlugin({\n        isType: (value) => {\n            return typeof value === 'boolean';\n        },\n        binding: {\n            reader: (_args) => boolFromUnknown,\n            writer: (_args) => writePrimitive,\n        },\n    });\n\n    const plugins = [\n        ButtonGridBladePlugin,\n        CubicBezierBladePlugin,\n        FpsGraphBladePlugin,\n        IntervalInputPlugin,\n        RadioGridBladePlugin,\n        RadioGruidBooleanInputPlugin,\n        RadioGruidNumberInputPlugin,\n        RadioGruidStringInputPlugin,\n    ];\n\n    exports.ButtonCellApi = ButtonCellApi;\n    exports.ButtonGridApi = ButtonGridApi;\n    exports.ButtonGridController = ButtonGridController;\n    exports.CubicBezier = CubicBezier;\n    exports.CubicBezierApi = CubicBezierApi;\n    exports.CubicBezierAssembly = CubicBezierAssembly;\n    exports.CubicBezierController = CubicBezierController;\n    exports.CubicBezierGraphController = CubicBezierGraphController;\n    exports.CubicBezierGraphView = CubicBezierGraphView;\n    exports.CubicBezierPickerController = CubicBezierPickerController;\n    exports.CubicBezierPickerView = CubicBezierPickerView;\n    exports.CubicBezierPreviewView = CubicBezierPreviewView;\n    exports.CubicBezierView = CubicBezierView;\n    exports.FpsGraphBladeApi = FpsGraphBladeApi;\n    exports.FpsGraphController = FpsGraphController;\n    exports.FpsView = FpsView;\n    exports.Fpswatch = Fpswatch;\n    exports.Interval = Interval;\n    exports.IntervalAssembly = IntervalAssembly;\n    exports.IntervalConstraint = IntervalConstraint;\n    exports.RadioCellApi = RadioCellApi;\n    exports.RadioController = RadioController;\n    exports.RadioGridApi = RadioGridApi;\n    exports.RadioGridController = RadioGridController;\n    exports.RadioView = RadioView;\n    exports.RangeSliderController = RangeSliderController;\n    exports.RangeSliderTextController = RangeSliderTextController;\n    exports.RangeSliderTextView = RangeSliderTextView;\n    exports.RangeSliderView = RangeSliderView;\n    exports.TpRadioGridChangeEvent = TpRadioGridChangeEvent;\n    exports.plugins = plugins;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.TweakpaneInfodumpPlugin = {}));\n})(this, (function (exports) { 'use strict';\n\n    class BladeApi {\n        constructor(controller) {\n            this.controller_ = controller;\n        }\n        get element() {\n            return this.controller_.view.element;\n        }\n        get disabled() {\n            return this.controller_.viewProps.get('disabled');\n        }\n        set disabled(disabled) {\n            this.controller_.viewProps.set('disabled', disabled);\n        }\n        get hidden() {\n            return this.controller_.viewProps.get('hidden');\n        }\n        set hidden(hidden) {\n            this.controller_.viewProps.set('hidden', hidden);\n        }\n        dispose() {\n            this.controller_.viewProps.set('disposed', true);\n        }\n    }\n\n    function forceCast(v) {\n        return v;\n    }\n    function deepEqualsArray(a1, a2) {\n        if (a1.length !== a2.length) {\n            return false;\n        }\n        for (let i = 0; i < a1.length; i++) {\n            if (a1[i] !== a2[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    class Emitter {\n        constructor() {\n            this.observers_ = {};\n        }\n        on(eventName, handler) {\n            let observers = this.observers_[eventName];\n            if (!observers) {\n                observers = this.observers_[eventName] = [];\n            }\n            observers.push({\n                handler: handler,\n            });\n            return this;\n        }\n        off(eventName, handler) {\n            const observers = this.observers_[eventName];\n            if (observers) {\n                this.observers_[eventName] = observers.filter((observer) => {\n                    return observer.handler !== handler;\n                });\n            }\n            return this;\n        }\n        emit(eventName, event) {\n            const observers = this.observers_[eventName];\n            if (!observers) {\n                return;\n            }\n            observers.forEach((observer) => {\n                observer.handler(event);\n            });\n        }\n    }\n\n    const PREFIX = 'tp';\n    function ClassName(viewName) {\n        const fn = (opt_elementName, opt_modifier) => {\n            return [\n                PREFIX,\n                '-',\n                viewName,\n                'v',\n                opt_elementName ? `_${opt_elementName}` : '',\n                opt_modifier ? `-${opt_modifier}` : '',\n            ].join('');\n        };\n        return fn;\n    }\n\n    function compose(h1, h2) {\n        return (input) => h2(h1(input));\n    }\n    function extractValue(ev) {\n        return ev.rawValue;\n    }\n    function bindValue(value, applyValue) {\n        value.emitter.on('change', compose(extractValue, applyValue));\n        applyValue(value.rawValue);\n    }\n    function bindValueMap(valueMap, key, applyValue) {\n        bindValue(valueMap.value(key), applyValue);\n    }\n\n    function applyClass(elem, className, active) {\n        if (active) {\n            elem.classList.add(className);\n        }\n        else {\n            elem.classList.remove(className);\n        }\n    }\n    function valueToClassName(elem, className) {\n        return (value) => {\n            applyClass(elem, className, value);\n        };\n    }\n\n    class BoundValue {\n        constructor(initialValue, config) {\n            var _a;\n            this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n            this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : ((v1, v2) => v1 === v2);\n            this.emitter = new Emitter();\n            this.rawValue_ = initialValue;\n        }\n        get constraint() {\n            return this.constraint_;\n        }\n        get rawValue() {\n            return this.rawValue_;\n        }\n        set rawValue(rawValue) {\n            this.setRawValue(rawValue, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(rawValue, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            const constrainedValue = this.constraint_\n                ? this.constraint_.constrain(rawValue)\n                : rawValue;\n            const prevValue = this.rawValue_;\n            const changed = !this.equals_(prevValue, constrainedValue);\n            if (!changed && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.rawValue_ = constrainedValue;\n            this.emitter.emit('change', {\n                options: opts,\n                previousRawValue: prevValue,\n                rawValue: constrainedValue,\n                sender: this,\n            });\n        }\n    }\n\n    class PrimitiveValue {\n        constructor(initialValue) {\n            this.emitter = new Emitter();\n            this.value_ = initialValue;\n        }\n        get rawValue() {\n            return this.value_;\n        }\n        set rawValue(value) {\n            this.setRawValue(value, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(value, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            const prevValue = this.value_;\n            if (prevValue === value && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.value_ = value;\n            this.emitter.emit('change', {\n                options: opts,\n                previousRawValue: prevValue,\n                rawValue: this.value_,\n                sender: this,\n            });\n        }\n    }\n\n    function createValue(initialValue, config) {\n        const constraint = config === null || config === void 0 ? void 0 : config.constraint;\n        const equals = config === null || config === void 0 ? void 0 : config.equals;\n        if (!constraint && !equals) {\n            return new PrimitiveValue(initialValue);\n        }\n        return new BoundValue(initialValue, config);\n    }\n\n    class ValueMap {\n        constructor(valueMap) {\n            this.emitter = new Emitter();\n            this.valMap_ = valueMap;\n            for (const key in this.valMap_) {\n                const v = this.valMap_[key];\n                v.emitter.on('change', () => {\n                    this.emitter.emit('change', {\n                        key: key,\n                        sender: this,\n                    });\n                });\n            }\n        }\n        static createCore(initialValue) {\n            const keys = Object.keys(initialValue);\n            return keys.reduce((o, key) => {\n                return Object.assign(o, {\n                    [key]: createValue(initialValue[key]),\n                });\n            }, {});\n        }\n        static fromObject(initialValue) {\n            const core = this.createCore(initialValue);\n            return new ValueMap(core);\n        }\n        get(key) {\n            return this.valMap_[key].rawValue;\n        }\n        set(key, value) {\n            this.valMap_[key].rawValue = value;\n        }\n        value(key) {\n            return this.valMap_[key];\n        }\n    }\n\n    function parseObject(value, keyToParserMap) {\n        const keys = Object.keys(keyToParserMap);\n        const result = keys.reduce((tmp, key) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const parser = keyToParserMap[key];\n            const result = parser(value[key]);\n            return result.succeeded\n                ? Object.assign(Object.assign({}, tmp), { [key]: result.value }) : undefined;\n        }, {});\n        return forceCast(result);\n    }\n    function parseArray(value, parseItem) {\n        return value.reduce((tmp, item) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const result = parseItem(item);\n            if (!result.succeeded || result.value === undefined) {\n                return undefined;\n            }\n            return [...tmp, result.value];\n        }, []);\n    }\n    function isObject(value) {\n        if (value === null) {\n            return false;\n        }\n        return typeof value === 'object';\n    }\n    function createParamsParserBuilder(parse) {\n        return (optional) => (v) => {\n            if (!optional && v === undefined) {\n                return {\n                    succeeded: false,\n                    value: undefined,\n                };\n            }\n            if (optional && v === undefined) {\n                return {\n                    succeeded: true,\n                    value: undefined,\n                };\n            }\n            const result = parse(v);\n            return result !== undefined\n                ? {\n                    succeeded: true,\n                    value: result,\n                }\n                : {\n                    succeeded: false,\n                    value: undefined,\n                };\n        };\n    }\n    function createParamsParserBuilders(optional) {\n        return {\n            custom: (parse) => createParamsParserBuilder(parse)(optional),\n            boolean: createParamsParserBuilder((v) => typeof v === 'boolean' ? v : undefined)(optional),\n            number: createParamsParserBuilder((v) => typeof v === 'number' ? v : undefined)(optional),\n            string: createParamsParserBuilder((v) => typeof v === 'string' ? v : undefined)(optional),\n            function: createParamsParserBuilder((v) =>\n            typeof v === 'function' ? v : undefined)(optional),\n            constant: (value) => createParamsParserBuilder((v) => (v === value ? value : undefined))(optional),\n            raw: createParamsParserBuilder((v) => v)(optional),\n            object: (keyToParserMap) => createParamsParserBuilder((v) => {\n                if (!isObject(v)) {\n                    return undefined;\n                }\n                return parseObject(v, keyToParserMap);\n            })(optional),\n            array: (itemParser) => createParamsParserBuilder((v) => {\n                if (!Array.isArray(v)) {\n                    return undefined;\n                }\n                return parseArray(v, itemParser);\n            })(optional),\n        };\n    }\n    const ParamsParsers = {\n        optional: createParamsParserBuilders(true),\n        required: createParamsParserBuilders(false),\n    };\n    function parseParams(value, keyToParserMap) {\n        const result = ParamsParsers.required.object(keyToParserMap)(value);\n        return result.succeeded ? result.value : undefined;\n    }\n\n    function warnMissing(info) {\n        console.warn([\n            `Missing '${info.key}' of ${info.target} in ${info.place}.`,\n            'Please rebuild plugins with the latest core package.',\n        ].join(' '));\n    }\n\n    function disposeElement(elem) {\n        if (elem && elem.parentElement) {\n            elem.parentElement.removeChild(elem);\n        }\n        return null;\n    }\n\n    class ReadonlyValue {\n        constructor(value) {\n            this.value_ = value;\n        }\n        static create(value) {\n            return [\n                new ReadonlyValue(value),\n                (rawValue, options) => {\n                    value.setRawValue(rawValue, options);\n                },\n            ];\n        }\n        get emitter() {\n            return this.value_.emitter;\n        }\n        get rawValue() {\n            return this.value_.rawValue;\n        }\n    }\n\n    const className$2 = ClassName('');\n    function valueToModifier(elem, modifier) {\n        return valueToClassName(elem, className$2(undefined, modifier));\n    }\n    class ViewProps extends ValueMap {\n        constructor(valueMap) {\n            var _a;\n            super(valueMap);\n            this.onDisabledChange_ = this.onDisabledChange_.bind(this);\n            this.onParentChange_ = this.onParentChange_.bind(this);\n            this.onParentGlobalDisabledChange_ =\n                this.onParentGlobalDisabledChange_.bind(this);\n            [this.globalDisabled_, this.setGlobalDisabled_] = ReadonlyValue.create(createValue(this.getGlobalDisabled_()));\n            this.value('disabled').emitter.on('change', this.onDisabledChange_);\n            this.value('parent').emitter.on('change', this.onParentChange_);\n            (_a = this.get('parent')) === null || _a === void 0 ? void 0 : _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\n        }\n        static create(opt_initialValue) {\n            var _a, _b, _c;\n            const initialValue = opt_initialValue !== null && opt_initialValue !== void 0 ? opt_initialValue : {};\n            return new ViewProps(ValueMap.createCore({\n                disabled: (_a = initialValue.disabled) !== null && _a !== void 0 ? _a : false,\n                disposed: false,\n                hidden: (_b = initialValue.hidden) !== null && _b !== void 0 ? _b : false,\n                parent: (_c = initialValue.parent) !== null && _c !== void 0 ? _c : null,\n            }));\n        }\n        get globalDisabled() {\n            return this.globalDisabled_;\n        }\n        bindClassModifiers(elem) {\n            bindValue(this.globalDisabled_, valueToModifier(elem, 'disabled'));\n            bindValueMap(this, 'hidden', valueToModifier(elem, 'hidden'));\n        }\n        bindDisabled(target) {\n            bindValue(this.globalDisabled_, (disabled) => {\n                target.disabled = disabled;\n            });\n        }\n        bindTabIndex(elem) {\n            bindValue(this.globalDisabled_, (disabled) => {\n                elem.tabIndex = disabled ? -1 : 0;\n            });\n        }\n        handleDispose(callback) {\n            this.value('disposed').emitter.on('change', (disposed) => {\n                if (disposed) {\n                    callback();\n                }\n            });\n        }\n        getGlobalDisabled_() {\n            const parent = this.get('parent');\n            const parentDisabled = parent ? parent.globalDisabled.rawValue : false;\n            return parentDisabled || this.get('disabled');\n        }\n        updateGlobalDisabled_() {\n            this.setGlobalDisabled_(this.getGlobalDisabled_());\n        }\n        onDisabledChange_() {\n            this.updateGlobalDisabled_();\n        }\n        onParentGlobalDisabledChange_() {\n            this.updateGlobalDisabled_();\n        }\n        onParentChange_(ev) {\n            var _a;\n            const prevParent = ev.previousRawValue;\n            prevParent === null || prevParent === void 0 ? void 0 : prevParent.globalDisabled.emitter.off('change', this.onParentGlobalDisabledChange_);\n            (_a = this.get('parent')) === null || _a === void 0 ? void 0 : _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\n            this.updateGlobalDisabled_();\n        }\n    }\n\n    function getAllBladePositions() {\n        return ['veryfirst', 'first', 'last', 'verylast'];\n    }\n\n    const className$1 = ClassName('');\n    const POS_TO_CLASS_NAME_MAP = {\n        veryfirst: 'vfst',\n        first: 'fst',\n        last: 'lst',\n        verylast: 'vlst',\n    };\n    class BladeController {\n        constructor(config) {\n            this.parent_ = null;\n            this.blade = config.blade;\n            this.view = config.view;\n            this.viewProps = config.viewProps;\n            const elem = this.view.element;\n            this.blade.value('positions').emitter.on('change', () => {\n                getAllBladePositions().forEach((pos) => {\n                    elem.classList.remove(className$1(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n                this.blade.get('positions').forEach((pos) => {\n                    elem.classList.add(className$1(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n            });\n            this.viewProps.handleDispose(() => {\n                disposeElement(elem);\n            });\n        }\n        get parent() {\n            return this.parent_;\n        }\n        set parent(parent) {\n            this.parent_ = parent;\n            if (!('parent' in this.viewProps.valMap_)) {\n                warnMissing({\n                    key: 'parent',\n                    target: ViewProps.name,\n                    place: 'BladeController.parent',\n                });\n                return;\n            }\n            this.viewProps.set('parent', this.parent_ ? this.parent_.viewProps : null);\n        }\n    }\n\n    function createBlade() {\n        return new ValueMap({\n            positions: createValue([], {\n                equals: deepEqualsArray,\n            }),\n        });\n    }\n\n    function createNumberFormatter(digits) {\n        return (value) => {\n            return value.toFixed(Math.max(Math.min(digits, 20), 0));\n        };\n    }\n\n    const innerFormatter = createNumberFormatter(0);\n    function formatPercentage(value) {\n        return innerFormatter(value) + '%';\n    }\n\n    function constrainRange(value, min, max) {\n        return Math.min(Math.max(value, min), max);\n    }\n\n    function removeAlphaComponent(comps) {\n        return [comps[0], comps[1], comps[2]];\n    }\n\n    function zerofill(comp) {\n        const hex = constrainRange(Math.floor(comp), 0, 255).toString(16);\n        return hex.length === 1 ? `0${hex}` : hex;\n    }\n    function colorToHexRgbString(value, prefix = '#') {\n        const hexes = removeAlphaComponent(value.getComponents('rgb'))\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToHexRgbaString(value, prefix = '#') {\n        const rgbaComps = value.getComponents('rgb');\n        const hexes = [rgbaComps[0], rgbaComps[1], rgbaComps[2], rgbaComps[3] * 255]\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToFunctionalRgbString(value, opt_type) {\n        const formatter = createNumberFormatter(opt_type === 'float' ? 2 : 0);\n        const comps = removeAlphaComponent(value.getComponents('rgb', opt_type)).map((comp) => formatter(comp));\n        return `rgb(${comps.join(', ')})`;\n    }\n    function createFunctionalRgbColorFormatter(type) {\n        return (value) => {\n            return colorToFunctionalRgbString(value, type);\n        };\n    }\n    function colorToFunctionalRgbaString(value, opt_type) {\n        const aFormatter = createNumberFormatter(2);\n        const rgbFormatter = createNumberFormatter(opt_type === 'float' ? 2 : 0);\n        const comps = value.getComponents('rgb', opt_type).map((comp, index) => {\n            const formatter = index === 3 ? aFormatter : rgbFormatter;\n            return formatter(comp);\n        });\n        return `rgba(${comps.join(', ')})`;\n    }\n    function createFunctionalRgbaColorFormatter(type) {\n        return (value) => {\n            return colorToFunctionalRgbaString(value, type);\n        };\n    }\n    function colorToFunctionalHslString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n        ];\n        const comps = removeAlphaComponent(value.getComponents('hsl')).map((comp, index) => formatters[index](comp));\n        return `hsl(${comps.join(', ')})`;\n    }\n    function colorToFunctionalHslaString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n            createNumberFormatter(2),\n        ];\n        const comps = value\n            .getComponents('hsl')\n            .map((comp, index) => formatters[index](comp));\n        return `hsla(${comps.join(', ')})`;\n    }\n    function colorToObjectRgbString(value, type) {\n        const formatter = createNumberFormatter(type === 'float' ? 2 : 0);\n        const names = ['r', 'g', 'b'];\n        const comps = removeAlphaComponent(value.getComponents('rgb', type)).map((comp, index) => `${names[index]}: ${formatter(comp)}`);\n        return `{${comps.join(', ')}}`;\n    }\n    function createObjectRgbColorFormatter(type) {\n        return (value) => colorToObjectRgbString(value, type);\n    }\n    function colorToObjectRgbaString(value, type) {\n        const aFormatter = createNumberFormatter(2);\n        const rgbFormatter = createNumberFormatter(type === 'float' ? 2 : 0);\n        const names = ['r', 'g', 'b', 'a'];\n        const comps = value.getComponents('rgb', type).map((comp, index) => {\n            const formatter = index === 3 ? aFormatter : rgbFormatter;\n            return `${names[index]}: ${formatter(comp)}`;\n        });\n        return `{${comps.join(', ')}}`;\n    }\n    function createObjectRgbaColorFormatter(type) {\n        return (value) => colorToObjectRgbaString(value, type);\n    }\n    [\n        {\n            format: {\n                alpha: false,\n                mode: 'rgb',\n                notation: 'hex',\n                type: 'int',\n            },\n            stringifier: colorToHexRgbString,\n        },\n        {\n            format: {\n                alpha: true,\n                mode: 'rgb',\n                notation: 'hex',\n                type: 'int',\n            },\n            stringifier: colorToHexRgbaString,\n        },\n        {\n            format: {\n                alpha: false,\n                mode: 'hsl',\n                notation: 'func',\n                type: 'int',\n            },\n            stringifier: colorToFunctionalHslString,\n        },\n        {\n            format: {\n                alpha: true,\n                mode: 'hsl',\n                notation: 'func',\n                type: 'int',\n            },\n            stringifier: colorToFunctionalHslaString,\n        },\n        ...['int', 'float'].reduce((prev, type) => {\n            return [\n                ...prev,\n                {\n                    format: {\n                        alpha: false,\n                        mode: 'rgb',\n                        notation: 'func',\n                        type: type,\n                    },\n                    stringifier: createFunctionalRgbColorFormatter(type),\n                },\n                {\n                    format: {\n                        alpha: true,\n                        mode: 'rgb',\n                        notation: 'func',\n                        type: type,\n                    },\n                    stringifier: createFunctionalRgbaColorFormatter(type),\n                },\n                {\n                    format: {\n                        alpha: false,\n                        mode: 'rgb',\n                        notation: 'object',\n                        type: type,\n                    },\n                    stringifier: createObjectRgbColorFormatter(type),\n                },\n                {\n                    format: {\n                        alpha: true,\n                        mode: 'rgb',\n                        notation: 'object',\n                        type: type,\n                    },\n                    stringifier: createObjectRgbaColorFormatter(type),\n                },\n            ];\n        }, []),\n    ];\n\n    var n=[[/\\r\\n/g,\"\\n\"],[/\\n(#+)(.*)/g,function(n,t,r){void 0===r&&(r=\"\");var e=t.length;return \"<h\"+e+\">\"+r.trim()+\"</h\"+e+\">\"}],[/!\\[([^\\[]+)\\]\\((?:javascript:)?([^\\)]+)\\)/g,'<img src=\"$2\" alt=\"$1\">'],[/\\[([^\\[]+)\\]\\((?:javascript:)?([^\\)]+)\\)/g,'<a href=\"$2\">$1</a>'],[/(\\*\\*|__)(.*?)\\1/g,\"<strong>$2</strong>\"],[/\\\\_/g,\"&#95;\"],[/(\\*|_)(.*?)\\1/g,\"<em>$2</em>\"],[/\\~\\~(.*?)\\~\\~/g,\"<del>$1</del>\"],[/\\:\\\"(.*?)\\\"\\:/g,\"<q>$1</q>\"],[/\\n\\s*```\\n([^]*?)\\n\\s*```\\s*\\n/g,\"\\n<pre>$1</pre>\"],[/`(.*?)`/g,function(n,t){return \"<code>\"+function(n){n=n.replace(/\\&/g,\"&amp;\");for(var t=\"'#<>`*-~_=:\\\"![]()nt\",r=t.length,e=0;e<r;e++)n=n.replace(RegExp(\"\\\\\"+t[e],\"g\"),function(n){return \"&#\"+n.charCodeAt(0)+\";\"});return n}(t)+\"</code>\"}],[/\\n(\\*|\\-|\\+)(.*)/g,function(n,t,r){return void 0===r&&(r=\"\"),\"<ul>\\n\\t<li>\"+r.trim()+\"</li>\\n</ul>\"}],[/\\n[0-9]+\\.(.*)/g,function(n,t){return void 0===t&&(t=\"\"),\"<ol>\\n\\t<li>\"+t.trim()+\"</li>\\n</ol>\"}],[/\\n(&gt;|\\>)(.*)/g,function(n,t,r){return void 0===r&&(r=\"\"),\"\\n<blockquote>\"+r.trim()+\"</blockquote>\"}],[/\\n-{5,}/g,\"\\n<hr />\"],[/( *\\|[^\\n]+\\|\\r?\\n)((?: *\\|:?[ -]+:?)+ *\\|)(\\n(?: *\\|[^\\n]+\\|\\r?\\n?)*)?/g,function(n,t,r,e){var i=r.split(\"|\").filter(function(n,t,r){return t>0&&t<r.length-1}).map(function(n){return /:-+:/g.test(n)?\"center\":/-+:/g.test(n)?\"right\":/:-+/.test(n)?\"left\":\"\"}),o=function(n){var t=i[n];return t?' align=\"'+t+'\"':\"\"};return \"\\n<table><tbody><tr>\"+t.split(\"|\").map(function(n){return n.trim()}).filter(function(n){return n&&n.length}).map(function(n,t){return \"<th\"+o(t)+\">\"+n+\"</th>\"}).join(\"\")+\"</tr>\"+e.split(\"\\n\").map(function(n){return n.trim()}).filter(function(n){return n&&n.length}).map(function(n){return \"<tr>\"+n.split(\"|\").filter(function(n,t,r){return t>0&&t<r.length-1}).map(function(n,t){return \"<td\"+o(t)+\">\"+n.trim()+\"</td>\"}).join(\"\")+\"</tr>\"}).join(\"\")+\"</tbody></table>\\n\"}],[/\\n([^\\n]+)\\n/g,function(n,t){var r=t.trim();return /^<\\/?(ul|ol|li|h|p|bl|table|tr|td)/i.test(r)?\"\\n\"+t+\"\\n\":\"\\n<p>\\n\"+r+\"\\n</p>\\n\"}],[/\\s?<\\/ul>\\s?<ul>/g,\"\"],[/\\s?<\\/ol>\\s?<ol>/g,\"\"],[/<\\/blockquote>\\n<blockquote>/g,\"<br>\\n\"],[/https?:\\/\\/[^\"']*/g,function(n){return n.replace(/<\\/?em>/g,\"_\")}],[/&#95;/g,\"_\"]],t=function(t,r,e){return void 0===r&&(r=!1),void 0===e&&(e=!1),t=\"\\n\"+t+\"\\n\",n.forEach(function(n){t=t.replace(n[0],n[1]);}),r?e?t.trim().replace(/^<p>([\\s\\S]*)<\\/p>$/,\"$1\").replace(/<a href=\"/,'<a target=\"_blank\" href=\"'):t.trim().replace(/^<p>([\\s\\S]*)<\\/p>$/,\"$1\"):e?t.trim().replace(/<a href=\"/,'<a target=\"_blank\" href=\"'):t.trim()};\n\n    // Create a class name generator from the view name\r\n    // ClassName('tmp') will generate a CSS class name like `tp-tmpv`\r\n    const className = ClassName('indu');\r\n    const classNameBorder = ClassName('indub');\r\n    class InfodumpView {\r\n        constructor(doc, config) {\r\n            this.element = doc.createElement('div');\r\n            this.element.classList.add(className());\r\n            if (config.border) {\r\n                this.element.classList.add(classNameBorder());\r\n            }\r\n            config.viewProps.bindClassModifiers(this.element);\r\n            const contentElem = doc.createElement('div');\r\n            contentElem.classList.add(className('t'));\r\n            if (config.markdown) {\r\n                contentElem.innerHTML = t(config.content);\r\n            }\r\n            else {\r\n                contentElem.textContent = config.content;\r\n            }\r\n            this.element.appendChild(contentElem);\r\n        }\r\n    }\n\n    // Custom controller class should implement `Controller` interface\r\n    class InfodumpController extends BladeController {\r\n        constructor(doc, config) {\r\n            super({\r\n                blade: createBlade(),\r\n                view: new InfodumpView(doc, config),\r\n                viewProps: config.viewProps,\r\n            });\r\n        }\r\n    }\n\n    // NOTE: You can see JSDoc comments of `InputBindingPlugin` for details about each property\r\n    //\r\n    // `InputBindingPlugin<In, Ex, P>` means...\r\n    // - The plugin receives the bound value as `Ex`,\r\n    // - converts `Ex` into `In` and holds it\r\n    // - P is the type of the parsed parameters\r\n    //\r\n    const TweakpaneInfodumpPlugin = {\r\n        id: 'infodump',\r\n        // type: The plugin type.\r\n        // - 'input': Input binding\r\n        // - 'monitor': Monitor binding\r\n        type: 'blade',\r\n        // This plugin template injects a compiled CSS by @rollup/plugin-replace\r\n        // See rollup.config.js for details\r\n        css: '.tp-induv{position:relative;align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-induv.tp-v-disabled{opacity:.5}.tp-induv .tp-induv_t{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;padding:2px 4px 2px;width:1px}.tp-induv .tp-induv_t>*:first-child{margin-top:0}.tp-induv .tp-induv_t>*:last-child{margin-bottom:0}.tp-induv .tp-induv_t p,.tp-induv .tp-induv_t h1,.tp-induv .tp-induv_t h2,.tp-induv .tp-induv_t h3,.tp-induv .tp-induv_t ol,.tp-induv .tp-induv_t ul,.tp-induv .tp-induv_t blockquote,.tp-induv .tp-induv_t pre{margin:.5em 0}.tp-induv .tp-induv_t a{color:var(--btn-bg)}.tp-induv .tp-induv_t a:active{color:var(--btn-bg-a)}.tp-induv .tp-induv_t a:hover{color:var(--btn-bg-h)}.tp-induv .tp-induv_t h1{font-size:1.3em;font-weight:bold}.tp-induv .tp-induv_t h2{font-size:1em;font-weight:bold}.tp-induv .tp-induv_t h3{font-size:1em;font-weight:normal}.tp-induv .tp-induv_t ol,.tp-induv .tp-induv_t ul,.tp-induv .tp-induv_t blockquote{padding-left:28px}.tp-indubv::before{border:var(--mo-fg) dashed 1px;border-radius:var(--elm-br);bottom:0;content:\"\";left:var(--cnt-v-p);opacity:.3;position:absolute;right:var(--cnt-v-p);top:0}',\r\n        accept(params) {\r\n            // Parse parameters object\r\n            const p = ParamsParsers;\r\n            const r = parseParams(params, {\r\n                border: p.optional.boolean,\r\n                content: p.required.string,\r\n                markdown: p.optional.boolean,\r\n                view: p.required.constant('infodump'),\r\n            });\r\n            return r ? { params: r } : null;\r\n        },\r\n        controller(args) {\r\n            var _a, _b;\r\n            // Create a controller for the plugin\r\n            return new InfodumpController(args.document, {\r\n                border: (_a = args.params.border) !== null && _a !== void 0 ? _a : false,\r\n                content: args.params.content,\r\n                markdown: (_b = args.params.markdown) !== null && _b !== void 0 ? _b : false,\r\n                viewProps: args.viewProps,\r\n            });\r\n        },\r\n        api(args) {\r\n            if (!(args.controller instanceof InfodumpController)) {\r\n                return null;\r\n            }\r\n            return new BladeApi(args.controller);\r\n        },\r\n    };\n\n    // Export your plugin(s) as constant `plugins`\r\n    const plugins = [TweakpaneInfodumpPlugin];\n\n    exports.plugins = plugins;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","export default class ObjectPool<T> {\r\n    private pool: Array<T>;\r\n    private index: number = 0;\r\n    private size: number;\r\n    \r\n    constructor(size: number, from: () => T) {\r\n        this.size = size;\r\n        this.pool = Array.from(new Array(this.size), from);\r\n    }\r\n\r\n    get(): T {\r\n        const ret = this.pool[this.index++];\r\n        this.index = this.index % this.size;\r\n        return ret;\r\n    }\r\n}","import { ButtonApi, Pane } from \"tweakpane\";\r\nimport * as EssentialsPlugin from '@tweakpane/plugin-essentials';\r\nimport * as InfodumpPlugin from 'tweakpane-plugin-infodump';\r\n\r\ninterface IHandlers {\r\n    play: (button: ButtonApi) => void;\r\n    reset: (button: ButtonApi) => void;\r\n}\r\n\r\nexport function createGui(parameters, handlers: IHandlers): [Pane, EssentialsPlugin.FpsGraphBladeApi] {\r\n    const pane = new Pane();\r\n    const simulation = pane.addFolder({\r\n        title: 'simulation'\r\n    })\r\n    const playButton = simulation.addButton({\r\n        title: 'pause'\r\n    });\r\n\r\n    playButton.on('click', () => handlers['play'](playButton));\r\n\r\n    const resetButton = simulation.addButton({\r\n        title: 'reset'\r\n    });\r\n\r\n    resetButton.on('click', () => handlers['reset'](resetButton));\r\n\r\n    simulation.addInput(parameters, 'iterations', {\r\n        min: 0,\r\n        max: 10000,\r\n        step: 1\r\n    });\r\n    simulation.addInput(parameters, 'a', {\r\n        min: 0,\r\n        max: 50\r\n    });\r\n    simulation.addInput(parameters, 'b', {\r\n        min: 0,\r\n        max: 50\r\n    });\r\n    simulation.addInput(parameters, 'c', {\r\n        min: 0,\r\n        max: 50\r\n    });\r\n    simulation.addInput(parameters, 'dt', {\r\n        min: 0,\r\n        max: 0.25\r\n    });\r\n    simulation.addInput(parameters, 'segments', {\r\n        min: 1,\r\n        max: 10,\r\n        step: 1\r\n    });\r\n\r\n    const display = pane.addFolder({\r\n        title: 'display'\r\n    });\r\n\r\n    display.addInput(parameters, 'color', {\r\n        color: {\r\n            type: 'float'\r\n        }\r\n    });\r\n\r\n    display.addInput(parameters, 'background', {\r\n        color: {\r\n            type: 'float'\r\n        }\r\n    });\r\n\r\n    display.addInput(parameters, 'linewidth', {\r\n        min: 0,\r\n        max: 2\r\n    });\r\n\r\n    display.addInput(parameters, 'showFixedPoints');\r\n\r\n    const info = pane.addFolder({\r\n        title: 'info'\r\n    });\r\n\r\n    const functions = {\r\n        'dx': '(a * (y - x))',\r\n        'dy': '(x * (b - z) - y)',\r\n        'dz': '(x * y - c * z)'\r\n    }\r\n\r\n    info.addMonitor(functions, 'dx');\r\n    info.addMonitor(functions, 'dy');\r\n    info.addMonitor(functions, 'dz');\r\n\r\n    // info.addBlade({\r\n    //     view: \"infodump\",\r\n    //     content: \"Major, lark's true pepper. Let birds go further loose maybe. Shout easy play.\",\r\n    //     border: false,\r\n    //     markdown: true,\r\n    // });\r\n\r\n    pane.registerPlugin(EssentialsPlugin);\r\n    pane.registerPlugin(InfodumpPlugin);\r\n\r\n    const fpsGraph = info.addBlade({\r\n        view: 'fpsgraph',\r\n        label: 'fps',\r\n        lineCount: 2,\r\n    }) as EssentialsPlugin.FpsGraphBladeApi;\r\n\r\n    return [pane, fpsGraph];\r\n}"],"names":["$d5b33d7c30034067$export$3545e07a80636437","$d5b33d7c30034067$export$7177b3e430c2d7ca","LEFT","MIDDLE","RIGHT","ROTATE","DOLLY","PAN","$d5b33d7c30034067$export$d46bd3ead7cc759b","DOLLY_PAN","DOLLY_ROTATE","$d5b33d7c30034067$export$3237e1f2c1ea1f44","$d5b33d7c30034067$export$b9a7b4fc5cb15f9b","$d5b33d7c30034067$export$b8058bcc7037d3f3","$d5b33d7c30034067$export$f24be24dcddeac0d","$d5b33d7c30034067$export$346307dbae2b7447","$d5b33d7c30034067$export$5813f879eee7cd88","$d5b33d7c30034067$export$a47c4b43a1be34f0","$d5b33d7c30034067$export$896ae1ade6c829c4","$d5b33d7c30034067$export$2ede184fc2998901","$d5b33d7c30034067$export$d9f0486e75b5ace","$d5b33d7c30034067$export$3b296b6f144d5b03","$d5b33d7c30034067$export$211211c00f97204d","$d5b33d7c30034067$export$63b8d6b580fc65ba","$d5b33d7c30034067$export$5b29a26d96ee6af0","$d5b33d7c30034067$export$777d8f9551c2216b","$d5b33d7c30034067$export$cdfa06f868e2e467","$d5b33d7c30034067$export$4138e1c684b46a20","$d5b33d7c30034067$export$eda4864c68df1fa2","$d5b33d7c30034067$export$20183a0484ce21a0","$d5b33d7c30034067$export$73e0df5177988548","$d5b33d7c30034067$export$28e582859cbec660","$d5b33d7c30034067$export$c8c1508da8d0600c","$d5b33d7c30034067$export$99948c02fb51055f","$d5b33d7c30034067$export$2110f05edf778d3d","$d5b33d7c30034067$export$8805bad65e24940e","$d5b33d7c30034067$export$7fbe15b28d28cf52","$d5b33d7c30034067$export$947829af9f2c17f6","$d5b33d7c30034067$export$d5773124e86cf28c","$d5b33d7c30034067$export$11d468cc7f19e971","$d5b33d7c30034067$export$a78aed1ca2a87192","$d5b33d7c30034067$export$5d0fe17fd8773bac","$d5b33d7c30034067$export$ef5f2dd8ffac5574","$d5b33d7c30034067$export$56b85b2686ab16","$d5b33d7c30034067$export$c05e2a1fc8609506","$d5b33d7c30034067$export$69025ce147cee220","$d5b33d7c30034067$export$7182eb52ea3b3f04","$d5b33d7c30034067$export$eedccec66ab7ebe","$d5b33d7c30034067$export$296f78a0b892f81a","$d5b33d7c30034067$export$a60d398fc7b7590e","$d5b33d7c30034067$export$7d7234c1240a1fc4","$d5b33d7c30034067$export$c5e2c52991f30937","$d5b33d7c30034067$export$2f843afa843d8916","$d5b33d7c30034067$export$e50ac29801f1774d","$d5b33d7c30034067$export$9f9d94f963c85479","$d5b33d7c30034067$export$e641dc52bc3494aa","$d5b33d7c30034067$export$9fcb6b4294603b2","$d5b33d7c30034067$export$98f52c2a46c598ca","$d5b33d7c30034067$export$74b25e54b3bcd548","$d5b33d7c30034067$export$932b3dd283d4a366","$d5b33d7c30034067$export$a0d98fe6d7e4af64","$d5b33d7c30034067$export$2c7b09c1e9abfb5e","$d5b33d7c30034067$export$1beec6768cbb3d2d","$d5b33d7c30034067$export$8759762a6477f2c4","$d5b33d7c30034067$export$dc59f8aed047f61d","$d5b33d7c30034067$export$d64030b316d3b087","$d5b33d7c30034067$export$ee99d97d46898098","$d5b33d7c30034067$export$dbf3e70ff37af79","$d5b33d7c30034067$export$533346c8e8dac0f5","$d5b33d7c30034067$export$9d9334239a5a5e06","$d5b33d7c30034067$export$c7e7c00b14f51a4f","$d5b33d7c30034067$export$727aa5ec3fe39bf0","$d5b33d7c30034067$export$d129e38cf6feaa8c","$d5b33d7c30034067$export$14a4936464a36496","$d5b33d7c30034067$export$d2327c1afe5bfdf2","$d5b33d7c30034067$export$cbc5b7f5647595d8","$d5b33d7c30034067$export$8a72f490b25c56c8","$d5b33d7c30034067$export$19a719f377145a13","$d5b33d7c30034067$export$dbe96bee3fe9dbf0","$d5b33d7c30034067$export$5d8599b6a933fb1b","$d5b33d7c30034067$export$90d80f1e3506775f","$d5b33d7c30034067$export$2e8ce08d3f6f5e10","$d5b33d7c30034067$export$545fce0311a9796a","$d5b33d7c30034067$export$88572337f312435f","$d5b33d7c30034067$export$c63dc51868b06a9d","$d5b33d7c30034067$export$5c612977753abe2","$d5b33d7c30034067$export$c3c7fc4518ebba96","$d5b33d7c30034067$export$f6d331659b644596","$d5b33d7c30034067$export$2697304443f382bc","$d5b33d7c30034067$export$b3969b01faf587f2","$d5b33d7c30034067$export$18886f8ae33e90de","$d5b33d7c30034067$export$6c8ea339bfab1301","$d5b33d7c30034067$export$988473390501ed4b","$d5b33d7c30034067$export$7c67423a5ee6f5eb","$d5b33d7c30034067$export$3f8bb04b555a363c","$d5b33d7c30034067$export$cc09ccbf6d1ed449","$d5b33d7c30034067$export$9053a81c4a69c289","$d5b33d7c30034067$export$c1b6b5136be58045","$d5b33d7c30034067$export$1e113ac2d0905829","$d5b33d7c30034067$export$4e041a7967d15c4b","$d5b33d7c30034067$export$aa92e870a709d190","$d5b33d7c30034067$export$6cdf0b461c7ce8a0","$d5b33d7c30034067$export$1ba1c45f9f77d4d7","$d5b33d7c30034067$export$c200e7d26f592f21","$d5b33d7c30034067$export$21d1799c6d552fc0","$d5b33d7c30034067$export$afa304c3e981b668","$d5b33d7c30034067$export$d2a1a68024a3e56c","$d5b33d7c30034067$export$9a79c424327dacf9","$d5b33d7c30034067$export$19ada9bbb1af3573","$d5b33d7c30034067$export$d0f0355bb3d948e4","$d5b33d7c30034067$export$b82296714358084c","$d5b33d7c30034067$export$b71692456c47b6c3","$d5b33d7c30034067$export$6ab91af2d757aee7","$d5b33d7c30034067$export$7800993ef8106a6a","$d5b33d7c30034067$export$23ed8300a860e7d8","$d5b33d7c30034067$export$dc5570b4a2b92d48","$d5b33d7c30034067$export$68880cd325f8b2fb","$d5b33d7c30034067$export$7d2c0be323373d95","$d5b33d7c30034067$export$22b52da301fc3a3e","$d5b33d7c30034067$export$c009e2cb4a66485e","$d5b33d7c30034067$export$118fff5afa255b63","$d5b33d7c30034067$export$120713c829ae0667","$d5b33d7c30034067$export$c79eeabbf53313e9","$d5b33d7c30034067$export$443cf6567cdd6424","$d5b33d7c30034067$export$6573984fc9840780","$d5b33d7c30034067$export$e7aee563f30091de","$d5b33d7c30034067$export$2eb8634622ddeab7","$d5b33d7c30034067$export$202b1ce7b5d25742","$d5b33d7c30034067$export$18ab77abd087e467","$d5b33d7c30034067$export$ce40b115e188bc81","$d5b33d7c30034067$export$d62fdc9d1b1cccad","$d5b33d7c30034067$export$dfaf4422ce096e29","$d5b33d7c30034067$export$f8f6f2041b78e210","$d5b33d7c30034067$export$995b32462a65e855","$d5b33d7c30034067$export$30fac1aace31cf4d","$d5b33d7c30034067$export$198b11ff4c72bb30","$d5b33d7c30034067$export$7f795934b84ab523","$d5b33d7c30034067$export$24a4ccb5099273b5","$d5b33d7c30034067$export$8e8c3ecdcd8e1fee","$d5b33d7c30034067$export$bcfbbdcf8de7f8cd","$d5b33d7c30034067$export$d875e029ef558d3","$d5b33d7c30034067$export$4c28c87c2dc84758","$d5b33d7c30034067$export$b23a071aa286eb29","$d5b33d7c30034067$export$f0d8293634f88842","$d5b33d7c30034067$export$7207336e4151a112","$d5b33d7c30034067$export$f32388edbb32674","$d5b33d7c30034067$export$deeb383078690b50","$d5b33d7c30034067$export$8f910f4c4f73df11","$d5b33d7c30034067$export$2852a58ebdac27b8","$d5b33d7c30034067$export$9990ad26f9db5b2c","$d5b33d7c30034067$export$bfcb490c2dd3db51","$d5b33d7c30034067$export$561f394b24edfcaa","$d5b33d7c30034067$export$42429b3acfb233a4","$d5b33d7c30034067$export$69433f11f42d5527","$d5b33d7c30034067$export$9f542ae4b5baca34","$d5b33d7c30034067$export$8a4f28336ef203d3","$d5b33d7c30034067$export$2928c0231297c036","$d5b33d7c30034067$export$c0e9611c8a15f9a8","$d5b33d7c30034067$export$9c2c08927385dcc4","$d5b33d7c30034067$export$7c74ea00fa1315e6","$d5b33d7c30034067$export$22e2e5726612443","$d5b33d7c30034067$export$1343870698229224","$d5b33d7c30034067$export$8e1d8ed281997fa6","$d5b33d7c30034067$export$55648a1cde8329a7","$d5b33d7c30034067$export$2dff107857e6aca2","$d5b33d7c30034067$export$6f93765ab2f451a2","$d5b33d7c30034067$export$6f3fb2d2440f2b76","$d5b33d7c30034067$export$4119cf7b4c98fd5a","$d5b33d7c30034067$export$14cf96713ddd97a8","$d5b33d7c30034067$export$763e8360f4d7f77d","$d5b33d7c30034067$export$8505d14ac8546ca","$d5b33d7c30034067$export$721e63549e51d81e","$d5b33d7c30034067$export$415731dc4f48e299","$d5b33d7c30034067$export$9e809946455f13bc","$d5b33d7c30034067$export$2ed9499a35b5f832","$d5b33d7c30034067$export$32ab2503ea19469a","$d5b33d7c30034067$export$ab4022c2c3f86315","$d5b33d7c30034067$export$ba7f1db36a76a970","$d5b33d7c30034067$export$43600cc67fabd9f","$d5b33d7c30034067$export$f63012db5506e7dd","$d5b33d7c30034067$export$ca1dce8b5e1de74d","$d5b33d7c30034067$export$ec8b666c5fe2c75a","addEventListener","type","listener","undefined","this","_listeners","listeners","indexOf","push","hasEventListener","removeEventListener","listenerArray","index","splice","dispatchEvent","event","target","array","slice","i","l","length","call","$d5b33d7c30034067$var$_lut","$d5b33d7c30034067$var$_seed","$d5b33d7c30034067$var$DEG2RAD","Math","PI","$d5b33d7c30034067$var$RAD2DEG","$d5b33d7c30034067$var$generateUUID","d0","random","d1","d2","d3","toLowerCase","$d5b33d7c30034067$var$clamp","value","min","max","$d5b33d7c30034067$var$euclideanModulo","n","m","$d5b33d7c30034067$var$lerp","x","y","t","$d5b33d7c30034067$var$isPowerOfTwo","$d5b33d7c30034067$var$ceilPowerOfTwo","pow","ceil","log","LN2","$d5b33d7c30034067$var$floorPowerOfTwo","floor","$d5b33d7c30034067$var$denormalize","constructor","Float32Array","Uint16Array","Uint8Array","Int16Array","Int8Array","Error","$d5b33d7c30034067$var$normalize","round","$d5b33d7c30034067$export$6a7ef315a0d1ef07","Object","freeze","__proto__","DEG2RAD","RAD2DEG","generateUUID","clamp","euclideanModulo","mapLinear","a1","a2","b1","b2","inverseLerp","lerp","damp","lambda","dt","exp","pingpong","abs","smoothstep","smootherstep","randInt","low","high","randFloat","randFloatSpread","range","seededRandom","s","imul","degToRad","degrees","radToDeg","radians","isPowerOfTwo","ceilPowerOfTwo","floorPowerOfTwo","setQuaternionFromProperEuler","q","a","b","c","order","cos","sin","c2","s2","c13","s13","c1_3","s1_3","c3_1","s3_1","set","console","warn","normalize","denormalize","$d5b33d7c30034067$export$c977b3e384af9ae1","prototype","isVector2","width","height","setScalar","scalar","setX","setY","setComponent","getComponent","clone","copy","v","add","addScalar","addVectors","addScaledVector","sub","subScalar","subVectors","multiply","multiplyScalar","divide","divideScalar","applyMatrix3","e","elements","clampScalar","minVal","maxVal","clampLength","roundToZero","negate","dot","cross","lengthSq","sqrt","manhattanLength","angle","atan2","distanceTo","distanceToSquared","dx","dy","manhattanDistanceTo","setLength","alpha","lerpVectors","v1","v2","equals","fromArray","offset","toArray","fromBufferAttribute","attribute","getX","getY","rotateAround","center","Symbol","iterator","$d5b33d7c30034067$export$8ff26dafa08918","isMatrix3","n11","n12","n13","n21","n22","n23","n31","n32","n33","te","identity","me","extractBasis","xAxis","yAxis","zAxis","setFromMatrix3Column","setFromMatrix4","multiplyMatrices","premultiply","ae","be","a11","a12","a13","a21","a22","a23","a31","a32","a33","b11","b12","b13","b21","b22","b23","b31","b32","b33","determinant","d","f","g","h","invert","t11","t12","t13","det","detInv","transpose","tmp","getNormalMatrix","matrix4","transposeIntoArray","r","setUvTransform","tx","ty","sx","sy","rotation","cx","cy","scale","$d5b33d7c30034067$var$_m3","makeScale","rotate","theta","makeRotation","translate","makeTranslation","matrix","$d5b33d7c30034067$var$arrayNeedsUint32","$d5b33d7c30034067$var$TYPED_ARRAYS","Uint8ClampedArray","Int32Array","Uint32Array","Float64Array","$d5b33d7c30034067$var$getTypedArray","buffer","$d5b33d7c30034067$var$createElementNS","name","document","createElementNS","$d5b33d7c30034067$var$SRGBToLinear","$d5b33d7c30034067$var$LinearToSRGB","$d5b33d7c30034067$var$FN","$d5b33d7c30034067$export$5e6fd513f44698c","legacyMode","workingColorSpace","colorSpace","convert","color","sourceColorSpace","targetColorSpace","fn","fromWorkingColorSpace","toWorkingColorSpace","$d5b33d7c30034067$var$_colorKeywords","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","$d5b33d7c30034067$var$_rgb$1","$d5b33d7c30034067$var$_hslA","$d5b33d7c30034067$var$_hslB","$d5b33d7c30034067$var$hue2rgb","p","$d5b33d7c30034067$var$toComponents","source","$d5b33d7c30034067$export$892596cec99bc70e","isColor","setRGB","setHex","setStyle","hex","colorSpace1","setHSL","style","handleAlpha","string","parseFloat","exec","components","parseInt","size","charAt","setColorName","copySRGBToLinear","copyLinearToSRGB","convertSRGBToLinear","convertLinearToSRGB","getHex","getHexString","toString","getHSL","hue","saturation","lightness","delta","getRGB","getStyle","offsetHSL","addColors","color1","color2","lerpColors","lerpHSL","getZ","toJSON","$d5b33d7c30034067$var$_canvas","NAMES","$d5b33d7c30034067$export$698882cf06df44aa","static","image","test","src","HTMLCanvasElement","canvas","context","getContext","ImageData","putImageData","drawImage","toDataURL","HTMLImageElement","ImageBitmap","imageData","getImageData","data","data1","i1","$d5b33d7c30034067$export$1d2df86270c81ecb","isSource","uuid","version","needsUpdate","meta","isRootObject","images","output","url","Array","isArray","isDataTexture","$d5b33d7c30034067$var$serializeImage","getDataURL","from","$d5b33d7c30034067$var$textureId","$d5b33d7c30034067$export$5431306cf43de24a","DEFAULT_IMAGE","mapping","DEFAULT_MAPPING","wrapS","wrapT","magFilter","minFilter","format","anisotropy","DEFAULT_ANISOTROPY","encoding","super","isTexture","defineProperty","mipmaps","internalFormat","repeat","matrixAutoUpdate","generateMipmaps","premultiplyAlpha","flipY","unpackAlignment","userData","onUpdate","isRenderTargetTexture","needsPMREMUpdate","updateMatrix","JSON","parse","stringify","textures","metadata","generator","wrap","keys","dispose","transformUv","uv","$d5b33d7c30034067$export$fa7daccca11cdbe3","z","w","isVector4","setZ","setW","applyMatrix4","setAxisAngleFromQuaternion","acos","setAxisAngleFromRotationMatrix","epsilon","epsilon2","m11","m12","m13","m21","m22","m23","m31","m32","m33","xx","yy","zz","xy","xz","yz","getW","$d5b33d7c30034067$export$3c052beb2e51e23f","options","isWebGLRenderTarget","depth","scissor","scissorTest","viewport","texture","depthBuffer","stencilBuffer","depthTexture","samples","setSize","assign","$d5b33d7c30034067$export$dfac6c8e811406a3","isDataArrayTexture","wrapR","$d5b33d7c30034067$export$c77a02c11ed180c7","isWebGLArrayRenderTarget","$d5b33d7c30034067$export$d7a3086320f856db","isData3DTexture","$d5b33d7c30034067$export$7ee06591009639df","isWebGL3DRenderTarget","$d5b33d7c30034067$export$bd934554fb721730","count","isWebGLMultipleRenderTargets","il","$d5b33d7c30034067$export$23d6a54f0bbc85a3","isQuaternion","_x","_y","_z","_w","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","dir","sqrSin","Number","EPSILON","len","tDir","_onChangeCallback","quaternion","setFromEuler","euler","update","_order","c1","c3","s1","s3","setFromAxisAngle","axis","halfAngle","setFromRotationMatrix","trace","setFromUnitVectors","vFrom","vTo","angleTo","rotateTowards","step","slerp","conjugate","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","qb","cosHalfTheta","sqrSinHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","slerpQuaternions","qa","u1","sqrt1u1","sqrtu1","u2","u3","_onChange","callback","$d5b33d7c30034067$export$64b5c384219d3699","isVector3","multiplyVectors","applyEuler","applyQuaternion","$d5b33d7c30034067$var$_quaternion$4","applyAxisAngle","applyNormalMatrix","qx","qy","qz","qw","ix","iy","iz","iw","project","camera","matrixWorldInverse","projectionMatrix","unproject","projectionMatrixInverse","matrixWorld","transformDirection","crossVectors","ax","ay","az","bx","by","bz","projectOnVector","denominator","projectOnPlane","planeNormal","$d5b33d7c30034067$var$_vector$c","reflect","normal","dz","setFromSpherical","setFromSphericalCoords","radius","phi","sinPhiRadius","setFromCylindrical","setFromCylindricalCoords","setFromMatrixPosition","setFromMatrixScale","setFromMatrixColumn","sz","randomDirection","u","$d5b33d7c30034067$export$6f7d5a9418ab2aa3","Infinity","isBox3","setFromArray","minX","minY","minZ","maxX","maxY","maxZ","setFromBufferAttribute","setFromPoints","points","makeEmpty","expandByPoint","setFromCenterAndSize","halfSize","$d5b33d7c30034067$var$_vector$b","setFromObject","object","precise","expandByObject","box","isEmpty","getCenter","getSize","point","expandByVector","vector","expandByScalar","updateWorldMatrix","geometry","attributes","position","boundingBox","computeBoundingBox","$d5b33d7c30034067$var$_box$3","union","children","l1","containsPoint","containsBox","getParameter","intersectsBox","intersectsSphere","sphere","clampPoint","intersectsPlane","plane","constant","intersectsTriangle","triangle","$d5b33d7c30034067$var$_center","$d5b33d7c30034067$var$_extents","$d5b33d7c30034067$var$_v0$2","$d5b33d7c30034067$var$_v1$7","$d5b33d7c30034067$var$_v2$4","$d5b33d7c30034067$var$_f0","$d5b33d7c30034067$var$_f1","$d5b33d7c30034067$var$_f2","axes","$d5b33d7c30034067$var$satForAxes","$d5b33d7c30034067$var$_triangleNormal","distanceToPoint","getBoundingSphere","intersect","$d5b33d7c30034067$var$_points","$d5b33d7c30034067$var$_testAxis","v0","extents","j","p0","p1","p2","$d5b33d7c30034067$var$_box$2","$d5b33d7c30034067$var$_v1$6","$d5b33d7c30034067$var$_v2$3","$d5b33d7c30034067$export$805e8b72413ccaba","optionalCenter","maxRadiusSq","radiusSum","deltaLengthSq","getBoundingBox","getMaxScaleOnAxis","$d5b33d7c30034067$var$_vector$a","$d5b33d7c30034067$var$_segCenter","$d5b33d7c30034067$var$_segDir","$d5b33d7c30034067$var$_diff","$d5b33d7c30034067$var$_edge1","$d5b33d7c30034067$var$_edge2","$d5b33d7c30034067$var$_normal$1","$d5b33d7c30034067$export$a186db52eed6d40e","origin","direction","ray","at","lookAt","recast","closestPointToPoint","directionDistance","distanceSqToPoint","distanceSqToSegment","optionalPointOnRay","optionalPointOnSegment","segExtent","a01","b0","s0","sqrDist","extDet","invDet","intersectSphere","tca","radius2","thc","t0","t1","distanceToPlane","intersectPlane","distToPoint","intersectBox","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","isNaN","intersectTriangle","backfaceCulling","sign","DdN","DdQxE2","DdE1xQ","QdN","$d5b33d7c30034067$export$2ae72fc923e5eb5","isMatrix4","n14","n24","n34","n41","n42","n43","n44","copyPosition","setFromMatrix3","makeBasis","extractRotation","scaleX","$d5b33d7c30034067$var$_v1$5","scaleY","scaleZ","makeRotationFromEuler","af","bf","ce","cf","de","df","ce1","cf1","de1","df1","ae1","af1","be1","bf1","ac","ad","bc","bd","ac1","ad1","bc1","bd1","makeRotationFromQuaternion","compose","$d5b33d7c30034067$var$_zero","$d5b33d7c30034067$var$_one","eye","up","$d5b33d7c30034067$var$_z","$d5b33d7c30034067$var$_x","$d5b33d7c30034067$var$_y","a14","a24","a34","a41","a42","a43","a44","b14","b24","b34","b41","b42","b43","b44","setPosition","t14","scaleXSq","scaleYSq","scaleZSq","makeRotationX","makeRotationY","makeRotationZ","makeRotationAxis","makeShear","yx","zx","zy","x2","y2","z2","wx","wy","wz","decompose","$d5b33d7c30034067$var$_m1$2","invSX","invSY","invSZ","makePerspective","left","right","top","bottom","near","far","makeOrthographic","$d5b33d7c30034067$var$_matrix$1","$d5b33d7c30034067$var$_quaternion$3","$d5b33d7c30034067$export$d93cc409a0768c5f","DefaultOrder","isEuler","asin","setFromQuaternion","setFromVector3","reorder","newOrder","toVector3","error","RotationOrders","$d5b33d7c30034067$export$89312ce47c0ca777","mask","channel","enable","enableAll","toggle","disable","disableAll","layers","isEnabled","$d5b33d7c30034067$var$_object3DId","$d5b33d7c30034067$var$_v1$4","$d5b33d7c30034067$var$_q1","$d5b33d7c30034067$var$_m1$1","$d5b33d7c30034067$var$_target","$d5b33d7c30034067$var$_position$3","$d5b33d7c30034067$var$_scale$2","$d5b33d7c30034067$var$_quaternion$2","$d5b33d7c30034067$var$_xAxis","$d5b33d7c30034067$var$_yAxis","$d5b33d7c30034067$var$_zAxis","$d5b33d7c30034067$var$_addedEvent","$d5b33d7c30034067$var$_removedEvent","$d5b33d7c30034067$export$e4dd07dff30cc924","isObject3D","parent","DefaultUp","defineProperties","configurable","enumerable","modelViewMatrix","normalMatrix","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","matrixWorldAutoUpdate","DefaultMatrixWorldAutoUpdate","visible","castShadow","receiveShadow","frustumCulled","renderOrder","animations","onBeforeRender","onAfterRender","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","setRotationFromQuaternion","rotateOnAxis","rotateOnWorldAxis","rotateX","rotateY","rotateZ","translateOnAxis","distance","translateX","translateY","translateZ","localToWorld","worldToLocal","isCamera","isLight","arguments","remove","removeFromParent","clear","attach","getObjectById","id","getObjectByProperty","getObjectByName","getObjectsByProperty","result","childResult","concat","getWorldPosition","getWorldQuaternion","getWorldScale","getWorldDirection","raycast","traverse","traverseVisible","traverseAncestors","updateMatrixWorld","force","child","updateParents","updateChildren","geometries","materials","shapes","skeletons","nodes","serialize","library","element","isInstancedMesh","instanceMatrix","instanceColor","isScene","background","environment","isMesh","isLine","isPoints","parameters","shape","isSkinnedMesh","bindMode","bindMatrix","skeleton","material","uuids","i2","i3","animation","extractFromCache","shapes1","cache","values","key","recursive","$d5b33d7c30034067$var$_v0$1","$d5b33d7c30034067$var$_v1$3","$d5b33d7c30034067$var$_v2$2","$d5b33d7c30034067$var$_v3$1","$d5b33d7c30034067$var$_vab","$d5b33d7c30034067$var$_vac","$d5b33d7c30034067$var$_vbc","$d5b33d7c30034067$var$_vap","$d5b33d7c30034067$var$_vbp","$d5b33d7c30034067$var$_vcp","$d5b33d7c30034067$export$5a465592bfe74b48","targetLengthSq","dot00","dot01","dot02","dot11","dot12","denom","invDenom","getBarycoord","p3","uv1","uv2","uv3","setFromPointsAndIndices","i0","setFromAttributeAndIndices","getArea","getMidpoint","getNormal","getPlane","setFromCoplanarPoints","getUV","isFrontFacing","d4","vc","d5","d6","vb","va","$d5b33d7c30034067$var$materialId","$d5b33d7c30034067$export$a2d8b23205c25948","isMaterial","blending","side","vertexColors","opacity","transparent","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","depthTest","depthWrite","stencilWriteMask","stencilFunc","stencilRef","stencilFuncMask","stencilFail","stencilZFail","stencilZPass","stencilWrite","clippingPlanes","clipIntersection","clipShadows","shadowSide","colorWrite","precision","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","dithering","alphaToCoverage","premultipliedAlpha","toneMapped","_alphaTest","alphaTest","onBuild","onBeforeCompile","customProgramCacheKey","setValues","newValue","currentValue","roughness","metalness","sheen","sheenColor","sheenRoughness","emissive","emissiveIntensity","specular","specularIntensity","specularColor","shininess","clearcoat","clearcoatRoughness","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","clearcoatNormalScale","iridescence","iridescenceIOR","iridescenceThicknessRange","iridescenceMap","iridescenceThicknessMap","map","matcap","alphaMap","lightMap","lightMapIntensity","aoMap","aoMapIntensity","bumpMap","bumpScale","normalMap","normalMapType","normalScale","displacementMap","displacementScale","displacementBias","roughnessMap","metalnessMap","emissiveMap","specularMap","specularIntensityMap","specularColorMap","envMap","combine","envMapIntensity","reflectivity","refractionRatio","gradientMap","transmission","transmissionMap","thickness","thicknessMap","attenuationDistance","attenuationColor","sizeAttenuation","linewidth","dashSize","gapSize","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","flatShading","fog","srcPlanes","dstPlanes","$d5b33d7c30034067$export$55cbcc9b622fe1f5","isMeshBasicMaterial","$d5b33d7c30034067$var$_vector$9","$d5b33d7c30034067$var$_vector2$1","$d5b33d7c30034067$export$8dea267bd6bde117","itemSize","normalized","TypeError","isBufferAttribute","usage","updateRange","onUploadCallback","setUsage","copyAt","index1","index2","copyArray","setXY","setXYZ","setXYZW","onUpload","copyColorsArray","copyVector2sArray","copyVector3sArray","copyVector4sArray","$d5b33d7c30034067$export$f9ff2d6a20248cbf","$d5b33d7c30034067$export$cacc90cf35d11cdd","$d5b33d7c30034067$export$baaa85a1a812c157","$d5b33d7c30034067$export$2b755a102ccdcefe","$d5b33d7c30034067$export$640a853f68025f2e","$d5b33d7c30034067$export$46b369aed2968a0a","$d5b33d7c30034067$export$7eb8c9fa25cd5bd6","$d5b33d7c30034067$export$dbd3698c64958d69","isFloat16BufferAttribute","$d5b33d7c30034067$export$cbe7a62641830ebd","$d5b33d7c30034067$export$9e0ade74842adbb8","$d5b33d7c30034067$var$_id$1","$d5b33d7c30034067$var$_m1","$d5b33d7c30034067$var$_obj","$d5b33d7c30034067$var$_offset","$d5b33d7c30034067$var$_box$1","$d5b33d7c30034067$var$_boxMorphTargets","$d5b33d7c30034067$var$_vector$8","$d5b33d7c30034067$export$b7be63a67df8959","isBufferGeometry","morphAttributes","morphTargetsRelative","groups","boundingSphere","drawRange","start","getIndex","setIndex","getAttribute","setAttribute","deleteAttribute","hasAttribute","addGroup","materialIndex","clearGroups","setDrawRange","tangent","computeBoundingSphere","morphAttributesPosition","isGLBufferAttribute","morphAttribute","il1","il2","morphAttribute1","jl","computeTangents","indices","positions","normals","uvs","nVertices","tangents","tan1","tan2","vA","vB","vC","uvA","uvB","uvC","sdir","tdir","handleTriangle","isFinite","group","tmp2","n2","handleVertex","group1","start1","j1","jl1","computeVertexNormals","positionAttribute","normalAttribute","pA","pB","pC","nA","nB","nC","cb","ab","normalizeNormals","merge","toNonIndexed","convertBufferAttribute","array2","isInterleavedBufferAttribute","stride","geometry2","newAttribute","name1","morphArray","newAttribute1","key1","hasMorphAttributes","key2","attributeArray","attribute1","$d5b33d7c30034067$var$_inverseMatrix$2","$d5b33d7c30034067$var$_ray$2","$d5b33d7c30034067$var$_sphere$3","$d5b33d7c30034067$var$_vA$1","$d5b33d7c30034067$var$_vB$1","$d5b33d7c30034067$var$_vC$1","$d5b33d7c30034067$var$_tempA","$d5b33d7c30034067$var$_morphA","$d5b33d7c30034067$var$_uvA$1","$d5b33d7c30034067$var$_uvB$1","$d5b33d7c30034067$var$_uvC$1","$d5b33d7c30034067$var$_intersectionPoint","$d5b33d7c30034067$var$_intersectionPointWorld","$d5b33d7c30034067$export$e176487c05830cc5","updateMorphTargets","morphTargetInfluences","morphTargetDictionary","ml","String","getVertexPosition","vert","morphPosition","morphInfluences","influence","boneTransform","raycaster","intersects","intersection","groupMaterial","$d5b33d7c30034067$var$checkBufferGeometryIntersection","faceIndex","face","groupMaterial1","il3","$d5b33d7c30034067$var$checkIntersection","$d5b33d7c30034067$export$33e43285f7406bd5","widthSegments","heightSegments","depthSegments","scope","vertices","numberOfVertices","groupStart","buildPlane","udir","vdir","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","groupCount","iy1","ix1","$d5b33d7c30034067$var$cloneUniforms","property","$d5b33d7c30034067$var$mergeUniforms","uniforms","merged","$d5b33d7c30034067$var$getUnlitUniformColorSpace","renderer","getRenderTarget","outputEncoding","$d5b33d7c30034067$export$d8ecdf8615bfea69","$d5b33d7c30034067$export$83c7d75d550a8b0d","isShaderMaterial","defines","uniformsGroups","vertexShader","fragmentShader","lights","clipping","extensions","derivatives","fragDepth","drawBuffers","shaderTextureLOD","defaultAttributeValues","index0AttributeName","uniformsNeedUpdate","glslVersion","$d5b33d7c30034067$var$cloneUniformsGroups","$d5b33d7c30034067$export$79f141de891a5fed","$d5b33d7c30034067$export$74e4ae24825f68d7","fov","aspect","isPerspectiveCamera","zoom","focus","view","filmGauge","filmOffset","updateProjectionMatrix","setFocalLength","focalLength","vExtentSlope","getFilmHeight","atan","getFocalLength","getEffectiveFOV","getFilmWidth","setViewOffset","fullWidth","fullHeight","enabled","offsetX","offsetY","clearViewOffset","skew","$d5b33d7c30034067$var$fov","$d5b33d7c30034067$export$d0cdd0bd804995de","renderTarget","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","scene","currentRenderTarget","currentToneMapping","toneMapping","currentXrEnabled","xr","setRenderTarget","render","$d5b33d7c30034067$export$ee2e5a18258a4049","isCubeTexture","$d5b33d7c30034067$export$ac386671d651941e","isWebGLCubeRenderTarget","fromEquirectangularTexture","shader","tEquirect","mesh","currentMinFilter","stencil","$d5b33d7c30034067$var$_vector1","$d5b33d7c30034067$var$_vector2","$d5b33d7c30034067$var$_normalMatrix","$d5b33d7c30034067$export$7ff5ac152ef991b0","isPlane","setComponents","setFromNormalAndCoplanarPoint","inverseNormalLength","distanceToSphere","projectPoint","intersectLine","line","intersectsLine","startSign","endSign","end","coplanarPoint","optionalNormalMatrix","referencePoint","$d5b33d7c30034067$var$_sphere$2","$d5b33d7c30034067$var$_vector$7","$d5b33d7c30034067$export$35efe6f4c85463d2","p4","p5","planes","frustum","setFromProjectionMatrix","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","intersectsObject","intersectsSprite","sprite","negRadius","$d5b33d7c30034067$var$WebGLAnimation","isAnimating","animationLoop","requestId","onAnimationFrame","time","frame","requestAnimationFrame","stop","cancelAnimationFrame","setAnimationLoop","setContext","$d5b33d7c30034067$var$WebGLAttributes","gl","capabilities","isWebGL2","buffers","WeakMap","get","deleteBuffer","delete","bufferType","cached","bytesPerElement","elementSize","createBuffer","bindBuffer","bufferData","BYTES_PER_ELEMENT","bufferSubData","subarray","updateBuffer","$d5b33d7c30034067$export$967d831af31f69ce","width_half","height_half","segment_width","segment_height","$d5b33d7c30034067$export$955f9f2e84c43c8b","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","alphatest_pars_fragment","aomap_fragment","aomap_pars_fragment","begin_vertex","beginnormal_vertex","bsdfs","iridescence_fragment","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","common","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","encodings_fragment","encodings_pars_fragment","envmap_fragment","envmap_common_pars_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_physical_pars_fragment","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_fragment","lights_lambert_pars_fragment","lights_pars_begin","lights_toon_fragment","lights_toon_pars_fragment","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphcolor_vertex","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_fragment_begin","normal_fragment_maps","normal_pars_fragment","normal_pars_vertex","normal_vertex","normalmap_pars_fragment","clearcoat_normal_fragment_begin","clearcoat_normal_fragment_maps","clearcoat_pars_fragment","iridescence_pars_fragment","output_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","transmission_fragment","transmission_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","worldpos_vertex","background_vert","background_frag","backgroundCube_vert","backgroundCube_frag","cube_vert","cube_frag","depth_vert","depth_frag","distanceRGBA_vert","distanceRGBA_frag","equirect_vert","equirect_frag","linedashed_vert","linedashed_frag","meshbasic_vert","meshbasic_frag","meshlambert_vert","meshlambert_frag","meshmatcap_vert","meshmatcap_frag","meshnormal_vert","meshnormal_frag","meshphong_vert","meshphong_frag","meshphysical_vert","meshphysical_frag","meshtoon_vert","meshtoon_frag","points_vert","points_frag","shadow_vert","shadow_frag","sprite_vert","sprite_frag","$d5b33d7c30034067$export$6643083551874bf5","diffuse","uvTransform","uv2Transform","specularmap","envmap","flipEnvMap","ior","aomap","lightmap","emissivemap","bumpmap","normalmap","displacementmap","roughnessmap","metalnessmap","gradientmap","fogDensity","fogNear","fogFar","fogColor","ambientLightColor","lightProbe","directionalLights","properties","directionalLightShadows","shadowBias","shadowNormalBias","shadowRadius","shadowMapSize","directionalShadowMap","directionalShadowMatrix","spotLights","coneCos","penumbraCos","decay","spotLightShadows","spotLightMap","spotShadowMap","spotLightMatrix","pointLights","pointLightShadows","shadowCameraNear","shadowCameraFar","pointShadowMap","pointShadowMatrix","hemisphereLights","skyColor","groundColor","rectAreaLights","ltc_1","ltc_2","$d5b33d7c30034067$export$bee4a7d47f8f5014","basic","lambert","phong","standard","toon","dashed","totalSize","t2D","backgroundIntensity","backgroundCube","backgroundBlurriness","cube","tCube","tFlip","equirect","distanceRGBA","referencePosition","nearDistance","farDistance","shadow","physical","iridescenceThicknessMinimum","iridescenceThicknessMaximum","sheenColorMap","sheenRoughnessMap","transmissionSamplerSize","transmissionSamplerMap","$d5b33d7c30034067$var$_rgb","$d5b33d7c30034067$var$WebGLBackground","cubemaps","cubeuvmaps","state","objects","clearColor","planeMesh","boxMesh","clearAlpha","currentBackground","currentBackgroundVersion","currentTonemapping","setClear","getClearColor","setClearColor","getClearAlpha","setClearAlpha","renderList","forceClear","session","getSession","environmentBlendMode","autoClear","autoClearColor","autoClearDepth","autoClearStencil","unshift","$d5b33d7c30034067$var$WebGLBindingStates","maxVertexAttributes","extension","vaoAvailable","bindingStates","defaultState","createBindingState","currentState","forceUpdate","bindVertexArrayObject","vao","bindVertexArray","bindVertexArrayOES","deleteVertexArrayObject","deleteVertexArray","deleteVertexArrayOES","newAttributes","enabledAttributes","attributeDivisors","program","initAttributes","enableAttribute","enableAttributeAndDivisor","meshPerAttribute","enableVertexAttribArray","disableUnusedAttributes","disableVertexAttribArray","vertexAttribPointer","vertexAttribIPointer","reset","resetDefaultState","setup","updateBuffers","programMap","stateMap","createVertexArray","createVertexArrayOES","getBindingState","cachedAttributes","geometryAttributes","attributesNum","programAttributes","getAttributes","location","cachedAttribute","geometryAttribute","saveCache","isInstancedBufferGeometry","materialDefaultAttributeValues","programAttribute","isInstancedInterleavedBuffer","locationSize","_maxInstanceCount","isInstancedBufferAttribute","i4","i5","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","setupVertexAttributes","geometryId","programId","releaseStatesOfGeometry","releaseStatesOfProgram","$d5b33d7c30034067$var$WebGLBufferRenderer","info","mode","setMode","drawArrays","renderInstances","primcount","methodName","$d5b33d7c30034067$var$WebGLCapabilities","maxAnisotropy","getMaxPrecision","getShaderPrecisionFormat","WebGL2RenderingContext","WebGL2ComputeRenderingContext","maxPrecision","has","logarithmicDepthBuffer","maxTextures","maxVertexTextures","maxTextureSize","maxCubemapSize","maxAttributes","maxVertexUniforms","maxVaryings","maxFragmentUniforms","vertexTextures","floatFragmentTextures","getMaxAnisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT","floatVertexTextures","maxSamples","$d5b33d7c30034067$var$WebGLClipping","globalState","numGlobalPlanes","localClippingEnabled","renderingShadows","viewNormalMatrix","uniform","resetGlobalState","numPlanes","numIntersection","projectPlanes","skipTransform","nPlanes","dstArray","flatSize","viewMatrix","init","enableLocalClipping","beginShadows","endShadows","setState","useCache","materialProperties","nGlobal","lGlobal","clippingState","$d5b33d7c30034067$var$WebGLCubeMaps","mapTextureMapping","onTextureDispose","cubemap","$d5b33d7c30034067$export$9ebf355ee4ed261b","isOrthographicCamera","scaleW","scaleH","$d5b33d7c30034067$var$EXTRA_LOD_SIGMA","$d5b33d7c30034067$var$MAX_SAMPLES","$d5b33d7c30034067$var$_flatCamera","$d5b33d7c30034067$var$_clearColor","$d5b33d7c30034067$var$_oldTarget","$d5b33d7c30034067$var$PHI","$d5b33d7c30034067$var$INV_PHI","$d5b33d7c30034067$var$_axisDirections","$d5b33d7c30034067$export$6add42717753e221","_renderer","_pingPongRenderTarget","_lodMax","_cubeSize","_lodPlanes","_sizeLods","_sigmas","_blurMaterial","_cubemapMaterial","_equirectMaterial","_compileMaterial","fromScene","sigma","_setSize","cubeUVRenderTarget","_allocateTargets","_sceneToCubeUV","_blur","_applyPMREM","_cleanup","fromEquirectangular","equirectangular","_fromTexture","fromCubemap","compileCubemapShader","$d5b33d7c30034067$var$_getCubemapMaterial","compileEquirectangularShader","$d5b33d7c30034067$var$_getEquirectMaterial","_dispose","cubeSize","log2","outputTarget","$d5b33d7c30034067$var$_setViewport","_textureToCubeUV","params","$d5b33d7c30034067$var$_createRenderTarget","sizeLods","lodPlanes","sigmas","lodMax","lod","totalLods","sizeLod","texelSize","cubeFaces","positionSize","uvSize","faceIndexSize","coordinates","fill","$d5b33d7c30034067$var$_createPlanes","weights","poleAxis","shaderMaterial","CUBEUV_TEXEL_WIDTH","CUBEUV_TEXEL_HEIGHT","CUBEUV_MAX_MIP","latitudinal","dTheta","mipInt","$d5b33d7c30034067$var$_getCommonVertexShader","$d5b33d7c30034067$var$_getBlurShader","tmpMesh","compile","cubeCamera","upSign","forwardSign","originalAutoClear","backgroundMaterial","backgroundBox","useSolidColor","col","lodIn","lodOut","pingPongRenderTarget","_halfBlur","targetIn","targetOut","sigmaRadians","blurMaterial","blurMesh","blurUniforms","pixels","radiansPerPixel","sigmaPixels","sum","weight","outputSize","$d5b33d7c30034067$var$WebGLCubeUVMaps","cubeUVmaps","pmremGenerator","cubemapUV","isEquirectMap","isCubeMap","isCubeTextureComplete","renderTarget1","$d5b33d7c30034067$var$WebGLExtensions","getExtension","$d5b33d7c30034067$var$WebGLGeometries","wireframeAttributes","onGeometryDispose","memory","updateWireframeAttribute","geometryIndex","geometryPosition","array1","previousAttribute","getWireframeAttribute","currentAttribute","$d5b33d7c30034067$var$WebGLIndexedBufferRenderer","drawElements","$d5b33d7c30034067$var$WebGLInfo","calls","triangles","lines","programs","autoReset","instanceCount","$d5b33d7c30034067$var$numericalSort","$d5b33d7c30034067$var$absNumericalSort","$d5b33d7c30034067$var$WebGLMorphtargets","influencesList","morphTextures","morph","workInfluences","objectInfluences","morphTargetsCount","entry","hasMorphPosition","hasMorphNormals","hasMorphColors","morphTargets","morphNormals","morphColors","vertexDataCount","vertexDataStride","morphTarget","morphNormal","morphColor","disposeTexture","morphInfluencesSum","morphBaseInfluence","getUniforms","setValue","influences","sort","MAX_SAFE_INTEGER","morphTargets1","morphNormals1","morphInfluencesSum1","influence1","morphBaseInfluence1","$d5b33d7c30034067$var$WebGLObjects","updateMap","onInstancedMeshDispose","instancedMesh","buffergeometry","$d5b33d7c30034067$var$emptyTexture","$d5b33d7c30034067$var$emptyArrayTexture","$d5b33d7c30034067$var$empty3dTexture","$d5b33d7c30034067$var$emptyCubeTexture","$d5b33d7c30034067$var$arrayCacheF32","$d5b33d7c30034067$var$arrayCacheI32","$d5b33d7c30034067$var$mat4array","$d5b33d7c30034067$var$mat3array","$d5b33d7c30034067$var$mat2array","$d5b33d7c30034067$var$flatten","nBlocks","blockSize","firstElem","$d5b33d7c30034067$var$arraysEqual","$d5b33d7c30034067$var$copyArray","$d5b33d7c30034067$var$allocTexUnits","allocateTextureUnit","$d5b33d7c30034067$var$setValueV1f","uniform1f","addr","$d5b33d7c30034067$var$setValueV2f","uniform2f","uniform2fv","$d5b33d7c30034067$var$setValueV3f","uniform3f","uniform3fv","$d5b33d7c30034067$var$setValueV4f","uniform4f","uniform4fv","$d5b33d7c30034067$var$setValueM2","uniformMatrix2fv","$d5b33d7c30034067$var$setValueM3","uniformMatrix3fv","$d5b33d7c30034067$var$setValueM4","uniformMatrix4fv","$d5b33d7c30034067$var$setValueV1i","uniform1i","$d5b33d7c30034067$var$setValueV2i","uniform2i","uniform2iv","$d5b33d7c30034067$var$setValueV3i","uniform3i","uniform3iv","$d5b33d7c30034067$var$setValueV4i","uniform4i","uniform4iv","$d5b33d7c30034067$var$setValueV1ui","uniform1ui","$d5b33d7c30034067$var$setValueV2ui","uniform2ui","uniform2uiv","$d5b33d7c30034067$var$setValueV3ui","uniform3ui","uniform3uiv","$d5b33d7c30034067$var$setValueV4ui","uniform4ui","uniform4uiv","$d5b33d7c30034067$var$setValueT1","unit","setTexture2D","$d5b33d7c30034067$var$setValueT3D1","setTexture3D","$d5b33d7c30034067$var$setValueT6","setTextureCube","$d5b33d7c30034067$var$setValueT2DArray1","setTexture2DArray","$d5b33d7c30034067$var$setValueV1fArray","uniform1fv","$d5b33d7c30034067$var$setValueV2fArray","$d5b33d7c30034067$var$setValueV3fArray","$d5b33d7c30034067$var$setValueV4fArray","$d5b33d7c30034067$var$setValueM2Array","$d5b33d7c30034067$var$setValueM3Array","$d5b33d7c30034067$var$setValueM4Array","$d5b33d7c30034067$var$setValueV1iArray","uniform1iv","$d5b33d7c30034067$var$setValueV2iArray","$d5b33d7c30034067$var$setValueV3iArray","$d5b33d7c30034067$var$setValueV4iArray","$d5b33d7c30034067$var$setValueV1uiArray","uniform1uiv","$d5b33d7c30034067$var$setValueV2uiArray","$d5b33d7c30034067$var$setValueV3uiArray","$d5b33d7c30034067$var$setValueV4uiArray","$d5b33d7c30034067$var$setValueT1Array","units","$d5b33d7c30034067$var$setValueT3DArray","$d5b33d7c30034067$var$setValueT6Array","$d5b33d7c30034067$var$setValueT2DArrayArray","$d5b33d7c30034067$var$SingleUniform","activeInfo","$d5b33d7c30034067$var$getSingularSetter","$d5b33d7c30034067$var$PureArrayUniform","$d5b33d7c30034067$var$getPureArraySetter","$d5b33d7c30034067$var$StructuredUniform","seq","$d5b33d7c30034067$var$RePathPart","$d5b33d7c30034067$var$addUniform","container","uniformObject","$d5b33d7c30034067$var$parseUniform","path","pathLength","lastIndex","match","matchEnd","idIsIndex","subscript","next","$d5b33d7c30034067$var$WebGLUniforms","getProgramParameter","getActiveUniform","getUniformLocation","setOptional","$d5b33d7c30034067$var$WebGLShader","createShader","shaderSource","compileShader","$d5b33d7c30034067$var$programIdCount","$d5b33d7c30034067$var$getShaderErrors","status","getShaderParameter","errors","getShaderInfoLog","trim","errorMatches","errorLine","toUpperCase","split","lines2","to","join","$d5b33d7c30034067$var$handleSource","getShaderSource","$d5b33d7c30034067$var$getTexelEncodingFunction","functionName","$d5b33d7c30034067$var$getEncodingComponents","$d5b33d7c30034067$var$getToneMappingFunction","toneMappingName","$d5b33d7c30034067$var$filterEmptyLine","$d5b33d7c30034067$var$replaceLightNums","numSpotLightCoords","numSpotLightShadows","numSpotLightMaps","numSpotLightShadowsWithMaps","replace","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","numDirLightShadows","numPointLightShadows","$d5b33d7c30034067$var$replaceClippingPlaneNums","numClippingPlanes","numClipIntersection","$d5b33d7c30034067$var$includePattern","$d5b33d7c30034067$var$resolveIncludes","$d5b33d7c30034067$var$includeReplacer","include","$d5b33d7c30034067$var$unrollLoopPattern","$d5b33d7c30034067$var$unrollLoops","$d5b33d7c30034067$var$loopReplacer","snippet","$d5b33d7c30034067$var$generatePrecision","precisionstring","$d5b33d7c30034067$var$WebGLProgram","cacheKey","shadowMapTypeDefine","shadowMapType","$d5b33d7c30034067$var$generateShadowMapTypeDefine","envMapTypeDefine","envMapMode","$d5b33d7c30034067$var$generateEnvMapTypeDefine","envMapModeDefine","$d5b33d7c30034067$var$generateEnvMapModeDefine","envMapBlendingDefine","$d5b33d7c30034067$var$generateEnvMapBlendingDefine","envMapCubeUVSize","imageHeight","envMapCubeUVHeight","maxMip","texelHeight","$d5b33d7c30034067$var$generateCubeUVSize","customExtensions","extensionDerivatives","tangentSpaceNormalMap","shaderID","extensionFragDepth","rendererExtensionFragDepth","extensionDrawBuffers","rendererExtensionDrawBuffers","extensionShaderTextureLOD","rendererExtensionShaderTextureLod","filter","$d5b33d7c30034067$var$generateExtensions","customDefines","chunks","$d5b33d7c30034067$var$generateDefines","createProgram","prefixVertex","prefixFragment","versionString","isRawShaderMaterial","shaderName","instancing","instancingColor","supportsVertexTextures","useFog","fogExp2","objectSpaceNormalMap","vertexTangents","vertexAlphas","vertexUvs","uvsVertexOnly","skinning","morphTextureStride","doubleSided","flipSided","shadowMapEnabled","texelWidth","decodeVideoTexture","physicallyCorrectLights","opaque","useDepthPacking","depthPacking","fragmentGlsl","glVertexShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","debug","checkShaderErrors","programLog","getProgramInfoLog","vertexLog","fragmentLog","runnable","haveDiagnostics","vertexErrors","fragmentErrors","getError","diagnostics","prefix","cachedUniforms","deleteShader","getActiveAttrib","getAttribLocation","$d5b33d7c30034067$var$fetchAttributeLocations","destroy","deleteProgram","usedTimes","$d5b33d7c30034067$var$_id","$d5b33d7c30034067$var$WebGLShaderCache","shaderCache","Map","materialCache","vertexShaderStage","_getShaderStage","fragmentShaderStage","materialShaders","_getShaderCacheForMaterial","shaderStage","code","getVertexShaderID","getFragmentShaderID","Set","stage","$d5b33d7c30034067$var$WebGLShaderStage","$d5b33d7c30034067$var$WebGLPrograms","_programLayers","_customShaders","shaderIDs","MeshDepthMaterial","MeshDistanceMaterial","MeshNormalMaterial","MeshBasicMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial","MeshStandardMaterial","MeshPhysicalMaterial","MeshMatcapMaterial","LineBasicMaterial","LineDashedMaterial","PointsMaterial","ShadowMaterial","SpriteMaterial","getParameters","shadows","isMeshStandardMaterial","customVertexShaderID","customFragmentShaderID","useAlphaTest","useClearcoat","useIridescence","isXRRenderTarget","isVideoTexture","isFogExp2","directional","spot","rectArea","hemi","shadowMap","getProgramCacheKey","morphAttributeCount","getProgramCacheKeyParameters","getProgramCacheKeyBooleans","acquireProgram","pl","preexistingProgram","releaseProgram","pop","releaseShaderCache","$d5b33d7c30034067$var$WebGLProperties","$d5b33d7c30034067$var$painterSortStable","groupOrder","$d5b33d7c30034067$var$reversePainterSortStable","$d5b33d7c30034067$var$WebGLRenderList","renderItems","renderItemsIndex","transmissive","getNextRenderItem","renderItem","finish","customOpaqueSort","customTransparentSort","$d5b33d7c30034067$var$WebGLRenderLists","lists","renderCallDepth","listArray","list","$d5b33d7c30034067$var$UniformsCache","light","halfWidth","halfHeight","$d5b33d7c30034067$var$nextVersion","$d5b33d7c30034067$var$shadowCastingAndTexturingLightsFirst","lightA","lightB","$d5b33d7c30034067$var$WebGLLights","shadowCache","$d5b33d7c30034067$var$ShadowUniformsCache","hash","directionalLength","pointLength","spotLength","rectAreaLength","hemiLength","numDirectionalShadows","numPointShadows","numSpotShadows","numSpotMaps","ambient","probe","directionalShadow","spotShadow","rectAreaLTC1","rectAreaLTC2","pointShadow","vector3","matrix42","numSpotShadowsWithMaps","scaleFactor","intensity","isAmbientLight","isLightProbe","sh","coefficients","isDirectionalLight","shadowUniforms","bias","normalBias","mapSize","isSpotLight","uniforms1","penumbra","shadow1","updateMatrices","shadowUniforms1","isRectAreaLight","uniforms2","isPointLight","uniforms3","shadow2","shadowUniforms2","isHemisphereLight","uniforms4","LTC_FLOAT_1","LTC_FLOAT_2","LTC_HALF_1","LTC_HALF_2","setupView","$d5b33d7c30034067$var$WebGLRenderState","lightsArray","shadowsArray","setupLights","setupLightsView","pushLight","pushShadow","shadowLight","$d5b33d7c30034067$var$WebGLRenderStates","renderStates","renderStateArray","renderState","$d5b33d7c30034067$export$2698c22ec13825db","isMeshDepthMaterial","$d5b33d7c30034067$export$33e187ed002f2a19","isMeshDistanceMaterial","$d5b33d7c30034067$var$WebGLShadowMap","_objects","_capabilities","_frustum","_shadowMapSize","_viewportSize","_viewport","_depthMaterial","_distanceMaterial","_materialCache","_maxTextureSize","shadowMaterialVertical","VSM_SAMPLES","shadow_pass","resolution","shadowMaterialHorizontal","HORIZONTAL_PASS","fullScreenTri","fullScreenMesh","VSMPass","blurSamples","mapPass","renderBufferDirect","getDepthMaterial","customMaterial","customDistanceMaterial","customDepthMaterial","keyA","keyB","materialsForVariant","cachedMaterial","renderObject","shadowCamera","k","kl","depthMaterial","depthMaterial1","autoUpdate","activeCubeFace","getActiveCubeFace","activeMipmapLevel","getActiveMipmapLevel","_state","setBlending","setTest","setScissorTest","shadowFrameExtents","getFrameExtents","pars","viewportCount","getViewportCount","vp","getViewport","getFrustum","isPointLightShadow","$d5b33d7c30034067$var$WebGLState","colorBuffer","locked","currentColorMask","currentColorClear","setMask","colorMask","setLocked","lock","currentDepthMask","currentDepthFunc","currentDepthClear","depthMask","setFunc","clearDepth","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","stencilMask","setOp","stencilOp","clearStencil","uboBindings","uboProgramMap","enabledCapabilities","currentBoundFramebuffers","currentDrawbuffers","defaultDrawbuffers","currentProgram","currentBlendingEnabled","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentPremultipledAlpha","currentFlipSided","currentCullFace","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","lineWidthAvailable","glVersion","currentTextureSlot","currentBoundTextures","scissorParam","viewportParam","currentScissor","currentViewport","createTexture","bindTexture","texParameteri","texImage2D","emptyTextures","setFlipSided","setCullFace","equationToGL","MIN_EXT","MAX_EXT","factorToGL","blendEquationSeparate","blendFuncSeparate","blendFunc","frontFace","cullFace","setPolygonOffset","factor","bindFramebuffer","framebuffer","drawBuffersWEBGL","useProgram","setMaterial","frontFaceCW","setLineWidth","lineWidth","activeTexture","webglSlot","webglType","webglTexture","boundTexture","unbindTexture","compressedTexImage2D","apply","compressedTexImage3D","texImage3D","updateUBOMapping","uniformsGroup","blockIndex","getUniformBlockIndex","uniformBlockBinding","__bindingPointIndex","texStorage2D","texStorage3D","texSubImage2D","texSubImage3D","compressedTexSubImage2D","compressedTexSubImage3D","$d5b33d7c30034067$var$WebGLTextures","_gl","utils","multisampledRTTExt","supportsInvalidateFramebuffer","navigator","userAgent","_videoTextures","_canvas","_sources","useOffscreenCanvas","OffscreenCanvas","err","createCanvas","resizeImage","needsPowerOfTwo","needsNewCanvas","maxSize","isPowerOfTwo$1","textureNeedsGenerateMipmaps","supportsMips","generateMipmap","getInternalFormat","internalFormatName","glFormat","glType","forceLinearEncoding","getMipLevels","isFramebufferTexture","isCompressedTexture","filterFallback","textureProperties","__webglInit","webglTextures","__cacheKey","deleteTexture","deallocateTexture","onRenderTargetDispose","renderTargetProperties","__webglTexture","deleteFramebuffer","__webglFramebuffer","__webglDepthbuffer","deleteRenderbuffer","__webglMultisampledFramebuffer","__webglColorRenderbuffer","__webglDepthRenderbuffer","attachmentProperties","deallocateRenderTarget","textureUnits","slot","updateVideoTexture","__version","complete","uploadTexture","wrappingToGL","filterToGL","setTextureParameters","textureType","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","initTexture","forceUpload","textureCacheKey","getTextureCacheKey","isCompressedArrayTexture","sourceProperties","pixelStorei","textureNeedsPowerOfTwo","verifyColorSpace","mipmap","glInternalFormat","useTexStorage","allocateMemory","levels","isDepthTexture","setupFrameBufferTexture","attachment","textureTarget","__hasExternalTextures","useMultisampledRTT","framebufferTexture2DMultisampleEXT","getRenderTargetSamples","framebufferTexture2D","setupRenderBufferStorage","renderbuffer","isMultisample","bindRenderbuffer","renderbufferStorageMultisampleEXT","renderbufferStorageMultisample","renderbufferStorage","framebufferRenderbuffer","samples1","glInternalFormat1","samples2","setupDepthRenderbuffer","isCube","__autoAllocateDepthBuffer","webglDepthTexture","setupDepthTexture","createRenderbuffer","__useRenderToTexture","sRGBToLinear","textureUnit","resetTextureUnits","isCompressed","cubeImage","mipmapImage","j2","mipmap2","uploadCubeTexture","rebindTextures","colorTexture","setupRenderTarget","isMultipleRenderTargets","createFramebuffer","textures1","texture1","textures2","attachmentProperties1","glTextureType","updateRenderTargetMipmap","updateMultisampleRenderTarget","invalidationArray","depthStyle","ignoreDepthValues","__ignoreDepthValues","invalidateFramebuffer","blitFramebuffer","webglTexture1","$d5b33d7c30034067$export$ddaebcad857649a8","HALF_FLOAT_OES","SRGB_ALPHA_EXT","COMPRESSED_SRGB_S3TC_DXT1_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","COMPRESSED_SRGB8_ETC2","COMPRESSED_RGB8_ETC2","COMPRESSED_SRGB8_ALPHA8_ETC2_EAC","COMPRESSED_RGBA8_ETC2_EAC","COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR","COMPRESSED_RGBA_ASTC_4x4_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR","COMPRESSED_RGBA_ASTC_5x4_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR","COMPRESSED_RGBA_ASTC_5x5_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR","COMPRESSED_RGBA_ASTC_6x5_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR","COMPRESSED_RGBA_ASTC_6x6_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR","COMPRESSED_RGBA_ASTC_8x5_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR","COMPRESSED_RGBA_ASTC_8x6_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR","COMPRESSED_RGBA_ASTC_8x8_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR","COMPRESSED_RGBA_ASTC_10x5_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR","COMPRESSED_RGBA_ASTC_10x6_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR","COMPRESSED_RGBA_ASTC_10x8_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR","COMPRESSED_RGBA_ASTC_10x10_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR","COMPRESSED_RGBA_ASTC_12x10_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR","COMPRESSED_RGBA_ASTC_12x12_KHR","COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT","COMPRESSED_RGBA_BPTC_UNORM_EXT","UNSIGNED_INT_24_8_WEBGL","$d5b33d7c30034067$export$56b937d9e5581166","isArrayCamera","cameras","$d5b33d7c30034067$export$eb2fcfdbd7ba97d4","isGroup","$d5b33d7c30034067$var$_moveEvent","$d5b33d7c30034067$var$WebXRController","_targetRay","_grip","_hand","getHandSpace","joints","inputState","pinching","getTargetRaySpace","hasLinearVelocity","linearVelocity","hasAngularVelocity","angularVelocity","getGripSpace","connect","inputSource","hand","inputjoint","_getHandJoint","disconnect","referenceSpace","inputPose","gripPose","handPose","targetRay","grip","visibilityState","jointPose","getJointPose","joint","transform","jointRadius","indexTip","thumbTip","distanceToPinch","threshold","handedness","gripSpace","getPose","targetRaySpace","jointName","$d5b33d7c30034067$export$fc830aa069cc8c2f","$d5b33d7c30034067$var$WebXRManager","framebufferScaleFactor","referenceSpaceType","customReferenceSpace","pose","glBinding","glProjLayer","glBaseLayer","xrFrame","getContextAttributes","initialRenderTarget","newRenderTarget","controllers","controllerInputSources","planesLastChangedTimes","cameraL","cameraR","cameraVR","_currentDepthNear","_currentDepthFar","onSessionEvent","controllerIndex","controller","onSessionEnd","onInputSourcesChange","isPresenting","removed","added","inputSource1","cameraAutoUpdate","getController","getControllerGrip","getHand","setFramebufferScaleFactor","setReferenceSpaceType","getReferenceSpace","setReferenceSpace","space","getBaseLayer","getBinding","getFrame","setSession","async","xrCompatible","makeXRCompatible","layerInit","antialias","XRWebGLLayer","updateRenderState","baseLayer","framebufferWidth","framebufferHeight","depthFormat","depthType","glDepthFormat","projectionlayerInit","colorFormat","XRWebGLBinding","createProjectionLayer","textureWidth","textureHeight","setFoveation","requestReferenceSpace","cameraLPos","cameraRPos","updateCamera","depthNear","depthFar","ipd","projL","projR","topFov","bottomFov","leftFov","rightFov","zOffset","xOffset","near2","far2","left2","right2","top2","bottom2","setProjectionFromUnion","getCamera","getFoveation","fixedFoveation","foveation","getPlanes","onAnimationFrameCallback","getViewerPose","views","setRenderTargetFramebuffer","cameraVRNeedsUpdate","glSubImage","getViewSubImage","setRenderTargetTextures","depthStencilTexture","detectedPlanes","planesToRemove","plane1","plane2","lastKnownTime","lastChangedTime","$d5b33d7c30034067$var$WebGLMaterials","refreshUniformsCommon","uvScaleMap","uv2ScaleMap","refreshFogUniforms","isFog","density","refreshMaterialUniforms","pixelRatio","transmissionRenderTarget","isMeshLambertMaterial","isMeshToonMaterial","refreshUniformsToon","isMeshPhongMaterial","refreshUniformsPhong","refreshUniformsStandard","isMeshPhysicalMaterial","refreshUniformsPhysical","isMeshMatcapMaterial","refreshUniformsMatcap","refreshUniformsDistance","isMeshNormalMaterial","isLineBasicMaterial","refreshUniformsLine","isLineDashedMaterial","refreshUniformsDash","isPointsMaterial","refreshUniformsPoints","isSpriteMaterial","refreshUniformsSprites","isShadowMaterial","$d5b33d7c30034067$var$WebGLUniformsGroups","updateList","allocatedBindingPoints","maxBindingPoints","hasUniformChanged","tempValues","cachedObjects","values1","cachedObject","getUniformSize","boundary","storage","onUniformsGroupsDispose","bind","webglProgram","chunkSize","chunkOffset","infos","__data","__offset","__size","__cache","prepareUniformsGroup","bindingPointIndex","allocateBindingPointIndex","bindBufferBase","arrayOffset","updateBufferData","$d5b33d7c30034067$export$f6cc00ef28d7cf97","isWebGLRenderer","display","$d5b33d7c30034067$var$createCanvasElement","_context","_depth","_stencil","_antialias","_premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","_powerPreference","powerPreference","_failIfMajorPerformanceCaveat","failIfMajorPerformanceCaveat","_alpha","currentRenderList","currentRenderState","renderListStack","renderStateStack","domElement","sortObjects","toneMappingExposure","_this","_isContextLost","_currentActiveCubeFace","_currentActiveMipmapLevel","_currentRenderTarget","_currentMaterialId","_currentCamera","_currentViewport","_currentScissor","_currentScissorTest","_width","_height","_pixelRatio","_opaqueSort","_transparentSort","_scissor","_scissorTest","_clippingEnabled","_localClippingEnabled","_transmissionRenderTarget","_projScreenMatrix","_vector2","_vector3","_emptyScene","overrideMaterial","getTargetPixelRatio","programCache","renderLists","morphtargets","bufferRenderer","indexedBufferRenderer","contextNames","contextAttributes","contextName","onContextLost","onContextRestore","onContextCreationError","isWebGL1Renderer","shift","rangeMin","rangeMax","message","initGLContext","preventDefault","infoAutoReset","shadowMapAutoUpdate","shadowMapNeedsUpdate","statusMessage","onMaterialDispose","forEach","releaseMaterialProgramReferences","deallocateMaterial","forceContextLoss","loseContext","forceContextRestore","restoreContext","getPixelRatio","setPixelRatio","updateStyle","setViewport","getDrawingBufferSize","setDrawingBufferSize","getCurrentViewport","getScissor","setScissor","getScissorTest","boolean","setOpaqueSort","method","setTransparentSort","bits","onXRSessionStart","onXRSessionEnd","needsProgramChange","needsLights","lightsStateVersion","getProgram","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","uCamPos","cameraPosition","boneTexture","computeBoneTexture","boneTextureSize","isMeshGouraudMaterial","upload","uniformsList","setProgram","rangeFactor","drawStart","drawEnd","drawCount","isLineSegments","isLineLoop","isSprite","maxInstanceCount","prepare","projectObject","isLOD","geometry1","material1","renderScene","opaqueObjects","transmissiveObjects","transparentObjects","renderObjects","renderTransmissionPass","programCacheKey","updateCommonMaterialProperties","materialNeedsLights","progUniforms","seqWithValue","self","camera2","defaultFramebuffer","__useDefaultFramebuffer","useDefaultFramebuffer","isRenderTarget3D","textureProperties1","layer","framebufferTextureLayer","readRenderTargetPixels","activeCubeFaceIndex","textureFormat","halfFloatSupportedByExt","readPixels","framebuffer1","copyFramebufferToTexture","level","levelScale","copyTexSubImage2D","copyTextureToTexture","srcTexture","dstTexture","copyTextureToTexture3D","sourceBox","glTarget","unpackRowLen","unpackImageHeight","unpackSkipPixels","unpackSkipRows","unpackSkipImages","resetState","__THREE_DEVTOOLS__","CustomEvent","detail","$d5b33d7c30034067$export$a2f65229194348f9","$d5b33d7c30034067$export$6f1519f023b8d0f6","$d5b33d7c30034067$export$3c890837b09508d4","$d5b33d7c30034067$export$38af1803e3442a7f","$d5b33d7c30034067$export$3d5cd879f108f53f","isInterleavedBuffer","arrayBuffers","_uuid","ib","$d5b33d7c30034067$var$_vector$6","$d5b33d7c30034067$export$920b6d07334599c7","interleavedBuffer","interleavedBuffers","$d5b33d7c30034067$export$5ec7dd1c6994bf8e","$d5b33d7c30034067$var$_geometry","$d5b33d7c30034067$var$_intersectPoint","$d5b33d7c30034067$var$_worldScale","$d5b33d7c30034067$var$_mvPosition","$d5b33d7c30034067$var$_alignedPosition","$d5b33d7c30034067$var$_rotatedPosition","$d5b33d7c30034067$var$_viewWorldMatrix","$d5b33d7c30034067$var$_vA","$d5b33d7c30034067$var$_vB","$d5b33d7c30034067$var$_vC","$d5b33d7c30034067$var$_uvA","$d5b33d7c30034067$var$_uvB","$d5b33d7c30034067$var$_uvC","$d5b33d7c30034067$export$3075603db8e6204c","float32Array","$d5b33d7c30034067$var$transformVertex","vertexPosition","mvPosition","$d5b33d7c30034067$var$_v1$2","$d5b33d7c30034067$var$_v2$1","$d5b33d7c30034067$export$112e7237be0c5f30","_currentLevel","addLevel","hysteresis","getCurrentLevel","getObjectForDistance","levelDistance","$d5b33d7c30034067$var$_basePosition","$d5b33d7c30034067$var$_skinIndex","$d5b33d7c30034067$var$_skinWeight","$d5b33d7c30034067$var$_vector$5","$d5b33d7c30034067$var$_matrix","$d5b33d7c30034067$export$b303577035157ecf","bindMatrixInverse","calculateInverses","normalizeSkinWeights","skinWeight","skinIndex","boneIndex","bones","boneInverses","$d5b33d7c30034067$export$b127726e56765aa4","isBone","$d5b33d7c30034067$export$b691f601014eabe1","$d5b33d7c30034067$var$_offsetMatrix","$d5b33d7c30034067$var$_identityMatrix","$d5b33d7c30034067$export$8f31e4c4a37b8e9c","boneMatrices","inverse","bone","bone1","getBoneByName","fromJSON","json","boneInverse","$d5b33d7c30034067$export$32ea87a8b54d744a","$d5b33d7c30034067$var$_instanceLocalMatrix","$d5b33d7c30034067$var$_instanceWorldMatrix","$d5b33d7c30034067$var$_instanceIntersects","$d5b33d7c30034067$var$_identity","$d5b33d7c30034067$var$_mesh","$d5b33d7c30034067$export$f3c979c331175ad7","setMatrixAt","getColorAt","getMatrixAt","raycastTimes","instanceId","setColorAt","$d5b33d7c30034067$export$fbaaa33907730a0c","linecap","linejoin","$d5b33d7c30034067$var$_start$1","$d5b33d7c30034067$var$_end$1","$d5b33d7c30034067$var$_inverseMatrix$1","$d5b33d7c30034067$var$_ray$1","$d5b33d7c30034067$var$_sphere$1","$d5b33d7c30034067$export$17d680238e50603e","computeLineDistances","lineDistances","Line","localThreshold","localThresholdSq","vStart","vEnd","interSegment","interRay","distance1","$d5b33d7c30034067$var$_start","$d5b33d7c30034067$var$_end","$d5b33d7c30034067$export$ff1ed10fedfdd604","$d5b33d7c30034067$export$f85a24d745e4f17d","$d5b33d7c30034067$export$a178c45366ce5d6b","$d5b33d7c30034067$var$_inverseMatrix","$d5b33d7c30034067$var$_ray","$d5b33d7c30034067$var$_sphere","$d5b33d7c30034067$var$_position$2","$d5b33d7c30034067$export$1c787534cb11aa3e","Points","$d5b33d7c30034067$var$testPoint","rayPointDistanceSq","intersectPoint","distanceToRay","$d5b33d7c30034067$export$6e09d1edf8d5a25c","video","requestVideoFrameCallback","updateVideo","readyState","HAVE_CURRENT_DATA","$d5b33d7c30034067$export$9270d786f73ce6fe","$d5b33d7c30034067$export$3466bac9141a5cc4","$d5b33d7c30034067$export$5fe6b8e34b274fcb","$d5b33d7c30034067$export$f7189e49152d1c13","isCanvasTexture","$d5b33d7c30034067$export$b0e83c3ef8d2db1","arcLengthDivisions","getPoint","getPointAt","optionalTarget","getUtoTmapping","getPoints","divisions","getSpacedPoints","getLength","lengths","getLengths","cacheArcLengths","current","last","updateArcLengths","arcLengths","targetArcLength","comparison","lengthBefore","getTangent","t2","pt1","pt2","getTangentAt","computeFrenetFrames","segments","closed","binormals","vec","mat","MAX_VALUE","tz","theta1","$d5b33d7c30034067$export$3f87a931616cde04","aX","aY","xRadius","yRadius","aStartAngle","aEndAngle","aClockwise","aRotation","isEllipseCurve","twoPi","deltaAngle","samePoints","$d5b33d7c30034067$export$b1eedc9aab6300e8","aRadius","isArcCurve","$d5b33d7c30034067$var$CubicPoly","c0","initCatmullRom","x3","tension","initNonuniformCatmullRom","dt0","dt1","dt2","calc","$d5b33d7c30034067$var$tmp","$d5b33d7c30034067$var$px","$d5b33d7c30034067$var$py","$d5b33d7c30034067$var$pz","$d5b33d7c30034067$export$b9146b27c24b744c","curveType","isCatmullRomCurve3","intPoint","$d5b33d7c30034067$var$CatmullRom","$d5b33d7c30034067$var$QuadraticBezier","$d5b33d7c30034067$var$QuadraticBezierP0","$d5b33d7c30034067$var$QuadraticBezierP1","$d5b33d7c30034067$var$QuadraticBezierP2","$d5b33d7c30034067$var$CubicBezier","$d5b33d7c30034067$var$CubicBezierP0","$d5b33d7c30034067$var$CubicBezierP1","$d5b33d7c30034067$var$CubicBezierP2","$d5b33d7c30034067$var$CubicBezierP3","$d5b33d7c30034067$export$e36650d36468bb39","v3","isCubicBezierCurve","$d5b33d7c30034067$export$13d5f1c9525f246c","isCubicBezierCurve3","$d5b33d7c30034067$export$ab2e07e76531a47e","isLineCurve","$d5b33d7c30034067$export$1fdfd9d9cf487600","isLineCurve3","$d5b33d7c30034067$export$5938c4ee491a43ad","isQuadraticBezierCurve","$d5b33d7c30034067$export$bf3f4c7e459f90fc","isQuadraticBezierCurve3","$d5b33d7c30034067$export$d3bdd77da77afc1b","isSplineCurve","$d5b33d7c30034067$var$Curves","ArcCurve","CatmullRomCurve3","CubicBezierCurve","CubicBezierCurve3","EllipseCurve","LineCurve","LineCurve3","QuadraticBezierCurve","QuadraticBezierCurve3","SplineCurve","$d5b33d7c30034067$export$4aaf9b66af1bbf2c","curves","autoClose","curve","closePath","startPoint","endPoint","curveLengths","getCurveLengths","diff","segmentLength","lens","cacheLengths","sums","pts","$d5b33d7c30034067$export$4b2950bdac9b6ee9","currentPoint","moveTo","lineTo","quadraticCurveTo","aCPx","aCPy","bezierCurveTo","aCP1x","aCP1y","aCP2x","aCP2y","splineThru","npts","arc","absarc","absellipse","ellipse","firstPoint","lastPoint","$d5b33d7c30034067$export$6d839803fcd1882c","phiStart","phiLength","initNormals","inverseSegments","vertex","curNormal","prevNormal","base","$d5b33d7c30034067$export$41680e8551036033","capSegments","radialSegments","$d5b33d7c30034067$export$d5c0e8d607467193","thetaStart","thetaLength","segment","$d5b33d7c30034067$export$68f745719dbe5198","radiusTop","radiusBottom","openEnded","indexArray","generateCap","centerIndexStart","centerIndexEnd","cosTheta","sinTheta","slope","indexRow","generateTorso","$d5b33d7c30034067$export$a7a48974f285c9b3","$d5b33d7c30034067$export$60e57a7d3f20ff65","vertexBuffer","uvBuffer","subdivideFace","cols","aj","bj","rows","pushVertex","getVertexByIndex","correctUV","azimuth","subdivide","applyRadius","centroid","azi","correctUVs","correctSeam","generateUVs","details","$d5b33d7c30034067$export$c0babfeb8708fc9c","$d5b33d7c30034067$var$_v0","$d5b33d7c30034067$var$_v1$1","$d5b33d7c30034067$var$_normal","$d5b33d7c30034067$var$_triangle","$d5b33d7c30034067$export$4730b1542707547f","thresholdAngle","precisionPoints","thresholdDot","indexAttr","positionAttr","indexCount","indexArr","vertKeys","hashes","edgeData","jNext","vecHash0","vecHash1","reverseHash","index0","$d5b33d7c30034067$export$6428a7f2611ef1fa","holes","getPointsHoles","holesPts","extractPoints","hole","$d5b33d7c30034067$var$Earcut","holeIndices","dim","hasHoles","outerLen","outerNode","$d5b33d7c30034067$var$linkedList","prev","invSize","queue","steiner","$d5b33d7c30034067$var$getLeftmost","$d5b33d7c30034067$var$compareX","$d5b33d7c30034067$var$eliminateHole","$d5b33d7c30034067$var$eliminateHoles","$d5b33d7c30034067$var$earcutLinked","clockwise","$d5b33d7c30034067$var$signedArea","$d5b33d7c30034067$var$insertNode","$d5b33d7c30034067$var$equals","$d5b33d7c30034067$var$removeNode","$d5b33d7c30034067$var$filterPoints","again","$d5b33d7c30034067$var$area","ear","pass","$d5b33d7c30034067$var$zOrder","prevZ","nextZ","tail","numMerges","pSize","qSize","inSize","$d5b33d7c30034067$var$sortLinked","$d5b33d7c30034067$var$indexCurve","$d5b33d7c30034067$var$isEarHashed","$d5b33d7c30034067$var$isEar","$d5b33d7c30034067$var$cureLocalIntersections","$d5b33d7c30034067$var$splitEarcut","$d5b33d7c30034067$var$pointInTriangle","$d5b33d7c30034067$var$intersects","$d5b33d7c30034067$var$locallyInside","$d5b33d7c30034067$var$isValidDiagonal","$d5b33d7c30034067$var$splitPolygon","bridge","hx","hy","mx","my","tanMin","$d5b33d7c30034067$var$sectorContainsSector","$d5b33d7c30034067$var$findHoleBridge","bridgeReverse","leftmost","px","py","$d5b33d7c30034067$var$intersectsPolygon","inside","$d5b33d7c30034067$var$middleInside","q1","q2","o1","$d5b33d7c30034067$var$sign","o2","o3","o4","$d5b33d7c30034067$var$onSegment","num","$d5b33d7c30034067$var$Node","an","bp","$d5b33d7c30034067$export$96bdf6d9c66d7ba8","contour","area","faces","$d5b33d7c30034067$var$removeDupEndPts","$d5b33d7c30034067$var$addContour","holeIndex","$d5b33d7c30034067$export$598697a1efa63ca7","verticesArray","uvArray","addShape","placeholder","curveSegments","steps","bevelEnabled","bevelThickness","bevelSize","bevelOffset","bevelSegments","extrudePath","uvgen","UVGenerator","$d5b33d7c30034067$var$WorldUVGenerator","extrudePts","splineTube","binormal","position2","extrudeByPath","shapePoints","isClockWise","reverse","hl","ahole","triangulateShape","h1","hl1","ahole1","scalePt2","pt","vlen","flen","getBevelVec","inPt","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","collinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","sf","v_trans_lensq","direction_eq","contourMovements","holesMovements","oneHoleMovements","verticesMovements","h2","hl2","ahole2","k1","bs","h3","hl3","ahole3","vert1","bs1","vert2","vert3","bs2","i6","il4","vert4","h4","hl4","ahole4","i7","il5","vert5","sidewalls","layeroffset","sl","slen1","slen2","f4","f3","addVertex","nextIndex","generateTopUV","addUV","generateSideWallUV","vector2","face1","face2","face3","buildLidFaces","buildSideFaces","$d5b33d7c30034067$var$toJSON$1","geometryShapes","indexA","indexB","indexC","a_x","a_y","b_x","b_y","c_x","c_y","indexD","a_z","b_z","c_z","d_x","d_y","d_z","$d5b33d7c30034067$export$9567cc828c9535da","$d5b33d7c30034067$export$1954e2b809fe361e","$d5b33d7c30034067$export$68cb731f50f614af","innerRadius","outerRadius","thetaSegments","phiSegments","radiusStep","thetaSegmentLevel","segment1","$d5b33d7c30034067$export$57a29a1c803e9065","indexOffset","shapeVertices","shapeHoles","shapeHole","shapeHole1","l2","l3","$d5b33d7c30034067$var$toJSON","$d5b33d7c30034067$export$1b417fc3b307a251","thetaEnd","grid","verticesRow","uOffset","$d5b33d7c30034067$export$fb3f7adc68bd6e02","$d5b33d7c30034067$export$a2312a2a1fa56495","tube","tubularSegments","$d5b33d7c30034067$export$77e9bfadfb9ab8c8","P1","P2","B","T","N","calculatePositionOnCurve","cu","su","quOverP","cs","$d5b33d7c30034067$export$7897d9d48904490c","frames","P","generateSegment","generateIndices","generateBufferData","$d5b33d7c30034067$export$4b739da06d24892b","edges","o","ol","$d5b33d7c30034067$var$isUniqueEdge","position1","index11","index21","hash1","hash2","$d5b33d7c30034067$var$Geometries","BoxGeometry","CapsuleGeometry","CircleGeometry","ConeGeometry","CylinderGeometry","DodecahedronGeometry","EdgesGeometry","ExtrudeGeometry","IcosahedronGeometry","LatheGeometry","OctahedronGeometry","PlaneGeometry","PolyhedronGeometry","RingGeometry","ShapeGeometry","SphereGeometry","TetrahedronGeometry","TorusGeometry","TorusKnotGeometry","TubeGeometry","WireframeGeometry","$d5b33d7c30034067$export$e8564da406055a3","$d5b33d7c30034067$export$21c421a2e1df9d22","$d5b33d7c30034067$export$f2980790215acccd","STANDARD","$d5b33d7c30034067$export$28d04986c4269c9f","PHYSICAL","_sheen","_clearcoat","_iridescence","_transmission","$d5b33d7c30034067$export$24c72f71cbaf0678","$d5b33d7c30034067$export$df893cf97e765622","TOON","$d5b33d7c30034067$export$bfe8c0a091f41ae7","$d5b33d7c30034067$export$5023a9a8114806b8","$d5b33d7c30034067$export$6f5fef6235ec12ee","MATCAP","$d5b33d7c30034067$export$327886a3efaeaebe","$d5b33d7c30034067$var$arraySlice","$d5b33d7c30034067$var$isTypedArray","$d5b33d7c30034067$var$convertArray","forceClone","ArrayBuffer","isView","DataView","$d5b33d7c30034067$var$getKeyframeOrder","times","$d5b33d7c30034067$var$sortedArray","nValues","srcOffset","$d5b33d7c30034067$var$flattenJSON","jsonKeys","valuePropertyName","$d5b33d7c30034067$export$7ee8caa573e71ad1","arraySlice","convertArray","isTypedArray","getKeyframeOrder","sortedArray","flattenJSON","subclip","sourceClip","startFrame","endFrame","fps","clip","tracks","track","valueSize","getValueSize","minStartTime","resetDuration","makeClipAdditive","targetClip","referenceFrame","referenceClip","numTracks","referenceTime","referenceTrack","referenceTrackType","ValueTypeName","targetTrack","find","referenceOffset","referenceValueSize","createInterpolant","isInterpolantFactoryMethodGLTFCubicSpline","targetOffset","targetValueSize","referenceValue","startIndex","endIndex","startIndex1","endIndex1","interpolant","startIndex2","endIndex2","evaluate","resultBuffer","numTimes","valueStart","multiplyQuaternionsFlat","valueEnd","blendMode","$d5b33d7c30034067$export$b558baee9c0f72d3","parameterPositions","sampleValues","sampleSize","_cachedIndex","settings","DefaultSettings_","pp","validate_interval","seek","linear_scan","forward_scan","giveUpAt","copySampleValue_","t1global","giveUpAt1","mid","intervalChanged_","interpolate_","getSettings_","$d5b33d7c30034067$export$3646682e7a3959","_weightPrev","_offsetPrev","_weightNext","_offsetNext","endingStart","endingEnd","iPrev","iNext","tPrev","tNext","halfDt","o0","oP","oN","wP","wN","ppp","sP","sN","$d5b33d7c30034067$export$a8e6009059f51e1a","offset1","offset0","weight1","weight0","$d5b33d7c30034067$export$fb9758ef7ef8d5cc","$d5b33d7c30034067$export$b0e479f45b7006d6","interpolation","TimeBufferType","ValueBufferType","setInterpolation","DefaultInterpolation","trackType","getInterpolation","InterpolantFactoryMethodDiscrete","InterpolantFactoryMethodLinear","InterpolantFactoryMethodSmooth","factoryMethod","timeOffset","timeScale","startTime","endTime","nKeys","validate","valid","prevTime","currTime","optimize","smoothInterpolation","writeIndex","keep","offsetP","offsetN","readOffset","writeOffset","readOffset1","writeOffset1","TypedKeyframeTrack","$d5b33d7c30034067$export$d3a344b98cf0b775","$d5b33d7c30034067$export$83444c5d885347d8","$d5b33d7c30034067$export$d45f0d1a4d9a9314","$d5b33d7c30034067$export$2db1cfb7923d931e","slerpFlat","$d5b33d7c30034067$export$b8043f12b5aafbd7","$d5b33d7c30034067$export$6ce41d4f3a8df9cd","$d5b33d7c30034067$export$5ce2dcb4cc9f2bff","$d5b33d7c30034067$export$d942c706bf23829c","duration","jsonTracks","frameTime","$d5b33d7c30034067$var$parseKeyframeTrack","clipTracks","morphTargetSequence","noLoop","numMorphTargets","objectOrClipArray","clipArray","animationToMorphTargets","pattern","parts","animationMorphTargets","clips","CreateFromMorphTargetSequence","addNonemptyTrack","trackName","animationKeys","propertyName","destTracks","clipName","hierarchyTracks","hierarchy","morphTargetNames","morphTargetName","m1","animationKey","boneName","typeName","$d5b33d7c30034067$var$getTrackTypeForValueTypeName","$d5b33d7c30034067$export$94affb487e701bf2","files","file","$d5b33d7c30034067$export$99cc795e99919eed","onLoad","onProgress","onError","urlModifier","isLoading","itemsLoaded","itemsTotal","handlers","onStart","itemStart","itemEnd","itemError","resolveURL","setURLModifier","addHandler","regex","loader","removeHandler","getHandler","global","$d5b33d7c30034067$export$b033c3f9a95c6a16","$d5b33d7c30034067$export$3b0d6d7590275603","manager","crossOrigin","withCredentials","resourcePath","requestHeader","load","loadAsync","Promise","resolve","reject","setCrossOrigin","setWithCredentials","setPath","setResourcePath","setRequestHeader","$d5b33d7c30034067$var$loading","$d5b33d7c30034067$var$HttpError","response","$d5b33d7c30034067$export$98435a25b5cf7b2b","setTimeout","req","Request","headers","Headers","credentials","mimeType","responseType","fetch","then","ReadableStream","body","getReader","callbacks","reader","contentLength","total","lengthComputable","loaded","stream","readData","read","done","close","byteLength","ProgressEvent","enqueue","Response","statusText","arrayBuffer","blob","text","DOMParser","parseFromString","label","decoder","TextDecoder","decode","catch","finally","setResponseType","setMimeType","$d5b33d7c30034067$export$29711c7e14f61db","$d5b33d7c30034067$export$bd73ce947a280350","loadTexture","texDatas","mipmapCount","isCubemap","$d5b33d7c30034067$export$8905ce1c7a2464a1","onImageLoad","removeEventListeners","onImageError","$d5b33d7c30034067$export$2ec114afc2cf6308","urls","$d5b33d7c30034067$export$792d8a18f2c55855","texData","$d5b33d7c30034067$export$fd1bfc71f64c538c","$d5b33d7c30034067$export$6ecadb6ed240d696","$d5b33d7c30034067$export$8d474f55edbb9624","$d5b33d7c30034067$var$_projScreenMatrix$1","$d5b33d7c30034067$var$_lightPositionWorld$1","$d5b33d7c30034067$var$_lookTarget$1","$d5b33d7c30034067$var$LightShadow","_frameExtents","_viewportCount","_viewports","shadowMatrix","viewportIndex","$d5b33d7c30034067$var$SpotLightShadow","isSpotLightShadow","$d5b33d7c30034067$export$81495cbb73897362","power","$d5b33d7c30034067$var$_projScreenMatrix","$d5b33d7c30034067$var$_lightPositionWorld","$d5b33d7c30034067$var$_lookTarget","$d5b33d7c30034067$var$PointLightShadow","_cubeDirections","_cubeUps","$d5b33d7c30034067$export$4c9c1cb3f0b6f455","$d5b33d7c30034067$var$DirectionalLightShadow","isDirectionalLightShadow","$d5b33d7c30034067$export$3fea33cc9972c868","$d5b33d7c30034067$export$af279bfef9ec2c96","$d5b33d7c30034067$export$61db2d908bbd2429","$d5b33d7c30034067$export$ba61ce607e1f405a","isSphericalHarmonics3","zero","getAt","coeff","getIrradianceAt","addScaledSH","shBasis","$d5b33d7c30034067$export$e7ef036e309b38d2","$d5b33d7c30034067$export$3bd6d323353dcf96","getTexture","createMaterialFromType","setTextures","$d5b33d7c30034067$export$b5d2dc08d867e41a","fromCharCode","decodeURIComponent","escape","lastIndexOf","$d5b33d7c30034067$export$231f009cbe414146","$d5b33d7c30034067$export$dc275bb96327833a","interleavedBufferMap","arrayBufferMap","getInterleavedBuffer","getArrayBuffer","typedArray","bufferAttribute","typedArray1","bufferAttribute1","interleavedBuffer1","typedArray2","drawcalls","offsets","$d5b33d7c30034067$export$40110c8505c5ad19","extractUrlBase","parseAsync","parseAnimations","parseShapes","parseGeometries","parseImages","parseTextures","parseMaterials","parseObject","parseSkeletons","bindSkeletons","hasImages","parseImagesAsync","bufferGeometryLoader","deserializeImage","loadImage","imageArray","deserializedImage","deserializedImage1","currentUrl","parseConstant","$d5b33d7c30034067$var$TEXTURE_MAPPING","$d5b33d7c30034067$var$TEXTURE_WRAPPING","$d5b33d7c30034067$var$TEXTURE_FILTER","getGeometry","getMaterial","isInteger","objectAnimations","UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","CubeUVReflectionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipmapNearestFilter","NearestMipmapLinearFilter","LinearFilter","LinearMipmapNearestFilter","LinearMipmapLinearFilter","$d5b33d7c30034067$export$52286b55c4a9b51f","isImageBitmapLoader","createImageBitmap","setOptions","fetchOptions","res","colorSpaceConversion","imageBitmap","$d5b33d7c30034067$var$_context","$d5b33d7c30034067$export$fcbc63750ec2a81f","window","AudioContext","webkitAudioContext","$d5b33d7c30034067$export$d8d5fccfbf47714e","bufferCopy","decodeAudioData","audioBuffer","$d5b33d7c30034067$export$2f22dadc8bc42820","isHemisphereLightProbe","sky","ground","$d5b33d7c30034067$export$afe310a21c86023d","isAmbientLightProbe","$d5b33d7c30034067$var$_eyeRight","$d5b33d7c30034067$var$_eyeLeft","$d5b33d7c30034067$var$_projectionMatrix","$d5b33d7c30034067$export$bc7f73a1065bee0c","eyeSep","_cache","eyeSepHalf","eyeSepOnProjection","ymax","xmin","xmax","$d5b33d7c30034067$export$9735c82c4bae3302","autoStart","oldTime","elapsedTime","running","$d5b33d7c30034067$var$now","getElapsedTime","getDelta","newTime","performance","Date","now","$d5b33d7c30034067$var$_position$1","$d5b33d7c30034067$var$_quaternion$1","$d5b33d7c30034067$var$_scale$1","$d5b33d7c30034067$var$_orientation$1","$d5b33d7c30034067$export$8a1b810c6fde8951","gain","createGain","destination","timeDelta","_clock","getInput","removeFilter","getFilter","setFilter","getMasterVolume","setMasterVolume","setTargetAtTime","currentTime","positionX","linearRampToValueAtTime","positionY","positionZ","forwardX","forwardY","forwardZ","upX","upY","upZ","setOrientation","$d5b33d7c30034067$export$153755f98d9861de","autoplay","detune","loop","loopStart","loopEnd","playbackRate","isPlaying","hasPlaybackControl","sourceType","_startedAt","_progress","_connected","filters","getOutput","setNodeSource","audioNode","setMediaElementSource","mediaElement","createMediaElementSource","setMediaStreamSource","mediaStream","createMediaStreamSource","setBuffer","play","delay","createBufferSource","onended","onEnded","setDetune","setPlaybackRate","pause","getFilters","setFilters","getDetune","getPlaybackRate","getLoop","setLoop","setLoopStart","setLoopEnd","getVolume","setVolume","$d5b33d7c30034067$var$_position","$d5b33d7c30034067$var$_quaternion","$d5b33d7c30034067$var$_scale","$d5b33d7c30034067$var$_orientation","$d5b33d7c30034067$export$4b3e397ef1832507","panner","createPanner","panningModel","getRefDistance","refDistance","setRefDistance","getRolloffFactor","rolloffFactor","setRolloffFactor","getDistanceModel","distanceModel","setDistanceModel","getMaxDistance","maxDistance","setMaxDistance","setDirectionalCone","coneInnerAngle","coneOuterAngle","coneOuterGain","orientationX","orientationY","orientationZ","$d5b33d7c30034067$export$d47da1ef3d382827","audio","fftSize","analyser","createAnalyser","frequencyBinCount","getFrequencyData","getByteFrequencyData","getAverageFrequency","$d5b33d7c30034067$export$dfe0af1ca1acb78a","binding","mixFunction","mixFunctionAdditive","setIdentity","_slerp","_slerpAdditive","_setAdditiveIdentityQuaternion","_workIndex","_select","_setAdditiveIdentityOther","_lerp","_lerpAdditive","_setAdditiveIdentityNumeric","_mixBufferRegion","_mixBufferRegionAdditive","_setIdentity","_origIndex","_addIndex","cumulativeWeight","cumulativeWeightAdditive","useCount","referenceCount","accumulate","accuIndex","currentWeight","mix","accumulateAdditive","weightAdditive","originalValueOffset","saveOriginalState","getValue","restoreOriginalState","targetIndex","workOffset","$d5b33d7c30034067$var$_RESERVED_CHARS_RE","$d5b33d7c30034067$var$_reservedRe","RegExp","$d5b33d7c30034067$var$_wordChar","$d5b33d7c30034067$var$_wordCharOrDot","$d5b33d7c30034067$var$_trackRe","$d5b33d7c30034067$var$_supportedObjectNames","$d5b33d7c30034067$export$7bf70fcf9f891893","rootNode","parsedPath","parseTrackName","node","findNode","nodeName","_getValue_unbound","_setValue_unbound","root","isAnimationObjectGroup","Composite","matches","results","objectName","objectIndex","propertyIndex","lastDot","substring","searchNodeSubtree","childNode","subTreeNode","_getValue_unavailable","_setValue_unavailable","_getValue_direct","targetObject","_getValue_array","resolvedProperty","_getValue_arrayElement","_getValue_toArray","_setValue_direct","_setValue_direct_setNeedsUpdate","_setValue_direct_setMatrixWorldNeedsUpdate","_setValue_array","dest","_setValue_array_setNeedsUpdate","_setValue_array_setMatrixWorldNeedsUpdate","_setValue_arrayElement","_setValue_arrayElement_setNeedsUpdate","_setValue_arrayElement_setMatrixWorldNeedsUpdate","_setValue_fromArray","_setValue_fromArray_setNeedsUpdate","_setValue_fromArray_setMatrixWorldNeedsUpdate","targetArray","sourceArray","nodeProperty","versioning","Versioning","None","NeedsUpdate","MatrixWorldNeedsUpdate","bindingType","BindingType","Direct","ArrayElement","HasFromToArray","EntireArray","GetterByBindingType","SetterByBindingTypeAndVersioning","unbind","targetGroup","optionalParsedPath","_targetGroup","_bindings","subscribe_","firstValidIndex","nCachedObjects_","bindings","$d5b33d7c30034067$export$30619c2afd3f34db","_indicesByUUID","_paths","_parsedPaths","_bindingsIndicesByPath","stats","inUse","bindingsPerObject","indicesByUUID","paths","parsedPaths","nBindings","knownObject","nObjects","nCachedObjects","firstActiveIndex","lastCachedObject","bindingsForPath","lastCached","lastCachedIndex","firstActiveObject","firstActive","uncache","lastObject","lastIndex1","lastObject1","bindingsForPath1","indicesByPath","unsubscribe_","lastBindingsIndex","lastBindings","$d5b33d7c30034067$var$AnimationAction","mixer","localRoot","_mixer","_clip","_localRoot","nTracks","interpolants","interpolantSettings","_interpolantSettings","_interpolants","_propertyBindings","_cacheIndex","_byClipCacheIndex","_timeScaleInterpolant","_weightInterpolant","_loopCount","_startTime","_effectiveTimeScale","_effectiveWeight","repetitions","paused","clampWhenFinished","zeroSlopeAtStart","zeroSlopeAtEnd","_activateAction","_deactivateAction","stopFading","stopWarping","isRunning","_isActiveAction","isScheduled","startAt","setEffectiveWeight","getEffectiveWeight","fadeIn","_scheduleFading","fadeOut","crossFadeFrom","fadeOutAction","warp","fadeInDuration","fadeOutDuration","startEndRatio","endStartRatio","crossFadeTo","fadeInAction","weightInterpolant","_takeBackControlInterpolant","setEffectiveTimeScale","getEffectiveTimeScale","setDuration","syncWith","action","halt","startTimeScale","endTimeScale","_lendControlInterpolant","timeScaleInterpolant","getMixer","getClip","getRoot","_root","_update","deltaTime","timeDirection","_updateWeight","timeRunning","_updateTimeScale","clipTime","_updateTime","propertyMixers","interpolantValue","loopCount","pingPong","_setEndings","handle_stop","loopDelta","pending","atStart","atEnd","weightNow","weightThen","$d5b33d7c30034067$var$_controlInterpolantsResultBuffer","$d5b33d7c30034067$export$fbd77e5aefaa0102","_initMemoryManager","_accuIndex","_bindAction","prototypeAction","rootUuid","bindingsByRoot","_bindingsByRootAndName","bindingsByName","_addInactiveBinding","create","clipUuid","actionsForClip","_actionsByClip","knownActions","_addInactiveAction","_lendBinding","_lendAction","_takeBackBinding","_takeBackAction","_actions","_nActiveActions","_nActiveBindings","_controlInterpolants","_nActiveControlInterpolants","actions","controlInterpolants","actionsByClip","actionByRoot","_removeInactiveAction","lastInactiveAction","cacheIndex","knownActionsForClip","lastKnownAction","byClipCacheIndex","_removeInactiveBindingsForAction","_removeInactiveBinding","prevIndex","lastActiveIndex","firstInactiveAction","firstInactiveIndex","lastActiveAction","bindingByName","propBinding","lastInactiveBinding","firstInactiveBinding","lastActiveBinding","__cacheIndex","lastActiveInterpolant","clipAction","optionalRoot","clipObject","findByName","existingAction","newAction","stopAllAction","nActions","setTime","timeInSeconds","uncacheClip","actionsToRemove","uncacheRoot","uncacheAction","$d5b33d7c30034067$export$2947cebfe91c02f8","$d5b33d7c30034067$var$id","$d5b33d7c30034067$export$c412d5ffe1f79209","isUniformsGroup","setName","uniformsSource","$d5b33d7c30034067$export$25ec0e1af1389358","$d5b33d7c30034067$export$6b7339ae8dbddf73","setType","setItemSize","setCount","$d5b33d7c30034067$export$8b7aaceff00bd2f","Mesh","LOD","Sprite","setFromCamera","coords","intersectObject","$d5b33d7c30034067$var$intersectObject","$d5b33d7c30034067$var$ascSort","intersectObjects","$d5b33d7c30034067$export$d712cd887b4a00f7","other","makeSafe","EPS","setFromCartesianCoords","$d5b33d7c30034067$export$287165bb2177f4fd","$d5b33d7c30034067$var$_vector$4","$d5b33d7c30034067$export$60f553fa130f08b0","isBox2","$d5b33d7c30034067$var$_startP","$d5b33d7c30034067$var$_startEnd","$d5b33d7c30034067$export$e0ba6359f1954fd3","distanceSq","closestPointToPointParameter","clampToLine","startEnd2","$d5b33d7c30034067$var$_vector$3","$d5b33d7c30034067$export$4b14638ffdd81e68","cone","coneLength","coneWidth","$d5b33d7c30034067$var$_vector$2","$d5b33d7c30034067$var$_boneMatrix","$d5b33d7c30034067$var$_matrixWorldInv","$d5b33d7c30034067$export$5277df3c9e732259","$d5b33d7c30034067$var$getBoneList","colors","isSkeletonHelper","boneList","$d5b33d7c30034067$export$9a9291685b9e4023","sphereSize","$d5b33d7c30034067$var$_vector$1","$d5b33d7c30034067$var$_color1","$d5b33d7c30034067$var$_color2","$d5b33d7c30034067$export$8dca15f13f4f8172","$d5b33d7c30034067$export$3875d39926561055","$d5b33d7c30034067$export$361430a10f533cd3","sectors","rings","color3","$d5b33d7c30034067$var$_v1","$d5b33d7c30034067$var$_v2","$d5b33d7c30034067$var$_v3","$d5b33d7c30034067$export$f8e434dc14203e7d","lightPlane","targetLine","$d5b33d7c30034067$var$_vector","$d5b33d7c30034067$var$_camera","$d5b33d7c30034067$export$ed8e93f853cd795","pointMap","addLine","addPoint","colorFrustum","colorCone","colorUp","colorTarget","colorCross","setColors","colorAttribute","$d5b33d7c30034067$var$setPoint","$d5b33d7c30034067$var$_box","$d5b33d7c30034067$export$38a664cc862a6a9d","$d5b33d7c30034067$export$ce39f4bb96c9a290","$d5b33d7c30034067$export$a34fe8156c66e5d7","$d5b33d7c30034067$var$_axis","$d5b33d7c30034067$var$_lineGeometry","$d5b33d7c30034067$var$_coneGeometry","$d5b33d7c30034067$export$a3008e7bd8d2cbe7","headLength","headWidth","setDirection","setColor","$d5b33d7c30034067$export$6c8303f35b8578fd","xAxisColor","yAxisColor","zAxisColor","$d5b33d7c30034067$export$148534a3c727230b","subPaths","currentPath","toShapes","isCCW","isPointInsidePolygon","inPolygon","polyLen","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","solid","tmpPath","tmpShape","holesFirst","betterShapeHoles","newShapes","tmpPoints","tmpHoles","newShapeHoles","mainIdx","inSubpaths","toShapesNoHoles","ambiguous","toChange","sIdx","sLen","sIdx1","sLen1","sho","hIdx","ho","hole_unassigned","s2Idx","$d5b33d7c30034067$var$_tables","$d5b33d7c30034067$var$_generateTables","floatView","uint32View","baseTable","shiftTable","mantissaTable","exponentTable","offsetTable","e1","$d5b33d7c30034067$export$11ce8b759162cc80","toHalfFloat","val","fromHalfFloat","$d5b33d7c30034067$export$960665a8431ecff6","$d5b33d7c30034067$export$cb2022643d3c928d","$d5b33d7c30034067$export$e38bf4541665bbbd","$d5b33d7c30034067$export$ef03cdc98340bab4","$d5b33d7c30034067$export$ab3456a079aa7d80","$d5b33d7c30034067$export$f036d76f832848a","$d5b33d7c30034067$export$3f74fe60decf7462","$d5b33d7c30034067$export$59d971120dc8b6e7","$d5b33d7c30034067$export$d4345c83207d7c68","$d5b33d7c30034067$export$37cd4e52cce48c4c","$d5b33d7c30034067$export$91836d01b9f75a58","$d5b33d7c30034067$export$731fd4feef063ea2","$d5b33d7c30034067$export$dc3e1273c1dd9240","$d5b33d7c30034067$export$8e05fc91596f4752","$d5b33d7c30034067$export$e789a11a194ca4e0","$d5b33d7c30034067$export$38789b531813345c","$d5b33d7c30034067$export$ee8b85b34b7d9cad","$d5b33d7c30034067$export$233afc324766bed8","$d5b33d7c30034067$export$d5d06a966fec4192","$d5b33d7c30034067$export$369e08f62a796c65","$d5b33d7c30034067$export$19d55f905fa4f2cb","$d5b33d7c30034067$export$2b32466f4274fe5c","$d5b33d7c30034067$export$d97a193ce44e691b","revision","__THREE__","THREE","parcelRequire","MeshLine","BufferGeometry","isMeshLine","previous","indices_array","counters","_points","_geom","widthCallback","Matrix4","geom","setGeometry","setPoints","MeshLineRaycast","inverseMatrix","Ray","Sphere","Vector3","LineSegments","widths","precisionSq","memcpy","setMatrixWorld","_geometry","wcb","process","compareV3","aa","copyV3","_attributes","BufferAttribute","advance","ShaderChunk","ShaderMaterial","UniformsLib","useMap","useAlphaMap","Color","Vector2","dashArray","dashOffset","dashRatio","useDash","visibility","meshline_vert","meshline_frag","isMeshLineMaterial","module","exports","MeshLineMaterial","$ilwiq","$443c013b983d0324$var$_changeEvent","$443c013b983d0324$var$_startEvent","$443c013b983d0324$var$_endEvent","$443c013b983d0324$export$8ff7788029dfdf52","EventDispatcher","touchAction","minDistance","minZoom","maxZoom","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","UP","BOTTOM","mouseButtons","MOUSE","touches","ONE","TOUCH","TWO","target0","position0","zoom0","_domElementKeyEvents","getPolarAngle","spherical","getAzimuthalAngle","getDistance","listenToKeyEvents","onKeyDown","saveState","STATE","NONE","quat","Quaternion","quatInverse","lastPosition","lastQuaternion","twoPI","rotateLeft","sphericalDelta","panOffset","zoomChanged","onContextMenu","onPointerDown","onPointerCancel","onMouseWheel","onPointerMove","onPointerUp","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","Spherical","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","pointers","pointerPositions","getZoomScale","rotateUp","panLeft","objectMatrix","panUp","pan","deltaX","deltaY","targetDistance","clientHeight","clientWidth","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","clientX","clientY","handleMouseDownPan","handleTouchStartRotate","pageX","pageY","handleTouchStartPan","handleTouchStartDolly","handleTouchMoveRotate","getSecondPointerPosition","handleTouchMovePan","handleTouchMoveDolly","setPointerCapture","pointerId","addPointer","pointerType","trackPointer","onTouchStart","mouseAction","button","handleMouseDownDolly","ctrlKey","metaKey","shiftKey","onMouseDown","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","onTouchMove","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","onMouseMove","removePointer","releasePointerCapture","handleMouseWheel","handleKeyDown","pointer","passive","exports1","Semver","core","prerelease","coreComps","major","minor","patch","BladeApi","controller_","disabled","viewProps","hidden","TpEvent","TpChangeEvent","presetKey","TpUpdateEvent","TpFoldEvent","expanded","TpTabSelectEvent","forceCast","deepEqualsArray","isPropertyWritable","obj","getOwnPropertyDescriptor","writable","getPrototypeOf","CREATE_MESSAGE_MAP","alreadydisposed","invalidparams","nomatchingcontroller","nomatchingview","notbindable","propertynotfound","shouldneverhappen","TpError","config","_a","stack","BindingTarget","opt_id","obj_","key_","presetKey_","write","writeProperty","valueObj","isBindable","notBindable","propertyNotFound","ButtonApi","props","title","valueController","on","eventName","handler","bh","emitter","Emitter","observers_","observers","off","observer","emit","PREFIX","ClassName","viewName","opt_elementName","opt_modifier","input","extractValue","ev","rawValue","bindValue","applyValue","bindValueMap","valueMap","applyClass","elem","className","active","classList","valueToClassName","bindValueToTextContent","textContent","className$q","ButtonView","doc","createElement","bindClassModifiers","buttonElem","bindDisabled","appendChild","buttonElement","titleElem","ButtonController","onClick_","sender","BoundValue","initialValue","constraint_","constraint","equals_","rawValue_","setRawValue","forceEmit","opts","constrainedValue","constrain","prevValue","previousRawValue","PrimitiveValue","value_","createValue","ValueMap","valMap_","reduce","createCore","keyToParserMap","parser","succeeded","parseArray","parseItem","item","isObject","createParamsParserBuilder","optional","createParamsParserBuilders","custom","number","function","raw","itemParser","ParamsParsers","required","parseParams","warnMissing","place","disposeElement","parentElement","removeChild","ReadonlyValue","className$p","valueToModifier","modifier","ViewProps","onDisabledChange_","onParentChange_","onParentGlobalDisabledChange_","globalDisabled_","setGlobalDisabled_","getGlobalDisabled_","globalDisabled","opt_initialValue","_b","_c","disposed","bindTabIndex","tabIndex","handleDispose","updateGlobalDisabled_","prevParent","getAllBladePositions","className$o","POS_TO_CLASS_NAME_MAP","veryfirst","first","verylast","BladeController","parent_","blade","pos","SVG_NS","forceReflow","offsetHeight","disableTransitionTemporarily","transition","supportsTouch","ontouchstart","getGlobalObject","globalThis","getWindowDocument","getCanvasContext","canvasElement","win","ownerDocument","defaultView","willReadFrequently","ICON_ID_TO_INNER_HTML_MAP","check","dropdown","p2dpad","createSvgIconElement","iconId","innerHTML","insertElementAt","insertBefore","removeElement","removeChildElements","removeChildNodes","childNodes","findNextTarget","relatedTarget","explicitOriginalTarget","className$n","createLabelNode","frag","createDocumentFragment","createTextNode","lineNode","LabelView","labelElem","labelElement","valueElem","valueElement","LabelController","ButtonBladePlugin","accept","args","fromObject","api","ValueBladeController","createBlade","Foldable","coreObj","completed","expandedHeight","shouldFixHeight","temporaryExpanded","styleExpanded","styleHeight","exHeight","bindExpandedClass","expandedClassName","onExpand","cleanUpTransition","computeExpandedFolderHeight","folder","containerElement","applyHeight","foldable","bindFoldable","RackLikeApi","rackApi","rackApi_","addButtonAsBlade","addBlade","addFolderAsBlade","addSeparatorAsBlade","opt_params","addTabAsBlade","NestedOrderedSet","extract","items_","cache_","onSubListAdd_","onSubListRemove_","extract_","items","allItems","includes","opt_index","shouldNeverHappen","subList","InputBindingApi","onBindingChange_","emitter_","refresh","InputBindingController","MonitorBindingApi","onBindingUpdate_","MonitorBindingController","ticker","findSubBladeApiSet","RackApi","getApiByController","apiSet","createBindingTarget","pool","onRackAdd_","onRackRemove_","onRackInputChange_","onRackMonitorUpdate_","apiSet_","pool_","rack","setUpApi_","addInput","createInput","addMonitor","createMonitor","addFolder","addButton","addSeparator","addTab","gapi","createBladeApi","bladeController","isRoot","api1","FolderApi","rackController","RackLikeController","PlainView","findInputBindingController","bcs","findMonitorBindingController","findValueBladeController","findSubRack","RackController","findSubBladeControllerSet","BladeRack","onBladePositionsChange_","onSetAdd_","onSetRemove_","onChildDispose_","onChildPositionsChange_","onChildInputChange_","onChildMonitorUpdate_","onChildValueChange_","onChildViewPropsChange_","onDescendantLayout_","onDescendantInputChange_","onDescendantMonitorUpdate_","blade_","bcSet_","controllerClass","updatePositions_","visibleItems","firstVisibleItem","lastVisibleItem","ps","_ev","alreadyDisposed","_","bladeContainerClassName","FolderView","className_","foldable_","indentElem","titleElement","markElem","containerElem","FolderController","rc","onTitleClick_","FolderBladePlugin","LabeledValueController","SeparatorApi","className$m","SeparatorView","hrElem","SeparatorController","SeparatorBladePlugin","className$l","TabItemView","selected","TabItemController","TabPageController","onItemClick_","ic_","itemProps","cc_","itemController","contentController","TabPageApi","contentRackApi","TabApi","onPageAdd_","onPageRemove_","onSelect_","pageApiMap_","tab","selectedIndex","pageSet","pc","setUpPageApi_","pages","addPage","removePage","INDEX_NOT_SELECTED","Tab","onItemSelectedChange_","empty","keepSelection_","firstSelIndex","findIndex","className$k","TabView","itemsElement","contentsElem","contentsElement","TabController","cr","pageSet_","TabBladePlugin","createBladeController","plugin","ManualTicker","tick","IntervalTicker","interval","disabled_","timerId_","onTick_","doc_","interval_","setTimer_","inactive","clearTimer_","clearInterval","setInterval","CompositeConstraint","constraints","findConstraint","constraintClass","tmpResult","sc","DefiniteRangeConstraint","ListConstraint","RangeConstraint","maxValue","minValue","StepConstraint","className$j","ListView","onValueChange_","props_","selectElem","optionElem","dataset","selectElement","update_","ListController","onSelectChange_","optElem","currentTarget","selectedOptions","itemIndex","className$i","PopupView","shows","PopupController","className$h","TextView","onChange_","inputElem","inputElement","formatter","TextController","onInputChange_","parser_","parsedValue","boolToString","boolFromUnknown","BooleanFormatter","NumberLiteralNode","BINARY_OPERATION_MAP","BinaryOperationNode","operator","op","UNARY_OPERATION_MAP","UnaryOperationNode","expr","expression","combineReader","parsers","cursor","readWhitespace","substr","readNonZeroDigit","ch","readDecimalDigits","readSignedInteger","ds","sds","readExponentPart","si","readDecimalIntegerLiteral","nzd","readDecimalLiteral1","dil","dds","readDecimalLiteral2","readDecimalLiteral3","readDecimalLiteral","parseBinaryDigits","readBinaryIntegerLiteral","bds","readOctalDigits","readOctalIntegerLiteral","ods","readHexDigits","readHexIntegerLiteral","hds","readNonDecimalIntegerLiteral","readNumericLiteral","parseLiteral","evaluable","parseParenthesizedExpression","parseExpression","cl","parsePrimaryExpression","parseUnaryExpression","readBinaryOperator","ops","startsWith","createBinaryOperationExpressionParser","exprParser","firstExpr","nextExpr","parseBinaryOperationExpression","parseEcmaNumberExpression","parseNumber","numberFromUnknown","pv","numberToString","createNumberFormatter","digits","toFixed","innerFormatter","formatPercentage","stringFromUnknown","formatString","fillBuffer","bufferSize","initializeBuffer","createTrimmedBuffer","createPushedBuffer","newBuffer","connectValues","primary","secondary","forward","backward","changing","preventFeedback","getStepForKey","baseStep","altKey","upKey","downKey","getVerticalStepKeys","getHorizontalStepKeys","isVerticalArrowKey","isArrowKey","computeOffset$1","rect","getBoundingClientRect","scrollX","scrollY","PointerHandler","lastTouch_","onDocumentMouseMove_","onDocumentMouseUp_","onMouseDown_","onTouchEnd_","onTouchMove_","onTouchStart_","elem_","computePosition_","bounds","touch","targetTouches","mapRange","end1","start2","end2","getDecimalDigits","constrainRange","loopRange","className$g","NumberTextView","arrayPosition","onDraggingChange_","dragging_","dragging","knobElem","knobElement","guideElem","bodyElem","guideBodyElem_","headElem","guideHeadElem_","tooltipElem","tooltipElem_","aox","adx","setAttributeNS","NumberTextController","originRawValue_","onInputKeyDown_","onInputKeyUp_","onPointerDown_","onPointerMove_","onPointerUp_","baseStep_","sliderProps_","sliderProps","ph","constrainValue_","computeDraggingValue_","className$f","SliderView","trackElem","trackElement","SliderController","onKeyDown_","onKeyUp_","onPointerDownOrMove_","ptHandler_","handlePointerEvent_","className$e","SliderTextView","sliderElem","sliderView_","sliderView","textElem","textView_","textView","SliderTextController","sliderC_","textC_","textProps","sliderController","textController","writePrimitive","parseListOptions","parsePickerLayout","parsePointDimensionParams","normalizeListOptions","createListConstraint","findStep","getSuitableDecimalDigits","getBaseStep","getSuitableDraggingScale","log10","className$d","CheckboxView","wrapperElem","checked","CheckboxController","createConstraint$6","lc","BooleanInputPlugin","_args","writer","className$c","ColorView","swatchElem","swatchElement","textElement","pickerLayout","pickerElem","pickerElement","rgbToHslInt","rp","gp","cmax","cmin","hslToRgbInt","hp","sp","lp","rgbToHsvInt","hsvToRgbInt","hslToHsvInt","sd","hsvToHslInt","removeAlphaComponent","comps","appendAlphaComponent","MODE_CONVERTER_MAP","hsl","hsv","rgb","getColorMaxComponents","loopHueRange","constrainColorComponents","ms","convertColorType","fms","tms","convertColor","intComps","isRgbColorComponent","comps_","toRgbaObject","isRgbColorObject","comps1","comps2","getComponents","opt_mode","rgbComps","className$b","ColorPickerView","alphaViews_","hsvElem","svElem","svPaletteView_","svPaletteView","hElem","hPaletteView_","hPaletteView","rgbElem","alphaViews","palette","aElem","apElem","atElem","allFocusableElements","elems","modeSelectElement","textViews","parseColorType","parseColorInputParams","picker","getBaseStepForColor","forAlpha","extractColorType","equalsStringColorFormat","f1","f2","notation","parseCssNumberOrPercentage","ANGLE_TO_DEG_MAP","deg","grad","rad","turn","parseCssNumberOrAngle","parseFunctionalRgbColorComponents","createFunctionalRgbColorParser","parseFunctionalRgbaColorComponents","createFunctionalRgbaColorParser","parseHslColorComponents","createHslColorParser","parseHslaColorComponents","createHslaColorParser","parseHexRgbColorComponents","mRgb","mRrggbb","parseHexRgbColor","parseHexRgbaColorComponents","parseHexRgbaColor","parseObjectRgbColorComponents","createObjectRgbColorParser","parseObjectRgbaColorComponents","createObjectRgbaColorParser","PARSER_AND_RESULT","detectStringColor","detection","detectStringColorFormat","TYPE_TO_PARSERS","int","float","createColorStringBindingReader","createColorStringParser","zerofill","comp","colorToHexRgbString","colorToHexRgbaString","rgbaComps","colorToFunctionalRgbString","opt_type","createFunctionalRgbColorFormatter","colorToFunctionalRgbaString","aFormatter","rgbFormatter","createFunctionalRgbaColorFormatter","colorToFunctionalHslString","formatters","colorToFunctionalHslaString","colorToObjectRgbString","names","createObjectRgbColorFormatter","colorToObjectRgbaString","createObjectRgbaColorFormatter","FORMAT_AND_STRINGIFIERS","stringifier","findColorStringifier","fas","className$a","APaletteView","barElem","colorElem","colorElem_","markerElem","markerElem_","previewElem","previewElem_","leftColor","rightColor","gradientComps","backgroundColor","APaletteController","className$9","createModeSelectElement","ColorTextView","modeElem","modeElem_","modeMarkerElem","textsElem","textsElem_","textViews_","applyTextViews_","colorMode","compElem","createFormatter$2","createConstraint$5","createComponentController","draggingScale","colorType","ColorTextController","onModeSelectChange_","colorType_","ccs_","createComponentControllers_","cc","ccs","pickedMode","className$8","HPaletteView","HPaletteController","className$7","CANVAS_RESOL","SvPaletteView","canvasElem","ctx","hsvComps","imgData","SvPaletteController","dv","ColorPickerController","hPaletteC_","svPaletteC_","alphaIcs_","supportsAlpha","className$6","ColorSwatchView","swatchElem_","ColorSwatchController","ColorController","onButtonBlur_","onButtonClick_","onPopupChildBlur_","onPopupChildKeydown_","swatchC_","popC_","pickerC","pickerC_","nextTarget","contains","colorFromObject","isColorObject","colorToRgbNumber","colorToRgbaNumber","numberToRgbColor","numberToRgbaColor","colorFromRgbNumber","colorFromRgbaNumber","createColorStringWriter","createColorNumberWriter","colorToNumber","writeRgbaColorObject","writeRgbColorObject","createColorObjectWriter","inValue","shouldSupportAlpha$1","inputParams","createFormatter$1","isForColor","NumberColorInputPlugin","shouldSupportAlpha","isRgbaColorObject","createColorObjectReader","createColorObjectFormatter","ObjectColorInputPlugin","StringColorInputPlugin","PointNdConstraint","asm_","assembly","toComponents","fromComponents","className$5","PointNdTextView","axisElem","createAxisController","PointNdTextController","acs_","createStepConstraint","createRangeConstraint","findNumberRange","drc","createConstraint$4","NumberInputPlugin","Point2d","toObject","Point2dAssembly","className$4","Point2dView","className$3","Point2dPickerView","onFoldableChange_","invertsY_","invertsY","maxValue_","layout","padElem","padElement","svgElem","svgElem_","xAxisElem","yAxisElem","lineElem","lineElem_","ipy","computeOffset","baseSteps","Point2dPickerController","onPadKeyDown_","onPadKeyUp_","baseSteps_","Point2dController","onPadButtonBlur_","onPadButtonClick_","padC","Point3d","Point3dAssembly","point3dFromUnknown","writePoint3d","createConstraint$3","createDimensionConstraint","createAxis$2","Point3dInputPlugin","Point4d","Point4dAssembly","point4dFromUnknown","writePoint4d","createConstraint$2","createAxis$1","Point4dInputPlugin","createConstraint$1","StringInputPlugin","Constants","monitor","defaultInterval","defaultLineCount","className$2","MultiLogView","onValueUpdate_","formatter_","textareaElem","lineCount","readOnly","textareaElem_","shouldScroll","scrollTop","scrollHeight","MultiLogController","className$1","SingleLogView","lastValue","SingleLogController","BooleanMonitorPlugin","GraphLogView","onCursorChange_","cursor_","graphElement","maxIndex","GraphLogController","onGraphMouseMove_","onGraphMouseLeave_","onGraphPointerDown_","onGraphPointerMove_","onGraphPointerUp_","createFormatter","createTextMonitor","createGraphMonitor","shouldShowGraph","NumberMonitorPlugin","defaultBufferSize","StringMonitorPlugin","multiline","InputBinding","targetValue","write_","createInputBindingController","valueArgs","MonitorBinding","reader_","createTicker","createMonitorBindingController","bindingArgs","PluginPool","pluginsMap_","blades","inputs","monitors","getAll","register","createDefaultPluginPool","Point2dInputPlugin","point2dFromUnknown","writePoint2d","rs","createConstraint","getSuitableMaxDimensionValue","getSuitableMaxValue","xc","yc","yr","createAxis","shouldInvertY","yParams","inverted","ListApi","SliderApi","TextApi","ListBladePlugin","ic","exportPresetJson","targets","importPresetJson","preset","RootApi","importPreset","ibc","exportPreset","mbc","RootController","SliderBladePlugin","TextBladePlugin","createDefaultWrapperElement","embedStyle","css","querySelector","styleElem","tpStyle","head","Pane","opt_config","containerElem_","usesDefaultWrapper_","setUpDefaultPlugins_","parentElem","registerPlugin","bundle","plugins","embedPluginStyle_","VERSION","factory","$c398a0ea03e027b6$exports","compose$1","createFoldable","ButtonCellApi","TpButtonGridEvent","cell","ButtonGridApi","cellToApiMap_","gc","cellControllers","ButtonGridController","cellConfig","cellCs_","gridTemplateColumns","ButtonGridBladePlugin","cells","CubicBezierApi","interpolate","MAX_ITERATION","X_DELTA","CACHE_RESOLUTION","CubicBezier","x01","y01","x12","y12","x23","y23","xr0","yr0","xr1","yr1","CubicBezierAssembly","cubicBezierToString","COMPS_EMPTY","cubicBezierFromString","CubicBezierView","iconElem","CubicBezierPickerView","graphElem","waitToBeAddedToDom","ob","MutationObserver","addedNodes","observe","childList","subtree","CubicBezierGraphView","previewElement","guideElem_","handleElems_","vectorElems_","sel_","selection","getVertMargin_","valueToPosition","vm","positionToValue","bezier","vElem","TICK_COUNT","PREVIEW_DELAY","PREVIEW_DURATION","CubicBezierPreviewView","stopped_","startTime_","onDispose_","onTimer_","ticksElem","ticksElem_","updateMarker_","getTime","progress","lockAngle","la","CubicBezierGraphController","prevView_","stopImmediatePropagation","ptHandler","updateValue_","locksAngle","xStep","yStep","CubicBezierPickerController","gc_","tc_","CubicBezierController","CubicBezierBladePlugin","FpsGraphBladeApi","begin","MAX_TIMESTAMPS","Fpswatch","start_","duration_","fps_","frameCount_","timestamps_","calculateFps_","nowTime","ts","frameCount","compactTimestamps_","FpsView","unitElement","FpsGraphController","stopwatch_","ticker_","graphC_","FpsGraphBladePlugin","_d","Interval","IntervalAssembly","IntervalConstraint","edge","_e","_f","_g","_h","RangeSliderTextView","RangeSliderView","onSliderPropsChange_","barElement","knobElems","knobElements","valueToX_","xs","RangeSliderController","grabbing_","grabOffset_","ofs_","valueFromData_","pmin","pmax","applyPointToValue_","rmin","rmax","RangeSliderTextController","sc_","intervalFromUnknown","writeInterval","IntervalInputPlugin","exValue","midValue","RadioCellApi","TpRadioGridChangeEvent","RadioGridApi","findCellByValue","capi","RadioView","RadioController","RadioGridController","cellValues_","onCellInputChange_","groupName","RadioGridBladePlugin","createRadioGridInputPlugin","isType","RadioGruidNumberInputPlugin","RadioGruidStringInputPlugin","RadioGruidBooleanInputPlugin","$2bd07cd386bdcc4b$exports","charCodeAt","classNameBorder","InfodumpView","border","contentElem","markdown","content","InfodumpController","$168ca11daed0c5e1$exports","$b4e14b6b8da86996$var$buffer","$b4e14b6b8da86996$var$vectorPool","ret","$b4e14b6b8da86996$var$scene","Scene","Fog","$b4e14b6b8da86996$var$camera","PerspectiveCamera","innerWidth","innerHeight","$b4e14b6b8da86996$var$renderer","WebGLRenderer","$b4e14b6b8da86996$var$controls","$b4e14b6b8da86996$var$render","$b4e14b6b8da86996$var$parameters","playing","iterations","showFixedPoints","$1ucKx","$b4e14b6b8da86996$var$geometry","$b4e14b6b8da86996$var$sphere","$b4e14b6b8da86996$var$sphere2","$b4e14b6b8da86996$var$center","$b4e14b6b8da86996$var$pane","$b4e14b6b8da86996$var$fpsGraph","pane","simulation","playButton","resetButton","functions","$b4e14b6b8da86996$var$x","$b4e14b6b8da86996$var$y","$b4e14b6b8da86996$var$z","$b4e14b6b8da86996$var$material","$b4e14b6b8da86996$var$line","$b4e14b6b8da86996$var$mesh","$b4e14b6b8da86996$var$animate"],"version":3,"file":"index.809f3f04.js.map"}